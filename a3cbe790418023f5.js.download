;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f1b93b36-225e-389c-cebd-ce343dc52953")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,395795,(e,t,i)=>{let r;var n,s,o=e.i(439725),a=e.r(772929),c=e.r(883735),l=e.r(619314),h=e.r(940193),u=e.r(879617),d=e.r(559542),f=e.r(316330),v=e.r(561584),_=e.r(365738);n=self,s=function(){return function(){"use strict";var e,t,i,r,n={903:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var r=i(274),n=i(627),s=i(237),o=i(860),h=i(374),u=i(296),f=i(345),v=i(859),_=i(399),g=i(855);t.BaseRenderLayer=function(e){function t(e,i,n,s,o,l,h,d,_,g){var C;return c._(this,t),(C=a._(this,t))._terminal=e,C._container=i,C._alpha=o,C._themeService=l,C._bufferService=h,C._optionsService=d,C._decorationService=_,C._coreBrowserService=g,C._deviceCharWidth=0,C._deviceCharHeight=0,C._deviceCellWidth=0,C._deviceCellHeight=0,C._deviceCharLeft=0,C._deviceCharTop=0,C._selectionModel=(0,u.createSelectionRenderModel)(),C._bitmapGenerator=[],C._charAtlasDisposable=C.register(new v.MutableDisposable),C._onAddTextureAtlasCanvas=C.register(new f.EventEmitter),C.onAddTextureAtlasCanvas=C._onAddTextureAtlasCanvas.event,C._cellColorResolver=new r.CellColorResolver(C._terminal,C._optionsService,C._selectionModel,C._decorationService,C._coreBrowserService,C._themeService),C._canvas=C._coreBrowserService.mainDocument.createElement("canvas"),C._canvas.classList.add("xterm-".concat(n,"-layer")),C._canvas.style.zIndex=s.toString(),C._initCanvas(),C._container.appendChild(C._canvas),C._refreshCharAtlas(C._themeService.colors),C.register(C._themeService.onChangeColors(function(e){C._refreshCharAtlas(e),C.reset(),C.handleSelectionChanged(C._selectionModel.selectionStart,C._selectionModel.selectionEnd,C._selectionModel.columnSelectMode)})),C.register((0,v.toDisposable)(function(){C._canvas.remove()})),C}return d._(t,e),l._(t,[{key:"canvas",get:function(){return this._canvas}},{key:"cacheCanvas",get:function(){var e;return null==(e=this._charAtlas)?void 0:e.pages[0].canvas}},{key:"_initCanvas",value:function(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}},{key:"handleBlur",value:function(){}},{key:"handleFocus",value:function(){}},{key:"handleCursorMove",value:function(){}},{key:"handleGridChanged",value:function(e,t){}},{key:"handleSelectionChanged",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._selectionModel.update(this._terminal._core,e,t,i)}},{key:"_setTransparency",value:function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}}},{key:"_refreshCharAtlas",value:function(e){if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){this._charAtlas=(0,n.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,e,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable.value=(0,f.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(var t=0;t<this._charAtlas.pages.length;t++)this._bitmapGenerator[t]=new C(this._charAtlas.pages[t].canvas)}}},{key:"resize",value:function(e){this._deviceCellWidth=e.device.cell.width,this._deviceCellHeight=e.device.cell.height,this._deviceCharWidth=e.device.char.width,this._deviceCharHeight=e.device.char.height,this._deviceCharLeft=e.device.char.left,this._deviceCharTop=e.device.char.top,this._canvas.width=e.device.canvas.width,this._canvas.height=e.device.canvas.height,this._canvas.style.width="".concat(e.css.canvas.width,"px"),this._canvas.style.height="".concat(e.css.canvas.height,"px"),this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}},{key:"clearTextureAtlas",value:function(){var e;null==(e=this._charAtlas)||e.clearTexture()}},{key:"_fillCells",value:function(e,t,i,r){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight)}},{key:"_fillMiddleLineAtCells",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight-r-this._coreBrowserService.dpr,i*this._deviceCellWidth,this._coreBrowserService.dpr)}},{key:"_fillBottomLineAtCells",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight+r-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}},{key:"_curlyUnderlineAtCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;var r=this._coreBrowserService.dpr;this._ctx.lineWidth=r;for(var n=0;n<i;n++){var s=(e+n)*this._deviceCellWidth,o=(e+n+.5)*this._deviceCellWidth,a=(e+n+1)*this._deviceCellWidth,c=(t+1)*this._deviceCellHeight-r-1,l=c-r,h=c+r;this._ctx.moveTo(s,c),this._ctx.bezierCurveTo(s,l,o,l,o,c),this._ctx.bezierCurveTo(o,h,a,h,a,c)}this._ctx.stroke(),this._ctx.restore()}},{key:"_dottedUnderlineAtCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;var r=this._coreBrowserService.dpr;this._ctx.lineWidth=r,this._ctx.setLineDash([2*r,r]);var n=e*this._deviceCellWidth,s=(t+1)*this._deviceCellHeight-r-1;this._ctx.moveTo(n,s);for(var o=0;o<i;o++){var a=(e+i+o)*this._deviceCellWidth;this._ctx.lineTo(a,s)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}},{key:"_dashedUnderlineAtCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;var r=this._coreBrowserService.dpr;this._ctx.lineWidth=r,this._ctx.setLineDash([4*r,3*r]);var n=e*this._deviceCellWidth,s=(e+i)*this._deviceCellWidth,o=(t+1)*this._deviceCellHeight-r-1;this._ctx.moveTo(n,o),this._ctx.lineTo(s,o),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}},{key:"_fillLeftLineAtCell",value:function(e,t,i){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,this._coreBrowserService.dpr*i,this._deviceCellHeight)}},{key:"_strokeRectAtCell",value:function(e,t,i,r){var n=this._coreBrowserService.dpr;this._ctx.lineWidth=n,this._ctx.strokeRect(e*this._deviceCellWidth+n/2,t*this._deviceCellHeight+n/2,i*this._deviceCellWidth-n,r*this._deviceCellHeight-n)}},{key:"_clearAll",value:function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}},{key:"_clearCells",value:function(e,t,i,r){this._alpha?this._ctx.clearRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight))}},{key:"_fillCharTrueColor",value:function(e,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=s.TEXT_BASELINE,this._clipRow(i);var r=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(r=(0,o.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._deviceCellWidth,i*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),r||this._ctx.fillText(e.getChars(),t*this._deviceCellWidth+this._deviceCharLeft,i*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}},{key:"_drawChars",value:function(e,t,i){var r,n,s,o,a,c=e.getChars(),l=e.getCode(),u=e.getWidth();if((this._cellColorResolver.resolve(e,t,this._bufferService.buffer.ydisp+i,this._deviceCellWidth),this._charAtlas)&&(a=c&&c.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(c,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0):this._charAtlas.getRasterizedGlyph(e.getCode()||g.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,!0)).size.x&&a.size.y){this._ctx.save(),this._clipRow(i),this._bitmapGenerator[a.texturePage]&&this._charAtlas.pages[a.texturePage].canvas!==this._bitmapGenerator[a.texturePage].canvas&&(null==(n=this._bitmapGenerator[a.texturePage])||null==(r=n.bitmap)||r.close(),delete this._bitmapGenerator[a.texturePage]),this._charAtlas.pages[a.texturePage].version!==(null==(s=this._bitmapGenerator[a.texturePage])?void 0:s.version)&&(this._bitmapGenerator[a.texturePage]||(this._bitmapGenerator[a.texturePage]=new C(this._charAtlas.pages[a.texturePage].canvas)),this._bitmapGenerator[a.texturePage].refresh(),this._bitmapGenerator[a.texturePage].version=this._charAtlas.pages[a.texturePage].version);var d=a.size.x;this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,h.allowRescaling)(l,u,a.size.x,this._deviceCellWidth)&&(d=this._deviceCellWidth-1),this._ctx.drawImage((null==(o=this._bitmapGenerator[a.texturePage])?void 0:o.bitmap)||this._charAtlas.pages[a.texturePage].canvas,a.texturePosition.x,a.texturePosition.y,a.size.x,a.size.y,t*this._deviceCellWidth+this._deviceCharLeft-a.offset.x,i*this._deviceCellHeight+this._deviceCharTop-a.offset.y,d,a.size.y),this._ctx.restore()}}},{key:"_clipRow",value:function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}},{key:"_getFont",value:function(e,t){return"".concat(t?"italic":""," ").concat(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight," ").concat(this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr,"px ").concat(this._optionsService.rawOptions.fontFamily)}}]),t}(v.Disposable);var C=function(){function e(t){c._(this,e),this.canvas=t,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}return l._(e,[{key:"bitmap",get:function(){return this._bitmap}},{key:"refresh",value:function(){var e,t=this;null==(e=this._bitmap)||e.close(),this._bitmap=void 0,_.isSafari||(void 0===this._commitTimeout&&(this._commitTimeout=window.setTimeout(function(){return t._generate()},100)),1===this._state&&(this._state=2))}},{key:"_generate",value:function(){var e,t=this;0===this._state&&(null==(e=this._bitmap)||e.close(),this._bitmap=void 0,this._state=1,window.createImageBitmap(this.canvas).then(function(e){2===t._state?t.refresh():t._bitmap=e,t._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}]),e}()},949:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=void 0;var r=i(627),n=i(56),s=i(374),o=i(345),h=i(859),u=i(873),f=i(43),v=i(630),_=i(744);t.CanvasRenderer=function(e){function t(e,i,l,d,g,C,y,p,x,m,w){c._(this,t),(k=a._(this,t))._terminal=e,k._screenElement=i,k._bufferService=d,k._charSizeService=g,k._optionsService=C,k._coreBrowserService=x,k._themeService=w,k._observerDisposable=k.register(new h.MutableDisposable),k._onRequestRedraw=k.register(new o.EventEmitter),k.onRequestRedraw=k._onRequestRedraw.event,k._onChangeTextureAtlas=k.register(new o.EventEmitter),k.onChangeTextureAtlas=k._onChangeTextureAtlas.event,k._onAddTextureAtlasCanvas=k.register(new o.EventEmitter),k.onAddTextureAtlasCanvas=k._onAddTextureAtlasCanvas.event;var L=k._optionsService.rawOptions.allowTransparency;k._renderLayers=[new _.TextRenderLayer(k._terminal,k._screenElement,0,L,k._bufferService,k._optionsService,y,m,k._coreBrowserService,w),new v.SelectionRenderLayer(k._terminal,k._screenElement,1,k._bufferService,k._coreBrowserService,m,k._optionsService,w),new f.LinkRenderLayer(k._terminal,k._screenElement,2,l,k._bufferService,k._optionsService,m,k._coreBrowserService,w),new u.CursorRenderLayer(k._terminal,k._screenElement,3,k._onRequestRedraw,k._bufferService,k._optionsService,p,k._coreBrowserService,m,w)];var b=!0,S=!1,M=void 0;try{for(var k,R,A=k._renderLayers[Symbol.iterator]();!(b=(R=A.next()).done);b=!0){var D=R.value;(0,o.forwardEvent)(D.onAddTextureAtlasCanvas,k._onAddTextureAtlasCanvas)}}catch(e){S=!0,M=e}finally{try{b||null==A.return||A.return()}finally{if(S)throw M}}return k.dimensions=(0,s.createRenderDimensions)(),k._devicePixelRatio=k._coreBrowserService.dpr,k._updateDimensions(),k._observerDisposable.value=(0,n.observeDevicePixelDimensions)(k._renderLayers[0].canvas,k._coreBrowserService.window,function(e,t){return k._setCanvasDevicePixelDimensions(e,t)}),k.register(k._coreBrowserService.onWindowChange(function(e){k._observerDisposable.value=(0,n.observeDevicePixelDimensions)(k._renderLayers[0].canvas,e,function(e,t){return k._setCanvasDevicePixelDimensions(e,t)})})),k.register((0,h.toDisposable)(function(){var e=!0,t=!1,i=void 0;try{for(var n,s=k._renderLayers[Symbol.iterator]();!(e=(n=s.next()).done);e=!0)n.value.dispose()}catch(e){t=!0,i=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw i}}(0,r.removeTerminalFromCache)(k._terminal)})),k}return d._(t,e),l._(t,[{key:"textureAtlas",get:function(){return this._renderLayers[0].cacheCanvas}},{key:"handleDevicePixelRatioChange",value:function(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}},{key:"handleResize",value:function(e,t){this._updateDimensions();var i=!0,r=!1,n=void 0;try{for(var s,o=this._renderLayers[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)s.value.resize(this.dimensions)}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}this._screenElement.style.width="".concat(this.dimensions.css.canvas.width,"px"),this._screenElement.style.height="".concat(this.dimensions.css.canvas.height,"px")}},{key:"handleCharSizeChanged",value:function(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}},{key:"handleBlur",value:function(){this._runOperation(function(e){return e.handleBlur()})}},{key:"handleFocus",value:function(){this._runOperation(function(e){return e.handleFocus()})}},{key:"handleSelectionChanged",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._runOperation(function(r){return r.handleSelectionChanged(e,t,i)}),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}},{key:"handleCursorMove",value:function(){this._runOperation(function(e){return e.handleCursorMove()})}},{key:"clear",value:function(){this._runOperation(function(e){return e.reset()})}},{key:"_runOperation",value:function(e){var t=!0,i=!1,r=void 0;try{for(var n,s=this._renderLayers[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var o=n.value;e(o)}}catch(e){i=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}}},{key:"renderRows",value:function(e,t){var i=!0,r=!1,n=void 0;try{for(var s,o=this._renderLayers[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)s.value.handleGridChanged(e,t)}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}}},{key:"clearTextureAtlas",value:function(){var e=!0,t=!1,i=void 0;try{for(var r,n=this._renderLayers[Symbol.iterator]();!(e=(r=n.next()).done);e=!0)r.value.clearTextureAtlas()}catch(e){t=!0,i=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw i}}}},{key:"_updateDimensions",value:function(){if(this._charSizeService.hasValidSize){var e=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*e),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}}},{key:"_setCanvasDevicePixelDimensions",value:function(e,t){this.dimensions.device.canvas.height=t,this.dimensions.device.canvas.width=e;var i=!0,r=!1,n=void 0;try{for(var s,o=this._renderLayers[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)s.value.resize(this.dimensions)}catch(e){r=!0,n=e}finally{try{i||null==o.return||o.return()}finally{if(r)throw n}}this._requestRedrawViewport()}},{key:"_requestRedrawViewport",value:function(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}]),t}(h.Disposable)},873:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var r=i(457),n=i(859),s=i(399),o=i(782);t.CursorRenderLayer=function(e){function t(e,i,r,s,l,h,u,d,f,v){var _;return c._(this,t),(_=a._(this,t,[e,i,"cursor",r,!0,v,l,h,f,d]))._onRequestRedraw=s,_._coreService=u,_._cursorBlinkStateManager=_.register(new n.MutableDisposable),_._cell=new o.CellData,_._state={x:0,y:0,isFocused:!1,style:"",width:0},_._cursorRenderers={bar:_._renderBarCursor.bind(_),block:_._renderBlockCursor.bind(_),underline:_._renderUnderlineCursor.bind(_),outline:_._renderOutlineCursor.bind(_)},_.register(h.onOptionChange(function(){return _._handleOptionsChanged()})),_._handleOptionsChanged(),_}return d._(t,e),l._(t,[{key:"resize",value:function(e){h._(u._(t.prototype),"resize",this).call(this,e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}},{key:"reset",value:function(){var e;this._clearCursor(),null==(e=this._cursorBlinkStateManager.value)||e.restartBlinkAnimation(),this._handleOptionsChanged()}},{key:"handleBlur",value:function(){var e;null==(e=this._cursorBlinkStateManager.value)||e.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}},{key:"handleFocus",value:function(){var e;null==(e=this._cursorBlinkStateManager.value)||e.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}},{key:"_handleOptionsChanged",value:function(){var e=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager.value||(this._cursorBlinkStateManager.value=new r.CursorBlinkStateManager(function(){return e._render(!0)},this._coreBrowserService)):this._cursorBlinkStateManager.clear(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}},{key:"handleCursorMove",value:function(){var e;null==(e=this._cursorBlinkStateManager.value)||e.restartBlinkAnimation()}},{key:"handleGridChanged",value:function(e,t){!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isPaused?this._render(!1):this._cursorBlinkStateManager.value.restartBlinkAnimation()}},{key:"_render",value:function(e){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=t-this._bufferService.buffer.ydisp;if(i<0||i>=this._bufferService.rows)return void this._clearCursor();var r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(r,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;var n=this._optionsService.rawOptions.cursorStyle,s=this._optionsService.rawOptions.cursorInactiveStyle;return s&&"none"!==s&&this._cursorRenderers[s](r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=n,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible){if(this._state){if(this._state.x===r&&this._state.y===i&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}},{key:"_clearCursor",value:function(){this._state&&(s.isFirefox||this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}},{key:"_renderBarCursor",value:function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}},{key:"_renderBlockCursor",value:function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(e,t,i.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(i,e,t),this._ctx.restore()}},{key:"_renderUnderlineCursor",value:function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()}},{key:"_renderOutlineCursor",value:function(e,t,i){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(e,t,i.getWidth(),1),this._ctx.restore()}}]),t}(i(903).BaseRenderLayer)},574:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0,t.GridCache=function(){function e(){c._(this,e),this.cache=[]}return l._(e,[{key:"resize",value:function(e,t){for(var i=0;i<e;i++){this.cache.length<=i&&this.cache.push([]);for(var r=this.cache[i].length;r<t;r++)this.cache[i].push(void 0);this.cache[i].length=t}this.cache.length=e}},{key:"clear",value:function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0}}]),e}()},43:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var r=i(197),n=i(237);t.LinkRenderLayer=function(e){function t(e,i,r,n,s,o,l,h,u){var d;return c._(this,t),(d=a._(this,t,[e,i,"link",r,!0,u,s,o,l,h])).register(n.onShowLinkUnderline(function(e){return d._handleShowLinkUnderline(e)})),d.register(n.onHideLinkUnderline(function(e){return d._handleHideLinkUnderline(e)})),d}return d._(t,e),l._(t,[{key:"resize",value:function(e){h._(u._(t.prototype),"resize",this).call(this,e),this._state=void 0}},{key:"reset",value:function(){this._clearCurrentLink()}},{key:"_clearCurrentLink",value:function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}},{key:"_handleShowLinkUnderline",value:function(e){if(e.fg===n.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:e.fg&&(0,r.is256Color)(e.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[e.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e}},{key:"_handleHideLinkUnderline",value:function(e){this._clearCurrentLink()}}]),t}(i(903).BaseRenderLayer)},630:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0,t.SelectionRenderLayer=function(e){function t(e,i,r,n,s,o,l,h){var u;return c._(this,t),(u=a._(this,t,[e,i,"selection",r,!0,h,n,l,o,s]))._clearState(),u}return d._(t,e),l._(t,[{key:"_clearState",value:function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}},{key:"resize",value:function(e){h._(u._(t.prototype),"resize",this).call(this,e),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&(this._clearState(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode))}},{key:"reset",value:function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}},{key:"handleBlur",value:function(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}},{key:"handleFocus",value:function(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}},{key:"handleSelectionChanged",value:function(e,i,r){h._(u._(t.prototype),"handleSelectionChanged",this).call(this,e,i,r),this._redrawSelection(e,i,r)}},{key:"_redrawSelection",value:function(e,t,i){if(this._didStateChange(e,t,i,this._bufferService.buffer.ydisp)){if(this._clearAll(),!e||!t)return void this._clearState();var r=e[1]-this._bufferService.buffer.ydisp,n=t[1]-this._bufferService.buffer.ydisp,s=Math.max(r,0),o=Math.min(n,this._bufferService.rows-1);if(s>=this._bufferService.rows||o<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,i){var a=e[0],c=t[0]-a;this._fillCells(a,s,c,o-s+1)}else{var l=r===s?e[0]:0,h=s===n?t[0]:this._bufferService.cols;this._fillCells(l,s,h-l,1);var u=Math.max(o-s-1,0);if(this._fillCells(0,s+1,this._bufferService.cols,u),s!==o){var d=n===o?t[0]:this._bufferService.cols;this._fillCells(0,o,d,1)}}this._state.start=[e[0],e[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp}}}},{key:"_didStateChange",value:function(e,t,i,r){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||i!==this._state.columnSelectMode||r!==this._state.ydisp}},{key:"_areCoordinatesEqual",value:function(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]}}]),t}(i(903).BaseRenderLayer)},744:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var r=i(577),n=i(147),s=i(782),o=i(855),f=i(903),v=i(574);t.TextRenderLayer=function(e){function t(e,i,r,n,o,l,h,u,d,f){var _;return c._(this,t),(_=a._(this,t,[e,i,"text",r,n,f,o,l,u,d]))._characterJoinerService=h,_._characterWidth=0,_._characterFont="",_._characterOverlapCache={},_._workCell=new s.CellData,_._state=new v.GridCache,_.register(l.onSpecificOptionChange("allowTransparency",function(e){return _._setTransparency(e)})),_}return d._(t,e),l._(t,[{key:"resize",value:function(e){h._(u._(t.prototype),"resize",this).call(this,e);var i=this._getFont(!1,!1);this._characterWidth===e.device.char.width&&this._characterFont===i||(this._characterWidth=e.device.char.width,this._characterFont=i,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}},{key:"reset",value:function(){this._state.clear(),this._clearAll()}},{key:"_forEachCell",value:function(e,t,i){for(var n=e;n<=t;n++)for(var s=n+this._bufferService.buffer.ydisp,a=this._bufferService.buffer.lines.get(s),c=this._characterJoinerService.getJoinedCharacters(s),l=0;l<this._bufferService.cols;l++){a.loadCell(l,this._workCell);var h=this._workCell,u=!1,d=l;if(0!==h.getWidth()){if(c.length>0&&l===c[0][0]){u=!0;var f=c.shift();h=new r.JoinedCellData(this._workCell,a.translateToString(!0,f[0],f[1]),f[1]-f[0]),d=f[1]-1}!u&&this._isOverlapping(h)&&d<a.length-1&&a.getCodePoint(d+1)===o.NULL_CELL_CODE&&(h.content&=-0xc00001,h.content|=8388608),i(h,l,n),l=d}}}},{key:"_drawBackground",value:function(e,t){var i=this,r=this._ctx,s=this._bufferService.cols,o=0,a=0,c=null;r.save(),this._forEachCell(e,t,function(e,t,l){var h=null;e.isInverse()?h=e.isFgDefault()?i._themeService.colors.foreground.css:e.isFgRGB()?"rgb(".concat(n.AttributeData.toColorRGB(e.getFgColor()).join(","),")"):i._themeService.colors.ansi[e.getFgColor()].css:e.isBgRGB()?h="rgb(".concat(n.AttributeData.toColorRGB(e.getBgColor()).join(","),")"):e.isBgPalette()&&(h=i._themeService.colors.ansi[e.getBgColor()].css);var u=!1;i._decorationService.forEachDecorationAtCell(t,i._bufferService.buffer.ydisp+l,void 0,function(e){"top"!==e.options.layer&&u||(e.backgroundColorRGB&&(h=e.backgroundColorRGB.css),u="top"===e.options.layer)}),null===c&&(o=t,a=l),l!==a?(r.fillStyle=c||"",i._fillCells(o,a,s-o,1),o=t,a=l):c!==h&&(r.fillStyle=c||"",i._fillCells(o,a,t-o,1),o=t,a=l),c=h}),null!==c&&(r.fillStyle=c,this._fillCells(o,a,s-o,1)),r.restore()}},{key:"_drawForeground",value:function(e,t){var i=this;this._forEachCell(e,t,function(e,t,r){return i._drawChars(e,t,r)})}},{key:"handleGridChanged",value:function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))}},{key:"_isOverlapping",value:function(e){if(1!==e.getWidth()||256>e.getCode())return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var i=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=i,i}}]),t}(f.BaseRenderLayer)},274:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;var r,n=i(855),s=i(160),o=i(374),a=0,h=0,u=!1,d=!1,f=!1,v=0;t.CellColorResolver=function(){function e(t,i,r,n,s,o){c._(this,e),this._terminal=t,this._optionService=i,this._selectionRenderModel=r,this._decorationService=n,this._coreBrowserService=s,this._themeService=o,this.result={fg:0,bg:0,ext:0}}return l._(e,[{key:"resolve",value:function(e,t,i,c){if(this.result.bg=e.bg,this.result.fg=e.fg,this.result.ext=0x10000000&e.bg?e.extended.ext:0,h=0,a=0,d=!1,u=!1,f=!1,r=this._themeService.colors,v=0,e.getCode()!==n.NULL_CELL_CODE&&4===e.extended.underlineStyle&&(v=t*c%(2*Math.round(Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15))))),this._decorationService.forEachDecorationAtCell(t,i,"bottom",function(e){e.backgroundColorRGB&&(h=e.backgroundColorRGB.rgba>>8&0xffffff,d=!0),e.foregroundColorRGB&&(a=e.foregroundColorRGB.rgba>>8&0xffffff,u=!0)}),f=this._selectionRenderModel.isCellSelected(this._terminal,t,i)){if(0x4000000&this.result.fg||0!=(0x3000000&this.result.bg)){if(0x4000000&this.result.fg)switch(0x3000000&this.result.fg){case 0x1000000:case 0x2000000:h=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 0x3000000:h=(0xffffff&this.result.fg)<<8|255;break;default:h=this._themeService.colors.foreground.rgba}else switch(0x3000000&this.result.bg){case 0x1000000:case 0x2000000:h=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 0x3000000:h=(0xffffff&this.result.bg)<<8|255}h=s.rgba.blend(h,0xffffff00&(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba|128)>>8&0xffffff}else h=(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba>>8&0xffffff;if(d=!0,r.selectionForeground&&(a=r.selectionForeground.rgba>>8&0xffffff,u=!0),(0,o.treatGlyphAsBackgroundColor)(e.getCode())){if(0x4000000&this.result.fg&&0==(0x3000000&this.result.bg))a=(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba>>8&0xffffff;else{if(0x4000000&this.result.fg)switch(0x3000000&this.result.bg){case 0x1000000:case 0x2000000:a=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 0x3000000:a=(0xffffff&this.result.bg)<<8|255}else switch(0x3000000&this.result.fg){case 0x1000000:case 0x2000000:a=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 0x3000000:a=(0xffffff&this.result.fg)<<8|255;break;default:a=this._themeService.colors.foreground.rgba}a=s.rgba.blend(a,0xffffff00&(this._coreBrowserService.isFocused?r.selectionBackgroundOpaque:r.selectionInactiveBackgroundOpaque).rgba|128)>>8&0xffffff}u=!0}}this._decorationService.forEachDecorationAtCell(t,i,"top",function(e){e.backgroundColorRGB&&(h=e.backgroundColorRGB.rgba>>8&0xffffff,d=!0),e.foregroundColorRGB&&(a=e.foregroundColorRGB.rgba>>8&0xffffff,u=!0)}),d&&(h=f?-0x1000000&e.bg&-0x8000001|h|0x3000000:-0x1000000&e.bg|h|0x3000000),u&&(a=-0x1000000&e.fg&-0x4000001|a|0x3000000),0x4000000&this.result.fg&&(d&&!u&&(a=0==(0x3000000&this.result.bg)?-0x8000000&this.result.fg|0xffffff&r.background.rgba>>8|0x3000000:-0x8000000&this.result.fg|0x3ffffff&this.result.bg,u=!0),!d&&u&&(h=0==(0x3000000&this.result.fg)?-0x4000000&this.result.bg|0xffffff&r.foreground.rgba>>8|0x3000000:-0x4000000&this.result.bg|0x3ffffff&this.result.fg,d=!0)),r=void 0,this.result.bg=d?h:this.result.bg,this.result.fg=u?a:this.result.fg,this.result.ext&=0x1fffffff,this.result.ext|=v<<29&0xe0000000}}]),e}()},627:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;var r=i(509),n=i(197),s=[];t.acquireTextureAtlas=function(e,t,i,o,a,c,l,h){for(var u=(0,n.generateConfig)(o,a,c,l,t,i,h),d=0;d<s.length;d++){var f=s[d],v=f.ownedBy.indexOf(e);if(v>=0){if((0,n.configEquals)(f.config,u))return f.atlas;1===f.ownedBy.length?(f.atlas.dispose(),s.splice(d,1)):f.ownedBy.splice(v,1);break}}for(var _=0;_<s.length;_++){var g=s[_];if((0,n.configEquals)(g.config,u))return g.ownedBy.push(e),g.atlas}var C=e._core,y={atlas:new r.TextureAtlas(document,u,C.unicodeService),config:u,ownedBy:[e]};return s.push(y),y.atlas},t.removeTerminalFromCache=function(e){for(var t=0;t<s.length;t++){var i=s[t].ownedBy.indexOf(e);if(-1!==i){1===s[t].ownedBy.length?(s[t].atlas.dispose(),s.splice(t,1)):s[t].ownedBy.splice(i,1);break}}}},197:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var r=i(160);t.generateConfig=function(e,t,i,n,s,o,a){var c={foreground:o.foreground,background:o.background,cursor:r.NULL_COLOR,cursorAccent:r.NULL_COLOR,selectionForeground:r.NULL_COLOR,selectionBackgroundTransparent:r.NULL_COLOR,selectionBackgroundOpaque:r.NULL_COLOR,selectionInactiveBackgroundTransparent:r.NULL_COLOR,selectionInactiveBackgroundOpaque:r.NULL_COLOR,ansi:o.ansi.slice(),contrastCache:o.contrastCache,halfContrastCache:o.halfContrastCache};return{customGlyphs:s.customGlyphs,devicePixelRatio:a,letterSpacing:s.letterSpacing,lineHeight:s.lineHeight,deviceCellWidth:e,deviceCellHeight:t,deviceCharWidth:i,deviceCharHeight:n,fontFamily:s.fontFamily,fontSize:s.fontSize,fontWeight:s.fontWeight,fontWeightBold:s.fontWeightBold,allowTransparency:s.allowTransparency,drawBoldTextInBrightColors:s.drawBoldTextInBrightColors,minimumContrastRatio:s.minimumContrastRatio,colors:c}},t.configEquals=function(e,t){for(var i=0;i<e.colors.ansi.length;i++)if(e.colors.ansi[i].rgba!==t.colors.ansi[i].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.customGlyphs===t.customGlyphs&&e.lineHeight===t.lineHeight&&e.letterSpacing===t.letterSpacing&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.deviceCharWidth===t.deviceCharWidth&&e.deviceCharHeight===t.deviceCharHeight&&e.drawBoldTextInBrightColors===t.drawBoldTextInBrightColors&&e.minimumContrastRatio===t.minimumContrastRatio&&e.colors.foreground.rgba===t.colors.foreground.rgba&&e.colors.background.rgba===t.colors.background.rgba},t.is256Color=function(e){return 0x1000000==(0x3000000&e)||0x2000000==(0x3000000&e)}},237:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;var r=i(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},457:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CursorBlinkStateManager=void 0,t.CursorBlinkStateManager=function(){function e(t,i){c._(this,e),this._renderCallback=t,this._coreBrowserService=i,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}return l._(e,[{key:"isPaused",get:function(){return!(this._blinkStartTimeout||this._blinkInterval)}},{key:"dispose",value:function(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}},{key:"restartBlinkAnimation",value:function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=void 0})))}},{key:"_restartInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(function(){if(e._animationTimeRestarted){var t=600-(Date.now()-e._animationTimeRestarted);if(e._animationTimeRestarted=void 0,t>0)return void e._restartInterval(t)}e.isCursorVisible=!1,e._animationFrame=e._coreBrowserService.window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=void 0}),e._blinkInterval=e._coreBrowserService.window.setInterval(function(){if(e._animationTimeRestarted){var t=600-(Date.now()-e._animationTimeRestarted);return e._animationTimeRestarted=void 0,void e._restartInterval(t)}e.isCursorVisible=!e.isCursorVisible,e._animationFrame=e._coreBrowserService.window.requestAnimationFrame(function(){e._renderCallback(),e._animationFrame=void 0})},600)},t)}},{key:"pause",value:function(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}},{key:"resume",value:function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}]),e}()},860:function(e,t,i){var r=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(Math.min(e,t),i)},n=function(e,t,i,n,s,o,a){var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=e.map(function(e){return parseFloat(e)||parseInt(e)});if(h.length<2)throw Error("Too few arguments for instruction");for(var u=0;u<h.length;u+=2)h[u]*=t-c*a-l*a,o&&0!==h[u]&&(h[u]=r(Math.round(h[u]+.5)-.5,t,0)),h[u]+=n+c*a;for(var d=1;d<h.length;d+=2)h[d]*=i,o&&0!==h[d]&&(h[d]=r(Math.round(h[d]+.5)-.5,i,0)),h[d]+=s;return h};Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var s=i(374);t.blockElementDefinitions={"â–€":[{x:0,y:0,w:8,h:4}],"â–":[{x:0,y:7,w:8,h:1}],"â–‚":[{x:0,y:6,w:8,h:2}],"â–ƒ":[{x:0,y:5,w:8,h:3}],"â–„":[{x:0,y:4,w:8,h:4}],"â–…":[{x:0,y:3,w:8,h:5}],"â–†":[{x:0,y:2,w:8,h:6}],"â–‡":[{x:0,y:1,w:8,h:7}],"â–ˆ":[{x:0,y:0,w:8,h:8}],"â–‰":[{x:0,y:0,w:7,h:8}],"â–Š":[{x:0,y:0,w:6,h:8}],"â–‹":[{x:0,y:0,w:5,h:8}],"â–Œ":[{x:0,y:0,w:4,h:8}],"â–":[{x:0,y:0,w:3,h:8}],"â–Ž":[{x:0,y:0,w:2,h:8}],"â–":[{x:0,y:0,w:1,h:8}],"â–":[{x:4,y:0,w:4,h:8}],"â–”":[{x:0,y:0,w:8,h:1}],"â–•":[{x:7,y:0,w:1,h:8}],"â––":[{x:0,y:4,w:4,h:4}],"â–—":[{x:4,y:4,w:4,h:4}],"â–˜":[{x:0,y:0,w:4,h:4}],"â–™":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"â–š":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"â–›":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"â–œ":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"â–":[{x:4,y:0,w:4,h:4}],"â–ž":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"â–Ÿ":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"ðŸ­°":[{x:1,y:0,w:1,h:8}],"ðŸ­±":[{x:2,y:0,w:1,h:8}],"ðŸ­²":[{x:3,y:0,w:1,h:8}],"ðŸ­³":[{x:4,y:0,w:1,h:8}],"ðŸ­´":[{x:5,y:0,w:1,h:8}],"ðŸ­µ":[{x:6,y:0,w:1,h:8}],"ðŸ­¶":[{x:0,y:1,w:8,h:1}],"ðŸ­·":[{x:0,y:2,w:8,h:1}],"ðŸ­¸":[{x:0,y:3,w:8,h:1}],"ðŸ­¹":[{x:0,y:4,w:8,h:1}],"ðŸ­º":[{x:0,y:5,w:8,h:1}],"ðŸ­»":[{x:0,y:6,w:8,h:1}],"ðŸ­¼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ðŸ­½":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ðŸ­¾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"ðŸ­¿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"ðŸ®€":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"ðŸ®":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"ðŸ®‚":[{x:0,y:0,w:8,h:2}],"ðŸ®ƒ":[{x:0,y:0,w:8,h:3}],"ðŸ®„":[{x:0,y:0,w:8,h:5}],"ðŸ®…":[{x:0,y:0,w:8,h:6}],"ðŸ®†":[{x:0,y:0,w:8,h:7}],"ðŸ®‡":[{x:6,y:0,w:2,h:8}],"ðŸ®ˆ":[{x:5,y:0,w:3,h:8}],"ðŸ®‰":[{x:3,y:0,w:5,h:8}],"ðŸ®Š":[{x:2,y:0,w:6,h:8}],"ðŸ®‹":[{x:1,y:0,w:7,h:8}],"ðŸ®•":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"ðŸ®–":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"ðŸ®—":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var o={"â–‘":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"â–’":[[1,0],[0,0],[0,1],[0,0]],"â–“":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"â”€":{1:"M0,.5 L1,.5"},"â”":{3:"M0,.5 L1,.5"},"â”‚":{1:"M.5,0 L.5,1"},"â”ƒ":{3:"M.5,0 L.5,1"},"â”Œ":{1:"M0.5,1 L.5,.5 L1,.5"},"â”":{3:"M0.5,1 L.5,.5 L1,.5"},"â”":{1:"M0,.5 L.5,.5 L.5,1"},"â”“":{3:"M0,.5 L.5,.5 L.5,1"},"â””":{1:"M.5,0 L.5,.5 L1,.5"},"â”—":{3:"M.5,0 L.5,.5 L1,.5"},"â”˜":{1:"M.5,0 L.5,.5 L0,.5"},"â”›":{3:"M.5,0 L.5,.5 L0,.5"},"â”œ":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â”£":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â”¤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â”«":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â”¬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â”³":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â”´":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â”»":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"â”¼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"â•‹":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"â•´":{1:"M.5,.5 L0,.5"},"â•¸":{3:"M.5,.5 L0,.5"},"â•µ":{1:"M.5,.5 L.5,0"},"â•¹":{3:"M.5,.5 L.5,0"},"â•¶":{1:"M.5,.5 L1,.5"},"â•º":{3:"M.5,.5 L1,.5"},"â•·":{1:"M.5,.5 L.5,1"},"â•»":{3:"M.5,.5 L.5,1"},"â•":{1:function(e,t){return"M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t)}},"â•‘":{1:function(e,t){return"M".concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1")}},"â•’":{1:function(e,t){return"M.5,1 L.5,".concat(.5-t," L1,").concat(.5-t," M.5,").concat(.5+t," L1,").concat(.5+t)}},"â•“":{1:function(e,t){return"M".concat(.5-e,",1 L").concat(.5-e,",.5 L1,.5 M").concat(.5+e,",.5 L").concat(.5+e,",1")}},"â•”":{1:function(e,t){return"M1,".concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1")}},"â••":{1:function(e,t){return"M0,".concat(.5-t," L.5,").concat(.5-t," L.5,1 M0,").concat(.5+t," L.5,").concat(.5+t)}},"â•–":{1:function(e,t){return"M".concat(.5+e,",1 L").concat(.5+e,",.5 L0,.5 M").concat(.5-e,",.5 L").concat(.5-e,",1")}},"â•—":{1:function(e,t){return"M0,".concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M0,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",1")}},"â•˜":{1:function(e,t){return"M.5,0 L.5,".concat(.5+t," L1,").concat(.5+t," M.5,").concat(.5-t," L1,").concat(.5-t)}},"â•™":{1:function(e,t){return"M1,.5 L".concat(.5-e,",.5 L").concat(.5-e,",0 M").concat(.5+e,",.5 L").concat(.5+e,",0")}},"â•š":{1:function(e,t){return"M1,".concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0 M1,").concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",0")}},"â•›":{1:function(e,t){return"M0,".concat(.5+t," L.5,").concat(.5+t," L.5,0 M0,").concat(.5-t," L.5,").concat(.5-t)}},"â•œ":{1:function(e,t){return"M0,.5 L".concat(.5+e,",.5 L").concat(.5+e,",0 M").concat(.5-e,",.5 L").concat(.5-e,",0")}},"â•":{1:function(e,t){return"M0,".concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0 M0,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",0")}},"â•ž":{1:function(e,t){return"M.5,0 L.5,1 M.5,".concat(.5-t," L1,").concat(.5-t," M.5,").concat(.5+t," L1,").concat(.5+t)}},"â•Ÿ":{1:function(e,t){return"M".concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1 M").concat(.5+e,",.5 L1,.5")}},"â• ":{1:function(e,t){return"M".concat(.5-e,",0 L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1 M1,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0")}},"â•¡":{1:function(e,t){return"M.5,0 L.5,1 M0,".concat(.5-t," L.5,").concat(.5-t," M0,").concat(.5+t," L.5,").concat(.5+t)}},"â•¢":{1:function(e,t){return"M0,.5 L".concat(.5-e,",.5 M").concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1")}},"â•£":{1:function(e,t){return"M".concat(.5+e,",0 L").concat(.5+e,",1 M0,").concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M0,").concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0")}},"â•¤":{1:function(e,t){return"M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t," M.5,").concat(.5+t," L.5,1")}},"â•¥":{1:function(e,t){return"M0,.5 L1,.5 M".concat(.5-e,",.5 L").concat(.5-e,",1 M").concat(.5+e,",.5 L").concat(.5+e,",1")}},"â•¦":{1:function(e,t){return"M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1")}},"â•§":{1:function(e,t){return"M.5,0 L.5,".concat(.5-t," M0,").concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t)}},"â•¨":{1:function(e,t){return"M0,.5 L1,.5 M".concat(.5-e,",.5 L").concat(.5-e,",0 M").concat(.5+e,",.5 L").concat(.5+e,",0")}},"â•©":{1:function(e,t){return"M0,".concat(.5+t," L1,").concat(.5+t," M0,").concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0 M1,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0")}},"â•ª":{1:function(e,t){return"M.5,0 L.5,1 M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t)}},"â•«":{1:function(e,t){return"M0,.5 L1,.5 M".concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1")}},"â•¬":{1:function(e,t){return"M0,".concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1 M0,").concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0 M1,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0")}},"â•±":{1:"M1,0 L0,1"},"â•²":{1:"M0,0 L1,1"},"â•³":{1:"M1,0 L0,1 M0,0 L1,1"},"â•¼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â•½":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"â•¾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â•¿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â”":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â”Ž":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â”‘":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"â”’":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â”•":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"â”–":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”™":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"â”š":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"â”":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"â”ž":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”Ÿ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"â” ":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"â”¡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â”¢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"â”¥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"â”¦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â”§":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"â”¨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"â”©":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"â”ª":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"â”­":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”®":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"â”¯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"â”°":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â”±":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â”²":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â”µ":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”¶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â”·":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"â”¸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"â”¹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â”º":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"â”½":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"â”¾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"â”¿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"â•€":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"â•":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"â•‚":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"â•ƒ":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"â•„":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"â•…":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"â•†":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"â•‡":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"â•ˆ":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"â•‰":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"â•Š":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"â•Œ":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â•":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"â”„":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â”…":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"â”ˆ":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â”‰":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"â•Ž":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â•":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"â”†":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â”‡":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"â”Š":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â”‹":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"â•­":{1:function(e,t){return"M.5,1 L.5,".concat(.5+t/.15*.5," C.5,").concat(.5+t/.15*.5,",.5,.5,1,.5")}},"â•®":{1:function(e,t){return"M.5,1 L.5,".concat(.5+t/.15*.5," C.5,").concat(.5+t/.15*.5,",.5,.5,0,.5")}},"â•¯":{1:function(e,t){return"M.5,0 L.5,".concat(.5-t/.15*.5," C.5,").concat(.5-t/.15*.5,",.5,.5,0,.5")}},"â•°":{1:function(e,t){return"M.5,0 L.5,".concat(.5-t/.15*.5," C.5,").concat(.5-t/.15*.5,",.5,.5,1,.5")}}},t.powerlineDefinitions={"î‚°":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"î‚±":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"î‚²":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"î‚³":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"î‚´":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"î‚µ":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"î‚¶":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"î‚·":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"î‚¸":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"î‚¹":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"î‚º":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"î‚¼":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"î‚½":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"î‚¾":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions["î‚»"]=t.powerlineDefinitions["î‚½"],t.powerlineDefinitions["î‚¿"]=t.powerlineDefinitions["î‚¹"],t.tryDrawCustomChar=function(e,i,r,l,h,u,d,v){var _=t.blockElementDefinitions[i];if(_)return function(e,t,i,r,n,s){for(var o=0;o<t.length;o++){var a=t[o],c=n/8,l=s/8;e.fillRect(i+a.x*c,r+a.y*l,a.w*c,a.h*l)}}(e,_,r,l,h,u),!0;var g=o[i];if(g)return function(e,t,i,r,n,o){var c=a.get(t);c||(c=new Map,a.set(t,c));var l=e.fillStyle;if("string"!=typeof l)throw Error('Unexpected fillStyle type "'.concat(l,'"'));var h=c.get(l);if(!h){var u,d,v,_,g,C=t[0].length,y=t.length,p=e.canvas.ownerDocument.createElement("canvas");p.width=C,p.height=y;var x=(0,s.throwIfFalsy)(p.getContext("2d")),m=new ImageData(C,y);if(l.startsWith("#"))u=parseInt(l.slice(1,3),16),d=parseInt(l.slice(3,5),16),v=parseInt(l.slice(5,7),16),_=l.length>7&&parseInt(l.slice(7,9),16)||1;else{if(!l.startsWith("rgba"))throw Error('Unexpected fillStyle color format "'.concat(l,'" when drawing pattern glyph'));u=(g=f._(l.substring(5,l.length-1).split(",").map(function(e){return parseFloat(e)}),4))[0],d=g[1],v=g[2],_=g[3]}for(var w=0;w<y;w++)for(var L=0;L<C;L++)m.data[4*(w*C+L)]=u,m.data[4*(w*C+L)+1]=d,m.data[4*(w*C+L)+2]=v,m.data[4*(w*C+L)+3]=t[w][L]*(255*_);x.putImageData(m,0,0),h=(0,s.throwIfFalsy)(e.createPattern(p,null)),c.set(l,h)}e.fillStyle=h,e.fillRect(i,r,n,o)}(e,g,r,l,h,u),!0;var C=t.boxDrawingDefinitions[i];if(C)return function(e,t,i,r,s,o,a){e.strokeStyle=e.fillStyle;var l=!0,h=!1,u=void 0;try{for(var d,v=Object.entries(t)[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var _=f._(d.value,2),g=_[0],C=_[1],y=void 0;e.beginPath(),e.lineWidth=a*Number.parseInt(g),y="function"==typeof C?C(.15,.15/o*s):C;var p=!0,x=!1,m=void 0;try{for(var w,L=y.split(" ")[Symbol.iterator]();!(p=(w=L.next()).done);p=!0){var b=w.value,S=b[0],M=c[S];if(!M){console.error('Could not find drawing instructions for "'.concat(S,'"'));continue}var k=b.substring(1).split(",");k[0]&&k[1]&&M(e,n(k,s,o,i,r,!0,a))}}catch(e){x=!0,m=e}finally{try{p||null==L.return||L.return()}finally{if(x)throw m}}e.stroke(),e.closePath()}}catch(e){h=!0,u=e}finally{try{l||null==v.return||v.return()}finally{if(h)throw u}}}(e,C,r,l,h,u,v),!0;var y=t.powerlineDefinitions[i];return!!y&&(function(e,t,i,r,s,o,a,l){var h=new Path2D;h.rect(i,r,s,o),e.clip(h),e.beginPath();var u=a/12;e.lineWidth=l*u;var d=!0,f=!1,v=void 0;try{for(var _,g=t.d.split(" ")[Symbol.iterator]();!(d=(_=g.next()).done);d=!0){var C,y,p=_.value,x=p[0],m=c[x];if(!m){console.error('Could not find drawing instructions for "'.concat(x,'"'));continue}var w=p.substring(1).split(",");w[0]&&w[1]&&m(e,n(w,s,o,i,r,!1,l,(null!=(C=t.leftPadding)?C:0)*(u/2),(null!=(y=t.rightPadding)?y:0)*(u/2)))}}catch(e){f=!0,v=e}finally{try{d||null==g.return||g.return()}finally{if(f)throw v}}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,y,r,l,h,u,d,v),!0)};var a=new Map,c={C:function(e,t){return e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},L:function(e,t){return e.lineTo(t[0],t[1])},M:function(e,t){return e.moveTo(t[0],t[1])}}},56:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;var r=i(859);t.observeDevicePixelDimensions=function(e,t,i){var n=new t.ResizeObserver(function(t){var r=t.find(function(t){return t.target===e});if(r){if(!("devicePixelContentBoxSize"in r))return null==n||n.disconnect(),void(n=void 0);var s=r.devicePixelContentBoxSize[0].inlineSize,o=r.devicePixelContentBoxSize[0].blockSize;s>0&&o>0&&i(s,o)}});try{n.observe(e,{box:["device-pixel-content-box"]})}catch(e){n.disconnect(),n=void 0}return(0,r.toDisposable)(function(){return null==n?void 0:n.disconnect()})}},374:function(e,t){var i=function(e){return 57508<=e&&e<=57558},r=function(e){return e>=128512&&e<=128591||e>=127744&&e<=128511||e>=128640&&e<=128767||e>=9728&&e<=9983||e>=9984&&e<=10175||e>=65024&&e<=65039||e>=129280&&e<=129535||e>=127462&&e<=127487};Object.defineProperty(t,"__esModule",{value:!0}),t.computeNextVariantOffset=t.createRenderDimensions=t.treatGlyphAsBackgroundColor=t.allowRescaling=t.isEmoji=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.isEmoji=r,t.allowRescaling=function(e,t,n,s){return 1===t&&n>Math.ceil(1.5*s)&&void 0!==e&&e>255&&!r(e)&&!i(e)&&!(57344<=e&&e<=63743)},t.treatGlyphAsBackgroundColor=function(e){return i(e)||9472<=e&&e<=9631},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},t.computeNextVariantOffset=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e-(2*Math.round(t)-i))%(2*Math.round(t))}},296:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;var i=function(){function e(){c._(this,e),this.clear()}return l._(e,[{key:"clear",value:function(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}},{key:"update",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();var n=e.buffers.active.ydisp,s=t[1]-n,o=i[1]-n,a=Math.max(s,0),c=Math.min(o,e.rows-1);a>=e.rows||c<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=r,this.viewportStartRow=s,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=c,this.startCol=t[0],this.endCol=i[0])}},{key:"isCellSelected",value:function(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}]),e}();t.createSelectionRenderModel=function(){return new i}},509:function(e,t,i){var r,n=function(e,t,i,r){for(var n=t.rgba>>>24,s=t.rgba>>>16&255,o=t.rgba>>>8&255,a=Math.floor((Math.abs(n-(i.rgba>>>24))+Math.abs(s-(i.rgba>>>16&255))+Math.abs(o-(i.rgba>>>8&255)))/12),c=!0,l=0;l<e.data.length;l+=4)e.data[l]===n&&e.data[l+1]===s&&e.data[l+2]===o||r&&Math.abs(e.data[l]-n)+Math.abs(e.data[l+1]-s)+Math.abs(e.data[l+2]-o)<a?e.data[l+3]=0:c=!1;return c},s=function(e,t,i){var r=e.createElement("canvas");return r.width=t,r.height=i,r};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;var o=i(237),a=i(860),h=i(374),u=i(160),d=i(345),_=i(485),g=i(385),C=i(147),y=i(855),p={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};t.TextureAtlas=function(){function e(t,i,r){c._(this,e),this._document=t,this._config=i,this._unicodeService=r,this._didWarmUp=!1,this._cacheMap=new _.FourKeyMap,this._cacheMapCombined=new _.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new C.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new d.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new d.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=s(t,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}return l._(e,[{key:"pages",get:function(){return this._pages}},{key:"dispose",value:function(){var e=!0,t=!1,i=void 0;try{for(var r,n=this.pages[Symbol.iterator]();!(e=(r=n.next()).done);e=!0)r.value.canvas.remove()}catch(e){t=!0,i=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw i}}this._onAddTextureAtlasCanvas.dispose()}},{key:"warmUp",value:function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}},{key:"_doWarmUp",value:function(){for(var e=function(e){i.enqueue(function(){if(!t._cacheMap.get(e,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT)){var i=t._drawToCache(e,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT);t._cacheMap.set(e,y.DEFAULT_COLOR,y.DEFAULT_COLOR,y.DEFAULT_EXT,i)}})},t=this,i=new g.IdleTaskQueue,r=33;r<126;r++)e(r)}},{key:"beginFrame",value:function(){return this._requestClearModel}},{key:"clearTexture",value:function(){if(0!==this._pages[0].currentRow.x||0!==this._pages[0].currentRow.y){var e=!0,t=!1,i=void 0;try{for(var r,n=this._pages[Symbol.iterator]();!(e=(r=n.next()).done);e=!0)r.value.clear()}catch(e){t=!0,i=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw i}}this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}},{key:"_createNewPage",value:function(){if(e.maxAtlasPages&&this._pages.length>=Math.max(4,e.maxAtlasPages)){for(var t=this._pages.filter(function(t){return 2*t.canvas.width<=(e.maxTextureSize||4096)}).sort(function(e,t){return t.canvas.width!==e.canvas.width?t.canvas.width-e.canvas.width:t.percentageUsed-e.percentageUsed}),i=-1,r=0,n=0;n<t.length;n++)if(t[n].canvas.width!==r)i=n,r=t[n].canvas.width;else if(n-i==3)break;var s=t.slice(i,i+4),o=s.map(function(e){return e.glyphs[0].texturePage}).sort(function(e,t){return e>t?1:-1}),a=this.pages.length-s.length,c=this._mergePages(s,a);c.version++;for(var l=o.length-1;l>=0;l--)this._deletePage(o[l]);this.pages.push(c),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(c.canvas)}var h=new x(this._document,this._textureSize);return this._pages.push(h),this._activePages.push(h),this._onAddTextureAtlasCanvas.fire(h.canvas),h}},{key:"_mergePages",value:function(e,t){var i=2*e[0].canvas.width,r=new x(this._document,i,e),n=!0,s=!1,o=void 0;try{for(var a,c=e.entries()[Symbol.iterator]();!(n=(a=c.next()).done);n=!0){var l=f._(a.value,2),h=l[0],u=l[1],d=h*u.canvas.width%i,v=Math.floor(h/2)*u.canvas.height;r.ctx.drawImage(u.canvas,d,v);var _=!0,g=!1,C=void 0;try{for(var y,p=u.glyphs[Symbol.iterator]();!(_=(y=p.next()).done);_=!0){var m=y.value;m.texturePage=t,m.sizeClipSpace.x=m.size.x/i,m.sizeClipSpace.y=m.size.y/i,m.texturePosition.x+=d,m.texturePosition.y+=v,m.texturePositionClipSpace.x=m.texturePosition.x/i,m.texturePositionClipSpace.y=m.texturePosition.y/i}}catch(e){g=!0,C=e}finally{try{_||null==p.return||p.return()}finally{if(g)throw C}}this._onRemoveTextureAtlasCanvas.fire(u.canvas);var w=this._activePages.indexOf(u);-1!==w&&this._activePages.splice(w,1)}}catch(e){s=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(s)throw o}}return r}},{key:"_deletePage",value:function(e){this._pages.splice(e,1);for(var t=e;t<this._pages.length;t++){var i=this._pages[t],r=!0,n=!1,s=void 0;try{for(var o,a=i.glyphs[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var c=o.value;c.texturePage--}}catch(e){n=!0,s=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw s}}i.version++}}},{key:"getRasterizedGlyphCombinedChar",value:function(e,t,i,r,n){return this._getFromCacheMap(this._cacheMapCombined,e,t,i,r,n)}},{key:"getRasterizedGlyph",value:function(e,t,i,r,n){return this._getFromCacheMap(this._cacheMap,e,t,i,r,n)}},{key:"_getFromCacheMap",value:function(e,t,i,n,s){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(r=e.get(t,i,n,s))||(r=this._drawToCache(t,i,n,s,o),e.set(t,i,n,s,r)),r}},{key:"_getColorFromAnsiIndex",value:function(e){if(e>=this._config.colors.ansi.length)throw Error("No color found for idx "+e);return this._config.colors.ansi[e]}},{key:"_getBackgroundColor",value:function(e,t,i,r){if(this._config.allowTransparency)return u.NULL_COLOR;switch(e){case 0x1000000:case 0x2000000:n=this._getColorFromAnsiIndex(t);break;case 0x3000000:var n,s=C.AttributeData.toColorRGB(t);n=u.channels.toColor(s[0],s[1],s[2]);break;default:n=i?u.color.opaque(this._config.colors.foreground):this._config.colors.background}return n}},{key:"_getForegroundColor",value:function(e,t,i,r,n,s,a,c,l,h){var d,f=this._getMinimumContrastColor(e,t,i,r,n,s,a,l,c,h);if(f)return f;switch(n){case 0x1000000:case 0x2000000:this._config.drawBoldTextInBrightColors&&l&&s<8&&(s+=8),d=this._getColorFromAnsiIndex(s);break;case 0x3000000:var v=C.AttributeData.toColorRGB(s);d=u.channels.toColor(v[0],v[1],v[2]);break;default:d=a?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(d=u.color.opaque(d)),c&&(d=u.color.multiplyOpacity(d,o.DIM_OPACITY)),d}},{key:"_resolveBackgroundRgba",value:function(e,t,i){switch(e){case 0x1000000:case 0x2000000:return this._getColorFromAnsiIndex(t).rgba;case 0x3000000:return t<<8;default:return i?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}},{key:"_resolveForegroundRgba",value:function(e,t,i,r){switch(e){case 0x1000000:case 0x2000000:return this._config.drawBoldTextInBrightColors&&r&&t<8&&(t+=8),this._getColorFromAnsiIndex(t).rgba;case 0x3000000:return t<<8;default:return i?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}},{key:"_getMinimumContrastColor",value:function(e,t,i,r,n,s,o,a,c,l){if(1!==this._config.minimumContrastRatio&&!l){var h=this._getContrastCache(c),d=h.getColor(e,r);if(void 0!==d)return d||void 0;var f=this._resolveBackgroundRgba(t,i,o),v=this._resolveForegroundRgba(n,s,o,a),_=u.rgba.ensureContrastRatio(f,v,this._config.minimumContrastRatio/(c?2:1));if(!_)return void h.setColor(e,r,null);var g=u.channels.toColor(_>>24&255,_>>16&255,_>>8&255);return h.setColor(e,r,g),g}}},{key:"_getContrastCache",value:function(e){return e?this._config.colors.halfContrastCache:this._config.colors.contrastCache}},{key:"_drawToCache",value:function(t,i,r,s){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l="number"==typeof t?String.fromCharCode(t):t,u=Math.min(this._config.deviceCellWidth*Math.max(l.length,2)+4,this._textureSize);this._tmpCanvas.width<u&&(this._tmpCanvas.width=u);var d=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<d&&(this._tmpCanvas.height=d),this._tmpCtx.save(),this._workAttributeData.fg=r,this._workAttributeData.bg=i,this._workAttributeData.extended.ext=s,this._workAttributeData.isInvisible())return p;var f=!!this._workAttributeData.isBold(),v=!!this._workAttributeData.isInverse(),_=!!this._workAttributeData.isDim(),g=!!this._workAttributeData.isItalic(),y=!!this._workAttributeData.isUnderline(),x=!!this._workAttributeData.isStrikethrough(),m=!!this._workAttributeData.isOverline(),w=this._workAttributeData.getFgColor(),L=this._workAttributeData.getFgColorMode(),b=this._workAttributeData.getBgColor(),S=this._workAttributeData.getBgColorMode();if(v){var M=w;w=b,b=M;var k=L;L=S,S=k}var R=this._getBackgroundColor(S,b,v,_);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=R.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";var A=f?this._config.fontWeightBold:this._config.fontWeight;this._tmpCtx.font="".concat(g?"italic":""," ").concat(A," ").concat(this._config.fontSize*this._config.devicePixelRatio,"px ").concat(this._config.fontFamily),this._tmpCtx.textBaseline=o.TEXT_BASELINE;var D=1===l.length&&(0,h.isPowerlineGlyph)(l.charCodeAt(0)),T=1===l.length&&(0,h.isRestrictedPowerlineGlyph)(l.charCodeAt(0)),B=this._getForegroundColor(i,S,b,r,L,w,v,_,f,(0,h.treatGlyphAsBackgroundColor)(l.charCodeAt(0)));this._tmpCtx.fillStyle=B.css;var E=4*!T,P=!1;!1!==this._config.customGlyphs&&(P=(0,a.tryDrawCustomChar)(this._tmpCtx,l,E,E,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));var O,I=!D;if(O="number"==typeof t?this._unicodeService.wcwidth(t):this._unicodeService.getStringCellWidth(t),y){this._tmpCtx.save();var F=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),W=.5*(F%2==1);if(this._tmpCtx.lineWidth=F,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())I=!1,this._tmpCtx.strokeStyle="rgb(".concat(C.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(","),")");else{I=!1;var H=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&H<8&&(H+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(H).css}this._tmpCtx.beginPath();for(var z=Math.ceil(E+this._config.deviceCharHeight)-W-(c?2*F:0),U=z+F,G=z+2*F,N=this._workAttributeData.getUnderlineVariantOffset(),q=0;q<O;q++){this._tmpCtx.save();var j=E+q*this._config.deviceCellWidth,X=E+(q+1)*this._config.deviceCellWidth,J=j+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(j,z),this._tmpCtx.lineTo(X,z),this._tmpCtx.moveTo(j,G),this._tmpCtx.lineTo(X,G);break;case 3:var V=F<=1?G:Math.ceil(E+this._config.deviceCharHeight-F/2)-W,K=F<=1?z:Math.ceil(E+this._config.deviceCharHeight+F/2)-W,Q=new Path2D;Q.rect(j,z,this._config.deviceCellWidth,G-z),this._tmpCtx.clip(Q),this._tmpCtx.moveTo(j-this._config.deviceCellWidth/2,U),this._tmpCtx.bezierCurveTo(j-this._config.deviceCellWidth/2,K,j,K,j,U),this._tmpCtx.bezierCurveTo(j,V,J,V,J,U),this._tmpCtx.bezierCurveTo(J,K,X,K,X,U),this._tmpCtx.bezierCurveTo(X,V,X+this._config.deviceCellWidth/2,V,X+this._config.deviceCellWidth/2,U);break;case 4:var Y=0===N?0:N>=F?2*F-N:F-N;!1==!(N>=F)||0===Y?(this._tmpCtx.setLineDash([Math.round(F),Math.round(F)]),this._tmpCtx.moveTo(j+Y,z)):(this._tmpCtx.setLineDash([Math.round(F),Math.round(F)]),this._tmpCtx.moveTo(j,z),this._tmpCtx.lineTo(j+Y,z),this._tmpCtx.moveTo(j+Y+F,z)),this._tmpCtx.lineTo(X,z),N=(0,h.computeNextVariantOffset)(X-j,F,N);break;case 5:var $=X-j,Z=Math.floor(.6*$),ee=Math.floor(.3*$),et=$-Z-ee;this._tmpCtx.setLineDash([Z,ee,et]),this._tmpCtx.moveTo(j,z),this._tmpCtx.lineTo(X,z);break;default:this._tmpCtx.moveTo(j,z),this._tmpCtx.lineTo(X,z)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!P&&this._config.fontSize>=12&&!this._config.allowTransparency&&" "!==l){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";var ei=this._tmpCtx.measureText(l);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in ei&&ei.actualBoundingBoxDescent>0){this._tmpCtx.save();var er=new Path2D;er.rect(E,z-Math.ceil(F/2),this._config.deviceCellWidth*O,G-z+Math.ceil(F/2)),this._tmpCtx.clip(er),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=R.css,this._tmpCtx.strokeText(l,E,E+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(m){var en=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),es=.5*(en%2==1);this._tmpCtx.lineWidth=en,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(E,E+es),this._tmpCtx.lineTo(E+this._config.deviceCharWidth*O,E+es),this._tmpCtx.stroke()}if(P||this._tmpCtx.fillText(l,E,E+this._config.deviceCharHeight),"_"===l&&!this._config.allowTransparency){var eo=n(this._tmpCtx.getImageData(E,E,this._config.deviceCellWidth,this._config.deviceCellHeight),R,B,I);if(eo)for(var ea=1;ea<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=R.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(l,E,E+this._config.deviceCharHeight-ea),eo=n(this._tmpCtx.getImageData(E,E,this._config.deviceCellWidth,this._config.deviceCellHeight),R,B,I));ea++);}if(x){var ec=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),el=.5*(this._tmpCtx.lineWidth%2==1);this._tmpCtx.lineWidth=ec,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(E,E+Math.floor(this._config.deviceCharHeight/2)-el),this._tmpCtx.lineTo(E+this._config.deviceCharWidth*O,E+Math.floor(this._config.deviceCharHeight/2)-el),this._tmpCtx.stroke()}this._tmpCtx.restore();var eh=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);if(this._config.allowTransparency?function(e){for(var t=0;t<e.data.length;t+=4)if(e.data[t+3]>0)return!1;return!0}(eh):n(eh,R,B,I))return p;for(var eu=this._findGlyphBoundingBox(eh,this._workBoundingBox,u,T,P,E);;){if(0===this._activePages.length){var ed=this._createNewPage();eg=ed,(eC=ed.currentRow).height=eu.size.y;break}eC=(eg=this._activePages[this._activePages.length-1]).currentRow;var ef=!0,ev=!1,e_=void 0;try{for(var eg,eC,ey,ep=this._activePages[Symbol.iterator]();!(ef=(ey=ep.next()).done);ef=!0){var ex=ey.value;eu.size.y<=ex.currentRow.height&&(eg=ex,eC=ex.currentRow)}}catch(e){ev=!0,e_=e}finally{try{ef||null==ep.return||ep.return()}finally{if(ev)throw e_}}for(var em=!0,ew=!1,eL=void 0,eb=this._activePages.length-1;eb>=0;eb--)try{for(var eS,eM=this._activePages[eb].fixedRows[Symbol.iterator]();!(em=(eS=eM.next()).done);em=!0){var ek=eS.value;ek.height<=eC.height&&eu.size.y<=ek.height&&(eg=this._activePages[eb],eC=ek)}}catch(e){ew=!0,eL=e}finally{try{em||null==eM.return||eM.return()}finally{if(ew)throw eL}}if(eC.y+eu.size.y>=eg.canvas.height||eC.height>eu.size.y+2){var eR=!1;if(eg.currentRow.y+eg.currentRow.height+eu.size.y>=eg.canvas.height){var eA=void 0,eD=!0,eT=!1,eB=void 0;try{for(var eE,eP=this._activePages[Symbol.iterator]();!(eD=(eE=eP.next()).done);eD=!0){var eO=eE.value;if(eO.currentRow.y+eO.currentRow.height+eu.size.y<eO.canvas.height){eA=eO;break}}}catch(e){eT=!0,eB=e}finally{try{eD||null==eP.return||eP.return()}finally{if(eT)throw eB}}if(eA)eg=eA;else if(e.maxAtlasPages&&this._pages.length>=e.maxAtlasPages&&eC.y+eu.size.y<=eg.canvas.height&&eC.height>=eu.size.y&&eC.x+eu.size.x<=eg.canvas.width)eR=!0;else{var eI=this._createNewPage();eg=eI,(eC=eI.currentRow).height=eu.size.y,eR=!0}}eR||(eg.currentRow.height>0&&eg.fixedRows.push(eg.currentRow),eC={x:0,y:eg.currentRow.y+eg.currentRow.height,height:eu.size.y},eg.fixedRows.push(eC),eg.currentRow={x:0,y:eC.y+eC.height,height:0})}if(eC.x+eu.size.x<=eg.canvas.width)break;eC===eg.currentRow?(eC.x=0,eC.y+=eC.height,eC.height=0):eg.fixedRows.splice(eg.fixedRows.indexOf(eC),1)}return eu.texturePage=this._pages.indexOf(eg),eu.texturePosition.x=eC.x,eu.texturePosition.y=eC.y,eu.texturePositionClipSpace.x=eC.x/eg.canvas.width,eu.texturePositionClipSpace.y=eC.y/eg.canvas.height,eu.sizeClipSpace.x/=eg.canvas.width,eu.sizeClipSpace.y/=eg.canvas.height,eC.height=Math.max(eC.height,eu.size.y),eC.x+=eu.size.x,eg.ctx.putImageData(eh,eu.texturePosition.x-this._workBoundingBox.left,eu.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,eu.size.x,eu.size.y),eg.addGlyph(eu),eg.version++,eu}},{key:"_findGlyphBoundingBox",value:function(e,t,i,r,n,s){t.top=0;for(var o=r?this._config.deviceCellHeight:this._tmpCanvas.height,a=r?this._config.deviceCellWidth:i,c=!1,l=0;l<o;l++){for(var h=0;h<a;h++){var u=l*this._tmpCanvas.width*4+4*h+3;if(0!==e.data[u]){t.top=l,c=!0;break}}if(c)break}t.left=0,c=!1;for(var d=0;d<s+a;d++){for(var f=0;f<o;f++){var v=f*this._tmpCanvas.width*4+4*d+3;if(0!==e.data[v]){t.left=d,c=!0;break}}if(c)break}t.right=a,c=!1;for(var _=s+a-1;_>=s;_--){for(var g=0;g<o;g++){var C=g*this._tmpCanvas.width*4+4*_+3;if(0!==e.data[C]){t.right=_,c=!0;break}}if(c)break}t.bottom=o,c=!1;for(var y=o-1;y>=0;y--){for(var p=0;p<a;p++){var x=y*this._tmpCanvas.width*4+4*p+3;if(0!==e.data[x]){t.bottom=y,c=!0;break}}if(c)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:t.right-t.left+1,y:t.bottom-t.top+1},sizeClipSpace:{x:t.right-t.left+1,y:t.bottom-t.top+1},offset:{x:-t.left+s+(r||n?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-t.top+s+(r||n?1===this._config.lineHeight?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}]),e}();var x=function(){function e(t,i,r){c._(this,e);var n=!0,o=!1,a=void 0;if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],r)try{for(var l,u,d=r[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var f=u.value;(l=this._glyphs).push.apply(l,v._(f.glyphs)),this._usedPixels+=f._usedPixels}}catch(e){o=!0,a=e}finally{try{n||null==d.return||d.return()}finally{if(o)throw a}}this.canvas=s(t,i,i),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}return l._(e,[{key:"percentageUsed",get:function(){return this._usedPixels/(this.canvas.width*this.canvas.height)}},{key:"glyphs",get:function(){return this._glyphs}},{key:"addGlyph",value:function(e){this._glyphs.push(e),this._usedPixels+=e.size.x*e.size.y}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}]),e}()},577:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==("undefined"==typeof Reflect?"undefined":_._(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var s=i(147),o=i(855),h=i(782),u=i(97);t.JoinedCellData=function(e){function t(e,i,r){var n;return c._(this,t),(n=a._(this,t)).content=0,n.combinedData="",n.fg=e.fg,n.bg=e.bg,n.combinedData=i,n._width=r,n}return d._(t,e),l._(t,[{key:"isCombined",value:function(){return 2097152}},{key:"getWidth",value:function(){return this._width}},{key:"getChars",value:function(){return this.combinedData}},{key:"getCode",value:function(){return 2097151}},{key:"setFromCharData",value:function(e){throw Error("not implemented")}},{key:"getAsCharData",value:function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}]),t}(s.AttributeData);var f=t.CharacterJoinerService=function(){function e(t){c._(this,e),this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new h.CellData}return l._(e,[{key:"register",value:function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}},{key:"deregister",value:function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}},{key:"getJoinedCharacters",value:function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var i=[],r=t.translateToString(!0),n=0,s=0,a=0,c=t.getFg(0),l=t.getBg(0),h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==c||this._workCell.bg!==l){if(h-n>1)for(var u=this._getJoinedRanges(r,a,s,t,n),d=0;d<u.length;d++)i.push(u[d]);n=h,a=s,c=this._workCell.fg,l=this._workCell.bg}s+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-n>1)for(var f=this._getJoinedRanges(r,a,s,t,n),v=0;v<f.length;v++)i.push(f[v]);return i}},{key:"_getJoinedRanges",value:function(t,i,r,n,s){var o=t.substring(i,r),a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(var c=1;c<this._characterJoiners.length;c++)try{for(var l=this._characterJoiners[c].handler(o),h=0;h<l.length;h++)e._mergeRanges(a,l[h])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,n,s),a}},{key:"_stringRangesToCellRanges",value:function(e,t,i){var r=0,n=!1,s=0,a=e[0];if(a){for(var c=i;c<this._bufferService.cols;c++){var l=t.getWidth(c),h=t.getString(c).length||o.WHITESPACE_CELL_CHAR.length;if(0!==l){if(!n&&a[0]<=s&&(a[0]=c,n=!0),a[1]<=s){if(a[1]=c,!(a=e[++r]))break;a[0]<=s?(a[0]=c,n=!0):n=!1}s+=h}}a&&(a[1]=this._bufferService.cols)}}}],[{key:"_mergeRanges",value:function(e,t){for(var i=!1,r=0;r<e.length;r++){var n=e[r];if(i){if(t[1]<=n[0])return e[r-1][1]=t[1],e;if(t[1]<=n[1])return e[r-1][1]=Math.max(t[1],n[1]),e.splice(r,1),e;e.splice(r,1),r--}else{if(t[1]<=n[0])return e.splice(r,0,t),e;if(t[1]<=n[1])return n[0]=Math.min(t[0],n[0]),e;t[0]<n[1]&&(n[0]=Math.min(t[0],n[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}}]),e}();t.CharacterJoinerService=r([n(0,u.IBufferService)],f)},160:function(e,t){var i,r,n,s,o,a,c=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},l=function(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)};Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;var h=0,u=0,d=0,v=0;t.NULL_COLOR={css:"#00000000",rgba:0},(i=r||(t.channels=r={})).toCss=function(e,t,i,r){return void 0!==r?"#".concat(c(e)).concat(c(t)).concat(c(i)).concat(c(r)):"#".concat(c(e)).concat(c(t)).concat(c(i))},i.toRgba=function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255;return(e<<24|t<<16|i<<8|r)>>>0},i.toColor=function(e,t,r,n){return{css:i.toCss(e,t,r,n),rgba:i.toRgba(e,t,r,n)}},function(e){function t(e,t){var i;return v=Math.round(255*t),h=(i=f._(a.toChannels(e.rgba),3))[0],u=i[1],d=i[2],{css:r.toCss(h,u,d,v),rgba:r.toRgba(h,u,d,v)}}e.blend=function(e,t){if(1==(v=(255&t.rgba)/255))return{css:t.css,rgba:t.rgba};var i=t.rgba>>24&255,n=t.rgba>>16&255,s=t.rgba>>8&255,o=e.rgba>>24&255,a=e.rgba>>16&255,c=e.rgba>>8&255;return h=o+Math.round((i-o)*v),u=a+Math.round((n-a)*v),d=c+Math.round((s-c)*v),{css:r.toCss(h,u,d),rgba:r.toRgba(h,u,d)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){var n=a.ensureContrastRatio(e.rgba,t.rgba,i);if(n)return r.toColor(n>>24&255,n>>16&255,n>>8&255)},e.opaque=function(e){var t,i=(255|e.rgba)>>>0;return h=(t=f._(a.toChannels(i),3))[0],u=t[1],d=t[2],{css:r.toCss(h,u,d),rgba:i}},e.opacity=t,e.multiplyOpacity=function(e,i){return v=255&e.rgba,t(e,v*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(n||(t.color=n={})),function(e){var t,i;try{var n=document.createElement("canvas");n.width=1,n.height=1;var s=n.getContext("2d",{willReadFrequently:!0});s&&((t=s).globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}catch(e){}e.toColor=function(e){if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return h=parseInt(e.slice(1,2).repeat(2),16),u=parseInt(e.slice(2,3).repeat(2),16),d=parseInt(e.slice(3,4).repeat(2),16),r.toColor(h,u,d);case 5:return h=parseInt(e.slice(1,2).repeat(2),16),u=parseInt(e.slice(2,3).repeat(2),16),d=parseInt(e.slice(3,4).repeat(2),16),v=parseInt(e.slice(4,5).repeat(2),16),r.toColor(h,u,d,v);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}var n,s=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return h=parseInt(s[1]),u=parseInt(s[2]),d=parseInt(s[3]),v=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),r.toColor(h,u,d,v);if(!t||!i||(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)||(t.fillRect(0,0,1,1),h=(n=f._(t.getImageData(0,0,1,1).data,4))[0],u=n[1],d=n[2],255!==(v=n[3])))throw Error("css.toColor: Unsupported css format");return{rgba:r.toRgba(h,u,d,v),css:e}}}(s||(t.css=s={})),function(e){function t(e,t,i){var r=e/255,n=t/255,s=i/255;return .2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(o||(t.rgb=o={})),function(e){function t(e,t,i){for(var r=e>>24&255,n=e>>16&255,s=e>>8&255,a=t>>24&255,c=t>>16&255,h=t>>8&255,u=l(o.relativeLuminance2(a,c,h),o.relativeLuminance2(r,n,s));u<i&&(a>0||c>0||h>0);)a-=Math.max(0,Math.ceil(.1*a)),c-=Math.max(0,Math.ceil(.1*c)),h-=Math.max(0,Math.ceil(.1*h)),u=l(o.relativeLuminance2(a,c,h),o.relativeLuminance2(r,n,s));return(a<<24|c<<16|h<<8|255)>>>0}function i(e,t,i){for(var r=e>>24&255,n=e>>16&255,s=e>>8&255,a=t>>24&255,c=t>>16&255,h=t>>8&255,u=l(o.relativeLuminance2(a,c,h),o.relativeLuminance2(r,n,s));u<i&&(a<255||c<255||h<255);)a=Math.min(255,a+Math.ceil(.1*(255-a))),c=Math.min(255,c+Math.ceil(.1*(255-c))),h=Math.min(255,h+Math.ceil(.1*(255-h))),u=l(o.relativeLuminance2(a,c,h),o.relativeLuminance2(r,n,s));return(a<<24|c<<16|h<<8|255)>>>0}e.blend=function(e,t){if(1==(v=(255&t)/255))return t;var i=e>>24&255,n=e>>16&255,s=e>>8&255;return h=i+Math.round(((t>>24&255)-i)*v),u=n+Math.round(((t>>16&255)-n)*v),d=s+Math.round(((t>>8&255)-s)*v),r.toRgba(h,u,d)},e.ensureContrastRatio=function(e,r,n){var s=o.relativeLuminance(e>>8),a=o.relativeLuminance(r>>8);if(l(s,a)<n){if(a<s){var c=t(e,r,n),h=l(s,o.relativeLuminance(c>>8));if(h<n){var u=i(e,r,n);return h>l(s,o.relativeLuminance(u>>8))?c:u}return c}var d=i(e,r,n),f=l(s,o.relativeLuminance(d>>8));if(f<n){var v=t(e,r,n);return f>l(s,o.relativeLuminance(v>>8))?d:v}return d}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}}(a||(t.rgba=a={})),t.toPaddedHex=c,t.contrastRatio=l},345:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.runAndSubscribe=t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=function(){function e(){c._(this,e),this._listeners=[],this._disposed=!1}return l._(e,[{key:"event",get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed){for(var i=0;i<e._listeners.length;i++)if(e._listeners[i]===t)return void e._listeners.splice(i,1)}}}}),this._event}},{key:"fire",value:function(e,t){for(var i=[],r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(var n=0;n<i.length;n++)i[n].call(void 0,e,t)}},{key:"dispose",value:function(){this.clearListeners(),this._disposed=!0}},{key:"clearListeners",value:function(){this._listeners&&(this._listeners.length=0)}}]),e}(),t.forwardEvent=function(e,t){return e(function(e){return t.fire(e)})},t.runAndSubscribe=function(e,t){return t(void 0),e(function(e){return t(e)})}},859:function(e,t){var i=function(e){var t=!0,i=!1,r=void 0;try{for(var n,s=e[Symbol.iterator]();!(t=(n=s.next()).done);t=!0)n.value.dispose()}catch(e){i=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}e.length=0};Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=function(){function e(){c._(this,e),this._disposables=[],this._isDisposed=!1}return l._(e,[{key:"dispose",value:function(){this._isDisposed=!0;var e=!0,t=!1,i=void 0;try{for(var r,n=this._disposables[Symbol.iterator]();!(e=(r=n.next()).done);e=!0)r.value.dispose()}catch(e){t=!0,i=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw i}}this._disposables.length=0}},{key:"register",value:function(e){return this._disposables.push(e),e}},{key:"unregister",value:function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}}]),e}(),t.MutableDisposable=function(){function e(){c._(this,e),this._isDisposed=!1}return l._(e,[{key:"value",get:function(){return this._isDisposed?void 0:this._value},set:function(e){var t;this._isDisposed||e===this._value||(null==(t=this._value)||t.dispose(),this._value=e)}},{key:"clear",value:function(){this.value=void 0}},{key:"dispose",value:function(){var e;this._isDisposed=!0,null==(e=this._value)||e.dispose(),this._value=void 0}}]),e}(),t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return i(e)}}}},485:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;var i=function(){function e(){c._(this,e),this._data={}}return l._(e,[{key:"set",value:function(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}},{key:"get",value:function(e,t){return this._data[e]?this._data[e][t]:void 0}},{key:"clear",value:function(){this._data={}}}]),e}();t.TwoKeyMap=i,t.FourKeyMap=function(){function e(){c._(this,e),this._data=new i}return l._(e,[{key:"set",value:function(e,t,r,n,s){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,n,s)}},{key:"get",value:function(e,t,i,r){var n;return null==(n=this._data.get(e,t))?void 0:n.get(i,r)}},{key:"clear",value:function(){this._data.clear()}}]),e}()},399:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode=void 0!==o.default&&"title"in o.default;var i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;var e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},385:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;var r=i(399),n=function(){function e(){c._(this,e),this._tasks=[],this._i=0}return l._(e,[{key:"enqueue",value:function(e){this._tasks.push(e),this._start()}},{key:"flush",value:function(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}},{key:"clear",value:function(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}},{key:"_start",value:function(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}},{key:"_process",value:function(e){this._idleCallback=void 0;for(var t=0,i=0,r=e.timeRemaining(),n=0;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,1.5*(i=Math.max(t=Math.max(1,Date.now()-t),i))>(n=e.timeRemaining()))return r-t<-20&&console.warn("task queue exceeded allotted deadline by ".concat(Math.abs(Math.round(r-t)),"ms")),void this._start();r=n}this.clear()}}]),e}(),s=function(e){function t(){return c._(this,t),a._(this,t,arguments)}return d._(t,e),l._(t,[{key:"_requestCallback",value:function(e){var t=this;return setTimeout(function(){return e(t._createDeadline(16))})}},{key:"_cancelCallback",value:function(e){clearTimeout(e)}},{key:"_createDeadline",value:function(e){var t=Date.now()+e;return{timeRemaining:function(){return Math.max(0,t-Date.now())}}}}]),t}(n);t.PriorityTaskQueue=s,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?function(e){function t(){return c._(this,t),a._(this,t,arguments)}return d._(t,e),l._(t,[{key:"_requestCallback",value:function(e){return requestIdleCallback(e)}},{key:"_cancelCallback",value:function(e){cancelIdleCallback(e)}}]),t}(n):s,t.DebouncedIdleTask=function(){function e(){c._(this,e),this._queue=new t.IdleTaskQueue}return l._(e,[{key:"set",value:function(e){this._queue.clear(),this._queue.enqueue(e)}},{key:"flush",value:function(){this._queue.flush()}}]),e}()},147:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0,t.AttributeData=function(){function e(){c._(this,e),this.fg=0,this.bg=0,this.extended=new i}return l._(e,[{key:"clone",value:function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}},{key:"isInverse",value:function(){return 0x4000000&this.fg}},{key:"isBold",value:function(){return 0x8000000&this.fg}},{key:"isUnderline",value:function(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:0x10000000&this.fg}},{key:"isBlink",value:function(){return 0x20000000&this.fg}},{key:"isInvisible",value:function(){return 0x40000000&this.fg}},{key:"isItalic",value:function(){return 0x4000000&this.bg}},{key:"isDim",value:function(){return 0x8000000&this.bg}},{key:"isStrikethrough",value:function(){return 0x80000000&this.fg}},{key:"isProtected",value:function(){return 0x20000000&this.bg}},{key:"isOverline",value:function(){return 0x40000000&this.bg}},{key:"getFgColorMode",value:function(){return 0x3000000&this.fg}},{key:"getBgColorMode",value:function(){return 0x3000000&this.bg}},{key:"isFgRGB",value:function(){return 0x3000000==(0x3000000&this.fg)}},{key:"isBgRGB",value:function(){return 0x3000000==(0x3000000&this.bg)}},{key:"isFgPalette",value:function(){return 0x1000000==(0x3000000&this.fg)||0x2000000==(0x3000000&this.fg)}},{key:"isBgPalette",value:function(){return 0x1000000==(0x3000000&this.bg)||0x2000000==(0x3000000&this.bg)}},{key:"isFgDefault",value:function(){return 0==(0x3000000&this.fg)}},{key:"isBgDefault",value:function(){return 0==(0x3000000&this.bg)}},{key:"isAttributeDefault",value:function(){return 0===this.fg&&0===this.bg}},{key:"getFgColor",value:function(){switch(0x3000000&this.fg){case 0x1000000:case 0x2000000:return 255&this.fg;case 0x3000000:return 0xffffff&this.fg;default:return -1}}},{key:"getBgColor",value:function(){switch(0x3000000&this.bg){case 0x1000000:case 0x2000000:return 255&this.bg;case 0x3000000:return 0xffffff&this.bg;default:return -1}}},{key:"hasExtendedAttrs",value:function(){return 0x10000000&this.bg}},{key:"updateExtended",value:function(){this.extended.isEmpty()?this.bg&=-0x10000001:this.bg|=0x10000000}},{key:"getUnderlineColor",value:function(){if(0x10000000&this.bg&&~this.extended.underlineColor)switch(0x3000000&this.extended.underlineColor){case 0x1000000:case 0x2000000:return 255&this.extended.underlineColor;case 0x3000000:return 0xffffff&this.extended.underlineColor}return this.getFgColor()}},{key:"getUnderlineColorMode",value:function(){return 0x10000000&this.bg&&~this.extended.underlineColor?0x3000000&this.extended.underlineColor:this.getFgColorMode()}},{key:"isUnderlineColorRGB",value:function(){return 0x10000000&this.bg&&~this.extended.underlineColor?0x3000000==(0x3000000&this.extended.underlineColor):this.isFgRGB()}},{key:"isUnderlineColorPalette",value:function(){return 0x10000000&this.bg&&~this.extended.underlineColor?0x1000000==(0x3000000&this.extended.underlineColor)||0x2000000==(0x3000000&this.extended.underlineColor):this.isFgPalette()}},{key:"isUnderlineColorDefault",value:function(){return 0x10000000&this.bg&&~this.extended.underlineColor?0==(0x3000000&this.extended.underlineColor):this.isFgDefault()}},{key:"getUnderlineStyle",value:function(){return 0x10000000&this.fg?0x10000000&this.bg?this.extended.underlineStyle:1:0}},{key:"getUnderlineVariantOffset",value:function(){return this.extended.underlineVariantOffset}}],[{key:"toColorRGB",value:function(e){return[e>>>16&255,e>>>8&255,255&e]}},{key:"fromColorRGB",value:function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}}]),e}();var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c._(this,e),this._ext=0,this._urlId=0,this._ext=t,this._urlId=i}return l._(e,[{key:"ext",get:function(){return this._urlId?-0x1c000001&this._ext|this.underlineStyle<<26:this._ext},set:function(e){this._ext=e}},{key:"underlineStyle",get:function(){return this._urlId?5:(0x1c000000&this._ext)>>26},set:function(e){this._ext&=-0x1c000001,this._ext|=e<<26&0x1c000000}},{key:"underlineColor",get:function(){return 0x3ffffff&this._ext},set:function(e){this._ext&=-0x4000000,this._ext|=0x3ffffff&e}},{key:"urlId",get:function(){return this._urlId},set:function(e){this._urlId=e}},{key:"underlineVariantOffset",get:function(){var e=(0xe0000000&this._ext)>>29;return e<0?0xfffffff8^e:e},set:function(e){this._ext&=0x1fffffff,this._ext|=e<<29&0xe0000000}},{key:"clone",value:function(){return new e(this._ext,this._urlId)}},{key:"isEmpty",value:function(){return 0===this.underlineStyle&&0===this._urlId}}]),e}();t.ExtendedAttrs=i},782:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var r=i(133),n=i(855),s=i(147);t.CellData=function(e){function t(){var e;return c._(this,t),e=a._(this,t,arguments),e.content=0,e.fg=0,e.bg=0,e.extended=new s.ExtendedAttrs,e.combinedData="",e}return d._(t,e),l._(t,[{key:"isCombined",value:function(){return 2097152&this.content}},{key:"getWidth",value:function(){return this.content>>22}},{key:"getChars",value:function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}},{key:"getCode",value:function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}},{key:"setFromCharData",value:function(e){this.fg=e[n.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(e[n.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[n.CHAR_DATA_CHAR_INDEX].length){var i=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var r=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[n.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[n.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[n.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[n.CHAR_DATA_WIDTH_INDEX]<<22)}},{key:"getAsCharData",value:function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}],[{key:"fromCharData",value:function(e){var i=new t;return i.setFromCharData(e),i}}]),t}(s.AttributeData)},855:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?String.fromCharCode(55296+((e-=65536)>>10))+String.fromCharCode(e%1024+56320):String.fromCharCode(e)},t.utf32ToString=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r="",n=t;n<i;++n){var s=e[n];s>65535?(s-=65536,r+=String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):r+=String.fromCharCode(s)}return r},t.StringToUtf32=function(){function e(){c._(this,e),this._interim=0}return l._(e,[{key:"clear",value:function(){this._interim=0}},{key:"decode",value:function(e,t){var i=e.length;if(!i)return 0;var r=0,n=0;if(this._interim){var s=e.charCodeAt(n++);56320<=s&&s<=57343?t[r++]=1024*(this._interim-55296)+s-56320+65536:(t[r++]=this._interim,t[r++]=s),this._interim=0}for(var o=n;o<i;++o){var a=e.charCodeAt(o);if(55296<=a&&a<=56319){if(++o>=i)return this._interim=a,r;var c=e.charCodeAt(o);56320<=c&&c<=57343?t[r++]=1024*(a-55296)+c-56320+65536:(t[r++]=a,t[r++]=c)}else 65279!==a&&(t[r++]=a)}return r}}]),e}(),t.Utf8ToUtf32=function(){function e(){c._(this,e),this.interim=new Uint8Array(3)}return l._(e,[{key:"clear",value:function(){this.interim.fill(0)}},{key:"decode",value:function(e,t){var i=e.length;if(!i)return 0;var r,n,s,o,a=0,c=0,l=0;if(this.interim[0]){var h=!1,u=this.interim[0];u&=192==(224&u)?31:224==(240&u)?15:7;for(var d,f=0;(d=63&this.interim[++f])&&f<4;)u<<=6,u|=d;for(var v=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,_=v-f;l<_;){if(l>=i)return 0;if(128!=(192&(d=e[l++]))){l--,h=!0;break}this.interim[f++]=d,u<<=6,u|=63&d}h||(2===v?u<128?l--:t[a++]=u:3===v?u<2048||u>=55296&&u<=57343||65279===u||(t[a++]=u):u<65536||u>1114111||(t[a++]=u)),this.interim.fill(0)}for(var g=i-4,C=l;C<i;){for(;!(!(C<g)||128&(r=e[C])||128&(n=e[C+1])||128&(s=e[C+2])||128&(o=e[C+3]));)t[a++]=r,t[a++]=n,t[a++]=s,t[a++]=o,C+=4;if((r=e[C++])<128)t[a++]=r;else if(192==(224&r)){if(C>=i)return this.interim[0]=r,a;if(128!=(192&(n=e[C++]))||(c=(31&r)<<6|63&n)<128){C--;continue}t[a++]=c}else if(224==(240&r)){if(C>=i)return this.interim[0]=r,a;if(128!=(192&(n=e[C++]))){C--;continue}if(C>=i)return this.interim[0]=r,this.interim[1]=n,a;if(128!=(192&(s=e[C++]))){C--;continue}if((c=(15&r)<<12|(63&n)<<6|63&s)<2048||c>=55296&&c<=57343||65279===c)continue;t[a++]=c}else if(240==(248&r)){if(C>=i)return this.interim[0]=r,a;if(128!=(192&(n=e[C++]))){C--;continue}if(C>=i)return this.interim[0]=r,this.interim[1]=n,a;if(128!=(192&(s=e[C++]))){C--;continue}if(C>=i)return this.interim[0]=r,this.interim[1]=n,this.interim[2]=s,a;if(128!=(192&(o=e[C++]))){C--;continue}if((c=(7&r)<<18|(63&n)<<12|(63&s)<<6|63&o)<65536||c>1114111)continue;t[a++]=c}}return a}}]),e}()},776:function(e,t,i){var r=this&&this.__decorate||function(e,t,i,r){var n,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==("undefined"==typeof Reflect?"undefined":_._(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,i,o):n(t,i))||o);return s>3&&o&&Object.defineProperty(t,i,o),o},n=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;var s,o=i(859),h=i(97),u={trace:h.LogLevelEnum.TRACE,debug:h.LogLevelEnum.DEBUG,info:h.LogLevelEnum.INFO,warn:h.LogLevelEnum.WARN,error:h.LogLevelEnum.ERROR,off:h.LogLevelEnum.OFF},f=t.LogService=function(e){function t(e){var i;return c._(this,t),(i=a._(this,t))._optionsService=e,i._logLevel=h.LogLevelEnum.OFF,i._updateLogLevel(),i.register(i._optionsService.onSpecificOptionChange("logLevel",function(){return i._updateLogLevel()})),s=i,i}return d._(t,e),l._(t,[{key:"logLevel",get:function(){return this._logLevel}},{key:"_updateLogLevel",value:function(){this._logLevel=u[this._optionsService.rawOptions.logLevel]}},{key:"_evalLazyOptionalParams",value:function(e){for(var t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}},{key:"_log",value:function(e,t,i){this._evalLazyOptionalParams(i),e.call.apply(e,[console,(this._optionsService.options.logger?"":"xterm.js: ")+t].concat(v._(i)))}},{key:"trace",value:function(e){for(var t,i,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this._logLevel<=h.LogLevelEnum.TRACE&&this._log(null!=(i=null==(t=this._optionsService.options.logger)?void 0:t.trace.bind(this._optionsService.options.logger))?i:console.log,e,n)}},{key:"debug",value:function(e){for(var t,i,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this._logLevel<=h.LogLevelEnum.DEBUG&&this._log(null!=(i=null==(t=this._optionsService.options.logger)?void 0:t.debug.bind(this._optionsService.options.logger))?i:console.log,e,n)}},{key:"info",value:function(e){for(var t,i,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this._logLevel<=h.LogLevelEnum.INFO&&this._log(null!=(i=null==(t=this._optionsService.options.logger)?void 0:t.info.bind(this._optionsService.options.logger))?i:console.info,e,n)}},{key:"warn",value:function(e){for(var t,i,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this._logLevel<=h.LogLevelEnum.WARN&&this._log(null!=(i=null==(t=this._optionsService.options.logger)?void 0:t.warn.bind(this._optionsService.options.logger))?i:console.warn,e,n)}},{key:"error",value:function(e){for(var t,i,r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];this._logLevel<=h.LogLevelEnum.ERROR&&this._log(null!=(i=null==(t=this._optionsService.options.logger)?void 0:t.error.bind(this._optionsService.options.logger))?i:console.error,e,n)}}]),t}(o.Disposable);t.LogService=f=r([n(0,h.IOptionsService)],f),t.setTraceLogger=function(e){s=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw Error("not supported");var r=i.value;i.value=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];if(s.logLevel!==h.LogLevelEnum.TRACE)return r.apply(this,t);s.trace("GlyphRenderer#".concat(r.name,"(").concat(t.map(function(e){return JSON.stringify(e)}).join(", "),")"));var n=r.apply(this,t);return s.trace("GlyphRenderer#".concat(r.name," return"),n),n}}},726:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;var i="di$target",r="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[r]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var n=function(e,t,s){if(3!=arguments.length)throw Error("@IServiceName-decorator can only be used to decorate a parameter");e[i]===e?e[r].push({id:n,index:s}):(e[r]=[{id:n,index:s}],e[i]=e)};return n.toString=function(){return e},t.serviceRegistry.set(e,n),n}},97:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var r,n,s=i(726);t.IBufferService=(0,s.createDecorator)("BufferService"),t.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),t.ICoreService=(0,s.createDecorator)("CoreService"),t.ICharsetService=(0,s.createDecorator)("CharsetService"),t.IInstantiationService=(0,s.createDecorator)("InstantiationService"),(r=n||(t.LogLevelEnum=n={}))[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF",t.ILogService=(0,s.createDecorator)("LogService"),t.IOptionsService=(0,s.createDecorator)("OptionsService"),t.IOscLinkService=(0,s.createDecorator)("OscLinkService"),t.IUnicodeService=(0,s.createDecorator)("UnicodeService"),t.IDecorationService=(0,s.createDecorator)("DecorationService")}},s={};function g(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return n[e].call(i.exports,i,i.exports,g),i.exports}var C={};return Object.defineProperty(C,"__esModule",{value:!0}),C.CanvasAddon=void 0,e=g(345),t=g(859),i=g(776),r=g(949),C.CanvasAddon=function(n){function s(){var t;return c._(this,s),t=a._(this,s,arguments),t._onChangeTextureAtlas=t.register(new e.EventEmitter),t.onChangeTextureAtlas=t._onChangeTextureAtlas.event,t._onAddTextureAtlasCanvas=t.register(new e.EventEmitter),t.onAddTextureAtlasCanvas=t._onAddTextureAtlasCanvas.event,t}return d._(s,n),l._(s,[{key:"textureAtlas",get:function(){var e;return null==(e=this._renderer)?void 0:e.textureAtlas}},{key:"activate",value:function(n){var s=this,o=n._core;if(!n.element)return void this.register(o.onWillOpen(function(){return s.activate(n)}));this._terminal=n;var a=o.coreService,c=o.optionsService,l=o.screenElement,h=o.linkifier,u=o._bufferService,d=o._renderService,f=o._characterJoinerService,v=o._charSizeService,_=o._coreBrowserService,g=o._decorationService,C=o._logService,y=o._themeService;(0,i.setTraceLogger)(C),this._renderer=new r.CanvasRenderer(n,l,h,u,v,c,f,a,_,g,y),this.register((0,e.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,e.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),d.setRenderer(this._renderer),d.handleResize(u.cols,u.rows),this.register((0,t.toDisposable)(function(){var e;d.setRenderer(s._terminal._core._createRenderer()),d.handleResize(n.cols,n.rows),null==(e=s._renderer)||e.dispose(),s._renderer=void 0}))}},{key:"clearTextureAtlas",value:function(){var e;null==(e=this._renderer)||e.clearTextureAtlas()}}]),s}(t.Disposable),C}()},"object"==_._(i)&&"object"==_._(t)?t.exports=s():"function"==typeof define&&define.amd?void 0!==(r=s())&&e.v(r):"object"==_._(i)?i.CanvasAddon=s():n.CanvasAddon=s()}]);

//# debugId=f1b93b36-225e-389c-cebd-ce343dc52953
//# sourceMappingURL=338e1009fa9652f2.js.map