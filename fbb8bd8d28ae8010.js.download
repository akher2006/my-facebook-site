;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="73d2ea43-2606-1654-d46f-4ba6e25a9af6")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,427802,e=>{"use strict";var r=e.i(904851),t=e.i(90659),n=e.i(700005),i=e.i(282453),s=function(){function e(){(0,r._)(this,e)}return(0,t._)(e,null,[{key:"get",value:function(e){return i.default.get(e,"string")||n.default.get(e)}},{key:"set",value:function(e,r){i.default.set(e,r),n.default.set(e,r)}},{key:"remove",value:function(e){i.default.remove(e),n.default.remove(e)}}]),e}();e.s(["default",()=>s])},441648,252890,751010,364839,285030,484059,e=>{"use strict";var r,t,n=e.i(346715),i=e.i(276385),s=e.i(761201),a=e.i(446530),o=e.i(613355),c=e.i(960178),u=e.i(625484),l=(0,a.cssRecord)({signupFormEmailDisclaimerContainer:[o.rcss.width("100%")],signupFormEmailDisclaimer:[o.rcss.color.brandText,o.rcss.font.brandVariable,o.brandStyles.typography.caption.small,o.rcss.textAlign.center,o.rcss.width("100%")],link:[o.rcss.color.foregroundDefault,{fontWeight:700,textDecoration:"none"}]});let d=function(){return(0,i.jsx)(u.View,{css:l.signupFormEmailDisclaimerContainer,children:(0,i.jsxs)(c.Text,{css:l.signupFormEmailDisclaimer,children:["By continuing, you agree to Replit's",(0,i.jsx)("br",{}),(0,i.jsx)("a",{css:l.link,href:s.LINKS_LEGAL.TERMS_OF_SERVICE,target:"_blank",children:"Terms of Service"})," ","and"," ",(0,i.jsx)("a",{css:l.link,href:s.LINKS_LEGAL.PRIVACY_POLICY,target:"_blank",children:"Privacy Policy"})]})})};var g=e.i(878420),m=e.i(427802),p=e.i(858248),h=e.i(709485),f=function(e){var r=m.default.get("gfa_ref")||void 0,t=m.default.get("gfa_campaign")||void 0,n=m.default.get("gfa_landed_on")||void 0;(0,p.identify)({id:e,firstAcquisitionSource:r,firstAcquisitionCampaign:t,firstAcquisitionLandedOn:n})},v=function(e){var r=e.isLogin,t=e.authFormPlacement;(0,p.track)(h.events.AUTH_FORM_MODE_TOGGLED,r?{from:"login",to:"signup",authFormPlacement:t}:{from:"signup",to:"login",authFormPlacement:t})},y=function(e){var r=e.from,t=e.location,n=e.authFormPlacement,i=e.extras;(0,p.track)(h.events.LOGIN_REQUESTED,(0,g._)({from:r,location:t,authFormPlacement:n},void 0===i?{}:i))},w=function(e){var r=e.from,t=e.location,n=e.authFormPlacement,i=e.extras;(0,p.track)(h.events.SIGNUP_REQUESTED,(0,g._)({from:r,location:t,authFormPlacement:n},void 0===i?{}:i))};e.s(["attributeAcquisition",()=>f,"trackLoginView",()=>y,"trackSignupView",()=>w,"trackToggleAuth",()=>v],252890);var x=e.i(187505),_=e.i(480028),b=e.i(988676),C=[o.rcss.align.center,o.rcss.colWithGap(16)],S=(0,a.cssRecord)({footerLinkWrapper:[o.brandStyles.typography.caption.small,o.rcss.textAlign.center],footerLink:[o.brandStyles.typography.caption.small,o.rcss.color.brandAccentStrongest,{":hover":{color:_.tokens.brandAccentStronger,backgroundColor:"transparent"}}],footerContainerNotModal:(0,n._)(C).concat([o.rcss.bottom(24)]),footerContainerModal:(0,n._)(C).concat([o.rcss.pt(24)]),heightWrapper:[o.rcss.height(132)],recaptchaDisclaimer:[o.rcss.textAlign.center,o.brandStyles.typography.caption.small,o.rcss.color.foregroundDimmest,{"& > a":{color:"inherit",textDecoration:"underline"},"& > a:hover":{textDecoration:"none"}}]}),k=function(e){var r=e.mode,t=e.isModal,n=e.onModeChange,s=e.className,a=e.appName,o=(0,x.useTrackClick)().trackClick,u=function(e){e.preventDefault(),o({productArea:"auth",target:"login"===r?"sign_up_button":"log_in_button"}),v({isLogin:"login"===r,authFormPlacement:t?"modal":"auth-page"}),n("login"===r?"signup":"login")};return(0,i.jsxs)(c.Text,{css:S.footerLinkWrapper,className:s,variant:"small",multiline:!1,children:["login"===r?"New to ".concat(a||"Replit","? "):"Already have an account? ",(0,i.jsx)("a",{role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&u(e)},onClick:function(e){return u(e)},css:S.footerLink,children:"login"===r?"Sign up":"Log in"})]})},P=function(){return(0,i.jsxs)(c.Text,{variant:"small",color:"dimmest",css:S.recaptchaDisclaimer,children:["This site is protected by reCAPTCHA Enterprise and the Google"," ",(0,i.jsx)("a",{href:"https://policies.google.com/privacy",children:"Privacy Policy"})," and"," ",(0,i.jsx)("a",{href:"https://policies.google.com/terms",children:"Terms of Service"})," apply."]})};e.s(["AuthTypeToggle",()=>k,"default",0,function(e){var r=e.isModal,t=e.mode,n=e.onModeChange,s=r?void 0:S.heightWrapper;return(0,i.jsx)(u.View,{css:s,children:(0,i.jsxs)(u.View,{css:r?S.footerContainerModal:S.footerContainerNotModal,children:[(0,i.jsx)(b.DividerH,{}),"signup"===t?(0,i.jsx)(u.View,{pb:24,children:(0,i.jsx)(d,{})}):null,(0,i.jsx)(k,{mode:t,isModal:r,onModeChange:n}),(0,i.jsx)(u.View,{row:!0,gap:16,align:"center",children:(0,i.jsx)(c.Text,{css:S.footerLinkWrapper,variant:"small",multiline:!1,children:(0,i.jsx)("a",{href:"https://replit.com/help",target:"_blank",rel:"noopener noreferrer",css:S.footerLink,children:"Get help"})})}),(0,i.jsx)(P,{})]})})}],441648);var j=(0,a.cssRecord)({self:[o.rcss.font.brandDefault,{fontWeight:512,fontSize:24,lineHeight:32/24}]});e.s(["default",0,function(e){var r=e.mode,t=e.privateDeployment,n=e.privateDevDomain,s="Create a Replit account";return"login"===r&&(s="Log in to your account"),t&&(s="Log in to access a private website"),n&&(s="Log in to access a private app"),(0,i.jsx)(c.Header,{variant:"headerDefault",level:1,css:j.self,children:s})}],751010);var I=e.i(439725),E=e.i(297083),T=e.i(530658),L=e.i(817556),A=e.i(931849),R=e.i(389959),U=e.i(906368),F=e.i(64386),D=e.i(571926),M=e.i(344188),O=function(e){if(e.isLoggedIn){var r;(0,p.identify)((0,F._)((0,g._)({id:e.id.toString(),email:e.email,roles:e.roles,verified:e.isVerified,emailPreference:e.emailNotifications,createdAt:e.timeCreated},!!e.loginMethod&&{loginMethod:e.loginMethod}),{signupMethod:null!=(r=e.signupMethod)?r:D.NONE_IDENTIFY_PROP}))}},V=e.i(738623),W=e.i(414248),G=e.i(278598),B=e.i(700005);function H(e){var r=e.redirectUrl,t=B.default.get("shouldUseMobileAppAuthComplete");return"string"!=typeof t||t.length<1?r:"/authComplete?redirectUrl=".concat(encodeURI(r))}e.s(["default",()=>H],364839);var N=e.i(294426),z=e.i(501005),q=e.i(441329),Q=e.i(612372),K=e.i(887877),Y=e.i(782514),X=e.i(616278),$=e.i(940745),J=(0,a.cssRecord)({form:[o.rcss.colWithGap(8),o.rcss.width("100%")],secondaryAction:[o.rcss.width("100%"),o.rcss.textAlign.center,o.brandStyles.typography.caption.medium,o.rcss.color.brandAccentStrongest,{":hover":{color:_.tokens.brandAccentStronger,backgroundColor:"transparent"}}]});function Z(e){var r=e.onSubmit,t=e.trackSource,n=e.footer,s=e.emailField,a=(0,T._)((0,R.useState)(!1),2),o=a[0],c=a[1],l=(0,T._)((0,R.useState)(!1),2),d=l[0],m=l[1],f=(0,T._)((0,R.useState)(""),2),v=f[0],y=f[1],w=(0,A.useRouter)(),x=(0,Y.useTrackingHierarchy)().surface,_=function(e){var n=e.emailOrUsername,i=e.password;return(0,E._)(function(){var e,s,a,o,u;return(0,L._)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,N.getRecaptchaToken)({action:"signInWithPassword"})];case 1:return e=l.sent(),[3,3];case 2:return l.sent(),[2,{fallthrough:!0}];case 3:return[4,(0,V.signInWithPassword)({emailOrUsername:n,rawPassword:i,clientType:"CLIENT_TYPE_WEB",recaptchaToken:e})];case 4:if("error"===(s=l.sent()).type)return m(!1),c(!1),r({error:s.message}),[2,{fallthrough:!1}];return[4,(0,N.setUserFromApiResponse)({response:s.session})];case 5:if("error"===(a=l.sent()).type)return m(!1),c(!1),r({error:a.message}),[2,{fallthrough:!1}];return[4,(0,V.setCookie)(a.user,{source:t})];case 6:return"success"===(o=l.sent()).type?(c(!1),m(!0),u=o.redirectUrl?H({redirectUrl:o.redirectUrl}):void 0,(0,G.saveLastLoginMethod)("password"),r({user:{id:o.userId,postLoginRedirectUrl:u},isLogin:!0})):(m(!1),c(!1),r({error:o.message,reauth:o.reauth})),[2,{fallthrough:!1}]}})})()};return(0,i.jsxs)(K.Form,{onSubmit:function(e){return(0,E._)(function(){return(0,L._)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),o)return[2];return(0,p.track)(h.events.AUTH_FORM_SUBMITTED,{mode:"login",method:"password",surface:x}),c(!0),[4,_({emailOrUsername:s.value,password:v})];case 1:if(!t.sent().fallthrough)return[3,3];return[4,(0,E._)(function(){var e,t,n,i,a;return(0,L._)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,z.default)(void 0,function(){(0,p.track)(h.events.AUTH_FORM_CAPTCHA_TRIGGERED,{authenticationType:"login"})})];case 1:return e=o.sent(),[3,3];case 2:return t=o.sent(),U.captureException(t,function(e){return e.setTag("bonsai",(0,q.isInNativeMobileAuthFlow)(w))}),r({error:"Something went wrong trying to submit. Please try again."}),c(!1),[2];case 3:return[4,function(e){return(0,E._)(function(e){var r,t,n,i,s,a,o,c,u,l;return(0,L._)(this,function(d){switch(d.label){case 0:r=e.username,t=e.password,n=e.teacher,i=e.hCaptchaResponse,s=e.hCaptchaSiteKey,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,(0,M.postJson)("/login",(0,F._)((0,g._)({username:r,password:t},n?{teacher:n}:{}),{hCaptchaResponse:i,hCaptchaSiteKey:s}))];case 2:return a=d.sent(),[3,4];case 3:return(null==(u=(l=o=d.sent()).extras)||null==(c=u.responseData)?void 0:c.status)===401&&(o.status=l.extras.responseData.status),[2,{isLoggedIn:!1,error:o}];case 4:return O(a),[2,a]}})}).apply(this,arguments)}({username:s.value,password:v,hCaptchaResponse:e,hCaptchaSiteKey:z.HCAPTCHA_SITE_KEY})];case 4:if("error"in(n=o.sent())){if(i=n.error,c(!1),r({error:i.message||"Something went wrong"}),i.status&&i.status>=500)throw i;return[2]}return a=n.postLoginRedirectUrl?H({redirectUrl:n.postLoginRedirectUrl}):void 0,(0,G.saveLastLoginMethod)("password"),r({user:{id:n.id,postLoginRedirectUrl:a},isLogin:!0}),[2]}})})()];case 2:t.sent(),t.label=3;case 3:return[2]}})})()},css:J.form,children:[(0,i.jsx)(W.default,{type:"text",label:"Email or username",name:"username",value:s.value,onChange:s.setValue,autoComplete:"email"}),(0,i.jsx)(W.default,{type:"password",label:"Password",name:"password",value:v,onChange:y}),(0,i.jsxs)(u.View,{gap:n?8:24,children:[(0,i.jsx)(Q.default,{type:"submit",variant:"primary",stretch:!0,loading:o,disabled:!v||!s.value||d,iconRight:o?(0,i.jsx)($.default,{}):d?(0,i.jsx)(X.default,{}):void 0,dataCy:"log-in-btn",text:"Log In"}),n||(0,i.jsx)(Q.default,{variant:"clean",css:J.secondaryAction,onClick:function(){window.location.href="/forgot"},text:"Forgot password?"}),!1]})]})}e.s(["default",()=>Z],285030);var ee=e.i(664152),er=((r={})[r.Loaded=0]="Loaded",r[r.Skipped=1]="Skipped",r[r.Failed=2]="Failed",r),et="https://elements.stytch.com/telemetry.js";function en(){return"true"===I.default.env.IS_CYPRESS_AUTOMATED_TEST}var ei=window.location.pathname;function es(e){return(0,E._)(function(){var r;return(0,L._)(this,function(n){switch(n.label){case 0:var i;return n.trys.push([0,2,,3]),[4,Promise.race([(i=e,(0,E._)(function(){var e,r;return(0,L._)(this,function(n){switch(n.label){case 0:return[4,(0,E._)(function(){return(0,L._)(this,function(e){switch(e.label){case 0:if(en())return[2,1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,t];case 2:return e.sent(),[2,0];case 3:return e.sent(),[2,2];case 4:return[2]}})})()];case 1:if(n.sent()!==er.Loaded)return[2];return e=window.location.host.startsWith("staging")?"public-token-test-f16841f0-b961-4442-93b3-751c8cfe0d8b":"public-token-live-88edc789-05cb-440a-a321-dab99f475524",[4,window.GetTelemetryID(e,"https://telemetry.replit.com/submit")];case 2:if(!(r=n.sent())||""===r.trim())return ee.logger.error("Client received an empty telemetryId",{userId:i}),[2];return ee.logger.info("Successfully received the telemetryId from Stytch ".concat(r),{telemetryId:r,userId:i}),[4,fetch("/telemetry",{method:"GET",headers:{"Content-Type":"application/json","telemetry-id":r,"user-id":i}})];case 3:return n.sent(),[2]}})})()),new Promise(function(e,r){return setTimeout(function(){return r(Error("Could not process device fingerprint in 4s"))},4e3)})])];case 1:return n.sent(),[3,3];case 2:return r=n.sent(),ee.logger.error("Error fetching device fingerprint data ".concat(r.message)),[2,"N/A"];case 3:return[2]}})})()}!en()&&["/signup","/login"].some(function(e){return ei.startsWith(e)})&&(0,E._)(function(){var e,r,n;return(0,L._)(this,function(i){return e=performance.now(),(r=document.createElement("script")).src=et,r.async=!0,n=new Promise(function(e){setTimeout(function(){ee.logger.error("Timeout while loading Stytch script"),e()},4e3)}),t=Promise.race([new Promise(function(t){r.onload=function(){var r=performance.now();ee.logger.time("time to load Stytch script",r-e),t()},r.onerror=function(){ee.logger.error("Error loading Stytch script at ".concat(et)),t()},document.head.appendChild(r)}),n]),[2]})})().catch(function(e){return U.captureException(e)}),e.s(["callDeviceFingerprinting",()=>es],484059)},127060,e=>{"use strict";var r=e.i(878420),t={signup:"68d1cdc1ca209329fe9a53f8",payment:"68d1cdeb7c0bfc7f9cc1ebe0"};function n(e,n){var i=t[e];i?function(e,t,n){if(!t)return console.warn("Invalid metric ID for event type: ".concat(e));window.CFQ=window.CFQ||[];var i={emit:e,payload:(0,r._)({metricId:t},n?{metadata:n}:{})};window.CFQ.push(i)}("conversion",i,n):console.warn("Unknown conversion metric: ".concat(e))}e.s(["sendCoframeConversionEvent",()=>n])},108369,832970,683743,149797,661922,961418,969761,e=>{"use strict";var r,t=e.i(878420),n=e.i(530658),i=e.i(276385),s=e.i(389959),a=e.i(738623),o=e.i(441648),c=e.i(751010),u=e.i(285030),l=e.i(273325),d=e.i(294426);e.i(439725);var g=e.i(297083),m=e.i(817556),p=e.i(414248),h=e.i(278598),f=e.i(364839),v=e.i(322823),y=e.i(978486),w=e.i(484059),x=e.i(858248),_=e.i(709485),b=e.i(746788),C=e.i(446530),S=e.i(613355),k=e.i(612372),P=e.i(140487),j=e.i(625484),I=e.i(127060),E=e.i(782514),T=e.i(616278),L=e.i(940745);function A(e){return e.error?[{message:e.error.message,state:"error"}]:e.warning?[{message:e.warning.message,state:"warning"}]:e.value?e.isValid?[{message:"",state:"success"}]:e.touched?[{message:"",state:"loading"}]:void 0:void 0}var R=(0,C.cssRecord)({form:[S.rcss.width("100%")]});function U(e){var r=e.onSubmit,t=e.tracking,o=void 0===t?{from:"explicit"}:t,c=e.emailField,u=(0,n._)((0,s.useState)(!1),2),l=u[0],C=u[1],S=(0,n._)((0,s.useState)(!1),2),P=S[0],U=S[1],F=(0,E.useTrackingHierarchy)().surface,D=(0,v.useFormField)("",b.default.password),M=(0,y.useGetAgentQueryPrompt)().directQueryPrompt,O=!c.value;return(0,i.jsx)("form",{onSubmit:function(e){return(0,g._)(function(){var t,n,i,s,u;return(0,m._)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),(0,x.track)(_.events.AUTH_FORM_SUBMITTED,{mode:"signup",method:"password",surface:F}),C(!0),c.isValid)return[3,2];return[4,c.validate()];case 1:if(l.sent())return C(!1),[2];l.label=2;case 2:if(!D.isValid&&D.validate())return C(!1),[2];l.label=3;case 3:return l.trys.push([3,5,,6]),[4,(0,d.getRecaptchaToken)({action:"signUpPassword"})];case 4:return t=l.sent(),[3,6];case 5:return l.sent(),r({error:"We failed to evaluate your browser integrity. Please refresh the page and try again. If the problem persists, check your browser and network configuration."}),[2];case 6:return[4,(0,a.signUpWithPassword)({email:c.value,rawPassword:D.value,clientType:"CLIENT_TYPE_WEB",recaptchaToken:t,source:o.from,referrerId:o.referrerId,aiPrompt:M||void 0})];case 7:if("error"===(n=l.sent()).type)return U(!1),C(!1),r({error:n.message}),[2];return[4,(0,d.setUserFromApiResponse)({response:n.session})];case 8:if("error"===(i=l.sent()).type)return U(!1),C(!1),r({error:i.message}),[2];return[4,(0,a.setCookie)(i.user,{source:o.from,referrerId:o.referrerId})];case 9:if("success"===(s=l.sent()).type)return[3,10];return[3,12];case 10:return C(!1),U(!0),[4,(0,w.callDeviceFingerprinting)(s.userId.toString())];case 11:return l.sent(),u=s.redirectUrl?(0,f.default)({redirectUrl:s.redirectUrl}):void 0,(0,I.sendCoframeConversionEvent)("signup"),(0,h.saveLastLoginMethod)("password"),r({user:{id:s.userId,postLoginRedirectUrl:u},isLogin:!1}),[3,13];case 12:return U(!1),C(!1),r({error:s.message,reauth:s.reauth}),[3,13];case 13:return[2]}})})()},css:R.form,children:(0,i.jsxs)(j.View,{css:R.form,gap:8,children:[(0,i.jsx)(p.default,{type:"text",name:"email",label:"Email",onBlur:c.handleBlur,validationResults:A(c),onChange:c.setValue,value:c.value,autoComplete:"email"}),(0,i.jsx)(p.default,{type:"password",label:"Password",name:"password",onBlur:D.handleBlur,validationResults:A(D),onChange:D.setValue,value:D.value}),(0,i.jsx)(j.View,{gap:4,children:(0,i.jsx)(k.default,{type:"submit",variant:"primary",stretch:!0,loading:l,disabled:!D.value||O||P,iconLeft:l?(0,i.jsx)(L.default,{}):P?(0,i.jsx)(T.default,{}):void 0,dataCy:"signup-create-account",text:"Create Account"})}),null]})})}e.s(["default",()=>U],832970);var F=e.i(721281),D=e.i(886513),M=e.i(694387),O=e.i(173703),V=e.i(624782),W=e.i(848295),G=e.i(606265),B=e.i(523579),H=e.i(472859),N=e.i(690472),z=(0,C.cssRecord)({ssoButton:[S.rcss.backgroundColor.brandBackgroundDarker,S.rcss.minHeight(40)],ssoButtonWrapper:[S.rcss.position.relative,S.rcss.width("100%")],lastUsedPill:[S.rcss.position.absolute,{top:0,right:0,transform:"translate(0, -50%)",pointerEvents:"none"}]}),q=(r={},(0,F._)(r,M.AppleProviderId,W.default),(0,F._)(r,M.FacebookProviderId,G.default),(0,F._)(r,M.GitHubProviderId,B.default),(0,F._)(r,M.GoogleProviderId,H.default),(0,F._)(r,M.XProviderId,N.default),r),Q=function(e){var r=q[e.id];return r?(0,i.jsx)(r,{size:20}):null},K=function(e){var r=e.onClick,n=e.iconLeft,s=e.text,a=e.customCss,o=e.showLastUsed,c=e.loading,u=(0,D._)(e,["onClick","iconLeft","text","customCss","showLastUsed","loading"]),l=a?[z.ssoButton,a]:z.ssoButton,d=c?(0,i.jsx)(L.default,{size:20}):n;if((0,O.useIsShadesSurfaceChild)()){u.children,u.size;var g=(0,D._)(u,["children","size"]);return(0,i.jsxs)(j.View,{css:z.ssoButtonWrapper,children:[(0,i.jsx)(P.Button,(0,t._)({style:{minHeight:40},variant:"default",onClick:r,stretch:!0,iconLeft:d,text:s,loading:c},g)),o?(0,i.jsx)(V.Pill,{text:"Last used",variant:"filled",compact:!0,colorway:"grey",css:z.lastUsedPill}):null]})}return(0,i.jsxs)(j.View,{css:z.ssoButtonWrapper,children:[(0,i.jsx)(k.default,(0,t._)({css:l,variant:"secondary",onClick:r,stretch:!0,iconLeft:d,text:s,loading:c},u)),o?(0,i.jsx)(V.Pill,{text:"Last used",variant:"filled",compact:!0,css:z.lastUsedPill}):null]})};e.s(["SsoButton",()=>K,"SsoIcon",()=>Q],683743);var Y=e.i(346715),X=e.i(187505),$=e.i(355744),J=(0,C.cssRecord)({minimizedSection:[S.rcss.gap(8)],showMoreButton:[S.rcss.py(6)]}),Z=[M.GoogleProviderId,M.GitHubProviderId,M.XProviderId,M.AppleProviderId],ee=(0,Y._)(Z).concat([M.FacebookProviderId]);function er(e){var r=e.mode,t=e.onRedirectingChange,a=e.onSubmit,o=e.onEmailClick,c=e.replitAuthProps,u=e.additionalOptions,l=(0,X.useTrackClick)().trackClick,p=(0,n._)((0,s.useState)(!1),2),h=p[0],f=p[1],v=(0,s.useMemo)(function(){var e;return null!=(e=null==c?void 0:c.minimizedProviders)?e:[]},[c]),y=v.includes("email"),w="login"===r?ee:Z,b=(0,s.useMemo)(function(){var e=function(e){return!!c&&"facebook.com"===e},r=w.filter(function(r){return v.includes(r.replace(".com",""))&&!e(r)}),t=w.filter(function(t){return!r.includes(t)&&!e(t)});return 0===t.length&&r.length>0&&(t.push.apply(t,(0,Y._)(r)),r.length=0),{primaryProviders:t,minimizedProvidersList:r}},[w,v,c]),C=b.primaryProviders,S=b.minimizedProvidersList;return(0,i.jsxs)(i.Fragment,{children:[(0,Y._)(C).concat((0,Y._)(h?S:[])).map(function(e){return(0,i.jsx)(K,{text:"Continue with ".concat((0,M.getOAuthProviderName)(e)),iconLeft:(0,i.jsx)(Q,{id:e}),customCss:null==c?void 0:c.ssoButtonCss,onClick:function(){if("facebook.com"===e){window.confirm('Facebook login is no longer supported. Click "Ok" to continue to password reset using the connected email address.')&&(window.location.href="/forgot");return}(0,g._)(function(){var n;return(0,m._)(this,function(i){switch(i.label){case 0:return n=e.replace(".com",""),l({productArea:"auth",target:"continue_with_".concat(n,"_button")}),(0,x.track)(_.events.AUTH_FORM_SSO_REQUESTED,{provider:n,authenticationType:r,isTeacher:"false"}),[4,t(!0)];case 1:return i.sent(),[4,(0,d.signInWithProvider)({tenantId:void 0,provider:{type:"oauth",providerId:e}})];case 2:return"error"===i.sent().type&&a({error:d.signInWithProviderErrorMessage}),[2]}})})()}},e)}),c?(0,i.jsx)(K,{onClick:o,iconLeft:(0,i.jsx)($.default,{}),text:"Continue with email",customCss:null==c?void 0:c.ssoButtonCss}):null,u,(S.length>0||y)&&!h&&(0,i.jsx)(j.View,{css:J.minimizedSection,children:(0,i.jsx)(P.Button,{onClick:function(){l({productArea:"auth",target:"more_options_button"}),f(!0)},css:J.showMoreButton,variant:"underlinedOnHover",colorway:"grey",stretch:!0,text:"More options"})})]})}e.s(["SsoOptionsList",()=>er,"oauthLoginProviders",()=>ee,"oauthSignupProviders",()=>Z],149797);var et=e.i(252890),en=e.i(480028),ei=e.i(988676),es=e.i(960178),ea=e.i(216373),eo=e.i(245150),ec=(0,C.cssRecord)({mainControls:[S.rcss.width("100%"),S.rcss.px(12)],ssoContainer:[S.rcss.width("100%"),S.rcss.colWithGap(8)],samlLoginForm:[S.rcss.width("100%"),S.rcss.pb(32)],orText:[S.rcss.fontSize(en.tokens.fontSizeSmall)]});function eu(e){var r=e.mode,t=e.onRedirectingChange,n=e.onModeChange,s=e.onSubmit,a=e.tracking,c=e.seededEmail,u=e.isModal;return(0,i.jsxs)(i.Fragment,{children:["login"===r?(0,i.jsx)(el,{onRedirectingChange:t,onSubmit:s,tracking:a}):(0,i.jsx)(ed,{onRedirectingChange:t,onSubmit:s,seededEmail:c,tracking:a}),(0,i.jsx)(o.default,{mode:r,isModal:u,onModeChange:n})]})}var el=function(e){var r=e.onRedirectingChange,t=e.onSubmit,a=e.tracking,o=e.replitAuthProps,c=(0,n._)((0,s.useState)("password"),2),d=c[0],g=c[1],m=(0,v.useFormField)("",b.default.isValidEmail);return(0,i.jsxs)(i.Fragment,{children:["password"===d?(0,i.jsx)(u.default,{onSubmit:t,trackSource:a.from,emailField:m}):null,"saml"===d?(0,i.jsx)(j.View,{css:ec.samlLoginForm,children:(0,i.jsx)(l.default,{onSubmit:t,mode:"login",onRedirectingChange:r,seededEmail:m.value})}):null,(0,i.jsxs)(j.View,{css:ec.ssoContainer,children:[(0,i.jsx)(eg,{emailLoginType:d,setEmailLoginType:g}),(0,i.jsx)(er,{mode:"login",onRedirectingChange:r,onSubmit:t,replitAuthProps:o})]})]})},ed=function(e){var r=e.onRedirectingChange,t=e.onSubmit,a=e.seededEmail,o=e.tracking,c=(0,n._)((0,s.useState)("initial"),2),u=c[0],d=c[1],g=(0,v.useFormField)(a||"",b.default.email);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(j.View,{css:ec.ssoContainer,align:"center",children:[(0,i.jsx)(er,{mode:"signup",onRedirectingChange:r,onSubmit:t}),"initial"===u?(0,i.jsx)(es.Text,{css:ec.orText,children:"Or"}):(0,i.jsx)(ei.DividerH,{}),(0,i.jsx)(eg,{emailLoginType:u,setEmailLoginType:d})]}),"password"===u?(0,i.jsx)(U,{onSubmit:t,seededEmail:a,tracking:o,emailField:g}):null,"saml"===u?(0,i.jsx)(l.default,{onSubmit:t,mode:"signup",onRedirectingChange:r,seededEmail:g.value}):null]})},eg=function(e){var r=e.emailLoginType,t=e.setEmailLoginType,n=(0,X.useTrackClick)().trackClick;return"password"===r?(0,i.jsx)(K,{onClick:function(){n({productArea:"auth",target:"switch_to_sso_button"}),t("saml")},iconLeft:(0,i.jsx)(ea.default,{size:20}),text:"Use SSO login"}):"saml"===r?(0,i.jsx)(K,{onClick:function(){n({productArea:"auth",target:"switch_to_email_button"}),t("password")},iconLeft:(0,i.jsx)(eo.default,{size:20}),text:"Use email login"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.default,{dataCy:"auth-form-reveal-email",onClick:function(){n({productArea:"auth",target:"email_and_password_button"}),t("password")},iconLeft:(0,i.jsx)($.default,{size:20}),text:"Email & password",variant:"tertiary",stretch:!0}),(0,i.jsx)(k.default,{onClick:function(){n({productArea:"auth",target:"sso_button"}),t("saml")},iconLeft:(0,i.jsx)(ea.default,{size:20}),text:"Single sign-on (SSO)",variant:"tertiary",stretch:!0})]})};e.s(["default",0,function(e){var r=e.children,n=e.customHeader,o=e.isModal,u=e.mode,l=e.onRedirectingChange,g=e.onSubmit,m=e.initialTenantId,p=e.tracking,h=e.privateDeployment,f=e.privateDevDomain,v=e.renderForm;return(0,s.useEffect)(function(){var e,r,t=o?"modal":"auth-page";"login"===u?(0,et.trackLoginView)({from:p.from,location:null!=(e=p.location)?e:"",authFormPlacement:t}):(0,et.trackSignupView)({from:p.from,location:null!=(r=p.location)?r:"",authFormPlacement:t})},[u,o,p.from,p.location]),(0,s.useEffect)(function(){void 0!==m&&(l(!0),(0,a.getAuthTenant)({type:"tenantId",tenantId:m}).then(function(e){"error"===e.type?g({error:e.message}):(0,d.signInWithProvider)({tenantId:e.tenantId,provider:{type:"saml",providerId:e.samlProviderId}}).then(function(e){if("error"===e.type)return void g({error:d.signInWithProviderErrorMessage})})}))},[m,l,g]),(0,i.jsxs)(i.Fragment,{children:[n?null:(0,i.jsx)(c.default,{mode:u,privateDeployment:h,privateDevDomain:f}),(0,i.jsxs)(j.View,{css:ec.mainControls,gap:12,children:[r,v?v(e):(0,i.jsx)(eu,(0,t._)({},e))]})]})}],108369);var em=(0,C.cssRecord)({container:[(0,F._)({margin:"auto"},S.media.max("mobileMax"),[S.rcss.pt(96)]),S.rcss.colWithGap(32)],button:[S.rcss.color.foregroundDimmest]});e.s(["default",0,function(e){var r=e.email,t=e.providerId,n=e.onCancel,s=(0,M.getOAuthProviderName)(t);return s||(s="this provider",t===M.PasswordProviderId&&(s="your password")),(0,i.jsxs)(j.View,{css:em.container,pt:128,children:[(0,i.jsx)(es.Header,{variant:"headerDefault",level:1,children:"Verification required"}),(0,i.jsxs)(j.View,{gap:16,children:[(0,i.jsxs)(es.Text,{variant:"subheadDefault",multiline:!0,children:["In order to log in with ",s,", you must verify"," ",r||"your email","."]}),(0,i.jsx)(es.Text,{multiline:!0,children:"We've sent an email with a verification link. If you don't see it, check your spam folder, or contact support for assistance."})]}),(0,i.jsx)(P.Button,{size:"big",variant:"outlined",css:em.button,onClick:function(){return n()},text:"Back to log in"})]})}],661922);var ep=e.i(931849),eh=e.i(442121);let ef=function(){return{href:"/home",as:"/~"}};e.s(["default",0,ef],961418);var ev=e.i(221586),ey="/agentVerify2?prompt=storage2&skipOnboarding=true";function ew(e){var r=e.enabled,t=(0,ep.useRouter)(),i=(0,eh.useApolloClient)(),o=(0,n._)((0,s.useState)(!1),2),c=o[0],u=o[1],l=(0,n._)((0,s.useState)(null),2),p=l[0],f=l[1],v=(0,n._)((0,s.useState)(null),2),y=v[0],w=v[1],x=(0,s.useRef)(!1),_=(0,s.useCallback)(function(e){u(!0),w("SAML SSO required. Redirecting to the SSO login page..."),setTimeout(function(){return(0,g._)(function(){return(0,m._)(this,function(r){switch(r.label){case 0:return[4,(0,d.signInWithProvider)({tenantId:e.tenantId,provider:{type:"saml",providerId:e.samlProviderId}})];case 1:return"error"===r.sent().type&&(f("Something went wrong. Please try logging in again."),u(!1),w(null)),[2]}})})()},3e3)},[]);return(0,s.useEffect)(function(){r&&!x.current&&(x.current=!0,(0,d.handlePotentialOAuthRedirect)().then(function(e){return(0,g._)(function(){var r,n,s,o,c,l;return(0,m._)(this,function(g){switch(g.label){case 0:if("success"!==e.type)return[3,4];if(null===e.result)return u(!1),[2];return u(!0),[4,(0,a.setCookie)(e.result.user,{source:t.pathname})];case 1:if("success"===(r=g.sent()).type)return(n=(0,h.getPendingLoginMethod)())?((0,h.saveLastLoginMethod)(n),(0,h.clearPendingLoginMethod)()):(o=null==(s=e.result.user.providerData[0])?void 0:s.providerId)&&(0,h.isValidLoginMethod)(o)&&(0,h.saveLastLoginMethod)(o),(0,ev.getLoggedOutExperiencePrompt)()?window.location.href=ey:window.location.href=ef().as,[2];if("error"!==r.type)return[3,3];if(r.reauth)return(l=null==(c=e.result.user.providerData[0])?void 0:c.providerId)&&(0,h.isValidLoginMethod)(l)&&(0,h.savePendingLoginMethod)(l),_(r.reauth),[2];return f(r.message),u(!1),[4,(0,d.signOut)(i)];case 2:g.sent(),g.label=3;case 3:return[2];case 4:return u(!1),f("Something went wrong. Please try again."),[2]}})})()}).catch(function(){u(!1),f("Something went wrong. Please try again.")}))},[r,i,t.pathname,_]),{isRedirecting:c,error:p,samlRedirectMessage:y,authWithSamlTenant:_,setIsRedirecting:u,setError:f}}e.s(["LOGGED_OUT_EXPERIENCE_REDIRECT_URL",()=>ey,"useOAuthRedirectHandler",()=>ew],969761)},68278,e=>{"use strict";var r=e.i(297083),t=e.i(530658),n=e.i(817556),i=e.i(389959),s=e.i(906368),a=e.i(878420),o=e.i(569384),c=e.i(973245),u=e.i(951262);function l(){var e=(0,o._)(["\n  mutation SaveUserAuth($input: SaveUserAuthInput!) {\n    saveUserAuth(input: $input) {\n      ... on CurrentUser {\n        id\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var d={},g=(0,c.gql)(l()),m=e.i(294426),p={type:"error",message:"Something unexpected happened, please try again."};function h(){var e,o=(0,t._)((e=(0,a._)({},d,void 0),u.useMutation(g,e)),1)[0];return(0,i.useCallback)(function(e){var t=e.userCredential,i=e.oauthProviderId,a=e.scopes;return(0,r._)(function(){var e,r;return(0,n._)(this,function(n){switch(n.label){case 0:if(!(e=(0,m.getAccessTokenFromCredential)(i,t))||!e.accessToken)return s.captureException(Error("Failed to extract token from ".concat(i," credential"))),[2,p];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o({variables:{input:{provider:i,token:e.accessToken,scopes:a}}})];case 2:return r=n.sent(),[3,4];case 3:return n.sent(),s.captureException(Error("Failed to save ".concat(i," Auth state"))),[2,p];case 4:if(!r.data)return s.captureException(Error("Unexpected error trying to save ".concat(i," Auth state"))),[2,p];if("CurrentUser"!==r.data.saveUserAuth.__typename)return[2,{type:"error",message:r.data.saveUserAuth.message}];return[2,{type:"success"}]}})})()},[o])}e.s(["useSaveUserAuth",()=>h],68278)},192479,e=>{"use strict";var r=e.i(297083),t=e.i(530658),n=e.i(346715),i=e.i(817556),s=e.i(276385),a=e.i(931849),o=e.i(389959),c=e.i(906368),u=e.i(442121),l=e.i(569910),d=e.i(694387),g=e.i(738623),m=e.i(108369),p=e.i(751010),h=e.i(661922),f=e.i(364839),v=e.i(294426),y=e.i(252890),w=e.i(969761),x=e.i(68278),_=e.i(484059),b=e.i(221586),C=e.i(956111),S=e.i(446530),k=e.i(613355),P=e.i(624782),j=e.i(396776),I=e.i(960178),E=e.i(625484),T=e.i(782514),L=e.i(940745),A=[k.rcss.width(470),k.rcss.maxWidth("100%"),k.rcss.colWithGap(32),k.rcss.align.center,{margin:"auto","& *":[k.brandFontDefault]}],R=(0,S.cssRecord)({error:[k.rcss.mb(16)],container:(0,n._)(A).concat([k.rcss.p(24)]),containerModal:(0,n._)(A),loadingText:[k.rcss.fontSize(16),k.rcss.flex.shrink(1)]}),U="redirecting";function F(e){var n=e.customHeader,S=e.isModal,k=e.mode,A=e.onModeChange,F=e.onSuccess,D=e.seededEmail,M=e.initialTenantId,O=e.tracking,V=e.privateDeployment,W=e.privateDevDomain,G=e.renderForm,B=e.replitAuthProps,H=e.signupCoupon,N=(0,u.useApolloClient)(),z=(0,a.useRouter)(),q=(0,C.useQueryParam)(U,"boolean"),Q=(0,t._)((0,o.useState)(q?{type:"redirecting"}:{type:"form"}),2),K=Q[0],Y=Q[1],X=(0,t._)((0,o.useState)(),2),$=X[0],J=X[1],Z=(0,o.useCallback)(function(e){return(0,r._)(function(){return(0,i._)(this,function(r){switch(r.label){case 0:if(!e)return[3,2];return Y({type:"redirecting"}),[4,(0,C.updatePathWithQueryParams)({router:z,params:[{mode:"add",key:U,value:"1"}]})];case 1:return r.sent(),[3,3];case 2:Y({type:"form"}),(0,C.updatePathWithQueryParams)({router:z,params:[{mode:"delete",key:U}]}),r.label=3;case 3:return[2]}})})()},[z]),ee=function(e){Y({type:"redirecting",message:"SAML SSO required. Redirecting to the SSO login page..."}),setTimeout(function(){return(0,r._)(function(){return(0,i._)(this,function(r){switch(r.label){case 0:return[4,(0,v.signInWithProvider)({tenantId:e.tenantId,provider:{type:"saml",providerId:e.samlProviderId}})];case 1:return"error"===r.sent().type&&(J({message:"Something went wrong. Please try logging in again.",colorway:"negative"}),Y({type:"form"})),[2]}})})()},3e3)},er=(0,o.useCallback)(function(e){return(0,r._)(function(){var r,t;return(0,i._)(this,function(n){switch(n.label){case 0:if(!("error"in e&&e.error))return[3,2];if(e.reauth)return ee(e.reauth),[2];return J({message:e.error,colorway:null!=(r=e.colorway)?r:"negative"}),[4,Z(!1)];case 1:return n.sent(),[2];case 2:if(!("user"in e&&e.user))throw Error("Expected error or user object");if(null!=(t=e.user.postLoginRedirectUrl)&&t.length>0)return window.location.href=t,[2];return e.isLogin||(0,y.attributeAcquisition)(e.user.id.toString()),F(e),[2]}})})()},[Z,F,J]),et=(0,x.useSaveUserAuth)();return(0,o.useEffect)(function(){(0,v.handlePotentialOAuthRedirect)().then(function(e){return(0,r._)(function(){var r,t,n,s;return(0,i._)(this,function(i){switch(i.label){case 0:if("success"!==e.type)return[3,13];if(null===e.result)return"redirecting"===K.type&&Z(!1),[2];return"redirecting"!==K.type&&Z(!0),[4,(0,g.setCookie)(e.result.user,{source:O.from,referrerId:O.referrerId})];case 1:switch((r=i.sent()).type){case"success":return[3,2];case"needs_email_verification":return[3,7];case"error":return[3,9]}return[3,11];case 2:if((null==(t=e.result)?void 0:t.providerId)!==d.GitHubProviderId)return[3,4];return[4,et({userCredential:e.result,oauthProviderId:d.GitHubProviderId,scopes:[]})];case 3:i.sent(),i.label=4;case 4:if((0,b.getLoggedOutExperiencePrompt)())return window.location.href=w.LOGGED_OUT_EXPERIENCE_REDIRECT_URL,[2];if(n=r.redirectUrl?(0,f.default)({redirectUrl:r.redirectUrl}):void 0)return window.location.href=n,[2];if(!(r.isNewUser&&e.result.providerId===d.GoogleProviderId))return[3,6];return[4,(0,_.callDeviceFingerprinting)(r.userId.toString())];case 5:i.sent(),i.label=6;case 6:return F({user:{id:r.userId},isLogin:!r.isNewUser}),[3,12];case 7:return Z(!1),Y({type:"needs-email-verification",email:e.result.user.email,providerId:e.result.providerId}),[4,(0,v.signOut)(N)];case 8:case 10:return i.sent(),[3,12];case 9:if(r.reauth)return ee(r.reauth),[2];return Z(!1),J({message:r.message,colorway:"negative"}),[4,(0,v.signOut)(N)];case 11:(0,l.default)(r),i.label=12;case 12:return[2];case 13:switch(Z(!1),e.treatment){case"requires-provider-link":return[3,14];case"credential-conflict":return[3,15];case"email-conflict":return[3,16];case"forbidden-operation":return[3,17];case"user-needs-email":return[3,18];case"timeout":case"unhandled":case"unknown":return[3,20]}return[3,21];case 14:return J({message:"Please log in to ".concat(e.context.email," with another method and link ").concat((0,d.getOAuthProviderName)(e.context.credential.providerId)," from the account page."),colorway:"negative"}),[3,22];case 15:return J({message:"This provider cannot be used, please try another method.",colorway:"negative"}),[3,22];case 16:return J({message:"This email cannot be used, please try another method.",colorway:"negative"}),[3,22];case 17:return J({message:"That action is not permitted",colorway:"negative"}),[3,22];case 18:return s=(0,d.getOAuthProviderName)(e.credential.providerId),J({message:"Your ".concat(s," account is missing an email address. To use it for Replit, you'll need to ").concat("login"===k?"log in":"sign up"," with another method and connect ").concat(s," from the account page."),colorway:"negative"}),[4,(0,v.signOut)(N)];case 19:return i.sent(),[3,22];case 20:return J({message:"Something unexpected happened, please try again.",colorway:"negative"}),[3,22];case 21:(0,l.default)(e),i.label=22;case 22:return[2]}})})()}).catch(function(e){return c.captureException(e)})},[]),(0,s.jsx)(E.View,{css:S?R.containerModal:R.container,children:"form"===K.type?(0,s.jsx)(T.TrackingHierarchyProvider,{hierarchy:{page:"auth_page",view:k},children:(0,s.jsxs)(m.default,{customHeader:n||!!H,isModal:S,mode:k,onModeChange:function(e){J(void 0),A(e)},onRedirectingChange:Z,onSubmit:er,seededEmail:D,initialTenantId:M,tracking:O,privateDeployment:V,privateDevDomain:W,renderForm:G,replitAuthProps:B,children:[$?(0,s.jsx)(j.StatusBanner,{css:R.error,colorway:$.colorway,text:$.message}):null,H?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(E.View,{gap:16,align:"center",pb:8,children:[(0,s.jsxs)(E.View,{row:!0,gap:8,align:"center",justify:"center",children:[(0,s.jsx)("div",{children:"Using code"}),(0,s.jsx)(P.Pill,{colorway:"green",text:H.toUpperCase()})]}),(0,s.jsx)(p.default,{mode:"signup"})]})}):null]})}):"needs-email-verification"===K.type?(0,s.jsx)(h.default,{email:K.email,providerId:K.providerId,onCancel:function(){return Y({type:"form"})}}):(0,s.jsxs)(E.View,{gap:8,align:"center",children:[(0,s.jsx)(L.default,{size:32}),K.message?(0,s.jsx)(I.Text,{multiline:!0,css:R.loadingText,children:K.message}):null]})})}e.s(["default",()=>F,"redirectingParam",()=>U])}]);

//# debugId=73d2ea43-2606-1654-d46f-4ba6e25a9af6
//# sourceMappingURL=90705398d6f0263d.js.map