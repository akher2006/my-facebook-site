;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b26c1926-c01c-879e-8e9a-33e55b9a1b23")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,109900,e=>{"use strict";var n=e.i(346715),t=e.i(276385),r=e.i(878420),i=e.i(569384),a=e.i(973245),o=e.i(304277);e.i(566901);var s=e.i(520112);function l(){var e=(0,i._)(["\n  query GitProvidersSection {\n    currentUser {\n      ... on CurrentUser {\n        id\n        connectorContext {\n          __typename\n          ...ConnectorContext\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return l=function(){return e},e}var u={},c=(0,a.gql)(l(),s.ConnectorContextFragmentDoc),d=e.i(917063),p=e.i(163355),m=e.i(993796),h=e.i(882793),v=e.i(960178),x=e.i(625484),f=e.i(571383),C=[],g=function(e){var i,a,s,l,g,y=e.query,j=e.onOpenGitPane,w=(0,m.useFlag)({controlName:"flag-github-connection-migration"}),b=(0,m.useFlag)({controlName:"flag-source-control-integrations"}),_=(i={ssr:!1},a=(0,r._)({},u,i),o.useQuery(c,a)),k=_.data,T=_.refetch,S=(0,p.usePersonalConnectorMutations)({refetch:T}),P=S.handleDelete,M=S.handleEvent;if(!w)return null;var V=(0,n._)(h.VERSION_CONTROL_CONNECTORS);b||(V=V.filter(function(e){return"GITHUB_SOURCE_CONTROL"===e}));var R=(null==k||null==(s=k.currentUser)?void 0:s.__typename)==="CurrentUser"?k.currentUser.connectorContext:null,L=(null==R?void 0:R.__typename)==="CurrentUserConnectorContext"?R.openIntClientToken:null,N=(null==R?void 0:R.__typename)==="CurrentUserConnectorContext"&&null!=(l=R.connections)?l:C,O=(null==R?void 0:R.__typename)==="CurrentUserConnectorContext"&&null!=(g=R.connectorConfigs)?g:C;return L?(0,t.jsxs)(x.View,{gap:8,children:[(0,t.jsxs)(x.View,{gap:4,children:[(0,t.jsxs)(x.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(f.default,{size:24}),(0,t.jsx)(v.Header,{level:2,variant:"subheadBig",children:"Git Providers"})]}),(0,t.jsxs)(v.Text,{color:"dimmer",children:["Connect your git provider to push, pull, and sync code via the"," ",j?(0,t.jsx)("a",{href:"",onClick:function(e){e.preventDefault(),j()},children:"Git pane"}):"Git pane",". Not accessible to Replit Agent."]})]}),(0,t.jsx)(d.ConnectorsShared,{token:L,connectorConfigs:O,connections:N,onDelete:P,onEvent:M,query:y,shouldShowConnectButton:!1,whitelist:V})]}):null};e.s(["GitProvidersSection",()=>g],109900)},24290,e=>{"use strict";var n=e.i(276385),t=e.i(389959),r=e.i(415756),i=e.i(858248),a=e.i(709485),o=e.i(882793),s=e.i(140487),l=e.i(91720),u=e.i(734582),c=e.i(272119),d=e.i(423828),p=e.i(960178),m=e.i(625484),h=e.i(243914),v=function(e){var v=e.query,x=e.openPane,f=(0,t.useMemo)(function(){return new r.Fzf(o.REPLIT_MANAGED_SERVICES,{fuzzy:!1,selector:function(e){return"".concat(e.name," ").concat(e.type)}})},[]),C=(0,t.useMemo)(function(){return v?f.find(v).map(function(e){return e.item}):o.REPLIT_MANAGED_SERVICES},[f,v]);return(0,n.jsx)(u.IndexTable,{autoLayout:!1,title:"",columns:[{key:"name",label:"Name",allowSorting:!1,width:200,isRowHeader:!0},{key:"type",label:"Type",allowSorting:!1,minWidth:118},{key:"actions",label:"",allowSorting:!1,width:118}],items:C,children:function(e){return(0,n.jsxs)(d.TableRow,{id:e.id,children:[(0,n.jsx)(c.TableCell,{children:(0,n.jsxs)(m.View,{gap:8,row:!0,align:"center",children:[e.icon,(0,n.jsx)(p.Text,{translate:"no",children:e.name})]})},"name"),(0,n.jsx)(c.TableCell,{children:(0,n.jsx)(p.Text,{color:"dimmer",children:e.type})},"type"),(0,n.jsx)(c.TableCell,{children:(0,n.jsx)(m.View,{row:!0,justify:"end",children:x?(0,n.jsx)(s.Button,{iconLeft:(0,n.jsx)(h.default,{size:12}),text:"Open",onClick:function(){(0,i.track)(a.events.REPLIT_MANAGED_SERVICE_CLICKED,{serviceName:e.name,serviceType:e.type,actionType:"open",source:"workspace"}),x(e.pane)},size:"small"}):(0,n.jsx)(l.ButtonLink,{href:e.link,iconLeft:(0,n.jsx)(h.default,{size:12}),text:"Learn more",size:"small",target:"_blank",onClick:function(){(0,i.track)(a.events.REPLIT_MANAGED_SERVICE_CLICKED,{serviceName:e.name,serviceType:e.type,actionType:"learn_more",source:"external"})}})})},"actions")]},e.id)}})};e.s(["ReplitManagedTable",()=>v])},344782,e=>{"use strict";var n=e.i(530658),t=e.i(276385),r=e.i(366492),i=e.i(389959),a=e.i(878420),o=e.i(569384),s=e.i(973245),l=e.i(304277);e.i(566901);var u=e.i(520112);function c(){var e=(0,o._)(["\n  query McpServersSection {\n    currentUser {\n      ... on CurrentUser {\n        id\n        connectorContext {\n          __typename\n          ...ConnectorContext\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var d={},p=(0,s.gql)(c(),u.ConnectorContextFragmentDoc),m=e.i(917063),h=e.i(882793),v=e.i(297083),x=e.i(346715),f=e.i(817556),C=e.i(951262);function g(){var e=(0,o._)(['\n  query CustomMcpConnectorInfo {\n    getUserConnectorByName(connectorName: "custom-mcp") {\n      ... on UserConnector {\n        type\n        name\n        connectionSettings\n      }\n    }\n  }\n']);return g=function(){return e},e}function y(){var e=(0,o._)(["\n  mutation CreateCustomMcpConnection($input: CreateApiKeyConnectionInput!) {\n    createApiKeyConnection(input: $input) {\n      ... on CreateApiKeyConnectionResult {\n        connectionId\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return y=function(){return e},e}var j={},w=(0,s.gql)(g()),b=(0,s.gql)(y()),_=e.i(993796),k=e.i(322823),T=e.i(222342),S=e.i(858248),P=e.i(709485),M=e.i(613355),V=e.i(140487),R=e.i(136540),L=e.i(607278),N=e.i(818503),O=e.i(739521),E=e.i(624782),U=e.i(396776),A=e.i(960178),I=e.i(625484),q=e.i(952030),B=e.i(703505),D=e.i(42458),F=[M.rcss.color.accentNegativeDefault],z=[M.rcss.color.orangeDefault],H=function(e){return e.trim()?null:{message:"Please enter a display name for this MCP server",severity:"error"}},G=function(e){if(!e.trim())return{message:"Please enter an MCP server URL",severity:"error"};try{var n=new URL(e);if("https:"!==n.protocol)return{message:"MCP server URL must use HTTPS for security",severity:"error"}}catch(e){return{message:"Please enter a valid URL",severity:"error"}}return null},K=function(e){if(e.filter(function(e){return""!==e.key.trim()&&""===e.value.trim()||""===e.key.trim()&&""!==e.value.trim()}).length>0)return{message:"Please provide both name and value for all headers or remove them",severity:"error"};var n=new Set,t=new Set;return(e.forEach(function(e){var r=e.key.trim().toLowerCase();r&&t.has(r)&&n.add(e.key.trim()),r&&t.add(r)}),n.size>0)?{message:"Duplicate header keys found: ".concat(Array.from(n).join(", ")),severity:"warning"}:null};function W(e){var n=e.token,r=e.onConnectionCreated,i=e.isOpen,a=e.onRequestClose,o=e.onSuccess,s=e.initialParams;return(0,_.useFlag)({controlName:"flag-use-openint-custommcp-modal"})&&n?(0,t.jsx)(Q,{isOpen:i,onRequestClose:a,onSuccess:o,token:n,onConnectionCreated:r,initialParams:s}):(0,t.jsx)(X,{isOpen:i,onRequestClose:a,onSuccess:o,initialParams:s})}function Q(e){var n,r=e.isOpen,a=e.onRequestClose,o=e.onSuccess,s=e.token,l=e.onConnectionCreated,u=e.initialParams,c=(0,i.useCallback)(function(e,n){e||(a(),"authenticated"===n&&(null==o||o()))},[a,o]),d=(0,i.useCallback)(function(e){return(0,v._)(function(){var n,t;return(0,f._)(this,function(r){switch(r.label){case 0:if("connect.connection-connected"===e.name&&(0,S.track)(P.events.CUSTOM_MCP_CONNECTION_CREATED,{displayName:null!=(n=null==u?void 0:u.displayName)?n:"",hasCustomHeaders:(null!=(t=null==u?void 0:u.headers)?t:[]).length>0}),!l)return[3,2];return[4,l(e)];case 1:r.sent(),r.label=2;case 2:return[2]}})})()},[l,u]),p=u?{custom_mcp:{display_name:u.displayName,base_url:u.baseUrl,headers:null==(n=u.headers)?void 0:n.map(function(e){return{key:e.key,value:e.value}})}}:null;return(0,t.jsx)(m.AddIntegrationModal,{isOpen:r,setIsOpen:c,token:s,selectedConnector:"CUSTOM_MCP",onEvent:d,prefill:p})}function X(e){var r,o,s,u,c,d,p,m=e.isOpen,h=e.onRequestClose,g=e.onSuccess,y=e.initialParams,_=(0,k.useFormField)(null!=(c=null==y?void 0:y.displayName)?c:"",H),S=(0,k.useFormField)(null!=(d=null==y?void 0:y.baseUrl)?d:"",G),P=(0,k.useFormField)(null!=(p=null==y?void 0:y.headers)?p:[],K),M=(0,n._)((0,i.useState)(null),2),W=M[0],Q=M[1],X=(0,T.default)().showConfirm,Y=(r={skip:!m},o=(0,a._)({},j,r),l.useQuery(w,o)).loading,$=(0,n._)((s={onCompleted:function(e){"CreateApiKeyConnectionResult"===e.createApiKeyConnection.__typename?(X("Custom MCP server added successfully!"),et(),null==g||g()):Q(e.createApiKeyConnection.message)},onError:function(e){Q(e.message)}},u=(0,a._)({},j,s),C.useMutation(b,u)),2),J=$[0],Z=$[1].loading,ee=function(e){P.setValue(P.value.filter(function(n,t){return t!==e}))},en=function(e,n,t){var r=(0,x._)(P.value);r[e][n]=t,P.setValue(r)},et=function(){_.setValue("",{preventTouch:!0,preventValidation:!0}),S.setValue("",{preventTouch:!0,preventValidation:!0}),P.setValue([],{preventTouch:!0,preventValidation:!0}),_.setTouched(!1),S.setTouched(!1),P.setTouched(!1),Q(null),h()},er=Z||Y||!!_.error||!!S.error||!!P.error;return(0,t.jsx)(O.Modal,{isOpen:m,onRequestClose:et,centered:!0,maxWidth:600,preventClose:Z,children:(0,t.jsxs)(I.View,{gap:24,p:16,children:[(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(A.Header,{level:2,variant:"headerDefault",children:"Add Custom MCP Server"}),(0,t.jsx)(E.Pill,{text:"Beta",colorway:"primary"})]}),(0,t.jsx)(A.Text,{color:"dimmer",children:"Connect to any MCP server by providing the URL and authentication headers."})]}),(0,t.jsxs)(I.View,{gap:20,children:[(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsx)(N.Label,{variant:"text",htmlFor:"mcp-display-name",children:"Display Name *"}),(0,t.jsx)(L.Input,{id:"mcp-display-name",placeholder:"My MCP Server",value:_.value,onChange:function(e){return _.setValue(e.target.value,{preventValidation:!0})},onBlur:_.handleBlur,disabled:Z}),_.error?(0,t.jsx)(A.Text,{css:F,variant:"small",children:_.error.message}):(0,t.jsx)(A.Text,{color:"dimmer",variant:"small",children:"A name to identify this MCP server"})]}),(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsx)(N.Label,{variant:"text",htmlFor:"mcp-base-url",children:"MCP Server URL *"}),(0,t.jsx)(L.Input,{id:"mcp-base-url",placeholder:"https://mcp.example.com",value:S.value,onChange:function(e){return S.setValue(e.target.value,{preventValidation:!0})},onBlur:S.handleBlur,disabled:Z}),S.error?(0,t.jsx)(A.Text,{css:F,variant:"small",children:S.error.message}):(0,t.jsx)(A.Text,{color:"dimmer",variant:"small",children:"The base URL of your MCP server"})]}),(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsxs)(I.View,{row:!0,align:"center",justify:"space-between",children:[(0,t.jsx)(N.Label,{variant:"text",children:"Custom Headers"}),(0,t.jsx)(V.Button,{text:"Add Header",variant:"outlined",size:"small",iconLeft:(0,t.jsx)(q.default,{}),onClick:function(){P.setValue((0,x._)(P.value).concat([{key:"",value:""}]))},disabled:Z})]}),P.value.map(function(e,n){return(0,t.jsx)(I.View,{gap:8,children:(0,t.jsxs)(I.View,{row:!0,gap:8,align:"end",children:[(0,t.jsxs)(I.View,{gap:4,style:{flex:1},children:[(0,t.jsx)(N.Label,{variant:"text",htmlFor:"header-key-".concat(n),children:"Name"}),(0,t.jsx)(L.Input,{id:"header-key-".concat(n),placeholder:"X-Custom-Header",value:e.key,onChange:function(e){return en(n,"key",e.target.value)},disabled:Z})]}),(0,t.jsxs)(I.View,{gap:4,style:{flex:2},children:[(0,t.jsx)(N.Label,{variant:"text",htmlFor:"header-value-".concat(n),children:"Value"}),(0,t.jsx)(L.Input,{id:"header-value-".concat(n),type:"authorization"===e.key.toLowerCase()?"password":"text",placeholder:"authorization"===e.key.toLowerCase()?"Bearer your-token-here":"Header Value",value:e.value,onChange:function(e){return en(n,"value",e.target.value)},disabled:Z})]}),(0,t.jsx)(R.IconButton,{alt:"Remove header",onClick:function(){return ee(n)},disabled:Z,children:(0,t.jsx)(B.default,{})})]})},n)}),P.error?(0,t.jsx)(A.Text,{css:F,variant:"small",children:P.error.message}):null,!P.error&&P.warning?(0,t.jsx)(A.Text,{css:z,variant:"small",children:P.warning.message}):null,P.error||P.warning?null:(0,t.jsx)(A.Text,{color:"dimmer",variant:"small",children:"Add headers for authentication (e.g., Authorization, X-API-Key)"})]}),W?(0,t.jsx)(U.StatusBanner,{text:W,colorway:"negative",icon:(0,t.jsx)(D.default,{})}):null]}),(0,t.jsxs)(I.View,{row:!0,gap:12,justify:"end",children:[(0,t.jsx)(V.Button,{variant:"outlined",text:"Cancel",onClick:et,disabled:Z}),(0,t.jsx)(V.Button,{text:Z?"Saving...":"Save",colorway:"primary",onClick:function(){return(0,v._)(function(){var e,n,t;return(0,f._)(this,function(r){switch(r.label){case 0:return Q(null),[4,_.validate()];case 1:return e=r.sent(),[4,S.validate()];case 2:return n=r.sent(),[4,P.validate()];case 3:if(t=r.sent(),e||n||t)return[2];return[4,J({variables:{input:{connectorName:"CUSTOM_MCP",config:{base_url:S.value,headers:P.value.filter(function(e){return""!==e.key.trim()&&""!==e.value.trim()}).map(function(e){return{key:e.key.trim(),value:e.value.trim()}})},displayName:_.value.trim()}}})];case 4:return r.sent(),[2]}})})()},disabled:er,loading:Z})]})]})})}var Y=e.i(886513),$=e.i(931849),J=e.i(960933),Z=e.i(862927),ee=J.Type.Object({key:J.Type.String({minLength:1}),value:J.Type.String()}),en=J.Type.Object({displayName:J.Type.String({minLength:1,maxLength:1e3}),baseUrl:J.Type.String({minLength:1}),headers:J.Type.Optional(J.Type.Array(ee,{maxItems:20}))});function et(e){var n="string"==typeof e.mcp?e.mcp:null;if(!n)return null;try{var t=atob(n),r=JSON.parse(t);if(!Z.Value.Check(en,r))return null;var i=new URL(r.baseUrl);if("https:"!==i.protocol)return null;return{displayName:r.displayName,baseUrl:r.baseUrl,headers:r.headers||[]}}catch(e){return null}}var er=e.i(163355),ei=e.i(167626),ea=e.i(734882),eo=e.i(616278);function es(e){var r=e.isOpen,o=e.onRequestClose,s=(0,n._)((0,i.useState)(""),2),l=s[0],u=s[1],c=(0,n._)((0,i.useState)(""),2),d=c[0],p=c[1],m=(0,n._)((0,i.useState)(""),2),h=m[0],x=m[1],C=(0,n._)((0,i.useState)(""),2),g=C[0],y=C[1],j=(0,n._)((0,i.useState)(!1),2),w=j[0],b=j[1],_=(0,n._)((0,i.useState)(null),2),k=_[0],T=_[1],M=function(){u(""),p(""),x(""),y(""),T(null)},R=function(){w||(M(),o())},E=!l||!h||w;return(0,t.jsx)(O.Modal,{isOpen:r,onRequestClose:R,centered:!0,maxWidth:600,preventClose:w,children:(0,t.jsxs)(I.View,{gap:24,p:16,children:[(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsx)(A.Header,{level:2,variant:"headerDefault",children:"MCP server interest"}),(0,t.jsx)(A.Text,{color:"dimmer",children:"Help us understand what you'd like to do with MCP servers in Replit. Your feedback will guide our MCP integration roadmap."})]}),(0,t.jsxs)(I.View,{gap:20,children:[(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsx)(N.Label,{variant:"text",children:"How do you prefer to set up MCP servers? *"}),(0,t.jsx)(ea.RadioGroup,{name:"setup-preference",value:l,onChange:function(e){return u(e.target.value)},disabled:w,children:(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"setup-preconfigured",value:"preconfigured",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"setup-preconfigured",children:"Pre-configured servers (just click to enable)"})]}),(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"setup-remote",value:"remote",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"setup-remote",children:"Custom remote servers (provide URL/endpoint)"})]}),(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"setup-local",value:"local",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"setup-local",children:"Local servers (run in my App)"})]}),(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"setup-unsure",value:"unsure",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"setup-unsure",children:"Not sure yet"})]})]})})]}),(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsx)(N.Label,{variant:"text",htmlFor:"specific-servers",children:"What specific MCP servers would you like to use?"}),(0,t.jsx)(L.Input,{placeholder:"e.g. Miro, Notion, Obsidian, etc.",id:"specific-servers",value:d,onChange:function(e){return p(e.target.value)},disabled:w,maxLength:200}),(0,t.jsxs)(A.Text,{color:"dimmer",variant:"small",children:[d.length,"/200 characters"]})]}),(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsx)(N.Label,{variant:"text",children:"What's your comfort level with MCP configuration? *"}),(0,t.jsx)(ea.RadioGroup,{name:"comfort-level",value:h,onChange:function(e){return x(e.target.value)},disabled:w,children:(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"comfort-very",value:"very-comfortable",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"comfort-very",children:"I can write custom configuration files"})]}),(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"comfort-not-very",value:"not-very-comfortable",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"comfort-not-very",children:"I need guided setup"})]}),(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ea.Radio,{id:"comfort-no-experience",value:"no-experience",disabled:w}),(0,t.jsx)(N.Label,{htmlFor:"comfort-no-experience",children:"No experience with MCP yet"})]})]})})]}),(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsx)(N.Label,{variant:"text",htmlFor:"additional-feedback",children:"Any other feedback or feature requests?"}),(0,t.jsx)(L.MultiLineInput,{id:"additional-feedback",value:g,onChange:function(e){return y(e.target.value)},disabled:w,rows:3,maxLength:500}),(0,t.jsxs)(A.Text,{color:"dimmer",variant:"small",children:[g.length,"/500 characters"]})]})]}),(0,t.jsxs)(I.View,{gap:12,children:[k?(0,t.jsx)(U.StatusBanner,{text:k.text,colorway:"success"===k.type?"positive":"negative",icon:"success"===k.type?(0,t.jsx)(eo.default,{}):(0,t.jsx)(D.default,{})}):null,(0,t.jsxs)(I.View,{row:!0,gap:12,justify:"end",children:[(0,t.jsx)(V.Button,{variant:"outlined",text:"Cancel",onClick:R,disabled:w}),(0,t.jsx)(V.Button,{text:"Submit feedback",colorway:"primary",onClick:function(){return(0,v._)(function(){var e;return(0,f._)(this,function(n){switch(n.label){case 0:if(!l||!h)return T({type:"error",text:"Please answer all required questions."}),[2];b(!0),T(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),(0,S.track)(P.events.MCP_INTEREST_SUBMITTED,(0,a._)({setupPreference:l,comfortLevel:h},d.trim()&&{specificServers:d.trim()},g.trim()&&{additionalFeedback:g.trim()})),T({type:"success",text:"Thank you for your feedback! We'll use this to improve our MCP support."}),[4,new Promise(function(e){return setTimeout(e,2e3)})];case 2:return n.sent(),o(),M(),[3,5];case 3:return e=n.sent(),T({type:"error",text:(0,ei._)(e,Error)?e.message:"Failed to submit your feedback. Please try again."}),[3,5];case 4:return b(!1),[7];case 5:return[2]}})})()},disabled:E,loading:w})]})]})]})})}var el=e.i(968783),eu=e.i(325990),ec=e.i(91720),ed=e.i(243914),ep=e.i(558273),em=[],eh=function(e){var o,s,u,c,v,x,f,C,g,y,j,w,b=e.query,k=(0,n._)((0,i.useState)(!1),2),T=k[0],M=k[1],R=(0,n._)((0,i.useState)(!1),2),L=R[0],N=R[1],O=(o={ssr:!1},s=(0,a._)({},d,o),l.useQuery(p,s)),B=O.data,D=O.refetch,F=(0,er.usePersonalConnectorMutations)({refetch:D}),z=F.handleDelete,H=F.handleEvent,G=(0,el.useCurrentUserStoredOrgContext)().orgId,K=(0,_.useFlag)({controlName:"flag-custom-mcp-servers"}),Q=(0,eu.useOrgFlag)({controlName:"flag-org-custom-mcp-servers"}),X=G?Q:K,J=(0,i.useMemo)(function(){return Array.from(h.MCP_CONNECTORS).filter(function(e){return"CUSTOM_MCP"!==e||X})},[X]),Z=(u=(0,$.useRouter)(),v=(c=(0,n._)((0,i.useState)(!1),2))[0],x=c[1],C=(f=(0,n._)((0,i.useState)(!1),2))[0],g=f[1],(0,i.useEffect)(function(){C||L||et(u.query)&&(x(!0),g(!0))},[L,C,u.query]),{shouldAutoOpen:v,getDeeplinkParams:function(){return et(u.query)},clearDeeplinkParams:function(){var e=u.query,n=(e.mcp,(0,Y._)(e,["mcp"]));u.replace({pathname:u.pathname,query:n},void 0,{shallow:!0}),x(!1)}}),ee=Z.shouldAutoOpen,en=Z.getDeeplinkParams,ei=Z.clearDeeplinkParams;(0,i.useEffect)(function(){ee&&X&&!L&&(N(!0),(0,S.track)(P.events.CUSTOM_MCP_MODAL_OPENED,{source:"deeplink"}))},[ee,L,X]);var ea=en(),eo=(null==B||null==(y=B.currentUser)?void 0:y.__typename)==="CurrentUser"?B.currentUser.connectorContext:null,eh=(null==eo?void 0:eo.__typename)==="CurrentUserConnectorContext"?eo.openIntClientToken:null,ev=(null==eo?void 0:eo.__typename)==="CurrentUserConnectorContext"?(null!=(j=eo.connections)?j:em).filter(function(e){return h.MCP_CONNECTORS.has(e.connectorName)}):em,ex=(null==eo?void 0:eo.__typename)==="CurrentUserConnectorContext"?(null!=(w=eo.connectorConfigs)?w:em).filter(function(e){return e.connectorName&&h.MCP_CONNECTORS.has(e.connectorName)}):em;return eh?(0,t.jsxs)(I.View,{gap:8,children:[(0,t.jsxs)(I.View,{gap:4,children:[(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,t.jsxs)(I.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(ep.default,{size:24}),(0,t.jsx)(A.Header,{level:2,variant:"subheadBig",children:"MCP Servers for Replit Agent"}),(0,t.jsx)(E.Pill,{text:"Beta",colorway:"primary"})]}),X?(0,t.jsxs)(I.View,{row:!0,gap:8,children:[(0,t.jsx)(ec.ButtonLink,{text:"Learn more",iconRight:(0,t.jsx)(ed.default,{}),href:"https://docs.replit.com/replitai/mcp/custom-servers",target:"_blank"}),(0,t.jsx)(V.Button,{text:"Add MCP server",variant:"outlined",iconLeft:(0,t.jsx)(q.default,{}),onClick:function(){N(!0),(0,S.track)(P.events.CUSTOM_MCP_MODAL_OPENED,{source:"button"})}})]}):null]}),(0,t.jsxs)(A.Text,{color:"dimmer",children:["Provide external context and tools to Replit Agent by connecting to"," ",(0,t.jsx)(r.default,{href:"https://modelcontextprotocol.io/",target:"_blank",children:"MCP servers"}),"."]})]}),(0,t.jsx)(m.ConnectorsShared,{token:eh,connectorConfigs:ex,connections:ev,onDelete:z,onEvent:H,query:b,shouldShowConnectButton:!1,whitelist:J}),(0,t.jsx)(I.View,{pt:12,children:(0,t.jsx)(U.StatusBanner,{title:"Help us expand MCP support",text:"Tell us which MCP servers would be most useful for your workflows. Your feedback will help shape what we build next.",action:(0,t.jsx)(V.Button,{text:"Share feedback",variant:"outlined",size:"small",onClick:function(){return M(!0)}})})}),(0,t.jsx)(es,{isOpen:T,onRequestClose:function(){return M(!1)}}),X?(0,t.jsx)(W,{isOpen:L,onRequestClose:function(){N(!1),ei()},onSuccess:D,initialParams:ea,token:eh,onConnectionCreated:H}):null]}):null};e.s(["McpServersSection",()=>eh],344782)}]);

//# debugId=b26c1926-c01c-879e-8e9a-33e55b9a1b23
//# sourceMappingURL=6559e91f877687f4.js.map