;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="cf605d43-f9a1-7e3c-e9cc-dfcfa89ace79")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,255444,e=>{"use strict";var t=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},n=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},r=function(e){return{op:"remove",path:"string"==typeof e?e:e.join("/"),value:""}},i=function(e){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(e)}},a=function(e){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(e)}},o=function(e){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",e])}},s=function(e){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",e])}},l=function(e){return{path:"deployment/ignorePorts",op:"add",value:e.toString()}},u=function(e){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(e)}},c=function(e){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(e)}},d=function(e){return{path:"objectStorage/defaultBucketID",op:"add",value:JSON.stringify(e)}};e.s(["createCompileCommandOp",()=>n,"createDeploymentPublicDirOp",()=>c,"createDeploymentTargetOp",()=>u,"createDeploymentsBuildCommandOp",()=>s,"createDeploymentsIgnorePortsOp",()=>l,"createDeploymentsRunCommandOp",()=>o,"createRunCommandOp",()=>t,"enableAuthButtonOp",()=>a,"enableAuthPageOp",()=>i,"removeFieldOp",()=>r,"setObjectStorageDefaultBucketId",()=>d])},712516,e=>{"use strict";var t=e.i(721281),n=e.i(276385);e.i(282890);var r=e.i(827456),i=e.i(446530),a=e.i(123850),o=e.i(613355),s=e.i(960178),l=e.i(625484),u=e.i(548190),c=e.i(940745),d=(0,a.createCssVarTokens)(["maxWidth"]),p=d.cssVars,f=d.styleTokens,m=(0,i.cssRecord)({container:[o.rcss.width("100%"),o.rcss.minHeight("100%"),o.rcss.center],centeredContent:[o.rcss.width("100%"),o.rcss.maxWidth(f.maxWidth),o.rcss.colWithGap(16),o.rcss.p(16),o.rcss.center],imageWithHeader:[o.rcss.center,o.rcss.flex.shrink(1),o.rcss.textAlign.center],bodyText:[o.rcss.textAlign.center,o.rcss.color.foregroundDimmest]});function h(e){var i=e.pane,a=e.asciiArt,o=e.headerText,d=e.bodyText,f=e.body,h=e.action,g=e.icon,v=e.loading,x=e.maxWidth,y=e.innerRef,b=(0,r.usePaneUIContext)(),S=b.getDescription(i),_=(0,n.jsx)(b.Icon,{pane:i,size:48}),w=null!=f?f:S;void 0!==v&&v?w=(0,n.jsxs)(l.View,{gap:4,align:"center",row:!0,children:[(0,n.jsx)(c.default,{size:16}),(0,n.jsx)(s.Text,{css:m.bodyText,children:"Loading…"})]}):void 0!==d&&(w=(0,n.jsx)(l.View,{children:(0,n.jsx)(s.Text,{css:m.bodyText,multiline:!0,children:d})}));var j=_;return void 0!==g?j=g:void 0!==a&&(j=(0,n.jsx)(u.default,{art:a})),(0,n.jsx)(l.View,{css:m.container,style:(0,t._)({},p.maxWidth,"".concat(void 0===x?600:x,"px")),innerRef:y,children:(0,n.jsxs)(l.View,{css:m.centeredContent,children:[(0,n.jsxs)(l.View,{css:m.imageWithHeader,gap:16,children:[j,(0,n.jsx)(s.Header,{level:1,variant:"subheadBig",multiline:!0,children:null!=o?o:S})]}),w,h]})})}e.s(["default",()=>h])},952685,e=>{"use strict";var t=e.i(389959),n=e.i(205104),r=e.i(529810);function i(e){var i=(0,r.default)().fs,a=(0,t.useCallback)(function(t,r){var a=t.code,o=t.insertAt,s=t.newLine,l=void 0===s||s;if(!e||(0,n.isMedia)(e)||(0,n.isDrawFile)(e)||(0,n.isBinary)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var u=i.watchTextFile(e,{onReady:function(t){var n=t.initialContent,s=t.writeChange,c=n.toString(),d="end"===o?c.length:o,p=a;l&&(0!==d&&d!==c.length&&-1===(d=c.indexOf("\n",d))&&(d=c.length),0!==d&&"\n"!==c[d-1]&&(p="\n"+p),"\n"!==c[d]&&(p+="\n")),s({from:d,insert:p},r),i.flush(new Set([e])).finally(function(){u()})}})},[e,i]);return!e||(0,n.isMedia)(e)||(0,n.isDrawFile)(e)||(0,n.isBinary)(e)?null:a}e.s(["default",()=>i])},45442,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(906368),s=e.i(368964),l=e.i(9270),u=e.i(576255),c=e.i(180703),d=e.i(207237),p=e.i(354093),f=e.i(117807),m=e.i(76961),h=e.i(248011),g={thinkingEnabled:!1,modelProfile:s.ModelProfile.ModelProfileStandard,enableAutomatedTesting:!1,samplingRate:0,webSearchEnabled:!0,imageGenerationEnabled:!0,chatMode:s.AgentChatMode.Unspecified,maxAutonomyEnabled:!1,autonomyLevel:s.AutonomyLevel.Unspecified};function v(){var e=(0,d.default)(),g=(0,r._)((0,l.useUpdateReplAgentSettingsMutation)(),1)[0],v=(0,h.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,x=(0,r._)((0,c.default)("".concat(e,"-high-powered-model-opted-out"),!1),2),y=x[0],b=x[1],S=(0,l.useReplAgentSettingQuery)({variables:{replId:e}}),_=S.data,w=S.loading,j=(0,m.useIsAgentWebDesignMockup)().isWebDesignMockup,T=(null==_?void 0:_.getRepl.__typename)==="Repl"&&_.getRepl.timeCreated&&new Date(_.getRepl.timeCreated)<new Date("2025-09-10"),D=(null==_?void 0:_.getRepl.__typename)==="Repl"?_.getRepl.config.agentSettings:null,k=(null==_?void 0:_.getRepl.__typename)==="Repl"?_.getRepl.config.isInPlanningPhase:null,C=(0,f.useAgentStackBlueprint)().stackBlueprint,E=(0,u.getAutomatedTestingConfig)(C),A=E===u.AutomatedTestingConfig.DEFAULT_ON,I="slider-full"!==(0,p.useAutonomyControlVariant)();return{settings:(0,a.useMemo)(function(){var e,t,n,r,i,a,o=T?s.AutonomyLevel.Medium:s.AutonomyLevel.High;j?o=s.AutonomyLevel.Low:(null==D?void 0:D.autonomyLevel)&&D.autonomyLevel!==s.AutonomyLevel.Unspecified&&(o=D.autonomyLevel),I&&o===s.AutonomyLevel.Medium&&(o=s.AutonomyLevel.High);var l=s.AgentChatMode.Unspecified;return v?l=s.AgentChatMode.QuickEdit:j&&!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.AgentChatMode.Unspecified;return e===s.AgentChatMode.Unspecified||e===s.AgentChatMode.General||e===s.AgentChatMode.QuickEdit}(null==D?void 0:D.chatMode)?l=s.AgentChatMode.General:(null==D?void 0:D.chatMode)&&D.chatMode!==s.AgentChatMode.Unspecified?l=D.chatMode:k&&(l=s.AgentChatMode.InitialPlanning),e=E!==u.AutomatedTestingConfig.DISABLED&&l!==s.AgentChatMode.QuickEdit&&((null==D?void 0:D.enableAutomatedTesting)!=null?D.enableAutomatedTesting:A),t=j?s.ModelProfile.ModelProfileUnspecified:y?null!=(n=null==D?void 0:D.modelProfile)?n:s.ModelProfile.ModelProfileStandard:s.ModelProfile.ModelProfileAdvanced,{thinkingEnabled:!v&&null!=(r=null==D?void 0:D.thinkingEnabled)&&r,modelProfile:t,enableAutomatedTesting:e,samplingRate:0,webSearchEnabled:null==(i=null==D?void 0:D.webSearchEnabled)||i,imageGenerationEnabled:null==(a=null==D?void 0:D.imageGenerationEnabled)||a,chatMode:l,maxAutonomyEnabled:!1,autonomyLevel:o}},[D,v,A,T,y,j,E,k,I]),updateSettings:(0,a.useCallback)(function(r){return(0,t._)(function(){var t,a,l;return(0,i._)(this,function(i){switch(i.label){case 0:t=(0,n._)({},D,r),(a=r.modelProfile)&&b(a===s.ModelProfile.ModelProfileStandard),a===s.ModelProfile.ModelProfileAdvanced&&(r.modelProfile=null==D?void 0:D.modelProfile),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,g({variables:{input:{id:e,agentSettings:r}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{__typename:"Repl",id:e,config:{__typename:"ReplConfig",agentSettings:(0,n._)({__typename:"AgentSettings"},t),isInPlanningPhase:k}}}}})];case 2:return i.sent(),[3,4];case 3:return l=i.sent(),o.captureException(l,{extra:{message:"Error updating agent settings",replId:e,attemptedSettings:r,currentSettings:D}}),[3,4];case 4:return[2]}})})()},[k,e,D,b,g]),loading:w}}e.s(["DEFAULT_AGENT_SETTINGS",()=>g,"useAgentSettings",()=>v])},12291,e=>{"use strict";var t=e.i(878420),n=e.i(886513),r=e.i(276385),i=e.i(205104),a=e.i(446530),o=e.i(613355),s=e.i(140487),l=e.i(88619),u=e.i(929872),c=e.i(960178),d=e.i(625484),p=e.i(782096),f=(0,a.cssRecord)({code:[o.rcss.font.code,o.rcss.flex.grow(1)],surface:[o.rcss.borderRadius(8),o.rcss.p(8),o.rcss.flex.row,o.rcss.rowWithGap(8),o.rcss.align.center,o.rcss.width("100%"),o.rcss.overflowX("auto")]});function m(e){var n=g(e.filePath,e.keyName);if(!n)return null;var i=n.import,a=n.access;return(0,r.jsxs)(d.View,{gap:8,children:[i?(0,r.jsx)(h,(0,t._)({code:i},e)):null,(0,r.jsx)(h,(0,t._)({code:a},e))]})}function h(e){var t=e.code,i=e.onInsert,a=(0,n._)(e,["code","onInsert"]);return(0,r.jsxs)(u.Surface,{elevated:a.elevated,css:f.surface,children:[(0,r.jsx)(l.CopyIconButton,{textToCopy:t}),(0,r.jsx)(c.Text,{variant:"small",css:f.code,multiline:!1,children:t}),i?(0,r.jsx)(s.Button,{variant:"outlined",size:"small",onClick:function(){return i(t)},text:"Insert",iconRight:(0,r.jsx)(p.default,{})}):null]})}function g(e,t){if(!e)return null;switch((0,i.getExt)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}e.s(["default",()=>m,"getEnvCodeForLanguage",()=>g])},611159,(e,t,n)=>{"use strict";var r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.isValidCron=void 0;var i=function(e){return/^\d+$/.test(e)?Number(e):NaN},a=function(e){return"?"===e},o=function(e,t,n){return e>=t&&e<=n},s=function(e,t,n){var r=e.split("-");switch(r.length){case 1:return"*"===e||o(i(e),t,n);case 2:var a=r.map(function(e){return i(e)}),s=a[0],l=a[1];return s<=l&&o(s,t,n)&&o(l,t,n);default:return!1}},l=function(e,t,n){return -1===e.search(/[^\d-,\/*]/)&&e.split(",").every(function(e){var r=e.split("/");if(e.trim().endsWith("/")||r.length>2)return!1;var a=r[0],o=r[1];return s(a,t,n)&&(void 0===o||-1===o.search(/[^\d]/)&&i(o)>0)})},u={jan:"1",feb:"2",mar:"3",apr:"4",may:"5",jun:"6",jul:"7",aug:"8",sep:"9",oct:"10",nov:"11",dec:"12"},c={sun:"0",mon:"1",tue:"2",wed:"3",thu:"4",fri:"5",sat:"6"},d={alias:!1,seconds:!1,allowBlankDay:!1,allowSevenAsSunday:!1};n.isValidCron=function(e,t){t=r(r({},d),t);var n,i,o,s,p=e.trim().split(/\s+/);if(p.length>(t.seconds?6:5)||p.length<5)return!1;var f=[];if(6===p.length){var m=p.shift();m&&f.push(l(m,0,59))}var h=p[0],g=p[1],v=p[2],x=p[3],y=p[4];return f.push(l(h,0,59)),f.push(l(g,0,23)),f.push(t.allowBlankDay&&a(v)||l(v,1,31)),f.push((n=t.alias,-1===x.search(/\/[a-zA-Z]/)&&(n?l(x.toLowerCase().replace(/[a-z]{3}/g,function(e){return void 0===u[e]?e:u[e]}),1,12):l(x,1,12)))),f.push((i=t.alias,o=t.allowBlankDay,s=t.allowSevenAsSunday,!!(o&&a(y))||!(!o&&a(y))&&-1===y.search(/\/[a-zA-Z]/)&&(i?l(y.toLowerCase().replace(/[a-z]{3}/g,function(e){return void 0===c[e]?e:c[e]}),0,s?7:6):l(y,0,s?7:6)))),f.push(!(t.allowBlankDay&&a(v)&&a(y))),f.every(Boolean)}},933572,(e,t,n)=>{var r,i,a=e.r(365738),o=1/0,s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u="\ud800-\udfff",c="\\u2700-\\u27bf",d="a-z\\xdf-\\xf6\\xf8-\\xff",p="A-Z\\xc0-\\xd6\\xd8-\\xde",f="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="['’]",h="["+f+"]",g="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",v="["+d+"]",x="[^"+u+f+"\\d+"+c+d+p+"]",y="(?:\ud83c[\udde6-\uddff]){2}",b="[\ud800-\udbff][\udc00-\udfff]",S="["+p+"]",_="(?:"+v+"|"+x+")",w="(?:"+S+"|"+x+")",j="(?:"+m+"(?:d|ll|m|re|s|t|ve))?",T="(?:"+m+"(?:D|LL|M|RE|S|T|VE))?",D="(?:"+g+"|\ud83c[\udffb-\udfff])?",k="[\\ufe0e\\ufe0f]?",C="(?:\\u200d(?:"+["[^"+u+"]",y,b].join("|")+")"+k+D+")*",E="(?:"+["["+c+"]",y,b].join("|")+")"+(k+D+C),A=RegExp(m,"g"),I=RegExp(g,"g"),R=RegExp([S+"?"+v+"+"+j+"(?="+[h,S,"$"].join("|")+")",w+"+"+T+"(?="+[h,S+_,"$"].join("|")+")",S+"?"+_+"+"+j,S+"+"+T,"\\d+",E].join("|"),"g"),P=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,M="object"==a._(e.g)&&e.g&&e.g.Object===Object&&e.g,O=("undefined"==typeof self?"undefined":a._(self))=="object"&&self&&self.Object===Object&&self,N=M||O||Function("return this")(),L=(r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},function(e){return null==r?void 0:r[e]}),B=Object.prototype.toString,V=N.Symbol,U=V?V.prototype:void 0,F=U?U.toString:void 0;function H(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return(void 0===e?"undefined":a._(e))=="symbol"||!!e&&(void 0===e?"undefined":a._(e))=="object"&&"[object Symbol]"==B.call(e)}(e))return F?F.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(e)}t.exports=(i=function(e,t,n){return e+(n?"-":"")+t.toLowerCase()},function(e){var t;return function(e,t,n,r){for(var i=-1,a=e?e.length:0;++i<a;)n=t(n,e[i],i,e);return n}(function(e,t,n){if(e=H(e),void 0===t){var r;return(r=e,P.test(r))?e.match(R)||[]:e.match(s)||[]}return e.match(t)||[]}(((t=H(t=e))&&t.replace(l,L).replace(I,"")).replace(A,"")),i,"")})},403934,196127,165349,967963,262664,850834,783992,424746,483820,830597,265957,68893,914279,271047,233693,165550,e=>{"use strict";var t,n,r,i,a,o=e.i(878420),s=e.i(569384),l=e.i(973245),u=e.i(304277),c=e.i(566901),d=e.i(613141),p=e.i(951262);function f(){var e=(0,s._)(["\n  fragment WorkspaceNeonDatabase on NeonDatabase {\n    id\n    type\n    databaseId\n    databaseName\n    projectId\n    connectionString\n    isFrozen\n    frozenReason\n    isEphemeral\n    scheduledFreezeTime\n    scheduledDeletionTime\n    quotaLogicalSizeBytes\n    minComputeUnits\n    maxComputeUnits\n    historyRetentionSeconds\n    timeCreated\n  }\n"]);return f=function(){return e},e}function m(){var e=(0,s._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        database {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function h(){var e=(0,s._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,s._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return g=function(){return e},e}var v={},x=(0,l.gql)(f()),y=(0,l.gql)(m(),x);function b(e){var t=(0,o._)({},v,e);return p.useMutation(y,t)}var S=(0,l.gql)(h());function _(e){var t=(0,o._)({},v,e);return p.useMutation(S,t)}var w=(0,l.gql)(g());function j(e){var t=(0,o._)({},v,e);return p.useMutation(w,t)}e.s(["WorkspaceNeonDatabaseFragmentDoc",()=>x,"useCreateNeonDatabaseMutation",()=>b,"useDeleteNeonDatabaseMutation",()=>_,"useUnfreezeNeonDatabaseMutation",()=>j],196127);var T=e.i(963084);function D(){var e=(0,s._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    isSubscribed\n  }\n"]);return D=function(){return e},e}function k(){var e=(0,s._)(["\n  fragment DeploymentSessionOrg on Org {\n    id\n    type\n  }\n"]);return k=function(){return e},e}function C(){var e=(0,s._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function E(){var e=(0,s._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return E=function(){return e},e}function A(){var e=(0,s._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n      useFreeTierCloudServices {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function I(){var e=(0,s._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lastUsedSubdomain\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    org {\n      ...DeploymentSessionOrg\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      hasNeonProductionDatabasesEnabled\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}function R(){var e=(0,s._)(["\n  query DeploymentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return e},e}function P(){var e=(0,s._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function M(){var e=(0,s._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n        targetDatabase {\n          ...WorkspaceNeonDatabase\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return M=function(){return e},e}function O(){var e=(0,s._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          isFreeUserWithStaticDeployment\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function N(){var e=(0,s._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return N=function(){return e},e}function L(){var e=(0,s._)(["\n  query DeploymentGetIgnoredSecretsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            ignoredSecrets\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return L=function(){return e},e}function B(){var e=(0,s._)(["\n  query DeploymentGetEnvVarsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              envVars {\n                name\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return B=function(){return e},e}var V={},U=(0,l.gql)(D()),F=(0,l.gql)(k()),H=(0,l.gql)(C(),T.TargetHostingDeploymentFragmentDoc,T.CurrentBuild2FragmentDoc),G=(0,l.gql)(E()),z=(0,l.gql)(A(),G),q=(0,l.gql)(I(),F,H,z),W=(0,l.gql)(R(),q,U);function K(e){var t=(0,o._)({},V,e);return c.useLazyQuery(W,t)}var $=(0,l.gql)(P(),T.BuildDebugSummaryFragmentDoc);function Y(e){var t=(0,o._)({},V,e);return d.useSubscription($,t)}var X=(0,l.gql)(M(),T.CurrentBuild2FragmentDoc,T.TargetHostingDeploymentFragmentDoc,x);function Q(e){var t=(0,o._)({},V,e);return p.useMutation(X,t)}var J=(0,l.gql)(O(),H),Z=(0,l.gql)(N(),T.CurrentBuild2FragmentDoc),ee=(0,l.gql)(L());function et(e){var t=(0,o._)({},V,e);return c.useLazyQuery(ee,t)}var en=(0,l.gql)(B());function er(){var e=(0,s._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return er=function(){return e},e}function ei(){var e=(0,s._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return ei=function(){return e},e}function ea(){var e=(0,s._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ea=function(){return e},e}function eo(){var e=(0,s._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return eo=function(){return e},e}function es(){var e=(0,s._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return es=function(){return e},e}e.s(["DeploymentGetEnvVarsHostingDeploymentDocument",()=>en,"DeploymentGetIgnoredSecretsHostingDeploymentDocument",()=>ee,"DeploymentSessionCancelInProgressDeploymentsBuildDocument",()=>Z,"DeploymentSessionSendDeploymentLifecycleCommandDocument",()=>J,"useDeploymentGetIgnoredSecretsHostingDeploymentLazyQuery",()=>et,"useDeploymentSessionBuildDeployActionUpdatesSubscription",()=>Y,"useDeploymentSessionDeployBuildMutation",()=>Q,"useDeploymentSessionLazyQuery",()=>K],403934);var el={},eu=(0,l.gql)(er(),T.BuildDebugSummaryFragmentDoc),ec=(0,l.gql)(ei(),eu),ed=(0,l.gql)(ea(),ec);function ep(e){var t=(0,o._)({},el,e);return u.useQuery(ed,t)}var ef=(0,l.gql)(eo());function em(e){var t=(0,o._)({},el,e);return u.useQuery(ef,t)}var eh=(0,l.gql)(es(),T.CurrentBuild2FragmentDoc,T.TargetHostingDeploymentFragmentDoc);function eg(e){var t=(0,o._)({},el,e);return p.useMutation(eh,t)}e.s(["HostingActivityLogLine2FragmentDoc",()=>ec,"useHostingActivityLogBuildHistoryQuery",()=>em,"useHostingDeploymentActivityLogs2Query",()=>ep,"useRollbackHostingBuildMutation",()=>eg],165349),e.i(439725);var ev=e.i(119468),ex=e.i(933572),ey=e.i(761201),eb=function(e){return"string"==typeof e&&""!==e.trim()},eS=function(e){return e.includes("pane to configure your run command. For more info, see:")},e_=function(e){return(void 0===e?"undefined":(0,ev._)(e))==="object"&&"string"==typeof e.name&&"string"==typeof e.value&&""!==e.name};function ew(e){var t=e.replSlug,n=e.username,r=t;"xn"===r&&(r="x-n");var i=n?"--".concat(n):"",a=ey.REPLIT_APP_SUBDOMAIN_MAX_LENGTH-(0+i.length);if(a>0){r=(0,ex.default)(r).slice(0,a);var o="".concat("").concat(r).concat(i);if(o.length<=ey.REPLIT_APP_SUBDOMAIN_MAX_LENGTH)return o}return"".concat("").concat((0,ex.default)(r)).concat(i)}e.s(["getQualifiedReplSubdomain",()=>ew,"hasCommand",()=>eb,"hasInvalidRunCommand",()=>eS,"isValidEnvVar",()=>e_],967963);var ej=e.i(297083),eT=e.i(530658),eD=e.i(817556),ek=e.i(389959),eC=e.i(299798),eE=e.i(927158);function eA(){var e=(0,eT._)((0,ek.useState)(!0),2),t=e[0],n=e[1],r=(0,eT._)((0,ek.useState)(void 0),2),i=r[0],a=r[1];(0,eC.usePid2)(function(e){return(0,ej._)(function(){var t;return(0,eD._)(this,function(r){switch(r.label){case 0:return[4,e.helium.getHeliumInfo.rpc({})];case 1:return(t=r.sent()).ok&&t.payload.isHeliumEnabled&&"USING_HELIUM"===t.payload.heliumMigrationState&&a({kind:"helium",connectionString:t.payload.databaseUrl,databaseId:435486,maxSizeBytes:0x280000000}),n(!1),[2]}})})()},[]);var o=(0,eE.usePid2Callback)(function(e){return function(){return(0,ej._)(function(){var t;return(0,eD._)(this,function(n){switch(n.label){case 0:if(!i)throw Error("No helium development database found");return[4,e.database.getPgMajorVersion.rpc({connectionString:i.connectionString})];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch PostgreSQL major version for development database");return[2,t.payload.majorVersion]}})})()}},[i]),s=(0,eE.usePid2Callback)(function(e){return function(){return(0,ej._)(function(){var t;return(0,eD._)(this,function(n){switch(n.label){case 0:if(!i)throw Error("No helium development database found");return[4,e.database.getTables.rpc({connectionString:i.connectionString})];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch table count for development database");return[2,t.payload.tables.length]}})})()}},[i]);return{loading:t,database:i,getPgVersion:o,getTableCount:s}}e.s(["useHeliumDevelopmentDatabase",()=>eA],262664);var eI=e.i(64386);function eR(){var e=(0,s._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return eR=function(){return e},e}var eP={},eM=(0,l.gql)(eR(),x);function eO(e){var t=(0,o._)({},eP,e);return u.useQuery(eM,t)}e.s(["GetNeonDatabasesDocument",()=>eM,"useGetNeonDatabasesQuery",()=>eO],850834);var eN=e.i(207237),eL=function(e){return null!=e.connectionString&&null!=e.databaseId&&null!=e.databaseName&&null!=e.projectId};function eB(e){return(null==e?void 0:e.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.getNeonDatabases.databases.filter(eL)||[]}function eV(e){var t=e.fetchPolicy,n=e.skip,r=e.type,i=e.onDatabasesLoaded,a=(0,eN.default)(),s=eO((0,eI._)((0,o._)({variables:{input:{replId:a}}},"cache-first"===(void 0===t?"cache-first":t)?{fetchPolicy:"cache-first"}:{fetchPolicy:"network-only",ssr:!0}),{skip:void 0===n?void 0:n,onCompleted:function(e){eB(e).length>0&&(null==i||i())}})),l=s.data,u=s.loading,c=s.error,d=s.refetch;return{database:eB(l).find(function(e){return e.type===r}),loading:u,error:c,refetch:d}}function eU(e){return{refetch:eV({fetchPolicy:"network-only",skip:!0,type:e}).refetch}}function eF(e){return eV({type:"development",onDatabasesLoaded:e})}function eH(e){return eV({type:"production",onDatabasesLoaded:e})}e.s(["isValidNeonDatabase",()=>eL],783992),e.s(["useNeonDevelopmentDatabase",()=>eF,"useNeonProductionDatabase",()=>eH,"useRefetchDatabasesLazy",()=>eU],424746);var eG=e.i(399119),ez=e.i(904851),eq=e.i(721281),eW=e.i(445789),eK=e.i(463348),e$=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","DeploymentNotFoundError"),(0,eq._)(e,"message","Could not find existing deployment"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eY=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","CurrentBuildNotFoundError"),(0,eq._)(e,"message","Could not find existing current build"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eX=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","RollbackBuildNotProvidedError"),(0,eq._)(e,"message","Rollback target build not provided"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eQ=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","RunCommandNotFoundError"),(0,eq._)(e,"message","Could not find run command"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eJ=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","InvalidRunCommandError"),(0,eq._)(e,"message","Invalid run command"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eZ=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","SubdomainNotFoundError"),(0,eq._)(e,"message","Could not find subdomain"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e0=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","AppTypeFoundError"),(0,eq._)(e,"message","Could not find app type"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e1=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","PublicDirNotFoundError"),(0,eq._)(e,"message","Could not find public directory"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e2=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","ReplConnectionError"),(0,eq._)(e,"message","An App connection error occurred. App is reconnecting or has been disconnected."),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e4=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","InvalidTimezoneError"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e8=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","CrontabNotFoundError"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e6=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","PrivatePasswordError"),e}return(0,eW._)(t,e),t}((0,eK._)(Error));e.s(["AppTypeFoundError",()=>e0,"CurrentBuildNotFoundError",()=>eY,"DeploymentNotFoundError",()=>e$,"InvalidCrontabError",()=>e8,"InvalidRunCommandError",()=>eJ,"InvalidTimezoneError",()=>e4,"PrivatePasswordError",()=>e6,"PublicDirNotFoundError",()=>e1,"ReplConnectionError",()=>e2,"RollbackBuildNotProvidedError",()=>eX,"RunCommandNotFoundError",()=>eQ,"SubdomainNotFoundError",()=>eZ],483820);var e3=e.i(131141),e5=e.i(541793),e9=e.i(15053),e7=e.i(161322),te=e.i(719518),tt=e.i(824359),tn=(0,ek.createContext)(null);function tr(){var e=(0,ek.useContext)(tn);if(!e)throw Error("Expected store in context");return e}function ti(e){return(0,e7.useAtomValue)(e,{store:tr()})}function ta(e){return(0,tt.useObservableAtom)(e,tr())}var to=function(e){return(0,e7.useSetAtom)(e,{store:tr()})};function ts(e){return(0,te.useAtomCallback)((0,ek.useCallback)(function(t){return t(e)},[e]),{store:tr()})}e.s(["DeploymentContext",()=>tn,"useGet",()=>ts,"useObservableValue",()=>ta,"useSet",()=>to,"useValue",()=>ti],830597);var tl=e.i(311106),tu=e.i(368964),tc=e.i(858248),td=e.i(709485);function tp(e,t,n){(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_COMPLETED,(0,o._)((0,eI._)((0,o._)({},e),{stage:t}),n))}var tf=((t={}).FoundDiff="FoundDiff",t.GeneratingDiffStatements="GeneratingDiffStatements",t.ValidatingDiffStatements="ValidatingDiffStatements",t),tm=((n={}).Completed="completed",n.Running="running",n.Paused="paused",n.Failed="failed",n),th=((r={}).Building="building",r.Failed="failed",r.Ready="ready",r);function tg(e,t){var n=e.get(t);if(n&&n.type===t)return n}var tv=(0,e5.atom)({id:"",deployOptions:void 0,stages:new Map,focusedStage:"FoundDiff"}),tx=(0,e5.atom)(null,function(e,t,n){var r,i=(r=e(tv),(0,e3.produce)(r,function(e){switch(n.type){case"INIT":e.id=(0,e9.v4)(),e.deployOptions=n.deployOptions,e.stages=new Map,e.stages.set("FoundDiff",{type:"FoundDiff",status:"completed"}),e.focusedStage="FoundDiff";var t,i,a,s,l,u,c,d,p,f,m,h,g=(c=(t={deployInputOptions:n.deployOptions.deployInputOptions,deployConfig:n.deployOptions.deployConfig,appType:n.deployOptions.appType,org:n.deployOptions.org}).deployInputOptions,d=t.deployConfig,p=t.appType,m=(f=t.org)&&("team"===f.type||"personal"===f.type)?(null==f?void 0:f.type)==="team"?tu.OrgType.Team:tu.OrgType.Personal:void 0,h=!!c.targetDeploymentId,{provider:null!=(a=c.provider)?a:"unknown",build:null!=(s=c.commands.build)?s:void 0,run:c.commands.run,redeploy:h,env_var_count:null!=(l=null==(i=c.envVars)?void 0:i.length)?l:0,ignore_ports:null===d.ignorePorts?void 0:d.ignorePorts,context:"workspace",app_type:p,machineJob:c.machineJob?{crontab:c.machineJob.crontab,timezone:c.machineJob.timezone}:void 0,orgType:m,hasAgentSession:null!=(u=c.hasAgentSession)&&u});e.trackingProperties=g,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_STARTED,(0,o._)({},g));break;case"CANCEL":e.id="",e.deployOptions=void 0,e.stages.clear(),e.focusedStage="FoundDiff",r.trackingProperties&&(v=r.trackingProperties,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_CANCELLED,(0,o._)({},v)),e.trackingProperties=void 0);break;case"SET_STAGE":e.stages.set(n.stageState.type,n.stageState);break;case"STAGE_ERROR":var v,x,y,b=e.stages.get(n.stage);b&&(b.status="failed",b.errorMessage=n.errorMessage,e.focusedStage=n.stage,r.trackingProperties&&(x=r.trackingProperties,y=n.stage,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_STAGE_ERROR,(0,eI._)((0,o._)({},x),{stage:y})))),(0,tl.sendSentryError)({error:Error(n.errorMessage),context:"prepareDatabase"});break;case"CONFLICT_PROMPT":var S=e.stages.get("GeneratingDiffStatements");if(S&&"GeneratingDiffStatements"===S.type){var _,w,j={type:"GeneratingDiffStatements",status:"paused",conflictPrompt:n.conflictPrompt};e.stages.set(S.type,j),e.focusedStage="GeneratingDiffStatements",r.trackingProperties&&(_=r.trackingProperties,w={kind:n.conflictPrompt.$kind,optionsCount:n.conflictPrompt.result.options.length},(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_CONFLICT_PROMPT,(0,o._)({},_,w)))}break;case"COMPLETED":var T=tg(e.stages,"GeneratingDiffStatements"),D=tg(e.stages,"ValidatingDiffStatements");if(T&&"statementsToExecute"in n&&n.statementsToExecute){var k={type:"GeneratingDiffStatements",status:"completed",statementsToExecute:n.statementsToExecute,shouldAskForApprove:n.shouldAskForApprove,maybeNonBackwardsCompatible:n.maybeNonBackwardsCompatible,infoToPrint:n.infoToPrint};e.stages.set(T.type,k),e.focusedStage="GeneratingDiffStatements",r.trackingProperties&&tp(r.trackingProperties,n.stage,{shouldAskForApproval:n.shouldAskForApprove,maybeNonBackwardsCompatible:n.maybeNonBackwardsCompatible,infoToPrintCount:n.infoToPrint.length,statementsCount:n.statementsToExecute.length})}if(D&&"previewId"in D&&D.previewId){var C={type:"ValidatingDiffStatements",status:"completed",previewId:D.previewId};e.stages.set(D.type,C),e.focusedStage="ValidatingDiffStatements",r.trackingProperties&&tp(r.trackingProperties,n.stage)}break;case"MIGRATION_VALIDATION_ERROR":var E=tg(e.stages,"ValidatingDiffStatements");if(E&&"previewId"in E&&E.previewId){var A,I={type:"ValidatingDiffStatements",status:"paused",previewId:E.previewId,statementError:n.statementError};e.stages.set(E.type,I),e.focusedStage="ValidatingDiffStatements",r.trackingProperties&&(A=r.trackingProperties,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_VALIDATION_ERROR,(0,o._)({},A)))}break;case"SET_PREVIEW_DEPLOY":var R,P,M=tg(e.stages,"ValidatingDiffStatements");(null==M?void 0:M.status)==="completed"&&(M.preview=n.preview,r.trackingProperties&&(R=r.trackingProperties,P=n.preview.status,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_PREVIEW_DEPLOY,(0,eI._)((0,o._)({},R),{status:P}))));break;case"APPROVE_AND_DEPLOY":var O,N,L,B=tg(e.stages,"ValidatingDiffStatements"),V=tg(e.stages,"GeneratingDiffStatements");(null==V?void 0:V.status)==="completed"&&(((null==B?void 0:B.status)==="completed"||(null==B?void 0:B.status)==="paused")&&(B.approved=!0),r.trackingProperties&&(O=r.trackingProperties,N=n.approved,L={shouldAskForApproval:V.shouldAskForApprove,maybeNonBackwardsCompatible:V.maybeNonBackwardsCompatible,infoToPrintCount:V.infoToPrint.length,statementsCount:V.statementsToExecute.length},(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_APPROVED,(0,o._)((0,eI._)((0,o._)({},O),{approved:N}),L))))}}));t(tv,i)});function ty(){return{state:ti(tv),dispatch:to(tx),getState:ts(tv)}}e.s(["PrepareDatabaseBaseStageStateStatus",()=>tm,"PrepareDatabasePreviewDeployStatus",()=>th,"PrepareDatabaseStageType",()=>tf,"getStageByType",()=>tg,"usePrepareDatabaseState",()=>ty],265957);var tb=((i={}).Loading="Loading",i.Ready="Ready",i.Preparing="Preparing",i.PreparingDatabase="PreparingDatabase",i.Deploying="Deploying",i.ProcessingLifecycleCommand="ProcessingLifecycleCommand",i.Suspended="Paused",i);e.s(["DeploymentMode",()=>tb],68893);var tS=(0,e5.atom)(tb.Loading);function t_(){return ti(tS)}function tw(){var e=to(tS);return(0,ek.useCallback)(function(t){e(t)},[e])}function tj(){var e=ty().dispatch,t=to(tS);return{requiresDatabasePreparation:(0,eE.usePid2Callback)(function(n){return function(r){var i=r.heliumDevelopmentDatabase,a=r.neonDevelopmentDatabase,o=r.neonProductionDatabase,s=r.deployConfig,l=r.deployInputOptions,u=r.context,c=r.appType,d=r.org;return(0,ej._)(function(){var r,p;return(0,eD._)(this,function(f){switch(f.label){case 0:if(!a&&!i)throw Error("Neon development database not found.");if(!(r=i?i.connectionString:null==a?void 0:a.connectionString))throw Error("Development database connection string not found.");return[4,n.prepareDatabaseMigrations.hasDiff.rpc({sourceConnectionString:r,targetConnectionString:null==o?void 0:o.connectionString})];case 1:if(!(p=f.sent()).ok)throw Error("Failed to check for database diff: ".concat(p.payload.message));if(p.payload.hasDiff)return t(tb.PreparingDatabase),e({type:"INIT",deployOptions:{deployConfig:s,deployInputOptions:l,context:u,appType:c,org:d}}),[2,!0];return[2]}})})()}},[t,e])}}e.s(["deploymentModeAtom",()=>tS,"useDeploymentMode",()=>t_,"useSetDeploymentMode",()=>tw],914279),e.s(["useHostingBuildRequiresDatabasePreparation",()=>tj],271047);var tT=e.i(173738);function tD(e){return(0,ej._)(function(e){var t,n,r,i,a,o,s,l,u,c,d,p;return(0,eD._)(this,function(f){switch(f.label){case 0:if(t=e.command,n=e.replId,r=e.buildId,i=e.machineConfigurationId,a=e.maxMachineInstances,o=e.replitBadgeEnabled,!tT.apolloClient)throw Error("expected apolloClient to be initialized");return[4,tT.apolloClient.mutate({mutation:J,variables:{input:{command:t,replId:n,buildId:r,machineConfigurationId:i,maxMachineInstances:a,replitBadgeEnabled:o}}})];case 1:if(null==(s=(c=f.sent()).errors)?void 0:s.length)throw Error(c.errors.map(function(e){return e.message}).join(", "));if((null==(u=c.data)||null==(l=u.sendDeploymentLifecycleCommand)?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null==(p=c.data)||null==(d=p.sendDeploymentLifecycleCommand)?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})}).apply(this,arguments)}function tk(e){return(0,ej._)(function(e){var t,n,r,i,a,o,s,l;return(0,eD._)(this,function(u){switch(u.label){case 0:if(t=e.buildId,n=e.targetDeploymentId,!tT.apolloClient)throw Error("expected apolloClient to be initialized");return[4,tT.apolloClient.mutate({mutation:Z,variables:{input:{buildId:t,targetDeploymentId:n}}})];case 1:if(null==(r=(o=u.sent()).errors)?void 0:r.length)throw Error(o.errors.map(function(e){return e.message}).join(", "));if((null==(a=o.data)||null==(i=a.failHostingBuild)?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null==(l=o.data)||null==(s=l.failHostingBuild)?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})}).apply(this,arguments)}function tC(e){return(0,ej._)(function(e){var t,n,r,i;return(0,eD._)(this,function(a){switch(a.label){case 0:return t=e.apolloClient,n=e.replId,[4,t.query({query:ee,variables:{replId:n}})];case 1:return[2,"Repl"===(i=a.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.ignoredSecrets:[]]}})}).apply(this,arguments)}function tE(e){return(0,ej._)(function(e){var t,n,r,i;return(0,eD._)(this,function(a){switch(a.label){case 0:return t=e.apolloClient,n=e.replId,[4,t.query({query:en,variables:{replId:n}})];case 1:return[2,"Repl"===(i=a.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.currentBuild.envVars.map(function(e){return{name:e.name}}):[]]}})}).apply(this,arguments)}e.s(["cancelInProgressDeploymentsBuildMutation",()=>tk,"getDeploymentEnvVars",()=>tE,"getDeploymentIgnoredSecrets",()=>tC,"sendDeploymentLifecycleCommandMutation",()=>tD],233693);var tA=e.i(569910);function tI(e){switch(e){case tu.HostingBuildStatus.Failed:case tu.HostingBuildStatus.Success:case tu.HostingBuildStatus.BuiltAndBundled:return tb.Ready;case tu.HostingBuildStatus.Suspended:return tb.Suspended;case tu.HostingBuildStatus.Suspending:case tu.HostingBuildStatus.Resuming:case tu.HostingBuildStatus.UpdatingTier:return tb.ProcessingLifecycleCommand;case tu.HostingBuildStatus.Pending:case tu.HostingBuildStatus.SecurityScanning:case tu.HostingBuildStatus.Building:case tu.HostingBuildStatus.Running:case tu.HostingBuildStatus.Promoting:return tb.Deploying;default:(0,tA.default)(e)}}function tR(e){switch(e){case tu.SendDeploymentLifecycleCommandType.Destroy:return null;case tu.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration:return tu.HostingBuildStatus.UpdatingTier;case tu.SendDeploymentLifecycleCommandType.Suspend:return tu.HostingBuildStatus.Suspending;case tu.SendDeploymentLifecycleCommandType.Resume:case tu.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig:return tu.HostingBuildStatus.Resuming;default:(0,tA.default)(e)}}var tP=(a={},(0,eq._)(a,tb.Loading,"loading"),(0,eq._)(a,tb.Preparing,"preparing"),(0,eq._)(a,tb.PreparingDatabase,"preparing database"),(0,eq._)(a,tb.Ready,"ready"),(0,eq._)(a,tb.Suspended,"suspended"),(0,eq._)(a,tb.Deploying,"deploying"),(0,eq._)(a,tb.ProcessingLifecycleCommand,"processing a request"),a);function tM(e){var t=tP[e];return void 0===t?"":t}e.s(["getBuildStatusFromLifecycleCommandType",()=>tR,"getDeploymentModeFromBuildStatus",()=>tI,"getReadableMode",()=>tM],165550)},678420,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277),a=e.i(566901),o=e.i(951262);function s(){var e=(0,n._)(["\n  fragment WorkspaceSharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    timeCreated\n    timeUpdated\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n    value\n    signedUrl\n  }\n"]);return s=function(){return e},e}function l(){var e=(0,n._)(["\n  fragment WorkspaceSharedSecretLink on SharedSecretLink {\n    id\n    alias\n    secret {\n      ...WorkspaceSharedSecret\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function u(){var e=(0,n._)(["\n  query SecretsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        isOwner\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,n._)(["\n  query WorkspaceSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function d(){var e=(0,n._)(["\n  query ReplLinkedSecrets($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,n._)(["\n  query WorkspaceAndReplLinkedSecrets($replId: String!) {\n    currentUser {\n      id\n      secrets {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n        }\n      }\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,n._)(["\n  mutation LinkSharedSecrets($input: LinkSharedSecretsInput!) {\n    linkSharedSecrets(input: $input) {\n      ... on LinkSharedSecretsResult {\n        links {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function m(){var e=(0,n._)(["\n  mutation UnlinkSharedSecrets($input: UnlinkSharedSecretsInput!) {\n    unlinkSharedSecrets(input: $input) {\n      ... on UnlinkSharedSecretsResult {\n        success\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return m=function(){return e},e}function h(){var e=(0,n._)(["\n  mutation UpdateSharedSecretLink($input: UpdateSharedSecretLinkInput!) {\n    updateSharedSecretLink(input: $input) {\n      ... on UpdateSharedSecretLinkOutput {\n        ...WorkspaceSharedSecretLink\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},v=(0,r.gql)(s()),x=(0,r.gql)(l(),v),y=(0,r.gql)(u());function b(e){var n=(0,t._)({},g,e);return i.useQuery(y,n)}var S=(0,r.gql)(c(),v);function _(e){var n=(0,t._)({},g,e);return i.useQuery(S,n)}var w=(0,r.gql)(d(),x);function j(e){var n=(0,t._)({},g,e);return i.useQuery(w,n)}var T=(0,r.gql)(p(),v,x);function D(e){var n=(0,t._)({},g,e);return a.useLazyQuery(T,n)}var k=(0,r.gql)(f(),x);function C(e){var n=(0,t._)({},g,e);return o.useMutation(k,n)}var E=(0,r.gql)(m());function A(e){var n=(0,t._)({},g,e);return o.useMutation(E,n)}var I=(0,r.gql)(h(),x);function R(e){var n=(0,t._)({},g,e);return o.useMutation(I,n)}e.s(["ReplLinkedSecretsDocument",()=>w,"useLinkSharedSecretsMutation",()=>C,"useReplLinkedSecretsQuery",()=>j,"useSecretsPaneAuthorizationsQuery",()=>b,"useUnlinkSharedSecretsMutation",()=>A,"useUpdateSharedSecretLinkMutation",()=>R,"useWorkspaceAndReplLinkedSecretsLazyQuery",()=>D,"useWorkspaceSecretsQuery",()=>_])},678317,e=>{"use strict";e.i(671901);var t=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""};e.s(["execToString",()=>t])},729678,107129,241703,957789,522029,198992,32995,686631,936239,589910,e=>{"use strict";var t,n,r,i,a=e.i(297083),o=e.i(530658),s=e.i(817556),l=e.i(389959),u=e.i(368964),c=e.i(678420),d=e.i(403934),p=e.i(62820),f=e.i(671901),m=e.i(967963),h=e.i(678317),g=e.i(255444),v=e.i(641326),x=e.i(903381),y=e.i(483820);function b(e){var t=e.secrets,n=e.replId,r=(0,o._)((0,c.useWorkspaceAndReplLinkedSecretsLazyQuery)(),1)[0],i=(0,o._)((0,d.useDeploymentGetIgnoredSecretsHostingDeploymentLazyQuery)(),1)[0];return(0,l.useCallback)(function(){return(0,a._)(function(){var e,a,l,u,c,d,p,f,m,h,g,v,x,y,b,S,_,w,j,T,D,k;return(0,s._)(this,function(s){switch(s.label){case 0:return[4,r({variables:{replId:n}})];case 1:return l=s.sent().data,[4,i({variables:{replId:n}})];case 2:if(u=s.sent().data,c=new Map,d=(null==u?void 0:u.getRepl.__typename)==="Repl"&&(null==u||null==(e=u.getRepl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?u.getRepl.hostingDeployment.ignoredSecrets:[],(null==l?void 0:l.getRepl.__typename)==="Repl"&&l.getRepl.sharedSecretLinks&&(null==(a=l.currentUser)?void 0:a.secrets.__typename)==="SharedSecretConnection"){p=l.currentUser.secrets.items,f=!0,m=!1,h=void 0;try{for(g=function(){var e,t=x.value,n=p.find(function(e){return e.id===t.secret.id});c.set(t.alias,null!=(e=null==n?void 0:n.value)?e:"")},v=l.getRepl.sharedSecretLinks[Symbol.iterator]();!(f=(x=v.next()).done);f=!0)g()}catch(e){m=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw h}}}return[4,t.read()];case 3:y=s.sent(),b=!0,S=!1,_=void 0;try{for(w=y.entries()[Symbol.iterator]();!(b=(j=w.next()).done);b=!0)D=(T=(0,o._)(j.value,2))[0],k=T[1],d.includes(D)||c.set(D,k)}catch(e){S=!0,_=e}finally{try{b||null==w.return||w.return()}finally{if(S)throw _}}return[2,Array.from(c,function(e){var t=(0,o._)(e,2);return{name:t[0],value:t[1]}})]}})})()},[t,i,r,n])}function S(e){return(0,a._)(function(){var t,n,r,i,o,l,c,d,p,m,g,x,y,b;return(0,s._)(this,function(S){switch(S.label){case 0:return t=null,n=null,r=null,i=null,o=null,l=null,[4,(0,a._)(function(){var t,n,r;return(0,s._)(this,function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(n=(t=i.sent()).config,(r=t.error)===v.DotReplitErrors.NotFound)return[2];if(r)throw Error("Failed to get .replit config with Error: "+r);return[2,n]}})})()];case 1:if(!(c=S.sent()))return[2,{buildCommand:t,runCommand:n,ignorePorts:r,appType:i,publicDir:o,providerFromTarget:l}];if(!c.deployment)return[3,2];switch(p=(d=c.deployment).build,m=d.run,g=d.ignorePorts,x=d.target,y=d.publicDir,p&&(t=(0,h.execToString)(p)),m&&(n=(0,h.execToString)(m)),null!=g&&(r=g),x){case f.api.DeploymentConfig.Target.VM:case f.api.DeploymentConfig.Target.GCE:l=u.HostingBuildProvider.Gce,i=r?u.DeployHostingBuildAppType.Worker:u.DeployHostingBuildAppType.Server;break;case f.api.DeploymentConfig.Target.AUTOSCALE:case f.api.DeploymentConfig.Target.CLOUDRUN:l=u.HostingBuildProvider.CloudRun,i=u.DeployHostingBuildAppType.CloudRun;break;case f.api.DeploymentConfig.Target.STATIC:l=u.HostingBuildProvider.Static,i=u.DeployHostingBuildAppType.Static;break;case f.api.DeploymentConfig.Target.SCHEDULED:l=u.HostingBuildProvider.Cron,i=u.DeployHostingBuildAppType.Cron}return y&&(o=y),[3,4];case 2:return[4,e.getRunConfig()];case 3:b=S.sent(),c.compile&&(t=(0,h.execToString)(c.compile)),b.run?n=(0,h.execToString)(b.run.run):c.run&&(n=(0,h.execToString)(b.run)),S.label=4;case 4:return[2,{buildCommand:t,runCommand:n,ignorePorts:r,appType:i,publicDir:o,providerFromTarget:l}]}})})()}var _={buildCommand:{delete:function(){return(0,g.removeFieldOp)("deployment/build")},create:function(e){return(0,g.createDeploymentsBuildCommandOp)(e.toString())}},runCommand:{delete:function(){return(0,g.removeFieldOp)("deployment/run")},create:function(e){return(0,g.createDeploymentsRunCommandOp)(e.toString())}},ignorePorts:{delete:function(){return(0,g.removeFieldOp)("deployment/ignorePorts")},create:function(e){return(0,g.createDeploymentsIgnorePortsOp)(!!e)}},appType:{delete:function(){return(0,g.removeFieldOp)("deployment/deploymentTarget")},create:function(e){var t=null;switch(e){case u.DeployHostingBuildAppType.Server:case u.DeployHostingBuildAppType.Worker:t="gce";break;case u.DeployHostingBuildAppType.CloudRun:t="cloudrun";break;case u.DeployHostingBuildAppType.Static:t="static";break;case u.DeployHostingBuildAppType.Cron:t="scheduled"}return t?(0,g.createDeploymentTargetOp)(t):null}},publicDir:{delete:function(){return(0,g.removeFieldOp)("deployment/publicDir")},create:function(e){return(0,g.createDeploymentPublicDirOp)(e.toString())}},providerFromTarget:{delete:function(){return(0,g.removeFieldOp)("deployment/deploymentTarget")},create:function(e){var t=null;switch(e){case u.HostingBuildProvider.Gce:t="gce";break;case u.HostingBuildProvider.CloudRun:t="cloudrun";break;case u.HostingBuildProvider.Static:t="static";break;case u.HostingBuildProvider.Cron:t="scheduled";break;case u.HostingBuildProvider.Extension:case u.HostingBuildProvider.AzureContainerApp:case u.HostingBuildProvider.AzureVm:return null}return t?(0,g.createDeploymentTargetOp)(t):null}}};function w(e,t,n){return(0,a._)(function(e,t,n){var r,i,a,o,l,u,c,d,f,h,g,v,b,S,w,j;return(0,s._)(this,function(s){switch(s.label){case 0:r=n.fs,i=n.container,a=n.dotReplit,o=[],l=!0,u=!1,c=void 0;try{for(d=Object.keys(e)[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)g=e[h=f.value],v=t[h],b=_[h],g!==v&&("string"==typeof g&&(0,m.hasCommand)(g)||"boolean"==typeof g&&g?(S=b.create(g))&&o.push(S):o.push(b.delete()))}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}if(i.getConnectionState()!==p.ConnectionState.CONNECTED)throw new y.ReplConnectionError;if(!o.length)return[3,2];return[4,a.updateDotReplit(o)];case 1:if(w=s.sent().error)throw Error(w);s.label=2;case 2:return j=null,[4,new Promise(function(e){r.getStatus()!==x.FsStatus.Syncing&&e(!0),j=setInterval(function(){r.getStatus()!==x.FsStatus.Syncing&&e(!0)},1e3)})];case 3:return s.sent(),j&&clearInterval(j),[2]}})}).apply(this,arguments)}e.s(["getDotReplitDeploymentConfig",()=>S,"setDotReplitDeploymentConfig",()=>w,"useGetSecretsAsDeploymentEntries",()=>b],729678),e.s(["AutoscaleMachineConfiguration",()=>tK,"getMachineConfigurationBySlug",()=>tq,"useAutoscaleConfigurations",()=>tW],589910);var j=e.i(276385),T=e.i(161322),D=e.i(878420),k=e.i(569384),C=e.i(973245),E=e.i(304277);e.i(566901);var A=e.i(963084);function I(){var e=(0,k._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}var R={},P=(0,C.gql)(I(),A.MachineConfigurationFragmentDoc),M=e.i(761201),O=e.i(399344),N=e.i(914279),L=e.i(68893),B=e.i(858248),V=e.i(709485),U=function(e){var t=e.context;(0,B.track)(V.events.DEPLOYMENT_SECTION_VIEWED,{context:t})},F=function(e,t){(0,B.track)(V.events.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:t})},H=function(e){(0,B.track)(V.events.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})};e.s(["trackDebugSummaryUsed",()=>F,"trackDeploymentAddSecretClicked",()=>H,"trackDeploymentSectionViewed",()=>U],107129);var G=((t={}).Intro="intro",t.Deployment="deployment",t.DeploymentInProgress="deployment_in_progress",t.Analytics="analytics",t.Logs="logs",t.Settings="settings",t.Schedule="schedule",t.ResourceMonitoring="resource_monitoring",t.Domains="domains",t.ReservedVMTierSelection="reserved_vm_tier_selection",t.AutoscaleMachineConfiguration="autoscale_machine_configuration",t),z=((n={}).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",n.ChangeView="change_view",n.OpenPane="open_pane",n);e.s(["ViewActionType",()=>z,"Views",()=>G],241703);var q=e.i(541793),W=e.i(845822),K=e.i(967629),$=e.i(480028),Y=[1,2,4,8],X=(0,q.atom)(W.defaultAutoscaleDeploymentCostDetails),Q=(0,q.atom)(function(e){var t=e(X),n=t.costPerComputeUnitUsd*t.computeUnitsPerCpu;return[n,2*n,4*n,8*n]}),J=[[0,3],[0,4],[2,5],[3,6]],Z=Y.length-1,ee=1/(2*Z),et=(0,q.atom)(2),en=(0,q.atom)(function(e){return Y[e(et)]}),er=(0,q.atom)(function(e){return e(Q)[e(et)]}),ei=(0,q.atom)(function(e){return J[e(et)]}),ea=(0,q.atom)(0),eo=(0,q.atom)(function(e){var t=e(eg)[0]/Z,n=e(eg)[1]/Z,r=0,i=0;return e(ea)<t&&(r=(t-e(ea))/ee,i=t-ee),e(ea)>n&&(r=(e(ea)-n)/ee,i=n+ee),{overage:r,point:i}}),es=(0,q.atom)(0),el=(0,q.atom)(0),eu=[.5,1,2,4,8,16,32],ec=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],ed=eu.length-1,ep=1/(2*ed),ef=(0,q.atom)(4),em=(0,q.atom)(function(e){return eu[e(ef)]}),eh=(0,q.atom)(function(e){var t=e(X).costPerComputeUnitUsd;return e(ew)*t}),eg=(0,q.atom)(function(e){return ec[e(ef)]}),ev=(0,q.atom)(0),ex=(0,q.atom)(function(e){var t=e(ei)[0]/ed,n=e(ei)[1]/ed,r=0,i=0;return e(ev)<t&&(r=(t-e(ev))/ep,i=t-ep),e(ev)>n&&(r=(e(ev)-n)/ep,i=n+ep),{overage:r,point:i}}),ey=(0,q.atom)(null,function(e,t){var n=e(et),r=e(eg)[0],i=e(eg)[1];n<r&&t(et,r),n>i&&t(et,i)}),eb=(0,q.atom)(null,function(e,t){var n=e(ef),r=e(ei)[0],i=e(ei)[1];n<r&&t(ef,r),n>i&&t(ef,i)}),eS=(0,q.atom)(function(e){var t=e(eg)[0]/Z,n=e(eg)[1]/Z,r=e(ei)[0]/ed,i=e(ei)[1]/ed;return e(ea)<t?(t-e(ea))/ee:e(ea)>n?(e(ea)-n)/ee:e(ev)<r?(r-e(ev))/ep:e(ev)>i?(e(ev)-i)/ep:0}),e_=(0,q.atom)(function(e){var t;return(1e5*(t={ramCost:e(eh),cpuCost:e(er)}).ramCost+1e5*t.cpuCost)/1e5}),ew=(0,q.atom)(function(e){var t=e(X).computeUnitsPerRam;return e(em)*t}),ej=(0,q.atom)(function(e){var t=e(X).computeUnitsPerCpu;return e(en)*t}),eT=(0,q.atom)(function(e){return e(ew)+e(ej)}),eD=((r={}).None="0ms",r.Normal="200ms",r),ek=["ArrowLeft","ArrowRight","Home","End"],eC=(0,K.css)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),eE=(0,K.css)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:$.tokens.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat($.tokens.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}});e.s(["CPUValues",()=>Y,"MAX_CPU_INDEX",()=>Z,"MAX_RAM_INDEX",()=>ed,"RAMValues",()=>eu,"SCRUBBING_KEYS",()=>ek,"TransitionTime",()=>eD,"costDetailsAtom",()=>X,"cpuComputeUnitsAtom",()=>ej,"cpuIndexAtom",()=>et,"cpuMulAtom",()=>ea,"cpuRangeOverageAtom",()=>eo,"cpuThumbLeftAtom",()=>es,"cpuValueAtom",()=>en,"ramComputeUnitsAtom",()=>ew,"ramIndexAtom",()=>ef,"ramMulAtom",()=>ev,"ramRangeOverageAtom",()=>ex,"ramThumbLeftAtom",()=>el,"ramValueAtom",()=>em,"scrubberCss",()=>eC,"snapDistanceAtom",()=>eS,"thumbCss",()=>eE,"totalComputeUnitsAtom",()=>eT,"totalCostAtom",()=>e_,"validateCPUAtom",()=>ey,"validateRAMAtom",()=>eb],957789);var eA=[1,2,3,4,5,6,7,8,9,10],eI=eA.length-1,eR=1/(2*eI),eP=(0,q.atom)(2),eM=(0,q.atom)(function(e){return eA[e(eP)]}),eO=(0,q.atom)(function(e){return(e(e_)*e(eM)).toFixed(6)}),eN=(0,q.atom)(function(e){return e(eT)*e(eM)}),eL=(0,q.atom)(0),eB=(0,q.atom)(function(e){var t=0/eI,n=eA.length-1/eI,r=0,i=0;return e(eL)<t&&(r=(t-e(eL))/eR,i=t-eR),e(eL)>n&&(r=(e(eL)-n)/eR,i=n+eR),{overage:r,point:i}}),eV=((i={}).None="0ms",i.Normal="120ms",i),eU=["ArrowLeft","ArrowRight","Home","End"],eF=(0,K.css)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),eH=(0,K.css)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:$.tokens.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat($.tokens.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}});e.s(["MAX_MAX_INSTANCES_INDEX",()=>eI,"SCRUBBING_KEYS",()=>eU,"TransitionTime",()=>eV,"maxInstancesComputeUnitsAtom",()=>eN,"maxInstancesCostAtom",()=>eO,"maxInstancesIndexAtom",()=>eP,"maxInstancesMulAtom",()=>eL,"maxInstancesRangeOverageAtom",()=>eB,"maxInstancesValueAtom",()=>eM,"maxInstancesValues",()=>eA,"scrubberCss",()=>eF,"thumbCss",()=>eH],522029);var eG=e.i(64386),ez=e.i(886513),eq=e.i(721281),eW=e.i(351981),eW=eW,eK=e.i(446530),e$=e.i(613355),eY=e.i(625484),eX=e$.container.min(600),eQ=(0,eK.cssRecord)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[e$.rcss.display.none,(0,eq._)({},eX,e$.rcss.display.flex)],hiddenOnDesktop:[e$.rcss.display.flex,(0,eq._)({},eX,e$.rcss.display.none)]});function eJ(e){var t,n,r,i,a=e.children,s=e.render,u=e.timeout,c=void 0===u?300:u,d=e.initialHeight,p=(0,l.useRef)(null),f=(0,l.useRef)(null),m=(t=f,r=(n=(0,o._)((0,l.useState)(0),2))[0],i=n[1],(0,l.useEffect)(function(){if(t.current){var e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value.borderBoxSize[0].blockSize;i(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}});return e.observe(t.current),function(){return e.disconnect()}}},[r,t]),r),h=m>0?m:d,g={transition:c+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},v={entering:{opacity:1,height:h},entered:{transitionProperty:"opacity",opacity:1,height:h,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,j.jsx)(eW.default,{nodeRef:p,timeout:c,in:s,children:function(e){return(0,j.jsx)(eY.View,{innerRef:p,style:(0,D._)({},g,v[e]),children:(0,j.jsx)(eY.View,{innerRef:f,children:a})})}})}e.s(["TimelineTransition",()=>eJ,"mobileWidthContainerQuery",()=>eX,"sharedCss",()=>eQ],198992);var eZ=[e$.rcss.width("100%"),e$.rcss.p(8)],e0=[e$.rcss.py(32),e$.rcss.minHeight("100%"),e$.rcss.center],e1=function(e){var t=e.children,n=e.centered,r=e.maxWidth,i=(0,ez._)(e,["children","centered","maxWidth"]),a=[eZ,n&&e0,r&&eQ.maxWidth].filter(Boolean);return(0,j.jsx)(eY.View,(0,eG._)((0,D._)({},i),{css:a,children:t}))};e.s(["PaneSection",()=>e1],32995);var e2=e.i(136540),e4=e.i(396776),e8=e.i(352767),e6=e.i(940745),e3=e.i(42458),e5=[e$.rcss.p(8),e$.rcss.center],e9=function(){return(0,j.jsx)(eY.View,{css:e5,children:(0,j.jsx)(e6.default,{size:24})})},e7=(0,eK.cssRecord)({error:[e$.rcss.flex.grow(0),e$.rcss.mt(0)]}),te=function(e){var t=e.text,n=(0,ez._)(e,["text"]);return(0,j.jsx)(e1,(0,eG._)((0,D._)({css:e7.error},n),{children:(0,j.jsx)(e4.StatusBanner,{colorway:"warning",icon:(0,j.jsx)(e3.default,{}),text:t})}))},tt=function(e){var t=e.onBack;return(0,j.jsx)(eY.View,{row:!0,align:"center",children:(0,j.jsx)(e2.IconButton,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,j.jsx)(e8.default,{})})})};e.s(["ViewBack",()=>tt,"ViewError",()=>te,"ViewLoading",()=>e9],686631);let tn=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,T.useAtom)(en),1)[0],r=(0,T.useSetAtom)(es),i=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(Y[0])),i.current.setAttribute("aria-valuemax",String(Y[Y.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,l.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),a.current=requestAnimationFrame(e))};return e(),function(){a.current&&cancelAnimationFrame(a.current)}},[r]),(0,l.useMemo)(function(){return(0,j.jsx)("div",{ref:i,role:"slider",tabIndex:0,css:[eE,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var tr=e.i(337761),ti="min(var(--point), var(--position))",ta="max(var(--point), var(--position))";let to=(0,l.forwardRef)(function(e,t){var n=(0,T.useAtomValue)(eo),r=n.overage,i=n.point,a=(0,T.useAtomValue)(ea),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,j.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.interactiveBorder,borderRadius:"2px"},children:(0,j.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(ti,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(ti,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(ta,", \n                  transparent ").concat(ta," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});var ts=(0,eK.cssRecord)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:$.tokens.outlineStronger}});function tl(e){var t=e.list;return(0,j.jsx)(eY.View,{css:ts.container,children:t.map(function(e){return(0,j.jsx)(eY.View,{css:ts.mark},e)})})}var tu=e$.container.min(320),tc=(0,eK.cssRecord)({container:e$.rcss.colWithGap(4),label:[e$.rcss.flex.column,e$.rcss.pb(4),(0,eq._)({},tu,[e$.rcss.flex.row,e$.rcss.justify.spaceBetween,e$.rcss.pb(0)])],resource:e$.rcss.fontWeight.medium,cost:[e$.rcss.rowWithGap(1),e$.rcss.align.baseline]}),td=e.i(546284),tp=e.i(960178);function tf(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(et),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/Z),f(eD.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*Z)))};d(n.clientX);var p=function(e){f(eD.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f(eD.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&ek.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(Z,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=Z}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,j.jsxs)(eY.View,{gap:8,children:[(0,j.jsxs)(eY.View,{innerRef:c,css:eC,children:[(0,j.jsx)(to,{ref:d}),(0,j.jsx)(tn,{ref:p})]}),(0,j.jsx)(tl,{list:Y})]})},[])}function tm(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(en),1)[0],r=(0,o._)((0,T.useAtom)(ej),1)[0],i=(0,T.useSetAtom)(eb);return(0,l.useEffect)(function(){i()},[i,n]),(0,j.jsxs)(eY.View,{css:tc.container,children:[(0,j.jsxs)(eY.View,{css:tc.label,children:[(0,j.jsxs)(tp.Text,{css:tc.resource,multiline:!1,children:[n," vCPU",n>1?"s":""]}),(0,j.jsxs)(eY.View,{css:tc.cost,children:[(0,j.jsxs)(tp.Text,{color:"dimmer",multiline:!1,children:[r," ",(0,td.default)("compute unit",r)]}),(0,j.jsx)(tp.Text,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,j.jsx)(tf,{setAttrs:t})]})}let th=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,T.useAtom)(em),1)[0],r=(0,T.useSetAtom)(el),i=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(eu[0])),i.current.setAttribute("aria-valuemax",String(eu[eu.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,l.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),a.current=requestAnimationFrame(e))};return e(),function(){a.current&&cancelAnimationFrame(a.current)}},[r]),(0,l.useMemo)(function(){return(0,j.jsx)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[eE,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var tg="min(var(--point), var(--position))",tv="max(var(--point), var(--position))";let tx=(0,l.forwardRef)(function(e,t){var n=(0,T.useAtomValue)(ex),r=n.overage,i=n.point,a=(0,T.useAtomValue)(ev),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,j.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.interactiveBorder,borderRadius:"2px"},children:(0,j.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(tg,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tg,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tv,", \n                  transparent ").concat(tv," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function ty(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(ef),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/ed),f(eD.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*ed)))};d(n.clientX);var p=function(e){f(eD.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f(eD.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&ek.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(ed,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=ed}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,j.jsxs)(eY.View,{gap:8,children:[(0,j.jsxs)(eY.View,{innerRef:c,css:eC,children:[(0,j.jsx)(tx,{ref:d}),(0,j.jsx)(th,{ref:p})]}),(0,j.jsx)(tl,{list:eu})]})},[])}function tb(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(em),1)[0],r=(0,o._)((0,T.useAtom)(ew),1)[0],i=(0,T.useSetAtom)(ey);return(0,l.useEffect)(function(){i()},[i,n]),(0,j.jsxs)(eY.View,{css:tc.container,children:[(0,j.jsxs)(eY.View,{css:tc.label,children:[(0,j.jsxs)(tp.Text,{css:tc.resource,multiline:!1,children:[n," GiB RAM"]}),(0,j.jsxs)(eY.View,{css:tc.cost,children:[(0,j.jsxs)(tp.Text,{color:"dimmer",multiline:!1,children:[r," ",(0,td.default)("compute unit",r)]}),(0,j.jsx)(tp.Text,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,j.jsx)(ty,{setAttrs:t})]})}var tS=(0,eK.cssRecord)({container:[e$.rcss.width("100%"),e$.rcss.position.absolute,e$.rcss.top(60),e$.rcss.bottom(21),e$.rcss.transition.snappy,e$.rcss.zIndex(1),(0,eq._)({},e$.container.min(320),e$.rcss.top(34))],svg:[e$.rcss.width("100%"),e$.rcss.height("100%"),e$.rcss.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function t_(){var e,t=(0,T.useAtomValue)(eS),n=(0,l.useRef)(null),r=(0,l.useRef)(null),i=(0,l.useRef)((null==(e=r.current)?void 0:e.offsetWidth)||0),a=(0,T.useAtomValue)(es),o=(0,T.useAtomValue)(el);(0,l.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var s={x1:a/(i.current-16)*100,x2:o/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,l.useEffect)(function(){(0,tr.styleSet)(n,"--opacity",String(Math.pow(t,1/3)))},[t]),(0,j.jsx)(eY.View,{css:tS.container,px:8,id:"rope",innerRef:r,children:(0,j.jsxs)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:tS.svg,children:[(0,j.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.outlineDimmer})),(0,j.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.outlineDefault,strokeDasharray:8})),(0,j.jsxs)("g",{ref:n,css:tS.overage,children:[(0,j.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.accentPrimaryDefault})),(0,j.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var tw=e.i(508775),tj=e.i(754873),tT=e.i(140487),tD=e.i(929872),tk=e.i(751273),tC=e.i(33914),tE=e.i(363201),tA=[e$.rcss.borderRadius(8)],tI=(0,eK.cssRecord)({container:[tA],disabled:[tA,{opacity:.5,pointerEvents:"none"}],bottom:[e$.rcss.border({direction:"top",color:$.tokens.outlineDimmer})],edit:tj.interactive.outlined,overviewLine:[e$.rcss.flex.column,(0,eq._)({},e$.container.min(320),[e$.rcss.flex.row,e$.rcss.justify.spaceBetween])],overviewValue:[e$.rcss.fontWeight.medium],cost:[e$.rcss.flex.row,e$.rcss.align.baseline,{gap:1}],builder:[e$.rcss.position.relative,{"--cpu-transition-time":eD.Normal,"--cpu-progress":1,"--ram-transition-time":eD.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function tR(e){var t=e.initialMachineConfiguration,n=e.machineConfiguration,r=e.disabled,i=e.toggleEditable,a=void 0===i||i,s=(0,l.useRef)(null),u=(0,o._)((0,l.useState)(!a),2),c=u[0],d=u[1],p=(0,T.useAtomValue)(en),f=(0,T.useAtomValue)(em),m=(0,T.useAtomValue)(ej),h=(0,T.useAtomValue)(ew),g=(0,T.useAtomValue)(e_),v=(0,T.useAtomValue)(eT),x=(0,T.useSetAtom)(X),y=(0,T.useSetAtom)(ea),b=(0,T.useSetAtom)(ev),S=(0,T.useSetAtom)(et),_=(0,T.useSetAtom)(ef);return(0,l.useEffect)(function(){x((0,tw.getDeploymentCostDetails)().autoscaleDeploymentCostDetails)},[x]),(0,l.useEffect)(function(){var e=n||t;if(e){var r=Y.findIndex(function(t){return t.toString()===e.vcpu}),i=eu.findIndex(function(t){return t.toString()===e.memory});S(r),_(i)}},[n,t,S,_]),(0,j.jsxs)(tD.Surface,{elevated:!0,css:r?tI.disabled:tI.container,children:[(0,j.jsxs)(eY.View,{p:16,gap:12,children:[(0,j.jsxs)(eY.View,{row:!0,gap:8,children:[(0,j.jsxs)(eY.View,{grow:!0,shrink:!0,gap:4,children:[(0,j.jsxs)(eY.View,{row:!0,gap:4,align:"center",children:[(0,j.jsx)(tC.default,{}),(0,j.jsx)(tp.Text,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,j.jsx)(tp.Text,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),a?(0,j.jsx)(tT.Button,{text:c?"Done":"Edit",css:tI.edit,onClick:function(){return d(!c)}}):null]}),c?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(eY.View,{css:tI.builder,gap:12,innerRef:s,children:[(0,j.jsx)(t_,{}),(0,j.jsx)(tm,{setAttrs:{setTransitionTime:function(e){(0,tr.styleSet)(s,"--cpu-transition-time",e)},setProgress:function(e){(0,tr.styleSet)(s,"--cpu-progress",e.toString()),y(e)}}}),(0,j.jsx)(tb,{setAttrs:{setTransitionTime:function(e){(0,tr.styleSet)(s,"--ram-transition-time",e)},setProgress:function(e){(0,tr.styleSet)(s,"--ram-progress",e.toString()),b(e)}}})]}),(0,j.jsx)(tp.Text,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,j.jsxs)(eY.View,{gap:8,children:[(0,j.jsxs)(eY.View,{css:tI.overviewLine,children:[(0,j.jsxs)(tp.Text,{css:tI.overviewValue,multiline:!1,children:[p," vCPU",p>1?"s":""]}),(0,j.jsxs)(eY.View,{css:tI.cost,children:[(0,j.jsxs)(tp.Text,{multiline:!1,color:"dimmer",children:[m," ",(0,td.default)("compute unit",m)]}),(0,j.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,j.jsxs)(eY.View,{css:tI.overviewLine,children:[(0,j.jsxs)(tp.Text,{css:tI.overviewValue,multiline:!1,children:[f," GiB RAM"]}),(0,j.jsxs)(eY.View,{css:tI.cost,children:[(0,j.jsxs)(tp.Text,{multiline:!1,color:"dimmer",children:[h," ",(0,td.default)("compute unit",h)]}),(0,j.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,j.jsx)(eY.View,{css:tI.bottom,p:16,children:(0,j.jsxs)(eY.View,{css:tI.overviewLine,children:[(0,j.jsx)(tp.Text,{css:tI.overviewValue,multiline:!1,children:"Total per machine"}),(0,j.jsxs)(eY.View,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,j.jsxs)(eY.View,{css:tI.cost,children:[(0,j.jsxs)(tp.Text,{multiline:!1,children:[v," ",(0,td.default)("compute unit",v)]}),(0,j.jsx)(tp.Text,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,j.jsx)(tk.Tooltip,{tooltip:(0,j.jsxs)(eY.View,{css:tI.cost,children:[(0,j.jsxs)(tp.Text,{multiline:!1,children:["$",g.toFixed(6)]}),(0,j.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,j.jsx)(tE.default,{color:$.tokens.foregroundDimmest})})]})]})})]})}let tP=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,T.useAtom)(eM),1)[0],r=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(eA[0])),r.current.setAttribute("aria-valuemax",String(eA[eA.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,l.useMemo)(function(){return(0,j.jsx)("div",{ref:r,role:"slider",tabIndex:0,css:[eH,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var tM="min(var(--point), var(--position))",tO="max(var(--point), var(--position))";let tN=(0,l.forwardRef)(function(e,t){var n=(0,T.useAtomValue)(eB),r=n.overage,i=n.point,a=(0,T.useAtomValue)(eL),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,j.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.interactiveBorder,borderRadius:"2px"},children:(0,j.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(tM,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tM,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tO,", \n                  transparent ").concat(tO," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function tL(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(eP),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/eI),f(eV.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*eI)))};d(n.clientX);var p=function(e){f(eV.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},h=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),f(eV.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",h),window.addEventListener("pointercancel",h),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&eU.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(eI,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=eI}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,j.jsx)(eY.View,{gap:8,children:(0,j.jsxs)(eY.View,{innerRef:c,css:eF,children:[(0,j.jsx)(tN,{ref:d}),(0,j.jsx)(tP,{ref:p})]})})},[])}function tB(e){var t=e.setAttrs,n=(0,o._)((0,T.useAtom)(eM),1)[0],r=(0,o._)((0,T.useAtom)(eO),1)[0],i=(0,o._)((0,T.useAtom)(eN),1)[0];return(0,j.jsxs)(eY.View,{css:tc.container,children:[(0,j.jsxs)(eY.View,{css:tc.label,children:[(0,j.jsxs)(tp.Text,{css:tc.resource,multiline:!1,children:[n," ",(0,td.default)("machine",n)]}),(0,j.jsxs)(eY.View,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,j.jsxs)(eY.View,{css:tc.cost,children:[(0,j.jsxs)(tp.Text,{multiline:!1,children:[i," compute units"]}),(0,j.jsx)(tp.Text,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,j.jsx)(tk.Tooltip,{tooltip:(0,j.jsxs)(eY.View,{css:tc.cost,children:[(0,j.jsxs)(tp.Text,{multiline:!1,children:["$",r]}),(0,j.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,j.jsx)(tE.default,{color:$.tokens.foregroundDimmest})})]})]}),(0,j.jsx)(tL,{setAttrs:t})]})}var tV=e.i(292297),tU=[e$.rcss.colWithGap(12),e$.rcss.borderRadius("container"),e$.rcss.p(16)],tF=(0,eK.cssRecord)({container:[tU],disabled:[tU,{opacity:.5,pointerEvents:"none"}],builder:[e$.rcss.position.relative,{"--max-instances-transition-time":eV.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function tH(e){var t=e.initialMaxMachineInstances,n=e.maxMachineInstances,r=e.disabled,i=e.onError,a=(0,l.useRef)(null),o=(0,T.useSetAtom)(eL),s=(0,T.useSetAtom)(eP);return(0,l.useEffect)(function(){var e=n||t;if(e){var r=eA.indexOf(e);if(-1===r)return void i("An error occurred while setting selected max machine instances.");s(r)}},[t,n,s,i]),(0,j.jsxs)(tD.Surface,{elevated:!0,css:r?tF.disabled:tF.container,children:[(0,j.jsxs)(eY.View,{gap:4,children:[(0,j.jsxs)(eY.View,{row:!0,gap:4,align:"center",children:[(0,j.jsx)(tV.default,{}),(0,j.jsx)(tp.Text,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,j.jsx)(tp.Text,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,j.jsx)(eY.View,{css:tF.builder,gap:8,innerRef:a,children:(0,j.jsx)(tB,{setAttrs:{setTransitionTime:function(e){(0,tr.styleSet)(a,"--max-instances-transition-time",e)},setProgress:function(e){(0,tr.styleSet)(a,"--max-instances-progress",e.toString()),o(e)}}})})]})}function tG(e){var t=e.initialMachineConfiguration,n=e.machineConfiguration,r=e.initialMaxMachineInstances,i=e.maxMachineInstances,a=e.disabled,o=void 0!==a&&a,s=e.toggleEditable,l=e.onError;return(0,j.jsxs)(eY.View,{gap:16,children:[(0,j.jsxs)(eY.View,{gap:4,children:[(0,j.jsx)(tp.Text,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,j.jsx)(tp.Text,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,j.jsxs)(eY.View,{gap:16,children:[(0,j.jsx)(tR,{initialMachineConfiguration:t,machineConfiguration:n,disabled:o,toggleEditable:void 0===s||s}),(0,j.jsx)(tH,{initialMaxMachineInstances:r,maxMachineInstances:i,disabled:o,onError:l})]})]})}e.s(["AutoscaleConfigurationBuilder",()=>tG],936239);var tz=e.i(369948);function tq(e){var t=e.slug,n=e.machineConfigurations;if(t&&n)return n.find(function(e){return e.slug===t})}function tW(e){var t,n,r=e.isAzureDeployment,i=e.isFreeUser,a=e.onError,o=(t={onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}},n=(0,D._)({},R,t),E.useQuery(P,n)),s=o.data,u=o.loading,c=(null==s?void 0:s.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?s.hostingMachineConfigurations.results:null,d=(0,T.useAtomValue)(en),p=(0,T.useAtomValue)(em),f=(0,T.useAtomValue)(eM),m=(0,l.useMemo)(function(){return function(e){var t=e.autoscaleCpuValue,n=e.autoscaleRamValue,r=e.maxInstances,i=e.autoscaleConfigurations;if(i){var a=i.find(function(e){var r=e.vcpu,i=e.memory;return t.toString()===r&&n.toString()===i});if(a){var o=a.id,s=a.slug;return{configurationId:o,configurationLabel:a.label,configurationSlug:s,maxInstances:r}}}}({autoscaleCpuValue:d,autoscaleRamValue:p,maxInstances:f,autoscaleConfigurations:c})},[d,p,f,c]),h=(0,l.useMemo)(function(){return function(e){var t=e.selectedMachineConfiguration,n=e.machineConfigurations,r=e.isAzureDeployment,i=e.isFreeUser;if(r){var a=null==n?void 0:n.find(function(e){return"cr-4-8"===e.slug});if(!a)return;return{configurationId:a.id,configurationLabel:a.label,configurationSlug:a.slug,maxInstances:2}}if(i){var o=null==n?void 0:n.find(function(e){return"cr-2-4"===e.slug});if(!o)return;return{configurationId:o.id,configurationLabel:o.label,configurationSlug:o.slug,maxInstances:1}}return t}({selectedMachineConfiguration:m,machineConfigurations:c,isAzureDeployment:r,isFreeUser:i})},[m,c,r,i]);return{defaultMachineConfiguration:h,selectedMachineConfiguration:r||i?h:m,machineConfigurations:c,loading:u}}var tK=function(e){var t=e.type,n=e.fetching,r=e.onError,i=e.onConfirm,a=e.onBack,o=(0,N.useDeploymentMode)(),s=(0,O.useDeploymentId)(),u=(0,O.useDeploymentCurrentBuild)(),c=(0,O.useDeploymentInProgressBuild)(),d=(0,O.useFreeTierCloudServices)(),p=void 0!==c,f=!p&&"string"!=typeof s,m="azure_container_app"===t,h=tW({isAzureDeployment:m,isFreeUser:d,onError:r}),g=h.defaultMachineConfiguration,v=h.selectedMachineConfiguration,x=h.machineConfigurations,y=h.loading;(0,l.useEffect)(function(){U({context:G.AutoscaleMachineConfiguration})},[]);var b=(0,l.useCallback)(function(){v?i(v):r("An error occurred trying to validate selected machine configuration")},[v,r,i]),S=y||n||p||o!==L.DeploymentMode.Ready||m||d,_=(0,l.useMemo)(function(){return m?{initialMachineConfiguration:tq({slug:null==g?void 0:g.configurationSlug,machineConfigurations:x}),initialMaxMachineInstances:null==g?void 0:g.maxInstances}:{initialMachineConfiguration:void 0,initialMaxMachineInstances:void 0}},[g,x,m]),w=_.initialMachineConfiguration,T=_.initialMaxMachineInstances;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(e1,{maxWidth:!0,children:(0,j.jsx)(tt,{onBack:function(){a()}})}),(0,j.jsx)(e1,{maxWidth:!0,children:(0,j.jsxs)(eY.View,{gap:16,children:[(0,j.jsx)(tG,{initialMachineConfiguration:w,machineConfiguration:null==u?void 0:u.machineConfiguration,initialMaxMachineInstances:T,maxMachineInstances:null==u?void 0:u.maxMachineInstances,disabled:S,onError:r}),(0,j.jsxs)(eY.View,{gap:8,pt:8,children:[(0,j.jsx)(tT.Button,{colorway:"primary",text:f?"Approve and configure build settings":"Approve and update",iconRight:(0,j.jsx)(tz.default,{}),onClick:b,loading:y}),(0,j.jsxs)(tp.Text,{color:"dimmest",children:["Your published app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,j.jsx)("a",{href:M.LINKS_DOCS.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},492267,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query IsAgentStackRepl($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isAgentStack\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a()),l=e.i(207237);function u(){var e,n,r,a,u,c=(a={variables:{replId:(0,l.default)()}},u=(0,t._)({},o,a),i.useQuery(s,u)),d=c.data,p=c.loading,f=c.refetch;return{isAgentStackRepl:(null==d||null==(e=d.getRepl)?void 0:e.__typename)==="Repl"&&null!=(r=null==(n=d.getRepl.config)?void 0:n.isAgentStack)&&r,loading:p,refetch:f}}e.s(["useIsAgentStackRepl",()=>u],492267)},399344,293265,e=>{"use strict";e.s(["Init",()=>eZ,"claimedFreeDomainAtom",()=>el,"containerAtom",()=>q,"determineIgnoredSecretKeys",()=>z,"dotReplitAtom",()=>$,"fsAtom",()=>W,"getPrivacyMode",()=>e6,"hideFreeDomainClaimSectionAtom",()=>es,"mergeEnvironmentVariables",()=>G,"portsAtom",()=>Y,"secretsAtom",()=>K,"useActiveBuildAction",()=>eY,"useAgentInboxState",()=>eV,"useAvailableDeploymentProviders",()=>eT,"useCancelInProgressDeploymentsBuild",()=>tt,"useContainerService",()=>X,"useDeployBuild",()=>e5,"useDeploymentCostDetails",()=>ej,"useDeploymentCurrentBuild",()=>eC,"useDeploymentDeployability",()=>e_,"useDeploymentError",()=>eM,"useDeploymentErrorGetter",()=>eO,"useDeploymentFailedBuild",()=>eR,"useDeploymentId",()=>eo,"useDeploymentInProgressBuild",()=>eA,"useDeploymentProvider",()=>eD,"useDeploymentScheduledDeletionTime",()=>ep,"useDeploymentSecurityScanState",()=>eL,"useDeploymentSessionOrg",()=>er,"useDeploymentSubdomain",()=>eg,"useDeploymentTimeCreated",()=>ec,"useDotReplitService",()=>Z,"useFreeTierCloudServices",()=>eS,"useFsService",()=>Q,"useIsMaybeVncRepl",()=>ex,"useLatestBuildActionUpdate",()=>eX,"useLatestFinishedDeploymentStatus",()=>em,"usePortsService",()=>ee,"usePostDeployModal",()=>tr,"useRefetchDeployment",()=>e0,"useReplitBadgeState",()=>eF,"useSecretsService",()=>J,"useSendDeploymentLifecycleCommand",()=>e7,"useSetDeploymentTriggerSource",()=>tn],399344);var t=e.i(297083),n=e.i(167626),r=e.i(878420),i=e.i(64386),a=e.i(530658),o=e.i(817556),s=e.i(389959),l=e.i(611159),u=e.i(131141),c=e.i(541793),d=e.i(442121),p=e.i(403934),f=e.i(165349),m=e.i(368964),h=e.i(569910),g=e.i(379334),v=e.i(967963),x=e.i(262664),y=e.i(424746),b=e.i(483820),S=e.i(271047),_=e.i(233693),w=e.i(265957),j=e.i(914279),T=e.i(830597),D=e.i(68893),k=e.i(165550),C=e.i(729678),E=e.i(589910),A=e.i(311106),I=e.i(508775),R=e.i(968783),P=e.i(993796),M=e.i(98816),O=e.i(574203),N=e.i(325990),L=e.i(207237);e.i(653863);var B=e.i(973519),V=e.i(492267),U=e.i(597103);function F(){var e,t=(0,U.useReplConfigAgentStackPlatformTypeQuery)({variables:{replId:(0,L.default)()}}),n=t.data,r=t.loading,i=t.refetch;return{agentStackPlatformType:(null==n||null==(e=n.getRepl)?void 0:e.__typename)==="Repl"&&n.getRepl.config.agentStackPlatformType,loading:r,refetch:i}}e.s(["useAgentStackPlatformType",()=>F],293265);var H=e.i(423111);function G(e){var t=e.currentBuildVars,n=e.workspaceSecrets,r=e.ignoredSecretKeys,i=new Map((null==t?void 0:t.map(function(e){return[e.name,e.value]}))||[]);return n&&n.forEach(function(e){var t=e.name,n=e.value;r.includes(t)||i.set(t,n)}),Array.from(i.entries()).map(function(e){var t=(0,a._)(e,2);return{name:t[0],value:t[1]}})}function z(e){return(0,t._)(function(e){var t,n,r,i,a;return(0,o._)(this,function(o){return(t=e.deploymentTimeCreated,n=e.buildTimeCreated,r=e.ignoreSecretsUntil,i=e.replId,a=e.apolloClient,t&&n&&r>new Date(t)&&r>new Date(n))?[2,(0,_.getDeploymentEnvVars)({replId:i,apolloClient:a}).then(function(e){return e.map(function(e){return e.name})})]:[2,(0,_.getDeploymentIgnoredSecrets)({replId:i,apolloClient:a})]})}).apply(this,arguments)}var q=(0,c.atom)({}),W=(0,c.atom)({}),K=(0,c.atom)({}),$=(0,c.atom)({}),Y=(0,c.atom)({});function X(){return(0,T.useValue)(q)}function Q(){return(0,T.useValue)(W)}function J(){return(0,T.useValue)(K)}function Z(){return(0,T.useValue)($)}function ee(){return(0,T.useValue)(Y)}var et=(0,c.atom)(void 0),en=(0,c.atom)(void 0);function er(){return(0,T.useValue)(en)}var ei=(0,c.atom)(void 0),ea=(0,c.atom)(void 0);function eo(){return(0,T.useValue)(ea)}var es=(0,c.atom)(!1),el=(0,c.atom)(null),eu=(0,c.atom)(void 0);function ec(){return(0,T.useValue)(eu)}var ed=(0,c.atom)(void 0);function ep(){return(0,T.useValue)(ed)}var ef=(0,c.atom)(void 0);function em(){return(0,T.useValue)(ef)}var eh=(0,c.atom)(void 0);function eg(){return(0,T.useValue)(eh)}var ev=(0,c.atom)(void 0);function ex(){return(0,T.useValue)(ev)}var ey=(0,c.atom)(!1),eb=(0,c.atom)(void 0);function eS(){var e,t,n=(0,T.useValue)(eb);return null!=(t=null==n||null==(e=n.useFreeTierCloudServices)?void 0:e.isAuthorized)&&t}function e_(){var e,t,n,r=(0,T.useValue)(et),i=(0,T.useValue)(eb),o=(0,T.useValue)(ek),s=(0,T.useSet)(ez),l=(0,T.useSet)(e1),u=(0,a._)((0,p.useDeploymentSessionLazyQuery)({fetchPolicy:"no-cache",onCompleted:s,onError:function(e){l(e.message)}}),1)[0],c=function(e,t){if(!e||!i)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var n=i.createAutoscaleDeployment,r=i.createAutoscaleDeploymentPrivate,a=i.createRvmDeployment,o=i.createRvmDeploymentPrivate,s=i.createScheduledDeployment,l=i.createStaticDeployment,u=i.createStaticDeploymentPrivate,c=i.redeployAutoscaleDeployment,d=i.redeployAutoscaleDeploymentPrivate,p=i.redeployRvmDeployment,f=i.redeployRvmDeploymentPrivate,g=i.redeployScheduledDeployment,v=i.redeployStaticDeployment,x=i.redeployStaticDeploymentPrivate;switch(e){case m.HostingBuildProvider.Static:return{deploy:t?u:l,redeploy:t?x:v,isIncludedInSubscription:!1};case m.HostingBuildProvider.Cron:return{deploy:s,redeploy:g,isIncludedInSubscription:!1};case m.HostingBuildProvider.AzureContainerApp:case m.HostingBuildProvider.CloudRun:return{deploy:t?r:n,redeploy:t?d:c,isIncludedInSubscription:!1};case m.HostingBuildProvider.AzureVm:case m.HostingBuildProvider.Gce:return{deploy:t?o:a,redeploy:t?f:p,isIncludedInSubscription:!1};case m.HostingBuildProvider.Extension:throw Error("Found unexpected provider");default:(0,h.default)(e)}};return{deployability:c(null==o?void 0:o.provider,null!=(t=null==o?void 0:o.isPrivate)?t:void 0),getDeployabilityByProvider:c,refetch:function(){if(r)return u({variables:{replId:r.id}})},hasDebugSummariesAuthorization:null!=(n=null==i||null==(e=i.useDeploymentDebugSummaries)?void 0:e.isAuthorized)&&n}}var ew=(0,c.atom)(I.defaultDeploymentCostDetails);function ej(){var e=(0,T.useValue)(ew),t=(0,s.useCallback)(function(t){return(0,I.getMachineConfigurationCostDetails)(t,e)},[e]);return(0,i._)((0,r._)({},e),{getMachineConfigurationCostDetailsBySlug:t})}function eT(){var e=er(),t=(0,N.useOrgFlag)({controlName:g.flagShowOnlyAzureDeployments,default:!1}),n=(0,P.useFlag)({controlName:g.flagShowOnlyAzureDeployments,default:!1}),r=e?t:n,i=(0,s.useCallback)(function(e){switch(e){case m.DeployHostingBuildAppType.CloudRun:return r?m.HostingBuildProvider.AzureContainerApp:m.HostingBuildProvider.CloudRun;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:if(r)return m.HostingBuildProvider.AzureVm;return m.HostingBuildProvider.Gce;case m.DeployHostingBuildAppType.Cron:if(r)throw Error("Azure deployments are not supported for Cron jobs");return m.HostingBuildProvider.Cron;case m.DeployHostingBuildAppType.Static:if(r)throw Error("Azure deployments are not supported for Static sites");return m.HostingBuildProvider.Static;default:(0,h.default)(e)}},[r]),a=r?{deploymentProviders:[m.HostingBuildProvider.AzureContainerApp,m.HostingBuildProvider.AzureVm],defaultDeploymentProvider:m.HostingBuildProvider.AzureContainerApp}:{deploymentProviders:[m.HostingBuildProvider.Gce,m.HostingBuildProvider.CloudRun,m.HostingBuildProvider.Static,m.HostingBuildProvider.Cron],defaultDeploymentProvider:m.HostingBuildProvider.CloudRun};return{deploymentProviders:a.deploymentProviders,defaultDeploymentProvider:a.defaultDeploymentProvider,getProviderFromAppType:i}}function eD(e){var n=e.onError,r=e.dotReplitService,i=(0,a._)((0,s.useState)(!0),2),l=i[0],u=i[1],c=(0,a._)((0,s.useState)(void 0),2),d=c[0],p=c[1],f=(0,a._)((0,s.useState)(void 0),2),h=f[0],g=f[1],v=eT(),x=v.defaultDeploymentProvider,y=v.getProviderFromAppType,b=(0,V.useIsAgentStackRepl)().isAgentStackRepl;return(0,s.useEffect)(function(){(0,t._)(function(){var e,t,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,2,3,4]),x===m.HostingBuildProvider.AzureContainerApp)return p(x),g(x),[2];if(b)return p(e=y(m.DeployHostingBuildAppType.CloudRun)),g(e),[2];return[4,(0,C.getDotReplitDeploymentConfig)(r)];case 1:if(null===(t=a.sent()).appType)return p(x),g(x),[2];return p(i=y(t.appType)),g(i),[3,4];case 2:return a.sent(),n("Something went wrong"),[3,4];case 3:return u(!1),[7];case 4:return[2]}})})()},[n,r,x,y,b]),{loading:l,activeProvider:d,setActiveProvider:p,recommendedProvider:h}}var ek=(0,c.atom)(void 0);function eC(){return(0,T.useValue)(ek)}var eE=(0,c.atom)(void 0);function eA(){return(0,T.useValue)(eE)}var eI=(0,c.atom)(void 0);function eR(){return(0,T.useValue)(eI)}var eP=(0,c.atom)(void 0);function eM(){return(0,T.useValue)(eP)}function eO(){return(0,T.useGet)(eP)}var eN=(0,c.atom)(!1);function eL(){var e=(0,T.useValue)(eN),t=(0,T.useSet)(eN),n=(0,R.useCurrentUserStoredOrgContext)().orgId,r=(0,O.default)(n),i=r.requireSecurityScanOnDeployment,a=r.adminOnlySecurityScanOnDeploymentBypass,o=r.isAdmin,l=(0,s.useMemo)(function(){return!!n&&(!!i||!!a&&!o)},[n,i,a,o]),u=!l,c=l||e,d=(0,s.useMemo)(function(){if(l){if(i)return"required";if(a&&!o)return"admin-only-bypass"}},[l,i,a,o]);return{enabled:c,userCanControl:u,isOrgEnforced:l,enforcementReason:d,setDeploymentSecurityScanEnabled:t}}var eB=(0,c.atom)(!1);function eV(){return{enabled:(0,T.useValue)(eB),setAgentInboxEnabled:(0,T.useSet)(eB)}}var eU=(0,c.atom)(null);function eF(){return{enabled:(0,T.useValue)(eU),setReplitBadgeEnabled:(0,T.useSet)(eU)}}var eH=(0,c.atom)(void 0),eG=(0,c.atom)(null,function(e,t){t(ea,void 0),t(eu,void 0),t(eh,void 0),t(ek,void 0),t(eE,void 0),t(j.deploymentModeAtom,D.DeploymentMode.Ready)}),ez=(0,c.atom)(null,function(e,t,n){var r,i="Repl"===n.getRepl.__typename?n.getRepl:null,a=(null==(r=n.currentUser)?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;i&&a&&t(eb,i.authorizations)}),eq=(0,c.atom)(null,function(e,t,n){var r,i,a,o,s,l,u="Repl"===n.getRepl.__typename?n.getRepl:null,c=(null==(r=n.currentUser)?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;if(u&&c){t(et,u),t(en,null!=(a=u.org)?a:void 0),t(ei,c),t(ez,n),t(ew,(0,I.getDeploymentCostDetails)()),t(ev,!!u.config.isVnc);var d=u.hostingDeployment;if(d){if("HostingDeployment"!==d.__typename)return t(eP,"Unexpected hosting deployment typename: ".concat(d.__typename));if(t(ea,d.id),t(eu,d.timeCreated),t(ek,d.currentBuild),t(ed,d.scheduledDeletionTime||void 0),t(eN,d.securityScanEnabled),t(eB,d.agentInboxEnabled),t(eU,null!=(s=d.replitBadgeEnabled)?s:null),t(ef,null!=(l=d.latestBuildStatus)?l:void 0),t(eh,d.replitAppSubdomain||u.lastUsedSubdomain||(0,v.getQualifiedReplSubdomain)({replSlug:u.slug,username:null==(o=u.owner)?void 0:o.username})),d.inProgressBuild){t(eE,d.inProgressBuild),t(j.deploymentModeAtom,D.DeploymentMode.Deploying);return}return void t(j.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(d.currentBuild.status))}t(eh,u.lastUsedSubdomain||(0,v.getQualifiedReplSubdomain)({replSlug:u.slug,username:null==(i=u.owner)?void 0:i.username})),t(j.deploymentModeAtom,D.DeploymentMode.Ready)}});function eW(){var e=(0,T.useSet)(eq),t=(0,T.useSet)(e1);return(0,a._)((0,p.useDeploymentSessionLazyQuery)({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){t(e.message)}}),1)[0]}var eK=(0,c.atom)(null,function(e,t,n){if("HostingBuildDeployStatusAction"===n.__typename){var r=e(j.deploymentModeAtom),i=e(eE),a=e(ek),o=n.status;if(r===D.DeploymentMode.Deploying){if(!i)return void t(e1,"No deployment in progress found");t(eE,(0,u.produce)(i,function(e){e.status=o})),(o===m.HostingBuildStatus.Success||o===m.HostingBuildStatus.Failed)&&(o===m.HostingBuildStatus.Failed&&t(eI,(0,u.produce)(i,function(e){e.status=o})),t(eE,void 0),o!==m.HostingBuildStatus.Success&&a||t(ek,(0,u.produce)(i,function(e){e.status=o,e.hasImageTag=i.provider!==m.HostingBuildProvider.Static&&o===m.HostingBuildStatus.Success})))}else if(r===D.DeploymentMode.ProcessingLifecycleCommand){if(!a)return void t(e1,"No current build found");t(ek,(0,u.produce)(a,function(e){e.status=o}))}t(j.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(o)),n.message&&o===m.HostingBuildStatus.Failed&&t(e1,n.message)}}),e$=(0,c.atom)(null);function eY(){return(0,T.useValue)(e$)}function eX(e){var t=(0,T.useObservableValue)(e$),n=(0,M.default)(e);(0,s.useEffect)(function(){return t.subscribe(function(e){e&&n.current(e)})},[t,n])}var eQ=(0,c.atom)(function(e){var t,n;switch(e(j.deploymentModeAtom)){case D.DeploymentMode.Deploying:return null==(t=e(eE))?void 0:t.id;case D.DeploymentMode.ProcessingLifecycleCommand:return null==(n=e(ek))?void 0:n.id;default:return}}),eJ=(0,c.atom)(null,function(e,n,r){var i=r.data.data;return(0,t._)(function(){return(0,o._)(this,function(e){return i&&(n(eK,i.hostingBuildDeployActionUpdates),n(e$,i.hostingBuildDeployActionUpdates)),[2]})})()});function eZ(e){var t,n,r,i,a;return t=e.replId,n=eW(),r=(0,T.useSet)(eJ),i=(0,T.useSet)(e1),(0,s.useEffect)(function(){n({variables:{replId:t}})},[n,t]),a=(0,T.useValue)(eQ),(0,p.useDeploymentSessionBuildDeployActionUpdatesSubscription)({variables:{input:{buildId:null!=a?a:""}},skip:!a,onData:r,onError:function(e){i(e.message)}}),null}function e0(){var e=(0,L.default)(),t=eW(),n=(0,T.useSet)(j.deploymentModeAtom);return(0,s.useCallback)(function(){return n(D.DeploymentMode.Loading),t({variables:{replId:e}})},[t,n,e])}var e1=(0,c.atom)(null,function(e,t,n){t(eP,n)}),e2=(0,c.atom)(null,function(e,t,n){var r,i=n.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename)return void t(e1,i.message);t(eP,void 0),t(eE,i.build),t(ea,i.targetDeployment.id),t(eu,i.targetDeployment.timeCreated),t(eh,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),t(j.deploymentModeAtom,D.DeploymentMode.Deploying)}}),e4=(0,c.atom)(null,function(e,t,n){var r,i=n.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename)return void t(e1,i.message);t(eE,i.build),t(ea,i.targetDeployment.id),t(eu,i.targetDeployment.timeCreated),t(eh,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),t(j.deploymentModeAtom,D.DeploymentMode.Deploying)}});function e8(e){var t=e.provider,n=e.ignorePorts;switch(t){case m.HostingBuildProvider.Static:return m.DeployHostingBuildAppType.Static;case m.HostingBuildProvider.CloudRun:case m.HostingBuildProvider.AzureContainerApp:return m.DeployHostingBuildAppType.CloudRun;case m.HostingBuildProvider.Cron:return m.DeployHostingBuildAppType.Cron;case m.HostingBuildProvider.Gce:case m.HostingBuildProvider.AzureVm:case m.HostingBuildProvider.Extension:case void 0:return n?m.DeployHostingBuildAppType.Worker:m.DeployHostingBuildAppType.Server;default:(0,h.default)(t)}}function e6(e){var t=e.isPrivate,n=e.hasPrivatePassword;return t&&n?m.DeployHostingBuildPrivacyMode.Password:t?m.DeployHostingBuildPrivacyMode.Private:m.DeployHostingBuildPrivacyMode.Public}function e3(e){var t=e.selectedPrivacyMode,n=e.shouldRequirePrivateDeployments,r=e.shouldDisablePasswordProtectedDeployments;return n&&t===m.DeployHostingBuildPrivacyMode.Public||r&&t===m.DeployHostingBuildPrivacyMode.Password?m.DeployHostingBuildPrivacyMode.Private:t}function e5(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).openDeploymentsPane,n=(0,L.default)(),u=er(),c=(0,d.useApolloClient)(),_=eo(),k=ec(),I=Z(),R=X(),M=Q(),N=J(),B=eS(),V=(0,a._)((0,p.useDeploymentSessionDeployBuildMutation)(),1)[0],U=(0,T.useSet)(e2),F=(0,T.useSet)(e1),q=(0,T.useSet)(e4),W=(0,T.useSet)(j.deploymentModeAtom),K=(0,T.useGet)(eE),$=(0,T.useSet)(eI),Y=(0,T.useGet)(eH),ee=eL().enabled,et=eV().enabled,en=eF().enabled,ei=eC(),ea=(0,a._)((0,f.useRollbackHostingBuildMutation)(),1)[0],es=(0,x.useHeliumDevelopmentDatabase)(),el=es.database,eu=es.getPgVersion,ed=es.getTableCount,ep=(0,y.useNeonDevelopmentDatabase)().database,ef=(0,y.useNeonProductionDatabase)().database,em=(0,w.usePrepareDatabaseState)(),eh=em.state,eg=em.dispatch,ev=(0,S.useHostingBuildRequiresDatabasePreparation)().requiresDatabasePreparation,ex=(0,y.useRefetchDatabasesLazy)("production").refetch,eb=(0,O.default)(null==u?void 0:u.id),e_=eb.requirePrivateDeployments,ew=eb.adminOnlyPublicDeployments,ej=eb.disablePasswordProtectedDeployments,eT=eb.adminOnlyPasswordProtectedDeploymentsBypass,eD=eb.isAdmin,ek=(0,H.useSetPublishClickedCompleted)(),eA=e_||!eD&&ew,eR=ej||!eD&&eT,eP=(0,s.useCallback)(function(e,t){var n,r,i;if(U(e),t&&!ef&&ex(),(null==(n=e.deployHostingBuild2)?void 0:n.__typename)!=="DeployHostingBuild2Result")throw Error(null!=(i=null==(r=e.deployHostingBuild2)?void 0:r.message)?i:"Unknown error")},[U,ef,ex]),eM=(0,P.useFlag)({controlName:g.flagEnableStandByBuilds,default:!1}),eO=(0,s.useCallback)(function(r){var i=r.envVars,a=r.subdomain,s=r.machineConfigurationId,c=r.maxMachineInstances,d=r.config,p=r.machineJob,f=r.privacyMode,x=r.privatePassword,y=r.hasAgentSession,S=r.ignoredSecrets,w=r.createNeonProductionDatabase,j=r.pushDevelopmentDatabaseObjects,T=r.syncStripe,k=r.enableSecurityScan,E=r.agentInboxEnabled,A=r.replitBadgeEnabled,P=r.provider,O=r.purchaseDomain;return(0,t._)(function(){var t,r,N,L,B,U,H,G,z,q,X,Q;return(0,o._)(this,function(o){switch(o.label){case 0:if(ek(!0),$(void 0),K())return F("Deployment already in progress"),[2];o.label=1;case 1:if(o.trys.push([1,10,,11]),t=d.buildCommand,r=d.runCommand,N=d.publicDir,L=d.ignorePorts,!(B=P?e8({provider:P,ignorePorts:!!L}):d.appType))throw new b.AppTypeFoundError;if(!a)throw new b.SubdomainNotFoundError;switch(B){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(N))throw new b.PublicDirNotFoundError;break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(r))throw new b.RunCommandNotFoundError;if((0,v.hasInvalidRunCommand)(r))throw new b.InvalidRunCommandError;if(B===m.DeployHostingBuildAppType.Cron){if(!(null==p?void 0:p.crontab)||""===p.crontab)throw new b.InvalidCrontabError("Schedule cannot be empty.");if(!(0,l.isValidCron)(p.crontab))throw new b.InvalidCrontabError("Invalid schedule. Must be a valid cron expression.");if(!(null==p?void 0:p.timezone)||""===p.timezone)throw new b.InvalidTimezoneError("Timezone cannot be empty.");if(!(0,g.isValidTimezone)(p.timezone))throw new b.InvalidTimezoneError("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,h.default)(B)}if(U=e3({selectedPrivacyMode:f,shouldRequirePrivateDeployments:eA,shouldDisablePasswordProtectedDeployments:eR}),void 0!==x&&U===m.DeployHostingBuildPrivacyMode.Password){if(""===x.trim())throw new b.PrivatePasswordError("Password cannot be empty.");if(x.length<5)throw new b.PrivatePasswordError("Password must be 5 or more characters.")}if(H=void 0,!(el&&eu&&ed))return[3,4];return[4,eu()];case 2:if(G=o.sent(),H={connectionString:el.connectionString,pgVersion:G},null!==w)return[3,4];return[4,ed()];case 3:(w=o.sent()>0)||(j=null),o.label=4;case 4:if(W(D.DeploymentMode.Preparing),z=Y(),q={replId:n,targetDeploymentId:_,targetMachineConfigurationId:s,maxMachineInstances:c,commands:{build:t,run:r||""},envVars:i,subdomain:a,provider:P,appType:B,context:"workspace",machineJob:p,privacyMode:U,privatePassword:x,hasAgentSession:y,ignoredSecretKeys:S,createNeonProductionDatabase:w,pushDevelopmentDatabaseObjects:j,syncStripe:T,enableSecurityScan:k,agentInboxEnabled:E,replitBadgeEnabled:null!=A?A:en,heliumDevelopmentDatabase:H,triggerSource:z,purchaseDomain:O},!(!j&&w&&ev))return[3,6];return[4,ev({heliumDevelopmentDatabase:H,neonDevelopmentDatabase:ep,neonProductionDatabase:ef,deployInputOptions:q,deployConfig:d,context:"deployBuild",appType:B,org:u})];case 5:if(o.sent())return e&&e(),[2];o.label=6;case 6:return[4,(0,C.getDotReplitDeploymentConfig)(I)];case 7:return X=o.sent(),[4,(0,C.setDotReplitDeploymentConfig)({buildCommand:t,runCommand:r,appType:B,publicDir:N,ignorePorts:L},X,{dotReplit:I,fs:M,container:R})];case 8:return o.sent(),[4,V({variables:{input:q},onCompleted:function(e){return eP(e,null!=w&&w)}})];case 9:return o.sent(),[3,11];case 10:throw Q=o.sent(),W(D.DeploymentMode.Ready),Q;case 11:return[2]}})})()},[V,F,W,K,ev,eP,e,eu,el,ed,_,n,ef,ep,R,M,I,eA,eR,u,ek,$,Y,en]),eN=(0,s.useCallback)(function(e){var r=e.envVars,i=e.subdomain,a=e.machineConfigurationId,s=e.maxMachineInstances,u=e.config,c=e.machineJob,d=e.privacyMode,p=e.privatePassword,f=e.hasAgentSession,x=e.ignoredSecrets,y=e.createNeonProductionDatabase,S=e.pushDevelopmentDatabaseObjects,w=e.syncStripe,j=e.enableSecurityScan,T=e.provider,D=e.purchaseDomain,k=e.replitBadgeEnabled;return(0,t._)(function(){var e,t,C,E,I,R,P,M,O,N;return(0,o._)(this,function(o){switch(o.label){case 0:if(!eM)throw Error("Standby builds are not enabled");if((0,A.sendSentryError)({error:Error("Start standby build"),context:"kickOffStandbyBuild",isDeploymentsPane:!1}),e=u.buildCommand,t=u.runCommand,C=u.publicDir,E=u.ignorePorts,!(I=T?e8({provider:T,ignorePorts:!!E}):u.appType))throw new b.AppTypeFoundError;switch(I){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(C))throw new b.PublicDirNotFoundError;break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(t))throw new b.RunCommandNotFoundError;if((0,v.hasInvalidRunCommand)(t))throw new b.InvalidRunCommandError;if(I===m.DeployHostingBuildAppType.Cron){if(!(null==c?void 0:c.crontab)||""===c.crontab)throw new b.InvalidCrontabError("Schedule cannot be empty.");if(!(0,l.isValidCron)(c.crontab))throw new b.InvalidCrontabError("Invalid schedule. Must be a valid cron expression.");if(!(null==c?void 0:c.timezone)||""===c.timezone)throw new b.InvalidTimezoneError("Timezone cannot be empty.");if(!(0,g.isValidTimezone)(c.timezone))throw new b.InvalidTimezoneError("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,h.default)(I)}if(R=e3({selectedPrivacyMode:d,shouldRequirePrivateDeployments:eA}),void 0!==p&&R===m.DeployHostingBuildPrivacyMode.Password){if(""===p.trim())throw new b.PrivatePasswordError("Password cannot be empty.");if(p.length<5)throw new b.PrivatePasswordError("Password must be 5 or more characters.")}if(P=void 0,!(el&&eu&&ed))return[3,3];return[4,eu()];case 1:if(M=o.sent(),P={connectionString:el.connectionString,pgVersion:M},null!==y)return[3,3];return[4,ed()];case 2:(y=o.sent()>0)||(S=null),o.label=3;case 3:return O=Y(),N={replId:n,targetDeploymentId:_,targetMachineConfigurationId:a,maxMachineInstances:s,commands:{build:e,run:t||""},envVars:r,subdomain:i,provider:T,appType:I,context:"workspace",machineJob:c,privacyMode:R,hasAgentSession:f,ignoredSecretKeys:x,createNeonProductionDatabase:y,pushDevelopmentDatabaseObjects:S,syncStripe:w,enableSecurityScan:j,replitBadgeEnabled:null!=k?k:en,heliumDevelopmentDatabase:P,triggerSource:O,purchaseDomain:D,skipDeploy:!0},(0,A.sendSentryError)({error:Error("Call deploy mutation for standby build"),context:"kickOffStandbyBuild",isDeploymentsPane:!1}),[4,V({variables:{input:N}})];case 4:return o.sent(),[2]}})})()},[eM,V,eu,el,ed,_,n,Y,eA,en]),eB=(0,C.useGetSecretsAsDeploymentEntries)({secrets:N,replId:n}),eU=(0,E.useAutoscaleConfigurations)({isAzureDeployment:!1,isFreeUser:B,onError:function(){}}).defaultMachineConfiguration,eG=(0,T.useGet)(ey);return{deployBuild:eO,kickOffStandbyBuild:eN,redeployWithNoNewOptions:(0,s.useCallback)(function(r){var i=r.hasAgentSession,a=r.purchaseDomain;return(0,t._)(function(){var t,r,s,l,d,p,f,x,y,S,w,j,T,E,A,R,P,M,O,N,L;return(0,o._)(this,function(o){switch(o.label){case 0:if($(void 0),K())return F("Deployment already in progress"),[2];t=function(t){W(D.DeploymentMode.Ready),F(t.message),e&&e()},o.label=1;case 1:return o.trys.push([1,10,,11]),W(D.DeploymentMode.Preparing),[4,eB()];case 2:return r=o.sent(),[4,z({deploymentTimeCreated:k,buildTimeCreated:null==ei?void 0:ei.timeCreated,ignoreSecretsUntil:g.SYNCING_SECRETS_ROLLOUT_DATE,replId:n,apolloClient:c})];case 3:return s=o.sent(),l=G({currentBuildVars:null==ei?void 0:ei.envVars,workspaceSecrets:r,ignoredSecretKeys:s}),[4,(0,C.getDotReplitDeploymentConfig)(I)];case 4:if(p=(d=o.sent()).buildCommand,f=d.runCommand,x=d.publicDir,y=d.ignorePorts,S=d.providerFromTarget,!_)return t(new b.DeploymentNotFoundError),[2];if(!ei)return t(new b.CurrentBuildNotFoundError),[2];if(j=ei.provider,ei.provider===m.HostingBuildProvider.Static&&S===m.HostingBuildProvider.CloudRun&&(j=m.HostingBuildProvider.CloudRun,w=null==eU?void 0:eU.configurationId),(ei.provider===m.HostingBuildProvider.CloudRun||ei.provider===m.HostingBuildProvider.Gce)&&S===m.HostingBuildProvider.Static&&(j=m.HostingBuildProvider.Static,w=void 0),!(T=e8({provider:j,ignorePorts:!!y})))return t(new b.AppTypeFoundError),[2];switch(T){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(x))return t(new b.PublicDirNotFoundError),[2];break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(f))return t(new b.RunCommandNotFoundError),[2];break;default:(0,h.default)(T)}if(E=void 0,!(el&&eu))return[3,6];return[4,eu()];case 5:A=o.sent(),E={connectionString:el.connectionString,pgVersion:A},o.label=6;case 6:if(R=!!ef,P=e6({isPrivate:ei.isPrivate,hasPrivatePassword:ei.hasPrivatePassword}),M=Y(),O=eG(),N={replId:n,targetDeploymentId:_,commands:{build:p,run:f||""},provider:j,targetMachineConfigurationId:w,appType:T,envVars:l,context:"workspace",privacyMode:P,hasAgentSession:i,ignoredSecretKeys:s,createNeonProductionDatabase:R,enableSecurityScan:ee,agentInboxEnabled:et,replitBadgeEnabled:en,heliumDevelopmentDatabase:E,triggerSource:M,syncStripe:O,purchaseDomain:a},!(R&&ev))return[3,8];return[4,ev({heliumDevelopmentDatabase:E,neonDevelopmentDatabase:ep,neonProductionDatabase:ef,deployConfig:d,deployInputOptions:N,context:"redeployWithNoNewOptions",appType:T,org:u})];case 7:if(o.sent())return e&&e(),[2];o.label=8;case 8:return[4,V({variables:{input:N},onCompleted:function(e){var n;(null==(n=e.deployHostingBuild2)?void 0:n.__typename)==="UserError"?t(Error(e.deployHostingBuild2.message)):eP(e,R)}})];case 9:return o.sent(),[3,11];case 10:return L=o.sent(),t(L),[3,11];case 11:return[2]}})})()},[V,F,W,K,ee,et,en,eB,ev,eP,e,eu,$,el,_,n,ef,ep,I,ei,k,c,u,Y,eU,eG]),approveAndDeployDatabaseChanges:(0,s.useCallback)(function(e){var n=e.prepareDatabaseStateId,a=e.sqlStatementsToExecute,s=e.pushDevelopmentDatabaseObjects;return(0,t._)(function(){var e,t,l,u,c,d,p;return(0,o._)(this,function(o){switch(o.label){case 0:if(!a&&!s)return F("No SQL statements or push development database objects found"),[2];if(eh.id!==n)return F("Preparing database state ID does not match current preparing database state ID"),[2];if(!(e=eh.deployOptions))return F("No deploy option found in preparing database state"),[2];if(K())return F("Deployment already in progress"),[2];if(t=e.deployConfig,l=e.deployInputOptions,u=e.context,c=l,a&&(eg({type:"APPROVE_AND_DEPLOY",approved:"sqlStatementsToExecute"}),c=(0,i._)((0,r._)({},l),{sqlStatementsToExecute:a})),s&&(eg({type:"APPROVE_AND_DEPLOY",approved:s}),c=(0,i._)((0,r._)({},l),{pushDevelopmentDatabaseObjects:s})),"deployBuild"!==u)return[3,3];return[4,(0,C.getDotReplitDeploymentConfig)(I)];case 1:return d=o.sent(),[4,(0,C.setDotReplitDeploymentConfig)(t,d,{dotReplit:I,fs:M,container:R})];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,V({variables:{input:c},onCompleted:function(e){return eP(e,!0)}})];case 4:return o.sent(),[3,6];case 5:throw p=o.sent(),W(D.DeploymentMode.Ready),p;case 6:return[2]}})})()},[V,W,K,eg,F,eP,R,I,M,eh]),rollbackToPreviousBuild:(0,s.useCallback)(function(e){var r=e.rollbackCandidateBuildId,i=e.envVars;return(0,t._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:if(K())return F("Deployment already in progress"),[2];t.label=1;case 1:if(t.trys.push([1,3,,4]),!r)throw new b.RollbackBuildNotProvidedError;if(!_)throw new b.DeploymentNotFoundError;return W(D.DeploymentMode.Preparing),[4,ea({variables:{input:{targetDeploymentId:_,rollbackCandidateBuildId:r,replId:n,envVars:i}},onCompleted:q})];case 2:return t.sent(),[3,4];case 3:throw e=t.sent(),W(D.DeploymentMode.Ready),e;case 4:return[2]}})})()},[ea,q,F,W,_,n,K])}}var e9=(0,c.atom)(null,function(e,a,s){var l=s.args,c=s.replId;return(0,t._)(function(){var t,s,d,p,f,h,g,v,x,y;return(0,o._)(this,function(o){switch(o.label){case 0:if(t=void 0,(s=l.command)===m.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration){if(!(d=e(ek)))return a(e1,"No current build found"),[2];if(!l.machineConfigurationId)return a(e1,"No machine configuration found"),[2];(p=(0,k.getBuildStatusFromLifecycleCommandType)(s))&&(a(ek,(0,u.produce)(d,function(e){e.status=p})),a(j.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(p)))}if(s===m.SendDeploymentLifecycleCommandType.Resume||s===m.SendDeploymentLifecycleCommandType.Suspend){if(!(f=e(ek)))return a(e1,"No current build found"),[2];t=f.id,(h=(0,k.getBuildStatusFromLifecycleCommandType)(s))&&(a(ek,(0,u.produce)(f,function(e){e.status=h})),a(j.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(h)))}if(s===m.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig){if(!(g=e(ek)))return a(e1,"No current build found"),[2];(v=(0,k.getBuildStatusFromLifecycleCommandType)(s))&&(a(ek,(0,u.produce)(g,function(e){e.status=v})),a(j.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(v)))}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,_.sendDeploymentLifecycleCommandMutation)((0,i._)((0,r._)({},l),{buildId:t,replId:c}))];case 2:return o.sent(),s===m.SendDeploymentLifecycleCommandType.Destroy&&a(eG),[3,4];case 3:return x=o.sent(),y="Failed to send deployment lifecycle command",(0,n._)(x,Error)?y=x.message:"string"==typeof x&&(y=x),a(e1,y),[3,4];case 4:return[2]}})})()});function e7(){var e=(0,L.default)(),n=(0,T.useSet)(e9);return(0,s.useCallback)(function(r){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n({replId:e,args:r})];case 1:return t.sent(),[2]}})})()},[n,e])}var te=(0,c.atom)(null,function(e,n){return(0,t._)(function(){var t,r,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(!(t=e(ea)))return n(e1,"No deployment found"),[2];if(!(r=e(eE)))return n(e1,"No deployment in progress found"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,_.cancelInProgressDeploymentsBuildMutation)({buildId:r.id,targetDeploymentId:t})];case 2:return a.sent(),[3,4];case 3:return n(e1,a.sent().message),[2];case 4:if(n(eE,void 0),n(j.deploymentModeAtom,D.DeploymentMode.Ready),(i=e(ek))&&(i.status===m.HostingBuildStatus.Success||i.status===m.HostingBuildStatus.Failed))return[2];return n(ek,(0,u.produce)(r,function(e){e.status=m.HostingBuildStatus.Failed})),[2]}})})()});function tt(){return(0,T.useSet)(te)}function tn(){return(0,T.useSet)(eH)}function tr(){var e=(0,B.useGlobalModal)().show,t=eC(),n=eA(),r=er(),i=eg(),a=ec(),o=(0,L.default)(),l=eS(),u=(0,V.useIsAgentStackRepl)().isAgentStackRepl,c=F().agentStackPlatformType,d=(0,M.default)(null==n?void 0:n.id),p=(0,s.useRef)(void 0),f=(null==t?void 0:t.status)===m.HostingBuildStatus.Success,h=(null==t?void 0:t.id)===d.current,g=!!r,v=i?"https://".concat(i,".replit.app"):null;(0,s.useEffect)(function(){f&&h&&(null==t?void 0:t.id)&&p.current!==t.id&&(p.current=t.id,l&&!g&&v&&a?e("FreeDeployExpirationModal",{deploymentUrl:v}):u&&c===m.AgentStackPlatformType.Slack?e("SlackAgentStackPostDeployModal",{replId:o}):u&&c===m.AgentStackPlatformType.TimeBased?e("TimeBasedAgentStackPostDeployModal"):u&&c===m.AgentStackPlatformType.Telegram&&e("TelegramAgentStackPostDeployModal",{replId:o}))},[c,f,null==t?void 0:t.id,a,v,l,u,g,h,o,e])}},982829,e=>{"use strict";var t,n,r=e.i(878420),i=e.i(346715),a=e.i(119468),o=function(e){return e.startsWith("Run ")?e.slice(4):e};function s(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function l(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function u(e){return(void 0===e?"undefined":(0,a._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&l(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}function c(e,t){for(var n=[],a=0;a<e.length;a++){var o=e[a];if("shell.exec"===o.task){if(t.length){var s=t.shift();s&&n.push((0,r._)({},o,s))}}else n.push(o)}return n.push.apply(n,(0,i._)(t)),n}var d=((t={}).OFFLINE="OFFLINE",t.IDLE="IDLE",t.BEFORE_RUN="BEFORE_RUN",t.RUNNING="RUNNING",t.STOPPING="STOPPING",t),p=((n={}).AUTO_RUN="AUTO_RUN",n.AGENT_RUN="AGENT_RUN",n.RUN_BUTTON_CLICKED="RUN_BUTTON_CLICKED",n.KEYBOARD_SHORTCUT="KEYBOARD_SHORTCUT",n.GITHUB_IMPORT="GITHUB_IMPORT",n);e.s(["PID1_RUNNER_NAME",()=>"Run App","RunReason",()=>p,"RunState",()=>d,"formatNixStorePath",()=>s,"isConfigErrorCode",()=>l,"isDotReplitError",()=>u,"mergeProposedTasks",()=>c,"removeRunPrefix",()=>o])},642049,e=>{"use strict";var t,n,r=e.i(878420),i=e.i(64386),a=e.i(960933),o=a.Type.Integer({minimum:0,maximum:65535}),s=a.Type.Object({forwarded:a.Type.Boolean(),port:o,address:a.Type.String(),externalPort:o,comm:a.Type.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:a.Type.Array(a.Type.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:a.Type.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:a.Type.Integer(),pidChain:a.Type.Array(a.Type.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});a.Type.Array(s);var l=((t={}).NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.FINISHED="FINISHED",t.FAILED="FAILED",t),u=((n={}).NOT_STARTED="NOT_STARTED",n.RUNNING="RUNNING",n.FINISHED="FINISHED",n.FAILED="FAILED",n.ERROR="ERROR",n),c=a.Type.Object({task:a.Type.Literal("shell.exec"),args:a.Type.String(),env:a.Type.Optional(a.Type.Record(a.Type.String(),a.Type.String())),waitForPort:a.Type.Optional(a.Type.Number()),ensurePreviewReachable:a.Type.Optional(a.Type.String())}),d=a.Type.Object({task:a.Type.Literal("shell.exec"),cgroupPath:a.Type.Optional(a.Type.String()),pid:a.Type.Optional(a.Type.Integer()),isInRecoveryMode:a.Type.Optional(a.Type.Boolean()),openPorts:a.Type.Optional(a.Type.Array(s)),isPreviewReachable:a.Type.Optional(a.Type.Boolean())}),p=a.Type.Object({task:a.Type.Literal("packager.installForLanguage"),args:a.Type.String(),enablePackageGuessing:a.Type.Optional(a.Type.Boolean()),continueOnFail:a.Type.Optional(a.Type.Boolean())}),f=a.Type.Object({task:a.Type.Literal("packager.installForLanguage"),hasUserFacingOutput:a.Type.Boolean()}),m=a.Type.Object({task:a.Type.Literal("packager.installForAll"),enablePackageGuessing:a.Type.Optional(a.Type.Boolean()),continueOnFail:a.Type.Optional(a.Type.Boolean())}),h=a.Type.Object({task:a.Type.Literal("packager.installForAll"),hasUserFacingOutput:a.Type.Boolean()}),g=a.Type.Object({task:a.Type.Literal("workflow.run"),args:a.Type.String()}),v=a.Type.Object({task:a.Type.Literal("workflow.run"),runId:a.Type.String()}),x=a.Type.Union([m,p,c,g]),y=a.Type.Union([h,f,d,v]),b=a.Type.Union([a.Type.Literal("parallel"),a.Type.Literal("sequential")]),S=a.Type.Object({agentRequireRestartOnSave:a.Type.Optional(a.Type.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:a.Type.Optional(a.Type.Array(a.Type.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:a.Type.Optional(a.Type.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:a.Type.Optional(a.Type.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"})),outputType:a.Type.Optional(a.Type.Enum({webview:"webview",console:"console",vnc:"vnc",automations:"automations"},{description:'Set by the agent to allow more integration with the workspace - mainly which pane do we focus on running the specific workflow; defaults to "webview"'}))}),_=a.Type.Union([a.Type.Literal("agent"),a.Type.Literal("system"),a.Type.Number()]),w=a.Type.Object({name:a.Type.String(),mode:a.Type.Optional(b),metadata:a.Type.Optional(S),tasks:a.Type.Array(x),author:a.Type.Optional(_)});a.Type.Object({workflows:a.Type.Object({runButton:a.Type.Optional(a.Type.String()),workflow:a.Type.Optional(a.Type.Array(w))})}),a.Type.Object({runButton:a.Type.Optional(a.Type.String()),workflow:a.Type.Optional(a.Type.Array(w))});var j={userIds:a.Type.Array(a.Type.Number()),metadata:a.Type.Optional(y),config:x},T=a.Type.Union([a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("NOT_STARTED")})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("RUNNING"),isReady:a.Type.Optional(a.Type.Boolean()),startTime:a.Type.Number()})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("FAILED"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String()),exitCode:a.Type.Optional(a.Type.Number())}))})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("FINISHED"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String()),exitCode:a.Type.Optional(a.Type.Number())}))})),a.Type.Object((0,i._)((0,r._)({},j),{state:a.Type.Literal("ERROR"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String())}))}))]);a.Type.Record(a.Type.String(),a.Type.Object({runId:a.Type.String(),startTime:a.Type.Number(),endTime:a.Type.Optional(a.Type.Number()),step:a.Type.Enum(l),tasks:a.Type.Array(T),workflow:w,userId:a.Type.Optional(a.Type.Union([a.Type.Literal("agent"),a.Type.Number()]))})),e.s(["TaskConfigSchema",()=>x,"TaskState",()=>u,"WorkflowStateStep",()=>l],642049)},729122,432902,341727,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(530658),i=e.i(346715),a=e.i(119468),o=e.i(817556),s=e.i(517884),l=e.i(389959),u=e.i(992785),c=e.i(131141),d=e.i(541793),p=e.i(814563),f=e.i(642049),m=e.i(188507);e.i(925218);var h=e.i(267103),g=e.i(968323);e.i(963146);var v=e.i(62820),x=e.i(162914),y=e.i(98816),b=e.i(927158),S=e.i(529810),_=e.i(982829),w=e.i(394212),j=e.i(299798);function T(e){var t=(0,S.default)().container,n=(0,l.useRef)(null);(0,l.useEffect)(function(){return t.onConnectionStateChanged(function(t){t!==n.current&&(n.current=t,e(t))})},[t,e])}e.s(["default",()=>T],432902);var D=e.i(852819),k=e.i(417120);e.i(792e3);var C=e.i(8808),E=e.i(873379);function A(){var e=(0,S.default)().container,t=(0,E.default)(e),n=(0,r._)((0,l.useState)(!1),2),i=n[0],a=n[1];return((0,l.useEffect)(function(){t===C.ConnectionState.CONNECTED&&a(!0)},[t]),i)?{didConnectOnce:i,didDisconnect:t!==C.ConnectionState.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}e.s(["default",()=>A],341727);var I=(0,d.atom)();function R(){return(0,D.useValue)(I)}var P=(0,d.atom)(!0);function M(){return(0,D.useValue)(P)}var O=(0,d.atom)(null,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,c.produce)(e(I),n);return t(I,i),r.persist&&e(eg).persist(),i});function N(){return(0,D.useSet)(O)}function L(){var e=N();return(0,l.useCallback)(function(t){return e(function(e){if(!e){e={runButton:t};return}e.runButton=t},{persist:!0})},[e])}function B(){var e=N();return(0,l.useCallback)(function(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e||null==(r=e.workflow)?void 0:r[t];i&&n(i)},{persist:r})},[e])}function V(){var e=N();return(0,l.useCallback)(function(t){return e(function(e){var n;null==e||null==(n=e.workflow)||n.splice(t,1)},{persist:!0})},[e])}function U(){var e=B();return(0,l.useCallback)(function(t){return e(t.workflowIndex,function(e){null==e||e.tasks.splice(t.taskIndex,1)},{persist:!0})},[e])}function F(){var e=B();return(0,l.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks[t.taskIndex]=n},{persist:i})},[e])}function H(){var e=B();return(0,l.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks=n},{persist:i})},[e])}function G(){var e=B();return(0,l.useCallback)(function(t){return e(t,function(e){var t,r=null!=(t=e.tasks[e.tasks.length-1])?t:{};e.tasks.push(r?(0,n._)({},r):{task:"shell.exec",args:""})})},[e])}var z=(0,d.atom)(null,function(e,t,n){var r=t(O,function(e){if(void 0===e)return{workflow:[n]};e.workflow?e.workflow.push(n):e.workflow=[n]},{persist:!0});return(0,s.default)(null==r?void 0:r.workflow),r.workflow.length-1});function q(){return(0,D.useSet)(z)}var W=(0,d.atom)(void 0);function K(){return(0,D.useValue)(W)}var $=(0,d.atom)(function(e){var t=e(W);return t?Object.entries(t).flatMap(function(e){var t=(0,r._)(e,2),n=t[0],i=t[1];return i.tasks.filter(function(e){return e.state===f.TaskState.RUNNING||e.state===f.TaskState.FINISHED||e.state===f.TaskState.FAILED||e.state===f.TaskState.ERROR}).map(function(e,t){return{task:e,taskIdx:t,runId:n,workflowId:i.workflow.name,config:i.workflow.tasks[t]}})}):[]});function Y(){return(0,D.useValue)($)}var X=(0,d.atom)(function(e){var t,n=e(I);return null!=(t=null==n?void 0:n.workflow)?t:[]}),Q=(0,p.selectAtom)(X,function(e){var t;return null!=(t=null==e?void 0:e.map(function(e,t){return t}))?t:[]},u.default),J=(0,d.atom)(function(e){var t=function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=e.tasks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if("workflow.run"===s.task&&!r.includes(s.args))return(0,g.Err)('workflow "'.concat(s.args,'" not found'))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return(0,g.Ok)(null)},n=e(X),r=e(ee),i={};return n.forEach(function(e,n){var r=t(e);r.ok||(i[n]=r.error)}),i});function Z(e){return(0,D.useValue)((0,l.useMemo)(function(){return(0,p.selectAtom)(J,function(t){return e in t?t[e]:null})},[e]))}var ee=(0,p.selectAtom)(X,function(e){var t;return null!=(t=null==e?void 0:e.map(function(e){return e.name}))?t:[]},u.default);function et(){return(0,D.useValue)(X)}function en(){return(0,D.useValue)(ep)}function er(){return(0,D.useValue)(Q)}function ei(){return(0,D.useValue)(ee)}function ea(e){var t,n;return(0,D.useValue)((t=e.workflowIndex,n=e.taskIndex,(0,l.useMemo)(function(){return(0,p.selectAtom)(X,function(e){var r;return e?null==(r=e[t])?void 0:r.tasks[n]:null})},[t,n])))}function eo(e){return(0,D.useValue)((0,l.useMemo)(function(){return(0,p.selectAtom)(X,function(t){return t?t[e]:null})},[e]))}function es(){return(0,D.useGet)(X)}function el(e){var t=(0,l.useMemo)(function(){return(0,d.atom)(function(t){var n,r=null==(n=t(X)[e])?void 0:n.name;if(!r)return null;var i=t(W);return i?function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=Object.values(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.workflow.name===t&&n.push(l)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n.length?n.sort(function(e,t){return e.startTime-t.startTime}):null}(i,r):null})},[e]);return(0,l.useMemo)(function(){return(0,p.selectAtom)(t,function(e){return e?e[e.length-1]:null})},[t])}function eu(e){return(0,D.useGet)(el(e))}function ec(e){var t;return(0,D.useObservableValue)((t=el(e),(0,l.useMemo)(function(){return(0,p.selectAtom)(t,function(e){return(null==e?void 0:e.step)===f.WorkflowStateStep.RUNNING})},[t])))}var ed=(0,d.atom)(function(e){var t=e(I);if(!(null==t?void 0:t.workflow)||!(null==t?void 0:t.runButton))return null;var n=!0,r=!1,i=void 0;try{for(var a,o=t.workflow[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.name===t.runButton)return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}),ep=(0,p.selectAtom)(ed,function(e){var t;return null!=(t=null==e?void 0:e.name)?t:null}),ef=(0,d.atom)(function(e){var t=e(X).find(function(e){var t;return null==(t=e.metadata)?void 0:t.dotReplitRun});return t?t.name:null}),em=(0,d.atom)(function(e){var t=e(W);if(!t)return null;var n=Object.values(t).filter(function(e){return e.step===f.WorkflowStateStep.RUNNING});return 0===n.length?null:n});function eh(){var e=(0,D.useValue)(ep),n=(0,S.default)().fs,r=(0,D.useValue)(ef);e||(e=r);var i=(0,D.useValue)(em),a=ej(),s=(0,l.useMemo)(function(){return null!==i&&i.some(function(e){return"agent"===e.userId})},[i]),u=(0,l.useMemo)(function(){return s||(null==i?void 0:i.some(function(e){return e.step===f.WorkflowStateStep.RUNNING}))?_.RunState.RUNNING:_.RunState.IDLE},[s,i]),c=(0,b.usePid2Callback)(function(r){return function(i){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n.flush()];case 1:return t.sent(),a(i),[2,!!e&&r.workflows.runWorkflow.rpc({workflowId:e})]}})})()}},[a,e,n]),d=(0,b.usePid2Callback)(function(e){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==i||i.forEach(function(n){e.workflows.stopRun.rpc({runId:n.runId,graceful:t})})}},[i]);return null!==e?{workflowId:e,run:c,stop:d,step:u,runningWorkflows:i,isAgentRunningWorkflow:s}:null}var eg=(0,d.atom)({persist:function(){return(0,t._)(function(){return(0,o._)(this,function(e){return[2,(0,g.Ok)(null)]})})()}});function ev(){var e=(0,D.useGet)(eg);return(0,l.useCallback)(function(){return(0,e().persist)()},[e])}var ex={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},ey=(0,d.atom)(void 0);function eb(){return(0,D.useValue)(ey)}function eS(e){var n,r,i,a,s,c=e.dotReplit,d=(0,D.useGet)(I),p=(0,D.useSet)(I),f=(0,D.useSet)(ey),m=(0,D.useSet)(W),h=(0,D.useSet)(P),x=(0,D.useValue)(P),y=(0,l.useCallback)(function(e){var t=d();t&&(0,u.default)(e,t)||p(e||{}),h(!1)},[h,d,p]),b=(0,l.useCallback)(function(e){h(!1),(0,_.isConfigErrorCode)(e.code)?f({code:e.code,message:ex[e.code],extras:e.extras}):f(void 0)},[f,h]),S=(0,l.useCallback)(function(e){switch(e){case v.ConnectionState.DISCONNECTED:m(void 0),h(!0);return;case v.ConnectionState.CONNECTING:h(!0);return;case v.ConnectionState.CONNECTED:x&&d()&&h(!1);return}},[h,m,x,d]);r=(n={onWorkflowsConfigChange:y,onRunStateChange:m,onDotReplitStateChange:b,onConnectionStateChange:S}).onWorkflowsConfigChange,i=n.onDotReplitStateChange,a=n.onRunStateChange,s=n.onConnectionStateChange,(0,j.usePid2)(function(e,n){var s=n.signal;return(0,t._)(function(){return(0,o._)(this,function(n){switch(n.label){case 0:return[4,e.workflows.init.rpc({useWorkflowGenerators:!0},{signal:s})];case 1:if(!n.sent().ok)return[2];return[4,Promise.all([(0,t._)(function(){var t,n,a,l,u,c,d,p;return(0,o._)(this,function(o){switch(o.label){case 0:t=e.workflows.config.subscribe({},{signal:s}).resReadable,n=!1,a=!1,o.label=1;case 1:o.trys.push([1,6,7,12]),u=(0,w._)(t),o.label=2;case 2:return[4,u.next()];case 3:if(!(n=!(c=o.sent()).done))return[3,5];if(!(d=c.value).ok)return(0,_.isDotReplitError)(d.payload)&&i(d.payload),[3,4];if(void 0!==d.payload.dotReplitState)return i(d.payload.dotReplitState),[3,4];r(d.payload.config),o.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return p=o.sent(),a=!0,l=p,[3,12];case 7:if(o.trys.push([7,,10,11]),!(n&&null!=u.return))return[3,9];return[4,u.return()];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:if(a)throw l;return[7];case 11:return[7];case 12:return[2]}})})(),(0,t._)(function(){var t,n,r,i,l,u,c,d;return(0,o._)(this,function(o){switch(o.label){case 0:t=e.workflows.runState.subscribe({},{signal:s}).resReadable,n=!1,r=!1,o.label=1;case 1:o.trys.push([1,6,7,12]),l=(0,w._)(t),o.label=2;case 2:return[4,l.next()];case 3:if(!(n=!(u=o.sent()).done))return[3,5];if(!(c=u.value).ok)return[3,4];a(c.payload.state),o.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return d=o.sent(),r=!0,i=d,[3,12];case 7:if(o.trys.push([7,,10,11]),!(n&&null!=l.return))return[3,9];return[4,l.return()];case 8:o.sent(),o.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2]}})})()])];case 2:return n.sent(),[2]}})})()},[r,i,a]),T(s);var k=(0,D.useObservableValue)(I),C=(0,D.useSet)(eg);(0,l.useEffect)(function(){C({persist:function(){return(0,t._)(function(){var e,n,r;return(0,o._)(this,function(i){var a;return(n=k.current)?(r=null==(e=n.workflow)?void 0:e.filter(function(e){var t;return!(null==(t=e.metadata)?void 0:t.generated)}),[2,(a={runButton:n.runButton,workflow:r},(0,t._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:return[4,c.updateDotReplit([(null==(e=a.workflow)?void 0:e.length)||a.runButton?{path:"workflows",op:"add",value:JSON.stringify(a)}:{path:"workflows",op:"remove",value:""}])];case 1:if(t.sent().error)return[2,(0,g.Err)("Error applying update")];return[2,(0,g.Ok)(null)]}})})())]):[2,(0,g.Err)("No config found")]})})()}})},[c,C,k])}var e_=(0,d.atom)([]);function ew(e,t){var n=(0,D.useSet)(e_),r=(0,y.default)(e);(0,l.useEffect)(function(){var e=function(e){r.current(e)};return n(function(t){return(0,i._)(t).concat([e])}),function(){n(function(t){return t.filter(function(t){return t!==e})})}},[n].concat((0,i._)(t)))}function ej(){var e=(0,D.useValue)(e_);return(0,l.useCallback)(function(t){e.forEach(function(e){return e(t)})},[e])}function eT(){var e=A().didDisconnect,t=M(),n=eh(),r=ei(),i=(0,k.useAgentState)().agentState,a=(0,h.useObservable)(i),o=(0,l.useMemo)(function(){var e;return!!a&&null!=n&&!!n.isAgentRunningWorkflow&&(a.state===m.AgentRunState.AGENT_STATE_RUNNING||a.state===m.AgentRunState.AGENT_STATE_PAUSING||a.state===m.AgentRunState.AGENT_STATE_PAUSED&&(null==(e=a.reason)?void 0:e.$kind)==="waitingOnUserResponse")},[a,null==n?void 0:n.isAgentRunningWorkflow]),s=(0,x.default)(o,1e3),u=(0,l.useMemo)(function(){return(null==n?void 0:n.step)===_.RunState.RUNNING},[null==n?void 0:n.step]),c=(0,x.default)(u,100),d=(0,l.useMemo)(function(){return s?c:u},[s,c,u]),p=(0,l.useMemo)(function(){var e=null==n?void 0:n.workflowId;return!e||!r.includes(e)},[r,null==n?void 0:n.workflowId]);return{isWorkflowsLoading:t,isWorkflowsRunning:u,isRunning:d,isAgentRunningWorkflow:null==n?void 0:n.isAgentRunningWorkflow,isOffline:e,isDisabled:p,runButtonWorkflowName:null==n?void 0:n.workflowId}}function eD(){var e=eh(),t=eT().isRunning;return(0,l.useCallback)(function(n){var r;t||null==e||null==(r=e.run)||r.call(e,null!=n?n:_.RunReason.RUN_BUTTON_CLICKED)},[t,e])}function ek(){var e=eh(),t=eT(),n=t.isRunning,r=t.isWorkflowsRunning;return(0,l.useCallback)(function(){if(n&&r){var t;null==e||null==(t=e.stop)||t.call(e,{graceful:!0})}},[n,r,e])}function eC(){var e=eD(),t=ek(),n=eT().isRunning;return(0,l.useCallback)(function(r){n?t():e(r)},[n,e,t])}function eE(){var e=eD(),t=ek(),n=eT().isRunning,i=(0,y.default)(n),a=(0,r._)((0,l.useState)(!1),2),o=a[0],s=a[1];return(0,l.useEffect)(function(){o&&(i.current||(e(),s(!1)))},[o,i,e]),(0,l.useCallback)(function(){o||(i.current?(s(!0),t()):e())},[o,i,e,t])}function eA(e,t){return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r>=5)return!1;var i=!0,o=!1,s=void 0;try{for(var l,u=n.tasks[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=function(){var n=l.value;if("shell.exec"===n.task&&n.waitForPort)return{v:!0};if("workflow.run"===n.task){var i=t.find(function(e){return e.name===n.args});if(i&&e(i,r+1))return{v:!0}}}();if("object"===(0,a._)(c))return c.v}}catch(e){o=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return!1}(e)}function eI(){var e=et();return(0,l.useMemo)(function(){return e.some(function(e){return"agent"===e.author})},[e])}function eR(){var e=et();return(0,l.useMemo)(function(){return e.some(function(e){var t;return(null==(t=e.metadata)?void 0:t.generated)!==!0})},[e])}e.s(["useAddTask",()=>G,"useAddWorkflow",()=>q,"useConfigError",()=>eb,"useDeleteTask",()=>U,"useDeleteWorkflow",()=>V,"useGetLatestWorkflowState",()=>eu,"useGetWorkflows",()=>es,"useHasAgentConfiguredWorkflows",()=>eI,"useHasNonGeneratedWorkflowSet",()=>eR,"useInitWorkflows",()=>eS,"useIsLoading",()=>M,"useObservableIsRunning",()=>ec,"useOnLocalRun",()=>ew,"useOnReRun",()=>eE,"useOnStartRun",()=>eD,"useOnStopRun",()=>ek,"useOnToggleRun",()=>eC,"usePersistConfig",()=>ev,"useRunButton",()=>en,"useRunInfo",()=>eT,"useSetRunButton",()=>L,"useTask",()=>ea,"useTriggerLocalRun",()=>ej,"useUpdateWorkflow",()=>B,"useUpdateWorkflowTask",()=>F,"useUpdateWorkflowTasks",()=>H,"useWorkflow",()=>eo,"useWorkflowError",()=>Z,"useWorkflowIndices",()=>er,"useWorkflowNames",()=>ei,"useWorkflows",()=>et,"useWorkflowsConfig",()=>R,"useWorkflowsRunState",()=>K,"useWorkflowsRunner",()=>eh,"useWorkflowsTaskFlatMap",()=>Y,"workflowOpensPort",()=>eA],729122)},646982,e=>{"use strict";var t=e.i(167626),n=e.i(276385),r=e.i(671901),i=e.i(368357),a=e.i(525212),o=e.i(99516),s=e.i(676081),l=e.i(839733),u=e.i(870484),c=e.i(800505),d=e.i(736579),p=e.i(739565),f=e.i(473754),m=e.i(19103),h=e.i(14597),g=e.i(273700),v=e.i(382558),x=e.i(26482),y=e.i(249413),b=e.i(759512),S=e.i(29232),_=e.i(85483),w=e.i(844357),j=e.i(503724),T=e.i(613539),D=e.i(108223),k=e.i(796303),C=e.i(894709),E=e.i(167562),A=e.i(246598),I=e.i(634669),R=e.i(397124),P=e.i(216431);function M(e){var M=e.module,O=M.name.toLowerCase(),N=O.split(" ");return O.includes("node")?(0,n.jsx)(y.default,{}):O.includes("typescript")?(0,n.jsx)(E.default,{}):O.includes("python")||O.includes("pyright")?(0,n.jsx)(w.default,{}):O.includes("c++")||O.includes("cpp")||O.includes("clang")||O.includes("ccls")?(0,n.jsx)(u.default,{}):O.includes("java")||O.includes("maven")?(0,n.jsx)(g.default,{}):O.includes("rust")||O.includes("cargo")?(0,n.jsx)(D.default,{}):N.includes("go")||O.includes("gopls")?(0,n.jsx)(f.default,{}):O.includes("ruby")?(0,n.jsx)(T.default,{}):O.includes("elixir")?(0,n.jsx)(p.default,{}):O.includes("bash")?(0,n.jsx)(o.default,{}):O.includes("clojure")?(0,n.jsx)(l.default,{}):O.includes("php")?(0,n.jsx)(S.default,{}):O.includes("swift")?(0,n.jsx)(C.default,{}):O.includes("haskell")?(0,n.jsx)(m.default,{}):O.includes("lua")?(0,n.jsx)(v.default,{}):O.includes("dart")?(0,n.jsx)(d.default,{}):O.includes("css")?(0,n.jsx)(c.default,{}):O.includes("html")?(0,n.jsx)(h.default,{}):N.includes("r")?(0,n.jsx)(j.default,{}):O.includes("nix")?(0,n.jsx)(x.default,{}):O.includes("npm")?(0,n.jsx)(b.default,{}):"bun"===O?(0,n.jsx)(s.default,{}):O.includes("prettier")?(0,n.jsx)(_.default,{}):O.includes("vue")?(0,n.jsx)(A.default,{}):O.includes("svelte")?(0,n.jsx)(k.default,{}):O.includes(".replit")?(0,n.jsx)(R.default,{}):(0,t._)(M,r.api.PackagerOption)?(0,n.jsx)(I.default,{}):(0,t._)(M,r.api.LanguageServerOption)?(0,n.jsx)(i.default,{}):(0,t._)(M,r.api.FormatterOption)?(0,n.jsx)(a.default,{}):(0,t._)(M,r.api.RunOption)?(0,n.jsx)(P.default,{}):(0,n.jsx)(I.default,{})}e.s(["default",()=>M])},76430,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(389959),a=e.i(993796),o=e.i(927158);function s(e){var t,n;return!!e&&!(e.length<2)&&null!=(n=null==(t=e[1])?void 0:t.endsWith(".bin/expo"))&&n}function l(e){var t;return!!e.isOpen&&s(null==(t=e.processInfo)?void 0:t.cmdline)}function u(){var e=(0,n._)((0,i.useState)(),2),a=e[0],s=e[1],l=(0,o.usePid2Callback)(function(e){return function(){return e.agentReplConfig.getReplConfig.rpc({})}});return(0,i.useEffect)(function(){(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(!l)return[2];return[4,l()];case 1:if(!(e=t.sent()).ok)return[2];return s("EXPO"===e.payload.stack),[2]}})})()},[l]),a}function c(){var e=(0,a.useFlag)({controlName:"flag-exponential-amplifier"}),t=u();return e&&!0===t}e.s(["isProbablyExpoCmdline",()=>s,"isProbablyExpoPort",()=>l,"useIsExpoStack",()=>u,"useIsExpoStackWithLaunchEnabled",()=>c])},762211,818976,210481,e=>{"use strict";var t,n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(530658),o=e.i(276385),s=e.i(389959),l=e.i(98816),u=e.i(649960),c=e.i(529810);e.i(282890);var d=e.i(66718),p=e.i(297083),f=e.i(346715),m=e.i(817556),h=e.i(906368);e.i(312917);var g=e.i(265872),v=e.i(61524),x=e.i(142685),y=e.i(921521),b=e.i(650587),S=e.i(610357),_=e.i(37292),w=e.i(262206),j=e.i(384401),T=(0,e.i(316699).default)(function(){if("undefined"!=typeof AudioContext){var e=(t||(t=new AudioContext),t),n=e.createBufferSource();e.decodeAudioData(function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0});e.i(439725);var D="replit-icons-font",k=e.i(664152),C="BESbswy";function E(e){return(0,p._)(function(){return(0,m._)(this,function(t){switch(t.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,t){return(0,p._)(function(e,t){var n,r,i,a,o,s;return(0,m._)(this,function(l){return n=t.fontInfo,i=void 0===(r=t.characters)?C:r,o=void 0===(a=t.timeout)?3e3:a,s=A(n),[2,new Promise(function(t,r){var a=!1,l=k.logger.timeStart({family:n.family,style:n.style,weight:n.weight}),u=setTimeout(function(){a=!0,l("xterm font loading timed out"),t()},o);e.load(s,i).then(function(){a||(clearTimeout(u),t())}).catch(function(e){a||(clearTimeout(u),r(e))})})]})}).apply(this,arguments)}(document.fonts,e)];case 1:case 3:return t.sent(),[2];case 2:return[4,Promise.all([I("serif",e),I("sans-serif",e),I("monospace",e)])]}})})()}function A(e){var t=e.family,n=e.style,r=e.weight;return"".concat(void 0===n?"normal":n," ").concat(void 0===r?"normal":r," 100px ").concat(t)}function I(e,t){return(0,p._)(function(e,t){var n,r,i,a,o,s,l,u,c;return(0,m._)(this,function(d){return(n=t.fontInfo,i=void 0===(r=t.characters)?C:r,o=void 0===(a=t.timeout)?3e3:a,s=A(n),(l=document.createElement("span")).innerText=i,l.style.font="normal normal 100px ".concat(e),l.style.position="absolute",l.style.left="-9999px",l.style.top="-9999px",document.body.appendChild(l),u=l.offsetWidth,l.style.font=s,(c=function(){return u!==l.offsetWidth})())?[2]:[2,new Promise(function(e,t){var r=setInterval(function(){c()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(l),e())},50),i=setTimeout(function(){(clearInterval(r),document.body.removeChild(l),c())?e():t(Error("Font loading timed out "+n.family))},o)})]})}).apply(this,arguments)}function R(e){h.captureException(e)}var P='"ReplitHack"',M=String.fromCharCode(61095),O=e.i(546833),N=e.i(703774);e.i(375581);var L=e.i(182256),B=e.i(169099),V=e.i(696770);function U(){var e=(0,N.useTheme)(),t=e.values,n=e.colorScheme,r=(0,V.useShadesFlag)();return(0,s.useMemo)(function(){var e,i,a,o,s,l,u,c,d,p;return r?(e=n===L.ColorScheme.Dark?"dark":"light",i=t,o=(a="light"===e?O.lightSpectrumValues:O.darkSpectrumValues).defaultSurfaceColor000,s=a.defaultSurfaceColor100,l=a.defaultSurfaceColor300,u=a.defaultSurfaceColor500,c=a.defaultTextColor1400,d=a.defaultTextColor1500,{foreground:p="light"===e?d:c,background:s,cursor:p,cursorAccent:l,selectionBackground:p,black:o,brightBlack:u,red:i.global.redStronger,green:i.global.accentPositiveDefault,yellow:i.global.yellowDefault,blue:i.global.blueStronger,magenta:i.global.magentaDefault,cyan:i.global.tealDefault,white:i.global.foregroundDefault,brightRed:i.global.redStrongest,brightGreen:i.global.accentPositiveStronger,brightYellow:i.global.yellowStronger,brightBlue:i.global.blueStrongest,brightMagenta:i.global.magentaStronger,brightCyan:i.global.tealStronger,brightWhite:i.global.foregroundDefault}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.replitDark.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(t)},[t,r,n])}function F(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function H(t){var n,r,i,o,c,d,k,C,A,I,O,N=(0,a._)((0,s.useState)(null),2),L=N[0],B=N[1],V=(0,a._)((0,s.useState)(null),2),H=V[0],G=V[1],z=U(),q=(0,v.usePreferences)("fontSize","accessibleTerminal","shellBellAudio").preferences,W=q.fontSize,K=q.accessibleTerminal,$=q.shellBellAudio,Y=(0,_.useThrowBsod)(),X=(0,y.default)(),Q=(0,b.useIsMobile)(),J=null==t?void 0:t.openFile,Z=(0,l.default)(null==t?void 0:t.openWebview),ee=null==t?void 0:t.listFiles,et=(0,s.useMemo)(function(){return J&&ee?{openFile:J,listFiles:ee}:null},[J,ee]),en=(0,l.default)(null==t?void 0:t.onInBandOSCMessages),er={screenReaderMode:K,fileLinking:et,terminalTheme:z,fontSize:W,scrollback:null==t?void 0:t.scrollback,openPane:null!=(I=null==t?void 0:t.openPane)?I:null,emitPaneMetrics:null==t?void 0:t.emitPaneMetrics,convertEol:null!=(O=null==t?void 0:t.convertEol)&&O},ei=(0,l.default)(er),ea=(0,u.default)(function(){(null==t?void 0:t.autoFit)!==!1&&(null==H||H.fit())},{type:"debounce",wait:200}),eo=(0,s.useRef)(null),es=(0,s.useRef)(null),el=(0,l.default)(null==t?void 0:t.size),eu=(0,j.useResolveKeyCombo)();return(0,s.useLayoutEffect)(function(){if(L){var n=[];return(0,p._)(function(){var r,i,o,s,l,u,c,d,v,y,b,_,T,k,C,A,I,O,N,B,V,U,H,z,q,W;return(0,m._)(this,function(K){switch(K.label){case 0:return[4,Promise.all([Promise.all([(0,g.lazyLoad)(function(){return e.A(546473)}),(0,g.lazyLoad)(function(){return e.A(628455)}),(0,g.lazyLoad)(function(){return e.A(114122)}),(0,g.lazyLoad)(function(){return e.A(800308)}),(0,g.lazyLoad)(function(){return e.A(840480)}),(0,g.lazyLoad)(function(){return e.A(305813)}),(0,g.lazyLoad)(function(){return e.A(537915)}),(0,g.lazyLoad)(function(){return e.A(967812)}),(0,g.lazyLoad)(function(){return e.A(617960)})]),(0,p._)(function(){return(0,m._)(this,function(e){switch(e.label){case 0:if(!document.getElementById(D)){var t=document.createElement("style");t.id=D,t.type="text/css",t.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(t)}return[4,Promise.all([E({fontInfo:{family:"replit-icons"},characters:M}).catch(R),E({fontInfo:{family:P,weight:"400"}}).catch(R),E({fontInfo:{family:P,weight:"400",style:"italic"}}).catch(R),E({fontInfo:{family:P,weight:"700"}}).catch(R),E({fontInfo:{family:P,weight:"700",style:"italic"}}).catch(R)])];case 1:return e.sent(),[2]}})})()])];case 1:var $;if(c=a._.apply(void 0,[K.sent(),1]),v=(d=(0,a._)(c[0],9))[0].Terminal,y=d[1].FitAddon,b=d[2].SearchAddon,_=d[3].WebLinksAddon,T=d[4].Unicode11Addon,k=d[5].FileLinkAddon,C=d[6].PaneLinkAddon,A=d[7].CanvasAddon,I=d[8].WebglAddon,!L)return[2];return N={allowProposedApi:!0,cursorBlink:!1,scrollback:null!=(O=ei.current.scrollback)?O:1e4,tabStopWidth:4,fontFamily:"".concat(P,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:ei.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,convertEol:ei.current.convertEol,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:ei.current.terminalTheme,screenReaderMode:ei.current.screenReaderMode,logger:{trace:function(e,t){return(r=console).trace.apply(r,["xterm: "+e].concat((0,f._)(t)))},debug:function(e,t){return(i=console).debug.apply(i,["xterm: "+e].concat((0,f._)(t)))},info:function(e,t){return(o=console).info.apply(o,["xterm: "+e].concat((0,f._)(t)))},warn:function(e,t){return(s=console).warn.apply(s,["xterm: "+e].concat((0,f._)(t)))},error:function(e,t){"string"==typeof e&&e.includes("Parsing error")||console.error("xterm: "+e,t)}}},(null==(l=el.current)?void 0:l.cols)!==void 0&&(N.cols=el.current.cols),(null==(u=el.current)?void 0:u.rows)!==void 0&&(N.rows=el.current.rows),B=new v(N),ei.current.fileLinking?(eo.current=new k(ei.current.fileLinking.openFile,ei.current.fileLinking.listFiles),B.loadAddon(eo.current)):eo.current=null,!es.current&&(null==t?void 0:t.openPane)&&(es.current=new C(t.openPane,t.emitPaneMetrics)),es.current&&B.loadAddon(es.current),V=new y,B.loadAddon(V),U=new _(($=function(e){X?x.desktopAppApi.openExternalUrl(e):window.open(e,"_blank")},function(e,t){var n;try{n=new URL(t)}catch(e){return}("0.0.0.0"===n.hostname||"localhost"===n.hostname)&&void 0!==Z.current?Z.current(n.pathname,parseInt(n.port,10)):$(t)})),B.loadAddon(U),H=new b,B.loadAddon(H),z=new T,B.loadAddon(z),B.unicode.activeVersion="11",B.open(L),n.push(function(){try{B.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!F())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(F()||!Q||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new A;B.loadAddon(e);return}var t=new I;B.loadAddon(t),t.onContextLoss(function(){t.dispose(),B.loadAddon(new A)})}catch(e){var n=new A;B.loadAddon(n)}}(),q=!1,W=null,B.attachCustomKeyEventHandler(function(e){var t,n,r=(0,w.getKeyCombination)(e);if(r){var i=r;W&&(i=(0,w.keyChord)(W,r));var a=eu(i);switch(a.kind){case j.ResolutionResultKindEnum.NoMatch:W=null;break;case j.ResolutionResultKindEnum.WaitingForChord:return W=a.key,!1;case j.ResolutionResultKindEnum.MatchFound:return W=null,!1}}return t=B,n=e,(!window.navigator.clipboard||"c"!==n.key.toLowerCase()||!n.ctrlKey||!n.shiftKey||("keyup"===n.type&&t.hasSelection()&&(0,S.default)(t.getSelection()).catch(function(e){h.withScope(function(t){t.setTag("xterm-clipboard",!0),t.setExtra("type","copy"),h.captureException(e)})}),n.preventDefault(),n.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!q)&&(q="escape"===e.key.toLowerCase(),!0))}),en.current&&Object.entries(en.current).forEach(function(e){var t=(0,a._)(e,2),n=t[0],r=t[1];B.parser.registerOscHandler(Number(n),function(e){return r(B,e),!0})}),G({onKey:B.onKey.bind(B),onData:B.onData.bind(B),onResize:B.onResize.bind(B),write:B.write.bind(B),fit:function(){var e=L.getBoundingClientRect(),t=e.width,n=e.height;t>0&&n>0&&V.fit()},focus:function(){return B.focus()},clear:function(){return B.clear()},findPrevious:function(e,t){return H.findPrevious(e,t)},findNext:function(e,t){return H.findNext(e,t)},getSize:function(){return{cols:B.cols,rows:B.rows}},paste:function(e){return B.paste(e)},_term:B}),ea(L),[2]}})})().catch(function(e){e.message&&e.message.toLowerCase().includes("loading chunk")?h.withScope(function(t){t.setExtra("message",e.message),t.setExtra("stack",e.stack),h.captureException(Error("Loading chunk failed"))}):Y({error:e,origin:"Xterm: init"})}),function(){n.forEach(function(e){return e()})}}},[L,ea,ei,Y,el,eu,X,Q,Z,en,null==t?void 0:t.openPane,null==t?void 0:t.emitPaneMetrics]),n=null==H?void 0:H._term,r=eo,i=es,c=(o=er).screenReaderMode,d=o.fileLinking,k=o.terminalTheme,C=o.openPane,A=o.emitPaneMetrics,(0,s.useEffect)(function(){n&&k&&(n.options.theme=k)},[n,k]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=c)},[n,c]),(0,s.useEffect)(function(){if(n){if(d){if(!r.current){var t=!1;return e.A(305813).then(function(e){var i=e.FileLinkAddon;t||(r.current=new i(d.openFile,d.listFiles),n.loadAddon(r.current))}),function(){t=!0}}r.current.update(d.openFile,d.listFiles),r.current.reactivate()}else r.current&&r.current.deactivate();if(C){if(!i.current){var a=!1;return e.A(537915).then(function(e){var t=e.PaneLinkAddon;a||(i.current=new t(C,A),n.loadAddon(i.current))}),function(){a=!0}}i.current.update(C,null!=A?A:null)}else i.current&&i.current.deactivate()}},[n,d,r,i,C,A]),(0,s.useEffect)(function(){var e=null==H?void 0:H._term;e&&W&&e.options.fontSize!==W&&(e.options.fontSize=W,e.refresh(0,e.rows-1),H.fit())},[W,H]),(0,s.useEffect)(function(){if($){var e=null==H?void 0:H._term;if(e)return e.onBell(T).dispose}},[$,H]),[H,B]}e.s(["useTerminalTheme",()=>U],818976),e.s(["default",()=>H],210481);var G=e.i(446530),z=e.i(123850),q=e.i(613355),W=e.i(625484);function K(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=n[r];if(i){for(var a=!1,o=0;o<e.cols;o++)if(0!==i.hasContent(o)){a=!0;break}if(a){t=r+1;break}}}return t}var $=(0,z.createCssVarTokens)(["topOffset"]),Y=$.cssVars,X=$.styleTokens,Q=(0,G.cssRecord)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:X.topOffset,"& .xterm":[q.rcss.my(8),q.rcss.ml(8),q.rcss.height("100%"),q.rcss.overflow("hidden")],"& .xterm-viewport":[q.rcss.overflow("hidden")]},terminalForHistoricalOutputWrapper:[q.rcss.overflow("hidden")]});function J(e){var t=e.autoFocus,a=e.wrapperResizeRef,l=e.xterm,u=e.bufferHeight,c=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,m=(0,i._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){t&&l&&l.focus()},[l,t]),(0,s.useEffect)(function(){if(l){var e=l.onData(function(e){c&&c(e)}),t=l.onResize(function(){p&&p(l.getSize())});return function(){e.dispose(),t.dispose()}}},[l,c,p]),(0,s.useEffect)(function(){if(l)return d(function(e){return l.write(e)})},[d,l]),(0,o.jsx)(W.View,{innerRef:a,children:(0,o.jsx)(W.View,(0,r._)((0,n._)({},m),{css:Q.wrapper,style:(0,n._)({height:u},m.style),children:f}))})}function Z(e){var t=e.xtermRef,a=e.visibleHeight,s=e.maxHeight,l=(0,i._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,o.jsx)(W.View,(0,r._)((0,n._)({innerRef:t,css:Q.terminal},l),{style:(0,r._)((0,n._)({},l.style),{height:a,maxHeight:s})}))}function ee(e){var t=e.maxHeight,n=e.openPane,r=e.convertEol,i=(0,c.default)().fs,o=(0,s.useCallback)(function(e){return n({type:(0,d.getPaneTypeForFile)(e),data:e})},[n]),p=(0,s.useCallback)(function(e,t){return n({type:"webview",data:{ports:{type:"local",path:e,port:t}}})},[n]),f=(0,a._)(H({autoFit:!1,size:{rows:10},openFile:o,listFiles:i.listFiles,openWebview:p,openPane:n,convertEol:r}),2),m=f[0],h=f[1],g=(0,s.useMemo)(function(){return null==m?void 0:m._term},[m]),v=(0,a._)((0,s.useState)(function(){var e,t,n=null==g?void 0:g._core;return null!=(t=null==n||null==(e=n._renderService)?void 0:e.dimensions.css.cell.height)?t:16}),2),x=v[0],y=v[1];(0,s.useEffect)(function(){if(g){var e,t=null==g?void 0:g._core,n=null==t||null==(e=t._renderService)?void 0:e.onDimensionsChange(function(e){y(e.css.cell.height)});return function(){null==n||n.dispose()}}},[g]);var b=(0,s.useMemo)(function(){return Math.floor((t-16)/x)},[t,x]),S=(0,a._)((0,s.useState)("normal"),2),_=S[0],w=S[1],j=(0,a._)((0,s.useState)(1),2),T=j[0],D=j[1],k=(0,a._)((0,s.useState)(1),2),C=k[0],E=k[1],A=(0,a._)((0,s.useState)(!1),2),I=A[0],R=A[1],P=(0,l.default)(T),M=(0,l.default)(C),O=(0,l.default)(_);(0,s.useEffect)(function(){if(g){var e=g.buffer.onBufferChange(function(e){w(e.type),"alternate"===e.type&&(D(b),E(b),R(!1))});return function(){e.dispose()}}},[g,b]);var N=(0,s.useCallback)(function(){if(g)if("alternate"===O.current)D(b);else{var e=K(g),t=e>b;E(e),D(Math.min(e,b)),R(t)}},[g,b,O]),L=(0,u.default)(function(e){var t=e.widthChanged;g&&m&&t&&(m.fit(),N())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(g&&"alternate"!==O.current){var e=K(g),t=Math.min(e,b);e>M.current&&E(e),t>P.current&&D(t),e>b&&R(!0)}};if(g){var t=[g.onLineFeed(e),g.onCursorMove(e)];return function(){t.forEach(function(e){return e.dispose()})}}},[g,P,O,M,b]),(0,s.useEffect)(function(){if(g&&m){var e=m.getSize();e.rows!==b&&g.resize(e.cols,b),N()}},[g,m,b,N]);var B=(0,s.useMemo)(function(){return Math.ceil((Math.min(T,C)+1)*x+16)},[T,C,x]),V=(0,s.useMemo)(function(){return Math.ceil(I?(C+1)*x+16:B)},[x,I,B,C]);return(0,s.useEffect)(function(){m&&m.fit()},[m,T,C]),{visibleHeight:B,visibleLines:T,bufferHeight:V,bufferLines:C,bufferMode:_,hasScrollback:I,wrapperResizeRef:L,xterm:m,xtermRef:h}}function et(){}function en(e){var t=e.output,n=e.maxHeight,r=ee({maxHeight:n,openPane:e.openPane,convertEol:e.convertEol}),i=r.visibleHeight,a=r.bufferHeight,l=r.wrapperResizeRef,u=r.xterm,c=r.xtermRef,d=(0,s.useRef)(null);(0,s.useEffect)(function(){u&&d.current&&(u.clear(),d.current(t))},[d,u,t]);var p=U();return(0,o.jsx)(W.View,{css:Q.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,o.jsx)(J,{onInput:et,xterm:u,wrapperResizeRef:l,bufferHeight:a,setOnMessage:function(e){return d.current=e,et},onResizeTerminal:et,children:(0,o.jsx)(Z,{xtermRef:c,visibleHeight:i,maxHeight:n})})})}e.s(["AutoGrowingTerminalForHistoricalOutput",()=>en,"AutoGrowingTerminalInner",()=>Z,"AutoGrowingTerminalWrapper",()=>J,"TERMINAL_PADDING_PX",()=>8,"cssVars",()=>Y,"styleTokens",()=>X,"useAutoGrowingXTerm",()=>ee],762211)},825118,e=>{"use strict";var t,n,r,i=((t={}).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",t.UNKNOWN="UNKNOWN",t.TIMEOUT="TIMEOUT",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.UNEXPECTED_DISCONNECT="UNEXPECTED_DISCONNECT",t.UNKNOWN_REF="UNKNOWN_REF",t.NOT_INITIALIZED="NOT_INITIALIZED",t.UNAUTHENTICATED="UNAUTHENTICATED",t.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",t.UNKNOWN_REMOTE="UNKNOWN_REMOTE",t.INDEX_LOCKED="INDEX_LOCKED",t.CONFIG_LOCKED="CONFIG_LOCKED",t.NO_COMMITS="NO_COMMITS",t.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",t.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",t.INVALID_REFERENCE="INVALID_REFERENCE",t.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",t.MERGE_CONFLICT="MERGE_CONFLICT",t.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",t.HEAD_DETACHED="HEAD_DETACHED",t.DIRTY_WORKTREE="DIRTY_WORKTREE",t.PUSH_REJECTED="PUSH_REJECTED",t.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",t.ALREADY_INITIALIZED="ALREADY_INITIALIZED",t.INVALID_STATE="INVALID_STATE",t.PROTECTED_BRANCH="PROTECTED_BRANCH",t.NOTE_SUCCESSFULLY_REMOVED="NOTE_SUCCESSFULLY_REMOVED",t.OBJECT_HAS_NO_NOTE="OBJECT_HAS_NO_NOTE",t.OBJECT_ALREADY_HAS_NOTE="OBJECT_ALREADY_HAS_NOTE",t.NOTE_SUCCESSFULLY_OVERWRITTEN="NOTE_SUCCESSFULLY_OVERWRITTEN",t.PRE_COMMIT_HOOK_FAILED="PRE_COMMIT_HOOK_FAILED",t),a=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,o=/^cat: .*: No such file or directory$/im;function s(e){return RegExp("^fatal: ".concat(e.source),"im")}function l(e){return RegExp("^error: ".concat(e.source),"im")}var u=[{error:"NOT_INITIALIZED",match:[s(/not a git repository/)]},{error:"UNAUTHENTICATED",match:[s(/Authentication failed/),s(/unable to access/),s(/repository \S+ not found/),s(/could not read Username/),s(/could not read Password/),s(/Could not read from remote/)]},{error:"INDEX_FILE_CORRUPT",match:[s(/index file corrupt/),s(/index file smaller than expected/),l(/index file .*?\.idx is too small/)]},{error:"UNKNOWN_REMOTE",match:[s(/No such remote/),l(/No such remote/)]},{error:"UNKNOWN_REF",match:[s(/couldn't find remote ref/)]},{error:"INDEX_LOCKED",match:[s(/Unable to create .*?\.git\/index\.lock/),l(/Unable to create .*?\.git\/index\.lock/)]},{error:"CONFIG_LOCKED",match:[s(/could not lock config file/),l(/could not lock config file/)]},{error:"NO_COMMITS",match:[s(/your current branch '.*?' does not have any commits yet/)]},{error:"PATH_MATCHED_NO_FILES",match:[s(/pathspec '.*?' did not match any files/),s(/pathspec '.*?' did not match any file\(s\) known to git/),s(/path '.*?' does not exist/),s(/path '.*?' exists on disk, but not in/)]},{error:"USER_NOT_CONFIGURED",match:[s(/unable to auto-detect email address/),s(/unable to auto-detect name/),s(/empty ident name \(for <.*?>\) not allowed/)]},{error:"INVALID_REFERENCE",match:[s(/invalid reference: .*?$/),s(/'.*?' - not a valid ref/)]},{error:"BRANCH_ALREADY_EXISTS",match:[s(/A branch named '.*?' already exists/)]},{error:"MERGE_CONFLICT",match:[s(/Not possible to fast-forward, aborting/),s(/refusing to merge unrelated histories/),s(/Exiting because of an unresolved conflict/),s(/Exiting because of unfinished merge/),l(/Failed to merge in the changes/),(n=/Merge conflict in/,RegExp("^CONFLICT \\([^\\)]+\\): ".concat(n.source),"im"))]},{error:"UPSTREAM_NOT_SET",match:[s(/The current branch \S+ has no upstream branch/),s(/No configured push destination/)]},{error:"HEAD_DETACHED",match:[s(/HEAD does not point to a branch/),s(/ref HEAD is not a symbolic ref/)]},{error:"DIRTY_WORKTREE",match:[l(/Your local changes to the following files would be overwritten/),l(/The following untracked working tree files would be overwritten/),l(/\S+ is not possible because you have unmerged files/),l(/cannot rebase: You have unstaged changes/)]},{error:"PROTECTED_BRANCH",match:[(r=/.*? Protected branch update failed/,RegExp("^remote: error: ".concat(r.source),"im"))]},{error:"PUSH_REJECTED",match:[l(/failed to push some refs to/)]},{error:"REMOTE_ALREADY_EXISTS",match:[s(/remote .*? already exists/),l(/remote .*? already exists/)]},{error:"INVALID_STATE",match:[s(/There is no merge in progress/),s(/There is no merge to abort/),s(/No rebase in progress/)]},{error:"OBJECT_ALREADY_HAS_NOTE",match:[l(/Cannot add notes. Found existing notes for object/)]}],c=[{error:"NOTE_SUCCESSFULLY_REMOVED",match:[/^Removing note for object/]},{error:"OBJECT_HAS_NO_NOTE",match:[/^Object \S+ has no note/]},{error:"NOTE_SUCCESSFULLY_OVERWRITTEN",match:[/^Overwriting existing notes for object \S+/]},{error:"PRE_COMMIT_HOOK_FAILED",match:[/pre-?commit/i]}];function d(e){if(a.test(e)){for(var t=0;t<u.length;t++)for(var n=0;n<u[t].match.length;n++)if(u[t].match[n].test(e))return u[t].error;return"UNKNOWN"}for(var r=0;r<c.length;r++)for(var i=0;i<c[r].match.length;i++)if(c[r].match[i].test(e))return c[r].error;return o.test(e)?"PATH_MATCHED_NO_FILES":"UNKNOWN_NOT_GIT"}e.s(["GitErrors",()=>i,"gitErrorFromOutput",()=>d])},97207,26857,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(878420),a=e.i(64386),o=e.i(188507),s=e.i(569910),l=e.i(112942),u=e.i(45442),c=e.i(509908);function d(e){var t=(0,u.useAgentSettings)();return(0,r.useCallback)(function(n){if(!e)return Promise.reject(Error("Session is null, cannot send user action response"));var r=null,u=(0,l.convertAgentSettingsFromGQLToAiChat)(t.settings);switch(n.type){case"nextStepResponse":(0,c.trackAgentAnalyticsEvent)({action:"suggested_feature_selected",sessionId:e.id}),r={$kind:"nextStepResponse",nextStepResponse:{response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:n.data.id,featureName:n.data.featureName}}}};break;case"userSecretsResponse":r={$kind:"userSecretsResponse",userSecretsResponse:{providedSecrets:n.providedSecretKeys.map(function(e){return{key:e,status:o.UserSecretResponseStatus.SECRET_COMPLETED}})}};break;case"queryResponse":r={$kind:"queryResponse",queryResponse:n.data};break;case"userMarkedTaskComplete":r={$kind:"userMarkedTaskComplete",userMarkedTaskComplete:n.data};break;case"approveTaskListResponse":r={$kind:"approveTaskListResponse",approveTaskListResponse:{taskListEventId:n.taskListEventId,approved:!0,agentConfig:u}};break;case"addingIntegrationsResponse":r={$kind:"addingIntegrationsResponse",addingIntegrationsResponse:{connectionIds:n.connectionIds,rejectedConnectorIds:n.rejectedConnectorIds}};break;case"approveInitialBuildVisualPhaseResponse":r={$kind:"approveInitialBuildVisualPhaseResponse",approveInitialBuildVisualPhaseResponse:(0,a._)((0,i._)({},n.data),{agentConfig:u})};break;case"approveInitialBuildMvpResponse":r={$kind:"approveInitialBuildMvpResponse",approveInitialBuildMvpResponse:(0,a._)((0,i._)({},n.data),{agentConfig:u})};break;case"approveBlueprintResponse":r={$kind:"approveBlueprintResponse",approveBlueprintResponse:{blueprintEventId:n.blueprintEventId,approved:n.approved,blueprintName:n.blueprintName}};break;case"convertMockupToAppResponse":r={$kind:"convertMockupToAppResponse",convertMockupToAppResponse:{approved:n.data.approved,additionalComments:n.data.additionalComments}};break;case"envVarsResponse":r={$kind:"envVarsResponse",envVarsResponse:{providedEnvVars:n.providedEnvVars}};break;default:(0,s.default)(n)}if(!r)return Promise.reject(Error("Failed to create response for user action"));var d={kind:"agentAskUserForActionResponse",response:r,requestEventId:n.requestEventId};return e.appendEvent(d)},[e,t.settings])}e.s(["useSendAskUserForActionResponse",()=>d],26857),e.i(545082);var p=e.i(423111);function f(e){var i=d(e),a=(0,p.useSetInProgressMockupToAppGraduation)();return(0,r.useCallback)(function(e){var r=e.approved,o=e.additionalComments,s=e.requestEventId;return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:r&&a(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i({type:"convertMockupToAppResponse",data:{approved:r,additionalComments:o},requestEventId:s})];case 2:return[2,t.sent()];case 3:throw e=t.sent(),a(!1),e;case 4:return[2]}})})()},[i,a])}e.s(["useSendConvertMockupToAppResponse",()=>f],97207)},387491,31290,e=>{"use strict";function t(e){var t=e.current,n=e.target,r=e.elapsed,i=e.delta,a=e.snappiness,o=e.ramp,s=void 0===o?1:o,l=e.minStepSize,u=void 0===l?.5:l,c=n-t;if(Math.abs(c)<=u)return n;var d=1;r<s&&(d=r/s);var p=1-Math.exp(-(void 0===a?16:a)*d*i),f=(1-p)*t+p*n;return Math.abs(f-t)<u?t+Math.sign(c)*u:f}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===n.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},a={x:0,y:0};t.start&&t.start({mouse:i,shiftKey:e.shiftKey});var o=function(e){var o={x:e.pageX,y:e.pageY};if(a={x:o.x-i.x,y:o.y-i.y},void 0!==n.moveThreshold&&!r){if(Math.abs(a.x)<n.moveThreshold&&Math.abs(a.y)<n.moveThreshold)return;r=!0}t.move({delta:a,shiftKey:e.shiftKey,mouse:o})},s=null,l=function(e){e.preventDefault(),s&&cancelAnimationFrame(s),s=requestAnimationFrame(function(){o(e)})},u=function(){s&&cancelAnimationFrame(s),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",u),document.removeEventListener("touchcancel",u),(void 0===n.moveThreshold||r)&&t.end&&t.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",u),document.addEventListener("touchcancel",u)}e.s(["damp",()=>t],387491),e.s(["measureMouseMove",()=>n],31290)},166876,e=>{"use strict";var t=e.i(188507),n=[t.TaskStatus.TASK_STATUS_PENDING,t.TaskStatus.TASK_STATUS_IN_PROGRESS];function r(e){var t=e.tasks;return!!t&&0!==t.length&&t.every(function(e){return e.updated&&n.includes(e.status)})}function i(e){return e.agentMode===t.AgentMode.AGENT_MODE_DISCUSSION}function a(e){return e.tasks.filter(function(e){return e.updated}).filter(function(e){return e.status===t.TaskStatus.TASK_STATUS_COMPLETED})}function o(e){return e.length>0&&e.every(function(e){return e.status===t.TaskStatus.TASK_STATUS_COMPLETED})}function s(e){return e.summary&&""!==e.summary?e.summary:e.content}function l(e){return!!e.extraDetails||!!e.content&&!!e.summary&&e.content!==e.summary}e.s(["getCompletedTasks",()=>a,"getTaskSummary",()=>s,"hasExpandableTaskDetails",()=>l,"isFirstInstanceOfTaskList",()=>r,"isFullyCompletedTaskList",()=>o,"isPlanModeProposedTaskList",()=>i])},231346,e=>{"use strict";e.i(877212);var t=e.i(924908);e.i(925218);var n=e.i(267103),r=e.i(641555);function i(e){var n=(0,t.useChatter)(),i=(0,r.useObservableMemo)(function(){return n.sessions.agent.all.list.map(function(e){return e[e.length-1]})},[n.sessions],{default:void 0});return null!=e&&null!=i&&i.id===e}function a(){var e,r=(0,t.useChatter)(),a=(0,n.useObservable)(r.sessions.agent.current);return i(null!=(e=null==a?void 0:a.id)?e:null)}e.s(["useIsCurrentSessionInitialAgentSession",()=>a,"useIsInitialAgentSession",()=>i])},165579,755323,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(276385),i=e.i(389959),a=e.i(709485),o=e.i(858248),s=e.i(826516),l=e.i(907371),u=e.i(173703),c=e.i(960178),d=e.i(625484),p=e.i(140161);function f(e){var f=e.targetedElement,m=e.openPane,h=f.filePath&&!!m,g=(0,l.useCreateInteractive)({variant:"filled"}),v=(0,i.useCallback)(function(){f.filePath&&m&&((0,o.track)(a.events.TARGETED_ELEMENT_FILE_LINK_CLICKED,{componentName:f.componentName,filePath:f.filePath,lineNumber:f.lineNumber}),m({type:"codeEditor",data:{path:f.filePath,line:f.lineNumber}}))},[f,m]),x=(0,s.usePressedProps)(h?{onPress:v}:void 0);return f.componentName?(0,r.jsx)(d.View,{row:!0,align:"center",justify:"end",children:(0,r.jsxs)(u.ShadesSurface,(0,n._)((0,t._)({clsx:h?g.clsx:void 0,style:h?g.style:void 0,elevate:h?"2x":"1x",tag:h?"button":void 0,br:4,py:4,px:6,row:!0,align:"center",gap:4},h?x:{}),{children:[(0,r.jsx)(p.default,{size:16}),(0,r.jsx)(c.Text,{variant:"small",children:f.componentName})]}))}):null}e.s(["TargetedElement",()=>f],165579),e.s(["TARGETED_ELEMENT_SCREENSHOT_PREFIX",()=>"targeted_element_"],755323)},436725,e=>{"use strict";var t=e.i(276385),n=e.i(446530),r=e.i(613355),i=e.i(625484),a=e.i(940745),o=(0,n.cssRecord)({loadingState:[r.rcss.center]});function s(){return(0,t.jsx)(i.View,{css:o.loadingState,grow:!0,shrink:!0,children:(0,t.jsx)(a.default,{})})}e.s(["LoadingState",()=>s])},556972,e=>{"use strict";var t=e.i(530929),n=["years","months","weeks","days","hours","minutes","seconds"];function r(e,r){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var i=(null==r?void 0:r.format)||n,a=(null==r?void 0:r.locale)||t.default,o=(null==r?void 0:r.zero)||!1,s=(null==r?void 0:r.delimiter)||" ";return i.reduce(function(t,n){var r="x".concat(n.replace(/(^.)/,function(e){return e.toUpperCase()}));return"number"==typeof e[n]&&(o||e[n])?t.concat(a.formatDistance(r,e[n])):t},[]).join(s)}e.s(["formatDuration",()=>r],556972)},64868,e=>{"use strict";function t(e){return!!e&&"figma"===e.toLowerCase()}function n(e,t){var n,r,i,a;return r=(n={inProgress:t,serverName:null==e?void 0:e.serverName,toolName:null==e?void 0:e.toolName}).inProgress,i=n.serverName,a=n.toolName,"figma"===i?"".concat(r?"Using":"Used"," Figma MCP (Beta)"):"".concat(r?"Using":"Used"," ").concat(i||"MCP"," MCP").concat(a?" - ".concat(a):"")}e.s(["getMCPToolSummaryFromData",()=>n,"isFigmaMCPTool",()=>t])},876216,e=>{"use strict";var t=e.i(556972),n=e.i(188507),r=e.i(629536),i=e.i(64868),a="Working";function o(e){var o,s,l,u,c=e.contents.contents;if((null==c?void 0:c.$kind)!=="agentTimelineEventContents")return a;var d=e.state===n.EventState.IN_PROGRESS,p=c.agentTimelineEventContents,f=p.toolName,m=p.toolData;if("screenshot_tool"===f)return"".concat(d?"Taking":"Took"," a screenshot");if("programming_language_install_tool"===f)return"".concat(d?"Configuring":"Configured"," programming environment");if("wait_for_background_jobs"===f)return c.agentTimelineEventContents.message||"Waiting for background jobs";switch(null==m?void 0:m.$kind){case"deployData":return"Suggested publishing project";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(d?"Executing":"Executed"," SQL query `").concat(m.sqlExecutionData.command,"`");case"fileEditData":return"".concat(d?"Editing":"Edited"," `").concat(m.fileEditData.filePath,"`");case"createFileData":return"".concat(d?"Creating":"Created"," `").concat(m.createFileData.filePath,"`");case"readFileData":return"".concat(d?"Reading":"Opened"," `").concat(m.readFileData.filePath,"`");case"readDirData":var h=m.readDirData.path;return"."===h&&(h="home"),"".concat(d?"Reading":"Opened"," `").concat(h,"` directory");case"shellExecutionData":return"".concat(d?"Executing":"Executed"," `").concat(m.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(d?"Adding":"Added"," support for ").concat(m.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var g=m.packagerInstallData.inputPackages;if(!d){if(0===g.length)return"Installed dependencies";return"Installed ".concat(g.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===g.length)return"Installing packages";return"Installing ".concat(g.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerUninstallData":var v=m.packagerUninstallData.inputPackages;return"Uninstalled ".concat(v.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(m.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(m.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(d?"Searching":"Searched",' "').concat(m.searchFileData.filePath,'" for "').concat(m.searchFileData.query,'"');case"searchFilesystemData":return"".concat(d?"Searching":"Searched",' for "').concat(m.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(d?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":case"presentResultsToolData":case"deployConfigData":return null;case"workflowsStartToolData":return"Started `".concat(m.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(m.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(m.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var x=m.workflowsSetRunConfigToolData,y=x.name,b=x.command;if(d||0===y.length||0===b.length)return"Configuring run";return"Configured `".concat(y,"` to run `").concat(b,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(m.workflowsRemoveRunConfigToolData.name,"`");case"blueprintsSetup":var S=[],_=!0,w=!1,j=void 0;try{for(var T,D=m.blueprintsSetup.blueprintData[Symbol.iterator]();!(_=(T=D.next()).done);_=!0){var k=T.value;""!==k.displayName.trim()&&S.push(k.displayName)}}catch(e){w=!0,j=e}finally{try{_||null==D.return||D.return()}finally{if(w)throw j}}if(0===S.length)return null;return"Integrating with ".concat(S.map(function(e){return"`".concat(e,"`")}).join(", "));case"webSearchData":var C=m.webSearchData,E=C.searchType,A=C.query,I=e.state===n.EventState.IN_PROGRESS;if(E===n.WebSearchType.WEB_SEARCH_TYPE_REPLIT_DOCUMENTATION)return I?"Searching Replit documentation":'Searched Replit documentation for "'.concat(A,'"');return I?"Searching the web":'Searched the web for "'.concat(A,'"');case"samplingEvent":var R=m.samplingEvent.trajectories.length;if(e.state===n.EventState.IN_PROGRESS)return"Exploring ".concat(R," potential solutions");return"Explored ".concat(R," potential solutions");case"webPageVisitData":return"Visited ".concat(m.webPageVisitData.url);case"imageGenerationData":if(d)return(null==(s=m.imageGenerationData.imageDescription)?void 0:s.trim())?"Generating an image of ".concat(m.imageGenerationData.imageDescription.toLowerCase(),"..."):"Generating image...";return(null==(o=m.imageGenerationData.imageDescription)?void 0:o.trim())?"Generated an image of ".concat(m.imageGenerationData.imageDescription.toLowerCase(),"."):"Generated image.";case"videoGenerationData":if(d)return(null==(u=m.videoGenerationData.videoDescription)?void 0:u.trim())?"Generating a video of ".concat(m.videoGenerationData.videoDescription.toLowerCase()):"Generating video";return(null==(l=m.videoGenerationData.videoDescription)?void 0:l.trim())?"Generated a video of ".concat(m.videoGenerationData.videoDescription.toLowerCase()):"Generated video";case"stockImageData":var P=m.stockImageData,M=P.numberOfImages,O=P.imageDescription;return"Found ".concat(M," stock image").concat(1===M?"":"s"," of ").concat(O.toLowerCase(),".");case"generateMediaData":var N=m.generateMediaData.media.length;if(d)return"Generating ".concat(N," image").concat(1===N?"":"s");return"Generated ".concat(N," image").concat(1===N?"":"s");case"waitingForBackgroundJobsData":return"Waiting for background jobs to complete";case"memoryCompressionData":if(e.state===n.EventState.IN_PROGRESS)return"Optimizing ".concat(r.AGENT_NAME," memory");return"Optimized ".concat(r.AGENT_NAME," memory");case"thoughts":var L=m.thoughts.summary;if(e.state===n.EventState.IN_PROGRESS)return L||"Thinking";var B=Math.max(1,Math.round(m.thoughts.totalTimeTakenMs/1e3)),V=null!=L?L:"Finished thinking";if(B>3){var U=(0,t.formatDuration)({seconds:B});return"".concat(V," (").concat(U,")")}return V;case"setupObjectStorageData":return"Created a new Object Storage bucket";case"setupModelfarmData":return"Integrated with Replit AI Integrations";case"viewLogsData":if(m.viewLogsData.webviewConsole&&m.viewLogsData.workflows)return"Checked console and system logs";if(m.viewLogsData.webviewConsole)return"Checked console logs";if(m.viewLogsData.workflows)return"Checked system logs";else if(m.viewLogsData.lsp)return"Checked code issues";else return"Checked logs";case"viewSpecialFiles":if(m.viewSpecialFiles.fileType===n.SpecialFileType.LOG_FILE)return"Reading log files in detail";return"Analyzing files";case"designGuidelinesData":return"".concat(d?"Generating":"Generated"," design guidelines");case"searchIntegrationsData":return"".concat(d?"Searching":"Searched"," Replit's integrations for \"").concat(m.searchIntegrationsData.query,'"');case"viewIntegrationData":return"".concat(d?"Viewing":"Viewed"," ").concat(m.viewIntegrationData.name," integration");case"mcpToolData":return(0,i.getMCPToolSummaryFromData)(m.mcpToolData,d);case"messagedBackgroundAgent":return d?"Running background task":"Ran background task";case"subagentReportResultData":return d?"Generating response":"Generated response";case"reportAgentIssueData":return d?"Sending issue report to Replit Team":"Sent issue report to Replit Team";default:return d?a:null}}e.s(["DEFAULT_IN_PROGRESS_EVENT_SUMMARY",()=>a,"getToolUseSummary",()=>o])},111456,e=>{e.v({codeText:"Summary-module__0fK4qa__codeText"})},389503,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(960178),i=e.i(111456);function a(e){var a=e.summary,o=e.variant,s=e.color,l=(0,n.useMemo)(function(){for(var e=a,t,n=/`([^`]+)`/g,r=[],i=0;null!==(t=n.exec(e));)i<t.index&&r.push({text:e.substring(i,t.index),isCode:!1}),r.push({text:t[1],isCode:!0}),i=t.index+t[0].length;return i<e.length&&r.push({text:e.substring(i),isCode:!1}),r},[a]);return(0,t.jsx)(r.Text,{multiline:!1,variant:o,color:s,showTooltipOnTruncate:!0,children:l.map(function(e,r){return e.isCode?(0,t.jsx)("span",{className:i.default.codeText,children:e.text},r):(0,t.jsx)(n.Fragment,{children:e.text},r)})})}e.s(["Summary",()=>a])},708874,e=>{e.v({"pulse-blurple":"FeedStatusRow-module__jLbR_G__pulse-blurple",root:"FeedStatusRow-module__jLbR_G__root",statusTextContainer:"FeedStatusRow-module__jLbR_G__statusTextContainer"})},134663,713295,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(876216),a=e.i(389503),o=e.i(188507);e.i(925218);var s=e.i(641555);function l(e){return(0,s.useObservableMemo)(function(){return null==e?void 0:e.reduce(u,1)},[e],{default:{summary:null,startedAt:null,toolDataKind:null}})}var u={direction:"reverse",state:{summary:null,startedAt:null,toolDataKind:null},reducer:function(e,t){t.summary=e.state===o.EventState.IN_PROGRESS?(0,i.getToolUseSummary)(e):null;var n,r,a=e.contents.contents,s=(null==a?void 0:a.$kind)==="agentTimelineEventContents"&&null!=(r=null==(n=a.agentTimelineEventContents.toolData)?void 0:n.$kind)?r:null;return t.startedAt="thoughts"===s?e.created:null,t.toolDataKind=t.summary&&"messageData"!==s?s:null,!1}};e.s(["useInProgressEventData",()=>l],713295);var c=e.i(625484),d=e.i(179140),p=e.i(708874);function f(e){var t=l(e.session).summary;return(0,n.jsx)(m,{inProgressEventSummary:null!=t?t:i.DEFAULT_IN_PROGRESS_EVENT_SUMMARY})}function m(e){var t=e.inProgressEventSummary,r="".concat(t.replace(/`/g,""),"…");return(0,n.jsx)(c.View,{px:4,pt:4,pb:6,row:!0,align:"center",justify:"space-between",clsx:p.default.root,children:(0,n.jsxs)(c.View,{row:!0,gap:6,align:"center",px:2,shrink:!0,grow:!0,clsx:p.default.statusTextContainer,children:[(0,n.jsx)(d.default,{size:16}),(0,n.jsx)(h,{text:r})]})})}function h(e){var i=e.text,o=(0,t._)((0,r.useState)(""),2),s=o[0],l=o[1];(0,r.useEffect)(function(){if(!i.endsWith("…"))return void l("");var e=0,t=!0,n=setInterval(function(){t?++e>=3&&(t=!1):--e<=0&&(t=!0),l(".".repeat(e))},200);return function(){return clearInterval(n)}},[i]);var u=i.endsWith("…")?i.slice(0,-1)+s:i;return(0,n.jsx)(a.Summary,{summary:u,variant:"small"})}e.s(["AnimatedStatusText",()=>h,"FeedStatusRow",()=>f,"FeedStatusRowUI",()=>m],134663)},149448,e=>{"use strict";e.i(925218);var t=e.i(641555);function n(e){return(0,t.useObservableMemo)(function(){return null==e?void 0:e.reduce(r,1)},[e],{default:null})}var r={direction:"reverse",state:{id:null,event:null,state:null,senderType:null},reducer:function(e,t){return t.id=e.id,t.state=e.state,t.event=e,t.senderType=e.sender.type,!1}};e.s(["useLastEvent",()=>n])},115820,613007,331820,e=>{"use strict";var t,n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(199674),s=e.i(878420),l=e.i(569384),u=e.i(973245),c=e.i(951262);function d(){var e=(0,l._)(["\n  mutation CreateAgentRollbackPreview(\n    $input: CreateAgentRollbackPreviewInput!\n  ) {\n    createAgentRollbackPreview(input: $input) {\n      ... on CreateAgentRollbackPreviewResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,u.gql)(d()),m=e.i(613141);function h(){var e=(0,l._)(["\n  subscription GetAgentRollbackPreviewStatus($input: RollbackPreviewInput!) {\n    getAgentRollbackPreviewStatus(input: $input) {\n      __typename\n      ... on RollbackPreviewOutput {\n        status\n        host\n        errorMessage\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}var g={},v=(0,u.gql)(h());function x(e){var t=(0,s._)({},g,e);return m.useSubscription(v,t)}e.s(["useGetAgentRollbackPreviewStatusSubscription",()=>x],613007);var y=e.i(791729),b=e.i(424746),S=e.i(399344),_=e.i(678420);function w(e){var t=e.secrets,o=e.replId,s=(0,r._)((0,a.useState)(null),2),l=s[0],u=s[1],c=j({secrets:t,replId:o});return(0,a.useEffect)(function(){(0,n._)(function(){return(0,i._)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})()},[c]),{devSecrets:l}}function j(e){var t=e.secrets,o=e.replId,s=(0,r._)((0,_.useWorkspaceAndReplLinkedSecretsLazyQuery)({variables:{replId:o}}),1)[0];return(0,a.useCallback)(function(){return(0,n._)(function(){var e,n,a,o,l,u,c,d,p,f,m,h,g,v,x,y,b,S,_;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,t.read()];case 1:return n=i.sent(),a=new Map,[4,s()];case 2:if((null==(o=i.sent().data)?void 0:o.getRepl.__typename)==="Repl"&&o.getRepl.sharedSecretLinks&&(null==(e=o.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"){l=o.currentUser.secrets.items,u=!0,c=!1,d=void 0;try{for(p=function(){var e=m.value,t=l.find(function(t){return t.id===e.secret.id});t&&a.set(e.alias,t.value)},f=o.getRepl.sharedSecretLinks[Symbol.iterator]();!(u=(m=f.next()).done);u=!0)p()}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}h=!0,g=!1,v=void 0;try{for(x=n.entries()[Symbol.iterator]();!(h=(y=x.next()).done);h=!0)S=(b=(0,r._)(y.value,2))[0],_=b[1],a.set(S,_)}catch(e){g=!0,v=e}finally{try{h||null==x.return||x.return()}finally{if(g)throw v}}return[2,a]}})})()},[s,t])}e.s(["useDevSecrets",()=>w,"useGetDevSecrets",()=>j],331820);var T=e.i(311106),D=e.i(222342),k=e.i(207237);(t={}).Idle="idle",t.Building="building",t.Ready="ready",t.Creating="creating";var C=new Map;function E(e){var t,l,u=e.commitId,d=e.enableHelium,m=e.date,h=(0,k.default)(),g=j({secrets:(0,S.useSecretsService)(),replId:h}),v=(0,b.useNeonDevelopmentDatabase)(),_=v.database,w=v.loading,E=_?_.projectId:null,A=(0,D.default)().showError,I=(0,r._)((0,a.useState)(null),2),R=I[0],P=I[1],M=(0,r._)((0,a.useState)(!1),2),O=M[0],N=M[1],L=(0,r._)((0,a.useState)(C.get(u)?{status:"ready",url:null!=(l=C.get(u))?l:""}:{status:"idle"}),2),B=L[0],V=L[1],U=(0,a.useCallback)(function(e,t){(0,T.sendSentryError)({context:"PreviewAgentCheckpointButton",error:null!=t?t:Error(e),extras:{replId:h}}),A(e),P(e)},[h,A]),F=(0,r._)((t=(0,s._)({},p,void 0),c.useMutation(f,t)),1)[0],H=w||"creating"===B.status||"building"===B.status,G=x({variables:{input:{previewID:"building"===B.status?B.previewId:null}},skip:"building"!==B.status||!B.previewId}),z=G.data,q=G.error;(0,a.useEffect)(function(){q&&(V({status:"idle"}),U("Failed to load preview",q))},[q,U]),(0,a.useEffect)(function(){if(null==z?void 0:z.getAgentRollbackPreviewStatus){var e=z.getAgentRollbackPreviewStatus;"RollbackPreviewOutput"===e.__typename?"success"===e.status&&e.host?V({status:"ready",url:e.host.includes(".localhost")?"http://".concat(e.host):"https://".concat(e.host)}):"fail"===e.status&&V({status:"idle"}):("NotFoundError"===e.__typename||"UnauthorizedError"===e.__typename||"UserError"===e.__typename||"ServiceUnavailable"===e.__typename)&&(V({status:"idle"}),U("Failed to load preview",Error(e.message)))}},[z,U]);var W=(0,a.useCallback)(function(){return(0,n._)(function(){var e,t,n,a,o,s,l,c,p,f,v;return(0,i._)(this,function(i){switch(i.label){case 0:if(H)return[2];return[4,g()];case 1:if(t=i.sent(),n=C.get(u))return V({status:"ready",url:n}),[2];return V({status:"creating"}),a=Array.from(t,function(e){var t=(0,r._)(e,2);return{name:t[0],value:t[1]}}),[4,F({variables:{input:{gitSha:u,replId:h,neonProjectId:E,timestamp:m.toISOString(),envVars:a,enableHelium:d}}})];case 2:if((null==(e=(o=i.sent()).data)?void 0:e.createAgentRollbackPreview.__typename)!=="CreateAgentRollbackPreviewResult")return(null==(s=o.data)?void 0:s.createAgentRollbackPreview.__typename)==="UnauthorizedError"&&((null==(l=o.data)?void 0:l.createAgentRollbackPreview.message)===y.isEligibleForUsageExplanationDetail.NEEDS_SUBSCRIPTION||(null==(c=o.data)?void 0:c.createAgentRollbackPreview.message)===y.isEligibleForUsageExplanationDetail.NEEDS_SUBSCRIPTION_OR_PAYMENT_METHOD)?N(!0):U(null!=(f=null==(p=o.data)?void 0:p.createAgentRollbackPreview.message)?f:"Something went wrong."),V({status:"idle"}),[2];return""===(v=o.data.createAgentRollbackPreview.preview.url)?V({status:"building",previewId:o.data.createAgentRollbackPreview.preview.id}):(V({status:"ready",url:v}),C.set(u,v)),[2]}})})()},[H,g,F,h,E,m,U,u,d]);return{ready:!H,isInCache:C.has(u),loading:"creating"===B.status||"building"===B.status,loadPreview:W,showUpgradeModal:O,setShowUpgradeModal:N,previewState:B,previewUrl:"ready"===B.status?B.url:null,error:R,validPreview:6>(0,o.differenceInDays)(new Date,m)}}e.s(["useAgentCheckpointPreview",()=>E],115820)},546469,e=>{"use strict";var t,n=((t={}).Starter="starter",t.Paid="paid",t);e.s(["UsageIndicatorVariant",()=>n])},683736,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query blockDbRollback($replId: String!) {\n    getReplIdBlockDbRollback(input: { replId: $replId }) {\n      __typename\n      ... on GetReplIdBlockDbRollbackOutput {\n        __typename\n        blockAgentCheckpointRollbacks\n        blockDatabasePanePITR\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a()),l=e.i(207237);function u(){var e,n,r,a,u=(r={variables:{replId:(0,l.default)()}},a=(0,t._)({},o,r),i.useQuery(s,a)),c=u.data,d=u.loading;return{blockAgentCheckpointRollbacks:(null==c||null==(e=c.getReplIdBlockDbRollback)?void 0:e.__typename)==="GetReplIdBlockDbRollbackOutput"&&c.getReplIdBlockDbRollback.blockAgentCheckpointRollbacks,blockDatabasePanePITR:(null==c||null==(n=c.getReplIdBlockDbRollback)?void 0:n.__typename)==="GetReplIdBlockDbRollbackOutput"&&c.getReplIdBlockDbRollback.blockDatabasePanePITR,loading:d}}e.s(["useIsDbRollbackBlocked",()=>u],683736)},597865,e=>{"use strict";var t=e.i(530658),n=e.i(346715),r=e.i(389959),i=e.i(992785),a=e.i(825118),o=e.i(125674),s=e.i(529810);function l(e){var l,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=(0,t._)((0,r.useState)(null),2),f=p[0],m=p[1],h=(0,r.useRef)(null),g=null==(u=null!=(l=d.keepStaleResult)?l:d.refresh)||u,v=(0,r.useCallback)(function(e){(0,i.default)(e,h.current)||(h.current=e,m(e))},[]),x=(0,o.default)(function(){return e},(0,n._)(c)),y=(0,s.default)().git,b=(0,r.useRef)(null),S=(0,r.useCallback)(function(){b.current?b.current():g||v(null);var e=!1;x(y).then(function(t){e||(v(t),b.current=null)}).catch(function(){e||(v({error:a.GitErrors.UNKNOWN}),b.current=null)}),b.current=function(){e=!0,b.current=null,g||v(null)}},[v,x,y,g]);return(0,r.useEffect)(function(){return S()},[S]),(0,r.useEffect)(function(){var e;if(null==(e=d.refresh)||e)return y.onRefresh(S)},[y,S,d.refresh]),f}e.s(["default",()=>l])},170938,e=>{e.v({container:"ExpoPreviewSection-module__ufBemW__container",errorState:"ExpoPreviewSection-module__ufBemW__errorState",qrContainer:"ExpoPreviewSection-module__ufBemW__qrContainer",qrInactive:"ExpoPreviewSection-module__ufBemW__qrInactive",qrPlaceholder:"ExpoPreviewSection-module__ufBemW__qrPlaceholder",qrWrapper:"ExpoPreviewSection-module__ufBemW__qrWrapper"})},26118,e=>{e.v({innerCircle:"LoadingSpinner-module__QOuyfW__innerCircle",progressCircle:"LoadingSpinner-module__QOuyfW__progressCircle"})},961194,489142,984556,344481,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(754458),i=e.i(993796),a=e.i(441329),o=e.i(480028),s=e.i(140487),l=e.i(929872),u=e.i(960178),c=e.i(625484),d=e.i(243914),p=e.i(940745),f=e.i(26995),m=e.i(527225),h=e.i(170938),g=(0,n.memo)(function(e){var n,g,v=e.previewUrl,x=e.onPreviewClick,y=e.isPreviewActive,b=e.isLoading,S=e.error,_=(0,a.useIsInMobileWorkspace)(),w=(0,i.useFlag)({controlName:"flag-expo-rollback-preview"}),j=v?"exps://".concat(new URL(v).host):"",T=j?j.replace("exps://","exp://"):"";n=y&&_?"Open in Expo Go":y?"Preview Active":b?"Loading preview...":"Load Preview";var D=y&&_,k=D&&T?function(){window.location.href=T}:x,C=D?(0,t.jsx)(d.default,{}):(0,t.jsx)(m.default,{});return(g=y?"Scan with Expo Go to see this version on your device":b?"Setting up your preview environment...":"Load preview to scan with Expo Go",w)?S&&!b?(0,t.jsxs)(c.View,{clsx:h.default.container,gap:16,children:[(0,t.jsxs)(l.Surface,{clsx:[h.default.qrContainer,h.default.errorState],p:16,align:"center",gap:12,children:[(0,t.jsx)(c.View,{clsx:h.default.qrWrapper,children:(0,t.jsx)(c.View,{clsx:h.default.qrPlaceholder,align:"center",justify:"center",children:(0,t.jsx)(f.default,{size:48})})}),(0,t.jsx)(c.View,{align:"center",gap:8,children:(0,t.jsx)(u.Text,{color:"dimmer",variant:"small",children:S})})]}),(0,t.jsx)(s.Button,{text:"Try Again",onClick:x,iconLeft:(0,t.jsx)(m.default,{}),variant:"outlined"})]}):(0,t.jsxs)(c.View,{clsx:h.default.container,gap:16,children:[(0,t.jsxs)(l.Surface,{clsx:[h.default.qrContainer,!y&&h.default.qrInactive],p:16,align:"center",gap:12,children:[(0,t.jsx)(c.View,{clsx:h.default.qrWrapper,children:y&&j?(0,t.jsx)(r.default,{bgColor:o.tokens.backgroundHigher,fgColor:o.tokens.foregroundDefault,size:140,value:j}):(0,t.jsx)(c.View,{clsx:h.default.qrPlaceholder,align:"center",justify:"center",children:b?(0,t.jsx)(p.default,{size:48}):(0,t.jsx)(f.default,{size:48})})}),(0,t.jsx)(c.View,{align:"center",children:(0,t.jsx)(u.Text,{color:"dimmer",variant:"small",children:g})})]}),(0,t.jsx)(s.Button,{text:n,onClick:k,disabled:b||y&&!_,iconLeft:C,variant:D?"default":"outlined",colorway:D?"primary":void 0})]}):(0,t.jsx)(c.View,{clsx:h.default.container,gap:16,children:(0,t.jsxs)(l.Surface,{clsx:[h.default.qrContainer,h.default.qrInactive],p:16,align:"center",gap:12,children:[(0,t.jsx)(c.View,{clsx:h.default.qrWrapper,children:(0,t.jsx)(c.View,{clsx:h.default.qrPlaceholder,align:"center",justify:"center",children:(0,t.jsx)(f.default,{size:48})})}),(0,t.jsx)(c.View,{align:"center",children:(0,t.jsx)(u.Text,{color:"dimmer",variant:"small",children:"Rollback preview is coming soon for mobile apps"})})]})})});e.s(["ExpoPreviewSection",()=>g],961194);var v=e.i(530658),x=e.i(26118);function y(e){var r,i=null!=(r=e.size)?r:12,a=(0,v._)((0,n.useState)(0),2),s=a[0],l=a[1],u=i/2,c=2*u*Math.PI;return(0,n.useEffect)(function(){var t,n=Date.now(),r=function(){l(Math.min(1,.9-Math.exp(-1.5*((Date.now()-n)/(1e3*e.estimatedTotalSeconds))))),t=setTimeout(r,100+500*Math.random())};return r(),function(){return clearTimeout(t)}},[e.estimatedTotalSeconds]),(0,t.jsxs)("svg",{width:i,height:i,className:x.default.progressCircle,children:[(0,t.jsx)("circle",{fill:"transparent",stroke:o.tokens.outlineDimmer,strokeWidth:2,r:u-1,cx:u,cy:u}),(0,t.jsx)("circle",{className:x.default.innerCircle,style:{strokeDashoffset:c*(1-s)},stroke:o.tokens.foregroundDimmer,fill:"transparent",strokeWidth:2,strokeDasharray:"".concat(c," ").concat(c),r:u-1,cx:u,cy:u})]})}e.s(["ApproximateProgressCircle",()=>y],489142);var b=e.i(878420),S=e.i(232841),_=e.i(302973),w=e.i(94516),j=e.i(789277),T=e.i(569384),D=e.i(973245),k=e.i(304277);e.i(566901);var C=e.i(951262);function E(){var e=(0,T._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return E=function(){return e},e}function A(){var e=(0,T._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return A=function(){return e},e}function I(){var e=(0,T._)(["\n  mutation SetNeonHistoryRetentionPeriod(\n    $input: SetNeonDatabaseConfigurationInput!\n  ) {\n    setNeonDatabaseConfiguration(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on SetNeonDatabaseConfigurationResult {\n        database {\n          id\n          historyRetentionSeconds\n        }\n      }\n    }\n  }\n"]);return I=function(){return e},e}var R={},P=(0,D.gql)(E());function M(e){var t=(0,b._)({},R,e);return k.useQuery(P,t)}var O=(0,D.gql)(A());function N(e){var t=(0,b._)({},R,e);return C.useMutation(O,t)}var L=(0,D.gql)(I());function B(e){var t=(0,b._)({},R,e);return C.useMutation(L,t)}e.s(["useDatabaseUsageSectionCurrentUserQuery",()=>M,"useRollbackNeonDatabaseMutation",()=>N,"useSetNeonHistoryRetentionPeriodMutation",()=>B],984556);var V=e.i(968323),U=e.i(683736),F=e.i(17036),H=e.i(207237),G=e.i(906368);function z(e,t,n){return G.withScope(function(r){r.setTag("neon-pane",!0),r.setTag("context",t),n&&r.setExtras(n),G.captureException(e)}),e}var q=e.i(446530),W=e.i(613355),K=e.i(818503),$=e.i(85742),Y=e.i(739521),X=e.i(12034),Q=e.i(396776),J=e.i(292297),Z=e.i(42458),ee=(0,q.cssRecord)({title:W.rcss.pb(8),card:[W.rcss.p(8),W.rcss.borderRadius(8),{outline:"1px solid transparent"}],error:[W.rcss.color.accentNegativeStronger],dialogMessage:[W.rcss.flex.growAndShrink(1)],dialogButtonContainer:[W.rcss.display.flex,W.rcss.flex.row,W.rcss.justify.end],list:[W.rcss.fontSize(12),{li:[W.rcss.pt(1),{"&:before":[W.rcss.mr(4),{content:'"•"'}]}]}]}),et=new S.DateFormatter("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function en(e){var n=e.timeZone,r=e.validationError,i=e.commitError;return r?(0,t.jsx)(u.Text,{css:ee.error,children:r}):i?(0,t.jsx)(u.Text,{css:ee.error,children:"Could not determine timestamp from agent rollback"}):(0,t.jsx)(u.Text,{color:"dimmest",children:n})}function er(e){var r=e.value,i=e.loading,a=e.restored,o=e.error,l=e.validationError,d=e.disabled,f=e.onRestore,m=(0,v._)((0,n.useState)(!1),2),h=m[0],g=m[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Button,{text:i?"":a?"Restored":"Restore",loading:i,iconLeft:i?(0,t.jsx)(p.default,{}):void 0,disabled:!!o||!!l||!r||i||a||d,onClick:function(){return g(!0)},colorway:a?"positive":"primary"}),o&&(0,t.jsx)(u.Text,{css:ee.error,children:o}),(0,t.jsx)(Y.Modal,{isOpen:h,onRequestClose:function(){return g(!1)},children:(0,t.jsxs)(c.View,{gap:16,children:[(0,t.jsxs)(c.View,{row:!0,gap:8,align:"center",children:[(0,t.jsx)(J.default,{size:20}),(0,t.jsx)(u.Header,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,t.jsxs)(c.View,{gap:8,children:[(0,t.jsx)(u.Text,{multiline:!0,css:ee.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,t.jsx)(Q.StatusBanner,{text:r?et.format(r.toDate()):"Could not determine restore date"}),(0,t.jsx)(Q.StatusBanner,{icon:(0,t.jsx)(Z.default,{}),colorway:"warning",text:(0,t.jsxs)(t.Fragment,{children:["This action cannot be undone.",(0,t.jsx)("br",{}),(0,t.jsxs)("ul",{css:ee.list,children:[(0,t.jsx)("li",{children:"All current data will be replaced with data from this backup"}),(0,t.jsx)("li",{children:"Any changes made after this backup point will be lost"}),(0,t.jsx)("li",{children:"Connected services may need to be reconfigured"}),(0,t.jsx)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,t.jsx)(c.View,{css:ee.dialogButtonContainer,children:(0,t.jsx)(s.Button,{colorway:"primary",onClick:function(){g(!1),f(r)},text:"Continue"})})]})})]})}function ei(e){var n=e.value,r=e.loading,i=e.restored,a=e.error,o=e.minValue,s=e.maxValue,l=e.disabled,u=e.validationError,c=e.timeZone,d=e.onChange,p=e.onRestore;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.default,{granularity:"second",hourCycle:24,minValue:o,maxValue:s,value:n?(0,j.toCalendarDateTime)(n):void 0,onChange:d,"aria-labelledby":"restore-timestamp",isDisabled:l||r}),(0,t.jsx)(en,{timeZone:c,validationError:u}),(0,t.jsx)(er,{value:n,loading:r,onRestore:p,restored:i,error:a,validationError:u,disabled:l})]})}function ea(e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.Label,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),(0,t.jsx)(ei,(0,b._)({},e))]})}function eo(e,t){if(e.isFrozen)return(0,V.Err)("Database is frozen and cannot be restored");var n=(0,_.getLocalTimeZone)(),r=(0,_.now)(n),i=e.historyRetentionSeconds;if(0===i)return(0,V.Err)("History retention is disabled so there are no restore points.");var a=(0,w.parseAbsolute)(new Date(e.timeCreated).toISOString(),n).add({minutes:1}),o=r.subtract({seconds:i}),s=(0,j.toZoned)(a,n),l=(0,j.toZoned)(o,n),u=(0,j.toZoned)(r,n);if(0>t.compare(s)){var c=s.toDate().toLocaleString();return(0,V.Err)("Restore point is before database creation time (".concat(c,")"))}if(0>t.compare(l)){var d=l.toDate().toLocaleString();return(0,V.Err)("Restore point is before the configured database history retention period (".concat(d,")"))}return t.compare(u)>0?(0,V.Err)("Restore point is in the future"):(0,V.Ok)(!0)}function es(e){var r,i,a,o,s,d=e.neonDatabase,f=(0,H.default)(),m=(0,U.useIsDbRollbackBlocked)(),h=m.blockDatabasePanePITR,g=m.loading,x=(0,_.getLocalTimeZone)(),y=(0,_.now)(x),b=d.historyRetentionSeconds,S=0===b,T=(0,w.parseAbsolute)(new Date(d.timeCreated).toISOString(),x).add({minutes:1}),D=y.subtract({seconds:b}),k=(0,v._)((0,n.useState)(),2),C=k[0],E=k[1],A=(0,v._)((0,n.useState)(),2),I=A[0],R=A[1],P=(0,v._)((0,n.useState)(!1),2),M=P[0],O=P[1],L=(0,v._)((0,n.useState)(),2),B=L[0],V=L[1],F=(0,v._)(N({onError:function(e){z(e,"rollbackNeonDatabase",{replId:f,neonProjectId:d.projectId}),V("Something went wrong.")},onCompleted:function(e){"RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename?V(e.rollbackNeonDatabase.message):O(!0)}}),2),G=F[0],q=F[1].loading,W=d.isFrozen||d.isEphemeral||S||h;return(0,t.jsxs)(c.View,{children:[(0,t.jsx)(u.Text,{variant:"subheadDefault",css:ee.title,children:"Restore"}),(0,t.jsxs)(l.Surface,{elevated:!0,css:ee.card,gap:6,children:[(0,t.jsx)(c.View,{children:(0,t.jsx)(u.Text,{color:"dimmer",children:"Quickly restore a branch to a point within it's history retention period."})}),g?(0,t.jsx)(p.default,{}):null,g?null:(0,t.jsx)(ea,{value:C,loading:q,restored:M,error:B,minValue:D>T?D:T,maxValue:y,validationError:I,timeZone:x,onChange:function(e){if(e){M&&(O(!1),V(void 0));var t=(0,j.toZoned)(e,x),n=eo(d,t);n.ok?(R(void 0),E(t)):R(n.error)}},onRestore:function(e){e?G({variables:{input:{neonProjectId:d.projectId,replId:f,timestamp:e.toAbsoluteString()}}}):V("Could not determine restore date")},disabled:W}),W?(0,t.jsx)(Q.StatusBanner,{text:(i=(r={blockDatabasePanePITR:h,isFrozen:d.isFrozen,isEphemeral:d.isEphemeral,hasDisabledHistoryRetention:S}).blockDatabasePanePITR,a=r.isFrozen,o=r.isEphemeral,s=r.hasDisabledHistoryRetention,i?"Database rollbacks are temporarily disabled.":a?"Database is frozen. You cannot restore a database that has been frozen.":o?"Temporary databases created on the free Starter plan do not support restores.":s?"History retention is disabled. You cannot restore a database with history retention disabled.":void 0),colorway:"warning",icon:(0,t.jsx)(Z.default,{})}):null]})]})}var el=[{value:0,title:"Disabled"},{value:21600,title:"6 Hours"},{value:43200,title:"12 Hours"},{value:86400,title:"1 Day"},{value:172800,title:"2 Days"},{value:432e3,title:"5 Days"},{value:604800,title:"7 Days"}];function eu(e){var r=e.currentRetentionPeriod,i=e.loading,a=e.success,o=e.disabled,l=e.onClick,d=e.error,f=(0,v._)((0,n.useState)(r),2),m=f[0],h=f[1],g=a||m!==r;return(0,t.jsxs)(c.View,{gap:12,children:[(0,t.jsxs)(c.View,{gap:8,children:[(0,t.jsx)(K.Label,{htmlFor:"history-retention-period",children:(0,t.jsx)(u.Text,{children:"History Retention Period"})}),(0,t.jsx)(X.Select,{id:"history-retention-period","aria-labelledby":"history-retention-period",selectedKey:m,onSelectionChange:function(e){h(parseInt(String(e),10))},items:el,isDisabled:o,children:function(e){return(0,t.jsx)($.ListBoxItem,{id:e.value,label:e.title},e.value)}})]}),g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.StatusBanner,{text:"Increasing your retention window will increase your project's storage usage. Decreasing your retention window will prevent you from restoring to a point in time older than the new retention window and will delete any historical data that was being retained beyond it.",colorway:"warning",icon:(0,t.jsx)(Z.default,{})}),(0,t.jsx)(s.Button,{text:i?"":a?"Updated":"Confirm",loading:i,iconLeft:i?(0,t.jsx)(p.default,{}):void 0,disabled:!!d||i||a,onClick:function(){return l(m)},colorway:a?"positive":"primary"}),d&&(0,t.jsx)(u.Text,{css:ee.error,children:d})]}):null]})}function ec(e){var r=e.neonDatabase,i=(0,H.default)(),a=(0,v._)((0,n.useState)(!1),2),o=a[0],s=a[1],d=(0,v._)((0,n.useState)(),2),p=d[0],f=d[1],m=(0,v._)(B({onError:function(e){z(e,"setNeonHistoryRetentionPeriod",{replId:i,neonProjectId:r.projectId}),f("Something went wrong.")},onCompleted:function(e){"SetNeonDatabaseConfigurationResult"!==e.setNeonDatabaseConfiguration.__typename?f(e.setNeonDatabaseConfiguration.message):s(!0)}}),2),h=m[0],g=m[1].loading;return(0,t.jsxs)(c.View,{children:[(0,t.jsx)(u.Text,{variant:"subheadDefault",css:ee.title,children:"History Retention"}),(0,t.jsxs)(l.Surface,{elevated:!0,css:ee.card,gap:6,children:[(0,t.jsx)(c.View,{children:(0,t.jsx)(u.Text,{color:"dimmer",children:"Maintain a history of changes for a period of time, enabling features like point-in-time restore and restoring a database back to an agent checkpoint."})}),(0,t.jsx)(eu,{currentRetentionPeriod:r.historyRetentionSeconds,loading:g,success:o,disabled:g||r.isFrozen||r.isEphemeral,onClick:function(e){h({variables:{input:{neonProjectId:r.projectId,replId:i,historyRetentionSeconds:e}}})},error:p}),r.isFrozen||r.isEphemeral?(0,t.jsx)(Q.StatusBanner,{text:r.isFrozen?"Database is frozen. You cannot update the history retention of a frozen database.":"Temporary databases created on the free Starter plan do not support configurable history retention.",colorway:"warning",icon:(0,t.jsx)(Z.default,{})}):null]})]})}e.s(["DatabaseSettingsHistoryRetentionSection",()=>ec,"DatabaseSettingsRestoreSection",()=>es,"isValidRestorePoint",()=>eo],344481)},922084,e=>{e.v({buttonRow:"CheckpointCard-module__1K8xAG__buttonRow",card:"CheckpointCard-module__1K8xAG__card",checkpointStatusText:"CheckpointCard-module__1K8xAG__checkpointStatusText",editableTitle:"CheckpointCard-module__1K8xAG__editableTitle",editableTitleInput:"CheckpointCard-module__1K8xAG__editableTitleInput",inChatFeed:"CheckpointCard-module__1K8xAG__inChatFeed",noDescription:"CheckpointCard-module__1K8xAG__noDescription",previewIcon:"CheckpointCard-module__1K8xAG__previewIcon",previewLoading:"CheckpointCard-module__1K8xAG__previewLoading",previewOverlay:"CheckpointCard-module__1K8xAG__previewOverlay",previewText:"CheckpointCard-module__1K8xAG__previewText",screenshotContainer:"CheckpointCard-module__1K8xAG__screenshotContainer",statusIcon:"CheckpointCard-module__1K8xAG__statusIcon",statusIconFailed:"CheckpointCard-module__1K8xAG__statusIconFailed",statusIconReverted:"CheckpointCard-module__1K8xAG__statusIconReverted"})},195715,e=>{e.v({confirmationModalPreviewTextContainer:"ConfirmRollbackModal-module__aj-a0G__confirmationModalPreviewTextContainer",confirmationModalScreenshot:"ConfirmRollbackModal-module__aj-a0G__confirmationModalScreenshot",confirmationModalScreenshotContainer:"ConfirmRollbackModal-module__aj-a0G__confirmationModalScreenshotContainer",flexGrowAndShrink:"ConfirmRollbackModal-module__aj-a0G__flexGrowAndShrink",lineHeightOffset:"ConfirmRollbackModal-module__aj-a0G__lineHeightOffset",noScreenshotText:"ConfirmRollbackModal-module__aj-a0G__noScreenshotText",rollbackOptionHeading:"ConfirmRollbackModal-module__aj-a0G__rollbackOptionHeading",rollbackOptionsList:"ConfirmRollbackModal-module__aj-a0G__rollbackOptionsList",statusIconLoading:"ConfirmRollbackModal-module__aj-a0G__statusIconLoading"})},190120,548364,1074,e=>{"use strict";var t,n=e.i(721281),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(379334),s=e.i(596139),l=e.i(399344),u=e.i(414761),c=e.i(993796),d=e.i(973519),p=e.i(115820),f=e.i(546469),m=e.i(297083),h=e.i(817556),g=e.i(789277),v=e.i(302973),x=e.i(968323),y=e.i(262664),b=e.i(424746),S=e.i(683736),_=e.i(597865),w=e.i(961194),j=e.i(489142),T=e.i(344481),D=e.i(76430),k=e.i(346715),C=e.i(368964),E=e.i(877212),A=e.i(928838),I=e.i(914279),R=e.i(68893),P=e.i(391222),M=e.i(222342),O=e.i(610357),N=e.i(475032),L=e.i(529810),B=e.i(480028),V=e.i(140487),U=e.i(625484),F=e.i(718610),H=e.i(503536),G=e.i(987154),z=[C.HostingBuildStatus.Building,C.HostingBuildStatus.Promoting,C.HostingBuildStatus.Running,C.HostingBuildStatus.Pending,C.HostingBuildStatus.Resuming,C.HostingBuildStatus.Suspending,C.HostingBuildStatus.UpdatingTier],q=function(e){var t=A.buildStatuses[e];if(t)return"".concat(t.title,"...");switch(e){case C.HostingBuildStatus.Building:return"Building...";case C.HostingBuildStatus.Promoting:return"Promoting...";case C.HostingBuildStatus.Running:return"Bundling...";case C.HostingBuildStatus.Pending:return"Provisioning...";case C.HostingBuildStatus.Resuming:return"Resuming...";case C.HostingBuildStatus.Suspending:return"Pausing...";case C.HostingBuildStatus.UpdatingTier:return"Updating tier...";default:return"Publishing..."}},W=function(){var e=(0,r._)((0,a.useState)(!1),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){n("undefined"!=typeof navigator&&navigator.share&&"function"==typeof navigator.share)},[]),t},K=function(e,t,n){return(0,m._)(function(){return(0,h._)(this,function(r){switch(r.label){case 0:if(!(navigator.share&&"function"==typeof navigator.share))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.share({title:t,text:n,url:e})];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[3,4];case 4:return(0,O.default)(e),[2,!1]}})})()},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openDeploymentsPane,n=e.includeSharing,r=void 0!==n&&n,o=!t,s=W(),c=(0,l.useDeploymentId)(),d=(0,l.useDeployBuild)({openDeploymentsPane:t}).redeployWithNoNewOptions,p=(0,l.useDeploymentCurrentBuild)(),f=(0,l.useDeploymentInProgressBuild)(),g=(0,I.useDeploymentMode)(),v=(0,l.useDeploymentSubdomain)(),x=(0,M.default)().showConfirm,y=(0,E.useSupportsAgent)(),b=(0,L.default)().container,S=(0,N.default)(b,{fallbackToReplCo:!0}).url,_=(0,u.useDeploymentLink)(p?{__typename:"HostingDeployment",id:c||"",replitAppSubdomain:v||"",domains2:[],currentBuild:{__typename:"HostingBuild",id:p.id,provider:null==p?void 0:p.provider}}:null).href,w=!p||!c||g!==R.DeploymentMode.Ready&&g!==R.DeploymentMode.Suspended&&g!==R.DeploymentMode.ProcessingLifecycleCommand,j=(0,a.useCallback)(function(){return(0,m._)(function(){return(0,h._)(this,function(e){switch(e.label){case 0:if(!c)return t&&t(),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,d({hasAgentSession:y})];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})})()},[c,t,d,y]),T=(0,a.useCallback)(function(){if(o&&(!c||!p))return null;if(!c)return o?null:{data:{type:"action",icon:(0,i.jsx)(H.default,{color:B.tokens.greenStrongest}),label:"Publish",run:t}};if(!p&&f)return{data:{type:"action",icon:(0,i.jsxs)(U.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(P.DeploymentStatusDot,{status:C.HostingBuildStatus.Building}),(0,i.jsx)(H.default,{color:B.tokens.foregroundDefault})]}),label:q(f.status),run:function(){}}};if(!p)return null;var e=!!f,n=z.includes(p.status),r=e&&f?{isDeploying:!0,buttonText:q(f.status)}:n?{isDeploying:!0,buttonText:q(p.status)}:w?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Republish"},a=r.isDeploying,s=r.buttonText;return{data:{type:"action",icon:o?(0,i.jsxs)(U.View,{row:!0,gap:4,align:"center",children:[p.status!==C.HostingBuildStatus.Success||a?(0,i.jsx)(P.DeploymentStatusDot,{status:a?C.HostingBuildStatus.Building:p.status}):null,(0,i.jsx)(H.default,{size:24,color:p.status!==C.HostingBuildStatus.Success||a?B.tokens.foregroundDefault:B.tokens.greenStrongest})]}):(0,i.jsxs)(U.View,{row:!0,gap:4,align:"center",children:[p.status!==C.HostingBuildStatus.Success||a?(0,i.jsx)(P.DeploymentStatusDot,{status:a?C.HostingBuildStatus.Building:p.status}):null,(0,i.jsx)(H.default,{color:a?B.tokens.foregroundDefault:B.tokens.greenStrongest})]}),label:s,run:a?function(){}:j}}},[o,c,p,f,t,j,w]),D=(0,a.useCallback)(function(){if(!r)return[];var e=[];return S&&(!o||c&&v)&&e.push({data:{type:"action",icon:(0,i.jsx)(F.default,{color:B.tokens.foregroundDefault}),label:s?"Share development link":"Copy development link",run:function(){return(0,m._)(function(){return(0,h._)(this,function(e){switch(e.label){case 0:return[4,K(S,"Check out my Replit development app!","I'm working on this app on Replit!")];case 1:return e.sent()||x("Development URL copied to clipboard"),[2]}})})()}}}),c&&v&&e.push({data:{type:"action",icon:(0,i.jsx)(G.default,{color:B.tokens.foregroundDefault}),label:s?"Share published link":"Copy published link",run:function(){return(0,m._)(function(){return(0,h._)(this,function(e){switch(e.label){case 0:return[4,K(_,"Check out my Replit app!")];case 1:return e.sent()||x("Published URL copied to clipboard"),[2]}})})()}}}),e},[c,v,x,o,S,_,r,s]),A=(0,a.useCallback)(function(){var e=D(),t=T();if(o){var n=[];return e.length>0&&n.push({name:"Sharing",commands:e}),t&&n.push({name:"Deployment",commands:[t]}),n}if(!c||!v){var r=(0,k._)(e);return(t&&r.push(t),r.length>0)?[{name:"Development",commands:r}]:[]}var i=[];return e.length>0&&i.push({name:"Sharing",commands:e}),t&&i.push({name:"Deployment",commands:[t]}),i},[D,T,o,c,v]);return{deploymentId:c,currentBuild:p,inProgressBuild:f,handleDeployCommand:j,getDeploymentCommand:T,getShareCommands:D,getCommandGroups:A,hideRedeploy:w,mode:g}},Y=function(e){var t=e.openDeploymentsPane,n=$({openDeploymentsPane:t}),r=n.deploymentId,a=n.currentBuild,o=n.inProgressBuild,s=n.handleDeployCommand,l=n.hideRedeploy;if(!r)return(0,i.jsx)(V.Button,{onClick:t,iconLeft:(0,i.jsx)(H.default,{color:B.tokens.greenStrongest}),text:"Publish",size:"small"});if(!a&&o)return(0,i.jsx)(V.Button,{onClick:function(){},iconLeft:(0,i.jsx)(H.default,{color:B.tokens.foregroundDefault}),text:q(o.status),size:"small",disabled:!0});if(!a)return null;var u=!!o,c=z.includes(a.status),d=u&&o?{isDeploying:!0,buttonText:q(o.status)}:c?{isDeploying:!0,buttonText:q(a.status)}:l?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Republish"},p=d.isDeploying,f=d.buttonText;return(0,i.jsx)(V.Button,{onClick:s,iconLeft:(0,i.jsx)(H.default,{color:B.tokens.greenStrongest}),text:f,size:"small",disabled:p})};e.s(["DeployButton",()=>Y,"useDeploymentCommands",()=>$],548364);var X=e.i(127227),Q=e.i(818503),J=e.i(929872),Z=e.i(960178),ee=e.i(257811),et=e.i(751273),en=e.i(481088),er=e.i(211397),ei=e.i(753007),ea=e.i(245225),eo=e.i(243914),es=e.i(940745),el=e.i(486672),eu=e.i(961874),ec=e.i(42458),ed=e.i(922084),ep=e.i(195715);function ef(e){var t=e.setShowConfirmModal,n=e.onRevert,s=e.commitId,l=e.enableHelium,u=e.screenshot,d=e.date,f=(0,p.useAgentCheckpointPreview)({commitId:s,enableHelium:l,date:d}),k=f.loading,C=f.error,E=f.previewUrl,A=f.loadPreview,I=f.validPreview,R=(0,S.useIsDbRollbackBlocked)().blockAgentCheckpointRollbacks,P=(0,c.useFlag)({controlName:o.flagHasAgentCheckpointDatabaseRollbacks,logFlagToAnalytics:!1}),M=(0,c.useFlag)({type:"string",controlName:o.flagNeonRegionsExcludedFromRollback,default:""}).split(","),O=(0,_.default)(function(e){return(0,m._)(function(){return(0,h._)(this,function(t){switch(t.label){case 0:return[4,e.getCommit({commit:s})];case 1:return[2,t.sent()]}})})()},[s]),N=(0,b.useNeonDevelopmentDatabase)(),L=N.database,B=N.loading,F=(0,y.useHeliumDevelopmentDatabase)(),H=F.database,G=F.loading,z=B||G,q=null!=H?H:L,W=(0,D.useIsExpoStack)(),K=$().deploymentId,Y=(0,a.useMemo)(function(){if(z)return(0,x.Ok)(!0);if(!q)return(0,x.Err)("No database found");if(R)return(0,x.Err)("Database rollbacks are temporarily disabled");if(!P)return(0,x.Err)("Database rollbacks are not yet available");if(H)return(0,x.Ok)(!0);if(!L)return(0,x.Err)("No Neon database found");var e,t=(e=L.connectionString.match(/@.*?\.(.+?)\./))&&e[1]?e[1]:null;if(t&&M.includes(t))return(0,x.Err)("Database rollbacks have been temporarily disabled in your database region.");var n=(0,v.getLocalTimeZone)();return(0,T.isValidRestorePoint)(L,(0,g.fromDate)(d,n))},[z,q,H,L,d,P,M,R]),J=(0,r._)((0,a.useState)(!K),2),ee=J[0],en=J[1];(0,a.useEffect)(function(){Y.error&&en(!1)},[Y]);var ei=(0,i.jsx)(el.default,{});C?ei=(0,i.jsx)(et.Tooltip,{tooltip:C,children:(0,i.jsx)(ec.default,{})}):k?ei=(0,i.jsx)(j.ApproximateProgressCircle,{estimatedTotalSeconds:25}):null!==E?ei=(0,i.jsx)(eo.default,{}):I||(ei=(0,i.jsx)(et.Tooltip,{tooltip:"Cannot preview checkpoints older than 7 days",children:(0,i.jsx)(eu.default,{})}));var ea="Load interactive preview";return k?ea="Loading interactive preview...":E?ea="View interactive preview":C?ea="Error loading preview":I||(ea="Preview expired"),(0,i.jsxs)(U.View,{gap:24,children:[(0,i.jsxs)(U.View,{gap:16,children:[(0,i.jsx)(Z.Header,{variant:"subheadBig",level:3,children:"Rollback to checkpoint"}),(0,i.jsxs)(U.View,{gap:24,children:[W?(0,i.jsx)(w.ExpoPreviewSection,{previewUrl:E,isPreviewActive:!!E,isLoading:k,error:C,onPreviewClick:function(){I&&A()}}):(0,i.jsx)(U.View,{clsx:ep.default.confirmationModalScreenshotContainer,children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U.View,{clsx:ep.default.confirmationModalScreenshot,children:(0,i.jsx)(er.default,{src:u,alt:"Screenshot",layout:"fill",objectFit:"cover"})}),(0,i.jsxs)(U.View,{row:!0,align:"center",justify:"space-between",clsx:ep.default.confirmationModalPreviewTextContainer,children:[(0,i.jsx)(Z.Text,{color:"dimmer",variant:"small",children:"Screenshot taken by the Agent"}),(0,i.jsx)(V.Button,{size:"small",variant:"underlinedOnHover",text:ea,disabled:k||!I,iconRight:ei,onClick:function(){I&&(E?window.open(E,"_blank"):A())}})]})]}):(0,i.jsx)(U.View,{align:"center",justify:"center",clsx:ep.default.noScreenshotText,children:(0,i.jsx)(Z.Text,{color:"dimmer",children:"No screenshot available"})})}),(0,i.jsxs)(U.View,{gap:8,children:[(0,i.jsx)(Z.Header,{variant:"subheadDefault",level:3,children:"Target checkpoint"}),(0,i.jsx)(em,{commitData:O})]}),(0,i.jsxs)(U.View,{gap:8,children:[(0,i.jsx)(Z.Header,{variant:"subheadDefault",level:3,children:"What will be rolled back"}),(0,i.jsx)(U.View,{gap:8,children:(0,i.jsxs)("ul",{className:ep.default.rollbackOptionsList,children:[(0,i.jsx)("li",{children:(0,i.jsxs)(U.View,{children:[(0,i.jsx)(Z.Text,{className:ep.default.rollbackOptionHeading,children:"Files"}),(0,i.jsx)(Z.Text,{color:"dimmest",variant:"small",children:"All files in your app will be restored to the state they were in at the time of this checkpoint."})]})}),(0,i.jsx)("li",{children:(0,i.jsxs)(U.View,{children:[(0,i.jsx)(Z.Text,{className:ep.default.rollbackOptionHeading,children:"Agent memory"}),(0,i.jsx)(Z.Text,{color:"dimmest",variant:"small",children:"The Agent's memory will reset to what it knew about your app at the time of this checkpoint."})]})})]})})]}),q?(0,i.jsxs)(U.View,{gap:12,children:[(0,i.jsx)(Z.Header,{variant:"subheadDefault",level:3,children:"Additional rollback options"}),(0,i.jsx)(U.View,{gap:8,children:(0,i.jsxs)(U.View,{row:!0,align:"start",gap:8,children:[(0,i.jsx)(et.Tooltip,{isDisabled:Y.ok,tooltip:Y.error,children:(0,i.jsx)(X.Checkbox,{id:"restore-database",name:"restore-database",disabled:!Y.ok,checked:ee,onChange:function(){return en(!ee)}})}),(0,i.jsxs)(Q.Label,{htmlFor:"restore-database",variant:"text",clsx:ep.default.flexGrowAndShrink,children:[(0,i.jsx)(Z.Text,{children:"Database"}),(0,i.jsxs)(Z.Text,{color:"dimmest",variant:"small",children:["Your data will be restored to the time of this checkpoint.",K?" Note that rolling back the database will also affect active deployments.":""]})]})]})})]}):null]})]}),(0,i.jsxs)(U.View,{row:!0,justify:"end",gap:8,children:[(0,i.jsx)(V.Button,{text:"Cancel",onClick:function(){return t(!1)},variant:"outlined"}),(0,i.jsx)(V.Button,{text:"Rollback to this checkpoint",loading:z,onClick:function(){n({rollbackDatabaseTimestamp:ee?d.toISOString():void 0,rollbackDeploymentBuildId:void 0,rollbackDatabase:ee}),t(!1)},colorway:"primary"})]})]})}function em(e){var t=e.commitData,n=!t,r=t&&(null==t?void 0:t.error);return n?(0,i.jsxs)(J.Surface,{clsx:[ed.default.root,ed.default.checkpointCard],row:!0,gap:8,children:[(0,i.jsx)(es.default,{clsx:[ep.default.statusIconLoading,ep.default.lineHeightOffset]}),(0,i.jsx)(U.View,{gap:2,grow:!0,shrink:!0,children:(0,i.jsxs)(en.default,{speed:2,height:40,backgroundColor:B.tokens.backgroundHighest,foregroundColor:B.tokens.backgroundHigher,children:[(0,i.jsx)("rect",{rx:"2",ry:"2",x:"0",y:"0",width:"200",height:"15"}),(0,i.jsx)("rect",{rx:"2",ry:"2",x:"0",y:"25",width:"300",height:"15"})]})})]}):r?(0,i.jsxs)(J.Surface,{clsx:[ed.default.checkpointCard,ed.default.checkpointFailed],row:!0,gap:8,children:[(0,i.jsx)(ea.default,{clsx:[ed.default.statusIcon,ep.default.lineHeightOffset]}),(0,i.jsxs)(U.View,{gap:2,grow:!0,shrink:!0,children:[(0,i.jsx)(Z.Text,{children:"Failed to load commit"}),(0,i.jsx)(Z.Text,{color:"dimmer",variant:"small",children:"The commit may have been deleted or is no longer accessible"})]})]}):(0,i.jsxs)(J.Surface,{clsx:[ed.default.root,ed.default.checkpointCard],row:!0,gap:8,children:[(0,i.jsx)(ei.default,{clsx:[ed.default.statusIcon,ep.default.lineHeightOffset]}),(0,i.jsxs)(U.View,{gap:2,grow:!0,shrink:!0,children:[(0,i.jsx)(Z.Text,{children:t.subject}),(0,i.jsx)(Z.Text,{color:"dimmer",children:t.body||(0,i.jsx)("span",{clsx:ed.default.noDescription,children:"No description provided"})}),(0,i.jsxs)(U.View,{row:!0,gap:6,align:"center",children:[(0,i.jsx)(ee.Timestamp,{date:new Date(t.author.date),textColor:"dimmest",textVariant:"small"}),(0,i.jsx)(Z.Text,{color:"dimmest",children:"•"}),(0,i.jsx)(Z.Text,{color:"dimmest",variant:"small",children:t.hash.substring(0,8)})]})]})]})}e.s(["ConfirmRollbackModal",()=>ef],1074);var eh=e.i(443394),eg=e.i(173703),ev=e.i(607278),ex=e.i(739521),ey=e.i(624782),eb=e.i(654521),eS=e.i(283023),e_=e.i(292642),ew=e.i(115357),ej=((t={}).ChatFeedDefault="chatFeedDefault",t.ChatFeedSubtask="chatFeedSubtask",t.SessionList="sessionList",t);function eT(e){var t=e.title,n=e.onRenameTitle,o=e.color,s=e.isTitleLoading,l=(0,r._)((0,a.useState)(!1),2),u=l[0],c=l[1],d=(0,r._)((0,a.useState)(t||""),2),p=d[0],f=d[1];if(s)return(0,i.jsx)(en.default,{speed:2,backgroundColor:B.tokens.backgroundHighest,foregroundColor:B.tokens.backgroundHigher,width:200,height:22,uniqueKey:"title-skeleton",children:(0,i.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"22"})});var m=function(){n&&n(p),c(!1)};return u?(0,i.jsx)(ev.Input,{color:o,value:p,onChange:function(e){return f(e.target.value)},onBlur:m,autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&m()},className:ed.default.editableTitleInput}):(0,i.jsx)(U.View,{row:!0,onClick:function(){return n&&c(!0)},style:{cursor:n?"pointer":"text"},clsx:ed.default.editableTitle,children:(0,i.jsxs)(Z.Text,{color:o,children:[p||t||(0,i.jsx)("span",{clsx:ed.default.noDescription,children:"No description provided"}),n?(0,i.jsx)(eS.default,{size:16}):null]})})}function eD(e){var t,s=e.title,d=e.date,p=e.author,f=e.screenshot,m=e.commitId,h=e.enableHelium,g=e.deploymentBuildId,v=e.onRevert,x=e.onOpenCommit,y=e.onRenameTitle,b=e.isInProgress,S=e.isReverting,_=e.isReverted,w=e.costInfo,j=e.variant,T=e.isTimelineListItem,D=e.isLatest,k=void 0!==D&&D,C=e.isDirty,E=void 0===C||C,A=e.hasFurtherNonSummaryEvents,I=void 0!==A&&A,R=e.openPane,P=e.missingAgentState,M=void 0!==P&&P,O=e.beforeReplCreation,N=void 0!==O&&O,L=(0,c.useFlag)({controlName:o.flagHasReplShares}),H=""===m&&!b,G=!m,z=(0,i.jsx)(eu.default,{});S?z=(0,i.jsx)(es.default,{}):H&&(z=(0,i.jsx)(ea.default,{}));var q=(0,i.jsx)(ei.default,{clsx:ed.default.statusIcon});_?q=(0,i.jsx)(eb.default,{clsx:[ed.default.statusIconReverted,ed.default.statusIcon]}):H?q=(0,i.jsx)(ea.default,{clsx:[ed.default.statusIconFailed,ed.default.statusIcon]}):"chatFeedSubtask"===j&&(q=void 0);var W=null!=v,K=(0,r._)((0,a.useState)(!1),2),$=K[0],Y=K[1],X=(0,a.useCallback)(function(){Y(!0)},[]),Q="Checkpoint made";"chatFeedSubtask"===j&&(Q="Task completed"),G&&!H&&(Q="Creating checkpoint"),H&&(Q="Couldn't make checkpoint");var J=k&&!E&&!I,er=H||M||N||J,eo="Deployment"===p,el=(0,l.useDeploymentCurrentBuild)(),ec=null==el||null==(t=el.repl)?void 0:t.hostingDeployment,ep=ec&&"HostingDeployment"===ec.__typename?ec:null,em=(0,u.useDeploymentLink)(ep).href,eh=!!(em&&el),ev="sessionList"!==j&&L&&f&&!G&&m&&!eo,ey="chatFeedDefault"===j||"chatFeedSubtask"===j;return(0,i.jsxs)(eg.ShadesSurface,{br:"container",colorShade:"default",elevate:!!ey&&"2x",background:ey,clsx:[ed.default.card,(0,n._)({},ed.default.inChatFeed,ey)],"data-variant":j,children:[(0,i.jsxs)(U.View,{gap:4,children:[(0,i.jsxs)(U.View,{row:!0,align:"center",gap:6,children:[q,(0,i.jsxs)(U.View,{row:!0,gap:4,children:[(0,i.jsx)(Z.Text,{variant:"small",color:"dimmer",clsx:ed.default.checkpointStatusText,children:Q}),!b&&(0,i.jsx)(ee.Timestamp,{textVariant:"small",textColor:"dimmer",dateFormat:"switch",live:!0,placement:"top",date:d})]}),(0,i.jsx)(ek,{costInfo:w}),(0,i.jsx)(eC,{author:p})]}),(0,i.jsxs)(U.View,{pl:T?24:void 0,row:!0,justify:"space-between",align:"center",gap:12,children:[(0,i.jsxs)(U.View,{gap:4,grow:!0,shrink:!0,children:[H?(0,i.jsx)(Z.Text,{multiline:!0,children:"An unexpected error occurred while creating this checkpoint. This is most likely an issue with Replit."}):(0,i.jsx)(eT,{title:s,onRenameTitle:y,color:_?"dimmer":"default",isTitleLoading:!s}),(0,i.jsxs)(U.View,{clsx:ed.default.buttonRow,children:[W&&!G?(0,i.jsx)(et.Tooltip,{tooltip:H?"This is a failed checkpoint":M?"Checkpoint not made by Agent":N?"Checkpoint created in a different app":J?"Already at this checkpoint":"Reset your app to this version",children:(0,i.jsx)(V.Button,{size:"small",onClick:X,iconLeft:z,disabled:er||S,text:"Rollback here"})}):null,W&&G?(0,i.jsx)(en.default,{speed:2,backgroundColor:B.tokens.backgroundHighest,foregroundColor:B.tokens.backgroundHigher,width:100,height:32,uniqueKey:"rollback-button-skeleton",children:(0,i.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"100",height:"32"})}):null,G?(0,i.jsx)(en.default,{speed:2,backgroundColor:B.tokens.backgroundHighest,foregroundColor:B.tokens.backgroundHigher,width:80,height:32,uniqueKey:"changes-button-skeleton",children:(0,i.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"80",height:"32"})}):(0,i.jsx)(V.Button,{size:"small",onClick:function(){return m&&x(m)},disabled:H,iconLeft:(0,i.jsx)(F.default,{}),text:"Changes"}),ev?(0,i.jsx)(eE,{commitId:m,commitDate:d,enableHelium:null!=h&&h,isFailed:H,isLatest:k,isDirty:E,hasFurtherNonSummaryEvents:I,openPane:R}):null,eo&&eh?(0,i.jsx)(V.Button,{size:"small",onClick:function(){return window.open(em,"_blank","noopener")},iconLeft:(0,i.jsx)(e_.default,{}),text:"View Published App"}):null]})]}),"sessionList"===j?(0,i.jsx)(i.Fragment,{children:L&&!G&&m&&!er?(0,i.jsx)(eI,{screenshot:f,commitId:m,commitDate:d,enableHelium:null!=h&&h,isLatest:k,isDirty:E,hasFurtherNonSummaryEvents:I,openPane:R}):(0,i.jsx)(eA,{screenshot:f})}):null]})]}),W?(0,i.jsx)(ex.Modal,{isOpen:$,onRequestClose:function(){return Y(!1)},centered:!0,children:(0,i.jsx)(ef,{author:p,setShowConfirmModal:Y,deploymentBuildId:g,onRevert:v,commitId:m||"",enableHelium:null!=h&&h,screenshot:f,date:d})}):null]})}function ek(e){var t=e.costInfo;if(!t||t.isPaid)return null;var n=t.usageIndicatorVariant===f.UsageIndicatorVariant.Starter?"This didn't use any of your ".concat(s.freePlanName," plan Agent usage. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made.";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Text,{variant:"small",color:"dimmer",children:"•"}),(0,i.jsx)(et.Tooltip,{tooltip:n,placement:"top",children:(0,i.jsx)(Z.Text,{variant:"small",style:{color:B.tokens.accentPositiveStronger},children:"Free"})})]})}function eC(e){var t=e.author;if("Agent"===t||!t)return null;var n="";"User"===t?n="This is a manually created checkpoint":"Deployment"===t&&(n="This checkpoint was created from publishing your App");var r="";return"User"===t?r="User":"Deployment"===t&&(r="Publish"),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.Text,{variant:"small",color:"dimmer",children:"•"}),(0,i.jsx)(et.Tooltip,{tooltip:n,placement:"top",children:(0,i.jsx)(ey.Pill,{variant:"muted",colorway:"blue",text:r,compact:!0})})]})}function eE(e){var t=e.commitId,n=e.commitDate,r=e.enableHelium,o=e.isFailed,l=e.isLatest,u=e.isDirty,c=e.hasFurtherNonSummaryEvents,f=e.openPane,m=(0,d.useGlobalModal)().show,h=(0,eh.getCurrentUrl)(),g=l&&!u&&!c,v=(0,p.useAgentCheckpointPreview)({commitId:t,enableHelium:r,date:n}),x=v.loadPreview,y=v.loading,b=v.error,S=v.previewUrl,_=v.validPreview,w=v.showUpgradeModal,j=v.setShowUpgradeModal;(0,a.useEffect)(function(){w&&m("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(s.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){x()},redirectPath:h}).then(function(){j(!1)})},[w,m,x,j,h]);var T=null!==S,D=(0,i.jsx)(el.default,{});y?D=(0,i.jsx)(es.default,{}):g?D=(0,i.jsx)(ew.default,{}):T?D=(0,i.jsx)(eo.default,{}):_?b&&(D=(0,i.jsx)(ec.default,{})):D=(0,i.jsx)(ea.default,{});var k="Preview";y?k="Loading...":g||T?k="View preview":_?b&&(k="Failed to load"):k="Preview expired";var C="";return b?C=b:_||(C="Cannot preview checkpoints older than 7 days"),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(et.Tooltip,{tooltip:C,isDisabled:g||_,children:(0,i.jsx)(V.Button,{size:"small",onClick:function(){g&&f?f({type:"webview"}):_&&(T?window.open(S,"_blank","noopener"):x())},disabled:o||!g&&!_,iconLeft:D,text:k})})})}function eA(e){var t=e.screenshot;return t?(0,i.jsx)(U.View,{clsx:ed.default.screenshotContainer,children:(0,i.jsx)(er.default,{layout:"fill",src:t,alt:"Screenshot",objectFit:"cover"})}):null}function eI(e){var t=e.screenshot,o=e.commitId,l=e.enableHelium,u=e.commitDate,c=e.isLatest,f=e.isDirty,m=e.hasFurtherNonSummaryEvents,h=e.openPane,g=(0,d.useGlobalModal)().show,v=(0,eh.getCurrentUrl)(),x=c&&!f&&!m,y=(0,p.useAgentCheckpointPreview)({commitId:o,enableHelium:l,date:u}),b=y.loadPreview,S=y.loading,_=y.error,w=y.previewUrl,T=y.validPreview,D=y.showUpgradeModal,k=y.setShowUpgradeModal;(0,a.useEffect)(function(){D&&g("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(s.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){b()},redirectPath:v}).then(function(){k(!1)})},[D,g,b,k,v]);var C=null!==w,E=(0,r._)((0,a.useState)(!1),2),A=E[0],I=E[1];if((0,a.useEffect)(function(){(C||S)&&I(!0)},[C,S]),!t)return null;var R=(0,i.jsx)(el.default,{clsx:ed.default.previewIcon,size:20});S?R=(0,i.jsx)(j.ApproximateProgressCircle,{estimatedTotalSeconds:25,size:20}):x?R=(0,i.jsx)(ew.default,{clsx:ed.default.previewIcon,size:20}):C?R=(0,i.jsx)(eo.default,{clsx:ed.default.previewIcon,size:16}):T?_&&(R=(0,i.jsx)(ec.default,{clsx:ed.default.previewIcon,size:20})):R=(0,i.jsx)(eu.default,{clsx:ed.default.previewIcon,size:20});var P="Load preview";S?P="Loading...":x||C?P="View preview":T?_&&(P="Failed to load"):P="Preview expired";var M="";return _?M=_:T||(M="Cannot preview checkpoints older than 7 days"),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(U.View,{clsx:ed.default.screenshotContainer,style:{cursor:x||T?"pointer":"default"},onClick:function(){x&&h?h({type:"webview"}):T&&(C?window.open(w,"_blank","noopener"):b())},onMouseLeave:function(){S||I(!1)},children:[(0,i.jsx)(er.default,{layout:"fill",src:t,alt:"Screenshot",objectFit:"cover"}),(0,i.jsxs)(et.Tooltip,{placement:"right",tooltip:M,isDisabled:x||T,clsx:[ed.default.previewOverlay,(0,n._)({},ed.default.previewLoading,A)],children:[R,(0,i.jsx)(Z.Text,{color:"default",variant:"small",clsx:ed.default.previewText,children:P})]})]})})}e.s(["CheckpointCard",()=>eD,"CheckpointCardVariant",()=>ej],190120)},287999,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(878420),i=e.i(64386),a=e.i(817556),o=e.i(276385),s=e.i(389959),l=e.i(188507),u=e.i(986194);e.i(877212);var c=e.i(924908),d=e.i(825118);e.i(242933);var p=e.i(279606),f=e.i(424360);e.i(925218);var m=e.i(112077),h=e.i(641555),g=e.i(802088),v=e.i(968323),x=e.i(98816),y=e.i(927158),b="Replit-Restored-To";function S(e){switch(e){case l.CommitAuthor.COMMIT_AUTHOR_AGENT:return"Agent";case l.CommitAuthor.COMMIT_AUTHOR_USER:return"User";case l.CommitAuthor.COMMIT_AUTHOR_DEPLOYMENT:return"Deployment";default:return}}function _(e,t){var n=new Map,a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;n.set(c.id,{session:c,commitRanges:[]})}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var d=!0,p=!1,f=void 0;try{for(var m,h=e[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var g=m.value,v=!0,x=!1,y=void 0;try{for(var b,S=g.commitRange[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)!function(){var e,a=b.value,o=null!=(e=a.sessionId)?e:"unknown",s=n.get(o);s||(s={session:t.find(function(e){return e.id===o}),commitRanges:[]},n.set(o,s));var l=s.commitRanges[s.commitRanges.length-1];(void 0===l||l.collapsed!==g.collapsed)&&(l=(0,i._)((0,r._)({},g),{commitRange:[]}),s.commitRanges.push(l)),l.commitRange.push(a)}()}catch(e){x=!0,y=e}finally{try{v||null==S.return||S.return()}finally{if(x)throw y}}}}catch(e){p=!0,f=e}finally{try{d||null==h.return||h.return()}finally{if(p)throw f}}return Array.from(n.values()).sort(function(e,t){return e.session?t.session?e.session.created.getTime()-t.session.created.getTime():1:-1})}var w=(0,s.createContext)(null);function j(e){var h,S,j=e.children,T=e.replTimeCreated,D=(0,m.useCreateObservable)(null),k=(0,s.useRef)(null),C=(0,m.useCreateObservable)(!1),E=(0,y.usePid2Callback)(function(e){return function(){return(0,n._)(function(){var n,r,i,o,s,l,u,c,p,f,m,h,g,x,y,S,_,w,j,D;return(0,a._)(this,function(a){switch(a.label){case 0:n=[],r=e.git.checkpoints.subscribe({}).resReadable,i=!1,o=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,t._)(r),a.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(u=a.sent()).done))return[3,5];if(!(c=u.value).ok){if("UNEXPECTED_DISCONNECT"===(p=c.payload).code)return[3,5];if(p.code===d.GitErrors.NOT_INITIALIZED)return[2,(0,v.Err)({type:"notInitialized"})];return[2,(0,v.Err)({type:"error",error:"".concat(p.code,": ").concat(p.message)})]}n.push(c.payload),a.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),o=!0,s=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:m=[],h=new Set,g=T?new Date(T):null,x=!0,y=!1,S=void 0;try{for(_=n[Symbol.iterator]();!(x=(w=_.next()).done);x=!0)if(j=w.value,D=function(e,t){var n,r=e.trailers["Replit-Commit-Author"];if(void 0!==r&&"User"!==r&&"Agent"!==r&&"Deployment"!==r||!e.trailers[b]&&void 0===r)return null;var i=new Date(e.author.date);return{hash:e.hash,committer:e.committer,subject:e.subject,customSubject:null==(n=e.notes)?void 0:n.split("\n")[0],body:e.body,screenshotUrl:e.trailers["Replit-Commit-Screenshot-Url"],sessionId:e.trailers["Replit-Commit-Session-Id"],eventId:e.trailers["Replit-Commit-Event-Id"],restoredToHash:e.trailers[b],deploymentBuildId:e.trailers["Replit-Commit-Deployment-Build-Id"],heliumCheckpointCreated:"true"===e.trailers["Replit-Helium-Checkpoint-Created"],authoredBy:r,missingAgentState:e.missingAgentState,beforeReplCreation:null!=t&&i<t}}(j,g)){if(h.has(D.hash))continue;h.add(D.hash),m.push(D)}}catch(e){y=!0,S=e}finally{try{x||null==_.return||_.return()}finally{if(y)throw S}}return[2,(0,v.Ok)(m)]}})})()}},[T]),A=(0,c.useChatter)(),I=(0,s.useMemo)(function(){return E?function(){return(0,n._)(function(){var e,t,n;return(0,a._)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,A.sessions.query({types:[l.SessionType.AGENT_SESSION]}).list.once()];case 1:return e=a.sent(),[3,3];case 2:return a.sent(),[2];case 3:if(!e)return[2];return C.set(!0),[4,E()];case 4:return k.current=t=a.sent(),t.ok?(n=_((function(e){for(var t=[],n=null,r=null,i=0;i<e.length;i++){var a=e[i],o=void 0!==a.restoredToHash;!o||(null==n?void 0:n.collapsed)||(r=a),n?n.collapsed&&r&&r.restoredToHash===a.hash?(t.push(n),n={collapsed:!1,commitRange:[]}):!n.collapsed&&o&&(t.push(n),n={collapsed:!0,commitRange:[]}):n={collapsed:o,commitRange:[]},o||n.commitRange.push(a)}return n&&t.push(n),t})(t.value).reverse().map(function(e){return(0,i._)((0,r._)({},e),{commitRange:e.commitRange.reverse()})}),e),D.set((0,v.Ok)(n))):D.set("notInitialized"===t.error.type?(0,v.Ok)(_([],e)):(0,v.Err)(t.error)),C.set(!1),[2]}})})()}:null},[E,A,C,D]),R=(h=(0,m.useCreateObservable)(null),(0,c.useChatHook)("received-completed-event",function(e){var t=e.event,n=t.contents.contents;if((0,u.isKind)(n,"agentTimelineEventContents")){var r=n.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"commitData":case"revertData":h.set(t.id)}}}),(0,s.useMemo)(function(){return new f.StatelessMulticast(function(e){var t=h.subscribe(function(t){null!==t&&e.next(t)});return function(){return t.unsubscribe()}})},[h]));(0,g.useObserver)(R,{next:function(){return null==I?void 0:I()}});var P=(S=(0,m.useCreateObservable)(0),(0,c.useChatHook)("client-reverted-session",function(){S.set(S.current+1)}),(0,s.useMemo)(function(){return new f.StatelessMulticast(function(e){var t=S.subscribe(function(t){0!==t&&e.next(t)});return function(){return t.unsubscribe()}})},[S]));(0,g.useObserver)(P,{next:function(){null==I||I()}}),(0,s.useEffect)(function(){I&&I()},[I]);var M=(0,x.default)(I),O=(0,y.usePid2Callback)(function(e){return function(t,r){return(0,n._)(function(){var n,i;return(0,a._)(this,function(a){switch(a.label){case 0:return[4,e.git.addNote.rpc({object:t,message:r,force:!0})];case 1:if(!(i=a.sent()).ok){if("UNEXPECTED_DISCONNECT"===i.payload.code)return[2];throw Error("failed to rename commit")}return[4,null==(n=M.current)?void 0:n.call(M)];case 2:return a.sent(),[2]}})})()}},[M]),N=(0,s.useCallback)(function(e){var t=!0,n=!1,r=void 0;try{for(var i,a,o,s=(null!=(a=null==(i=k.current)?void 0:i.value)?a:[])[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var l=o.value;if(l.hash===e)return l}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return null},[]),L=(0,s.useMemo)(function(){return{checkpoints:p.Observable.from(D),loading:p.Observable.from(C),checkpointMade:R,renameCommit:O,findCommit:N}},[D,C,R,O,N]);return(0,o.jsx)(w.Provider,{value:L,children:j})}function T(){var e=(0,s.useContext)(w);if(!e)throw Error("useCheckpoints must be used within a CheckpointProvider");return e}function D(){var e=T().checkpoints;return(0,h.useObservableMemo)(function(){return e.map(function(e){return(null==e?void 0:e.ok)?e.value.reduce(function(e,t){return e+t.commitRanges.reduce(function(e,t){return e+t.commitRange.length},0)},0):0})},[e])}e.s(["CheckpointProvider",()=>j,"commitAuthorToCheckpointAuthor",()=>S,"useCheckpoints",()=>T,"useNumCheckpointsCompleted",()=>D])},849954,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(188507);e.i(877212);var a=e.i(924908);e.i(925218);var o=e.i(267103),s=e.i(664152),l=e.i(509908);function u(e){return(0,t._)(function(e){var t,r,a,o,l,u,c,d,p,f,m,h;return(0,n._)(this,function(n){switch(n.label){case 0:t=e.chatter,r=e.revertedToSessionId,a=e.revertedToEventId,o=e.commitId,l=e.title,u=e.onSessionChange,c=e.currentSession,d=e.rollbackDatabaseTimestamp,p=e.rollbackDeploymentBuildId,f=e.rollbackDatabase,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.agent.update(i.AgentRunState.AGENT_STATE_PAUSED)];case 2:return n.sent(),[3,4];case 3:return n.sent(),s.logger.warn("Failed to stop agent before checkpoint rollback.",{sessionId:c.id,commitId:o,checkpointTitle:l}),[3,4];case 4:return[4,t.sessions.rollback({targetCommitId:o,newSessionTitle:"Revert to: '".concat(l,"'"),originalSessionId:c.id,deploymentBuildId:p,databaseRollbackTimestamp:d,rollbackDatabase:f,RevertedToSessionId:r?{$kind:"revertedToSessionId",revertedToSessionId:r}:void 0,RevertedToEventId:a?{$kind:"revertedToEventId",revertedToEventId:a}:void 0})];case 5:if(!(m=n.sent()).ok)throw Error("failed to revert");return h=m.payload,u(h),[2]}})}).apply(this,arguments)}function c(e){var i=e.checkpoint,s=e.onSessionChange,c=(0,a.useChatter)(),d=(0,o.useObservable)(c.sessions.agent.current);return{onRevert:(0,r.useCallback)(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:if(!d)return[2];return(0,l.trackAgentAnalyticsEvent)({action:"revert_started",messageText:"Reverting to checkpoint: '".concat(i.title,"'"),sessionId:i.sessionId}),[4,u({chatter:c,revertedToSessionId:i.sessionId,revertedToEventId:i.parentEventId,commitId:i.commitId,title:i.title,onSessionChange:s,rollbackDatabaseTimestamp:null==e?void 0:e.rollbackDatabaseTimestamp,rollbackDeploymentBuildId:null==e?void 0:e.rollbackDeploymentBuildId,rollbackDatabase:null!=(t=null==e?void 0:e.rollbackDatabase)&&t,currentSession:d})];case 1:return n.sent(),[2]}})})()},[c,d,i,s])}}e.s(["default",()=>c,"revert",()=>u])},680183,705705,963931,e=>{"use strict";var t,n,r=e.i(960933),i=((t={}).HEAD="HEAD",t.REMOTE_HEAD="REMOTE_HEAD",t.BRANCH="BRANCH",t.REMOTE_BRANCH="REMOTE_BRANCH",t.TAG="TAG",t);r.Type.Enum(i);var a=r.Type.Object({type:r.Type.Literal("BRANCH"),name:r.Type.String()}),o=r.Type.Object({type:r.Type.Literal("HEAD"),name:r.Type.Literal("HEAD"),detached:r.Type.Boolean(),ref:r.Type.Union([a,r.Type.Null()])}),s=r.Type.Object({type:r.Type.Literal("REMOTE_HEAD"),name:r.Type.Literal("HEAD"),remote:r.Type.String()}),l=r.Type.Object({type:r.Type.Literal("REMOTE_BRANCH"),name:r.Type.String(),remote:r.Type.String(),branch:r.Type.String()}),u=r.Type.Object({type:r.Type.Literal("TAG"),name:r.Type.String()}),c=r.Type.Union([o,s,a,l,u]);e.s(["GitBranchRefSchema",()=>a,"GitRefSchema",()=>c,"GitRefType",()=>i,"GitRemoteBranchRefSchema",()=>l],705705);var d=r.Type.Object({name:r.Type.String(),email:r.Type.String(),date:r.Type.Number()});e.s(["GitUserSchema",()=>d],963931);var p=((n={}).LOCAL="LOCAL",n.REMOTE="REMOTE",n.TRACKED="TRACKED",n);r.Type.Enum(p);var f=r.Type.Object({hash:r.Type.String(),author:d}),m=r.Type.Object({type:r.Type.Literal("LOCAL"),name:r.Type.String(),push:r.Type.Union([l,a,r.Type.Null()]),commit:f,remote:r.Type.Null(),tracking:r.Type.Null()}),h=r.Type.Object({type:r.Type.Literal("REMOTE"),name:r.Type.String(),remote:r.Type.String(),commit:f,push:r.Type.Null(),tracking:r.Type.Null()}),g=r.Type.Object({type:r.Type.Literal("TRACKED"),name:r.Type.String(),remote:r.Type.String(),push:l,tracking:h,commit:f}),v=r.Type.Union([m,h,g]);r.Type.Union([v,a,l,r.Type.String()]),e.s(["GitBranchSchema",()=>v,"GitBranchType",()=>p],680183)},526962,e=>{"use strict";var t,n=e.i(960933),r=e.i(680183),i=((t={}).DASHBOARD="DASHBOARD",t.BRANCH="BRANCH",t.CURRENT_BRANCH="CURRENT_BRANCH",t.SETTINGS="SETTINGS",t.COMMIT="COMMIT",t),a=n.Type.Union([n.Type.Object({type:n.Type.Literal("DASHBOARD")}),n.Type.Object({type:n.Type.Literal("BRANCH"),branch:r.GitBranchSchema}),n.Type.Object({type:n.Type.Literal("CURRENT_BRANCH")}),n.Type.Object({type:n.Type.Literal("SETTINGS")}),n.Type.Object({type:n.Type.Literal("COMMIT"),hash:n.Type.String()})]);e.s(["GitPaneModeSchema",()=>a,"GitPaneModeType",()=>i])},535076,e=>{"use strict";e.s(["FEED_PADDING_BOTTOM",()=>6,"FEED_PADDING_INLINE_DESKTOP",()=>4,"FEED_PADDING_INLINE_MOBILE",()=>8,"FEED_PADDING_TOP",()=>6])},721341,e=>{e.v({grow1:"ConvertMockupToAppRequest-module__Cla0pq__grow1",grow3:"ConvertMockupToAppRequest-module__Cla0pq__grow3",root:"ConvertMockupToAppRequest-module__Cla0pq__root"})},418689,e=>{"use strict";e.s(["ConvertMockupToAppRequest",()=>w]);var t=e.i(297083),n=e.i(817556),r=e.i(276385);e.i(877212);var i=e.i(924908);e.i(925218);var a=e.i(267103),o=e.i(709485),s=e.i(596139),l=e.i(993796),u=e.i(142365),c=e.i(858248);e.i(653863);var d=e.i(973519),p=e.i(117328),f=e.i(97207),m=e.i(248011),h=e.i(443394),g=e.i(140487),v=e.i(929872),x=e.i(960178),y=e.i(625484),b=e.i(693188),S=e.i(634669),_=e.i(721341);function w(e){var w=e.message,j=e.id,T=(0,d.useGlobalModal)().show,D=(0,h.getCurrentUrl)(),k=(0,i.useChatter)(),C=(0,a.useObservable)(k.sessions.agent.current),E=(0,f.useSendConvertMockupToAppResponse)(null!=C?C:null),A=(0,m.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,I=(0,l.useFlag)({controlName:"flag-free-plan",default:!1});return(0,u.useTrackEffect)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"impression",agent_message:w,event_id:j}),(0,r.jsx)(p.EventContainer,{children:(0,r.jsxs)(v.Surface,{gap:4,p:8,elevated:!0,clsx:_.default.root,children:[(0,r.jsx)(x.Text,{textWrap:"pretty",children:w}),(0,r.jsxs)(y.View,{row:!0,gap:4,children:[(0,r.jsx)(g.Button,{clsx:_.default.grow1,text:"Dismiss",onClick:function(){(0,c.track)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_dismiss",agent_message:w,event_id:j}),E({approved:!1,additionalComments:"",requestEventId:j})}}),I&&A?(0,r.jsx)(g.Button,{clsx:_.default.grow3,text:"Upgrade to ".concat(s.corePlanName),onClick:function(){return(0,t._)(function(){return(0,n._)(this,function(e){switch(e.label){case 0:return(0,c.track)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_upgrade",agent_message:w,event_id:j}),[4,T("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"design_mode_conversion_upsell"}},redirectPath:D})];case 1:return e.sent(),[2]}})})()},iconLeft:(0,r.jsx)(b.default,{}),colorway:"primary"}):(0,r.jsx)(g.Button,{clsx:_.default.grow3,text:"Convert to App",onClick:function(){(0,c.track)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_open_modal",agent_message:w,event_id:j}),T("MockupToAppModal",{onSendConvertMockupToAppResponse:E,origin:"chat_nudge",eventId:j})},iconLeft:(0,r.jsx)(S.default,{}),colorway:"primary"})]})]})})}},758365,e=>{e.v({tooltipTitle:"DynamicIntelligenceTooltip-module__dEmn7G__tooltipTitle"})},346227,e=>{e.v({userMessageAttachments:"UserMessage-module__wrN9Aa__userMessageAttachments",userMessageMain:"UserMessage-module__wrN9Aa__userMessageMain",userMessageSurface:"UserMessage-module__wrN9Aa__userMessageSurface",userMessageSurfaceShades:"UserMessage-module__wrN9Aa__userMessageSurfaceShades"})},831147,798790,e=>{"use strict";var t=e.i(276385),n=e.i(188507),r=e.i(389959),i=e.i(629536),a=e.i(815900),o=e.i(993796),s=e.i(266645),l=e.i(200260),u=e.i(64256),c=e.i(462995),d=e.i(165579),p=e.i(755323),f=e.i(613355),m=e.i(960178),h=e.i(625484),g=e.i(758365),v={extendedThinking:{title:"Extended thinking",description:"~1.25x cost"},highPowerModel:{title:"High power model"}};function x(e){var n=v[e.type];return(0,t.jsxs)(h.View,{gap:4,children:[(0,t.jsx)(m.Text,{variant:"small",css:f.rcss.fontWeight.medium,clsx:g.default.tooltipTitle,children:n.title}),n.description?(0,t.jsx)(m.Text,{variant:"small",children:n.description}):null]})}var y=e.i(480028),b=e.i(173703),S=e.i(696770),_=e.i(929872),w=e.i(257811),j=e.i(751273),T=e.i(713081),D=e.i(14007),k=e.i(562e3),C=e.i(658886),E=e.i(744895),A=e.i(861594),I=e.i(346227);function R(e){var r,a=e.created,s=e.children,l=e.agentConfig,u=e.metaContent,c=(0,o.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),d=null!=(r=null==l?void 0:l.thinkingEnabled)&&r,p=(null==l?void 0:l.modelProfile)===n.ModelProfile.MODEL_PROFILE_ADVANCED,f=(null==l?void 0:l.agentMode)===n.AgentMode.AGENT_MODE_DISCUSSION,g=(null==l?void 0:l.agentMode)===n.AgentMode.AGENT_MODE_QUICK_EDIT,v=(null==l?void 0:l.agentInitialBuildTier)===n.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE,b=(null==l?void 0:l.maxAutonomyEnabled)||(null==l?void 0:l.autonomyLevel)===n.AutonomyLevel.AUTONOMY_LEVEL_MAX,S=(null==l?void 0:l.initialBuildMode)===n.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_DESIGN;return(0,t.jsx)(h.View,{py:16,justify:"end",pl:32,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",children:(0,t.jsxs)(h.View,{clsx:I.default.userMessageMain,shrink:!0,align:"end",gap:6,children:[s,(0,t.jsxs)(h.View,{row:!0,gap:8,align:"center",children:[!p||g||c?null:(0,t.jsx)(j.Tooltip,{tooltip:(0,t.jsx)(x,{type:"highPowerModel"}),children:(0,t.jsx)(E.default,{size:12,color:y.tokens.foregroundDimmest})}),d?(0,t.jsx)(j.Tooltip,{tooltip:(0,t.jsx)(x,{type:"extendedThinking"}),children:(0,t.jsx)(D.default,{size:12,color:y.tokens.foregroundDimmest})}):null,f?(0,t.jsx)(j.Tooltip,{tooltip:(0,t.jsxs)(h.View,{children:[(0,t.jsx)(m.Text,{variant:"small",children:"Plan"}),(0,t.jsxs)(m.Text,{variant:"small",color:"dimmer",children:[i.AGENT_NAME," cannot make changes to your app."]})]}),children:(0,t.jsx)(C.default,{size:12,color:y.tokens.foregroundDimmest})}):null,g||v?(0,t.jsx)(j.Tooltip,{tooltip:(0,t.jsx)(m.Text,{variant:"small",children:"Fast"}),children:(0,t.jsx)(T.default,{size:12,color:y.tokens.foregroundDimmest})}):null,b&&!g?(0,t.jsx)(j.Tooltip,{tooltip:"Max autonomy",children:(0,t.jsx)(A.default,{size:12,color:y.tokens.foregroundDimmest})}):null,S?(0,t.jsx)(j.Tooltip,{tooltip:"Design",children:(0,t.jsx)(k.default,{size:12,color:y.tokens.foregroundDimmest})}):null,u,a?(0,t.jsx)(h.View,{row:!0,children:(0,t.jsx)(w.Timestamp,{live:!0,date:a,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized",dateFormat:"switch"})}):null]})]})})}var P=(0,r.memo)(function(e){var n=e.message,r=e.attachments,i=e.created,a=e.acknowledged,o=e.readFile,s=e.targetedElement,l=e.openPane,u=e.agentConfig;return(0,t.jsxs)(R,{created:i,agentConfig:u,children:[o?(0,t.jsx)(M,{attachments:r,readFile:o}):null,(0,t.jsx)(O,{message:n,acknowledged:a,targetedElement:s,openPane:l,agentMode:null==u?void 0:u.agentMode})]})});function M(e){var n=e.attachments,r=e.readFile,a=n.filter(function(e){return!(e.path.split("/").pop()||"").startsWith(p.TARGETED_ELEMENT_SCREENSHOT_PREFIX)});return 0===a.length?null:(0,t.jsx)(h.View,{clsx:I.default.userMessageAttachments,children:(0,t.jsx)(s.default,{fileAttachments:a.map(function(e){return(0,t.jsx)(l.FileAttachment,{readFile:r,attachment:e,getAttachmentTypeDisclaimer:(0,u.getAttachmentTypeDisclaimer)({aiName:(0,i.getAgentName)({capitalizeFirstChar:!0})})},e.path)})})})}function O(e){var r=e.message,i=e.acknowledged,o=e.targetedElement,s=e.openPane,l=e.agentMode;if(!r)return null;var u=(0,a.replaceJsonMarkers)(r);return(0,t.jsx)(j.Tooltip,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:i,children:(0,t.jsxs)(N,{agentMode:l,acknowledged:i,children:[(0,t.jsx)(c.MessageMarkdown,{text:u,messageState:n.EventState.COMPLETE,textColor:"shades"}),o?(0,t.jsx)(d.TargetedElement,{targetedElement:o,openPane:s}):null]})})}function N(e){var r=e.agentMode,i=e.acknowledged,a=e.children;if((0,S.useShadesFlag)()){var o=r===n.AgentMode.AGENT_MODE_DISCUSSION;return(0,t.jsx)(b.ShadesSurface,{colorShade:o?"default":"notice",elevate:o?"2x":"1x","data-acknowledged":i,px:8,py:6,br:4,clsx:I.default.userMessageSurfaceShades,children:a})}return(0,t.jsx)(_.Surface,{clsx:I.default.userMessageSurface,elevated:!0,"data-acknowledged":i,"data-agent-mode":function(e){if(e)switch(e){case n.AgentMode.AGENT_MODE_DISCUSSION:return"plan";case n.AgentMode.AGENT_MODE_GENERAL:return"general";default:return}}(r),px:8,py:6,children:a})}function L(e){var r=e.created,i=e.additionalComments;return(0,t.jsx)(R,{created:r,children:(0,t.jsx)(N,{agentMode:n.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,t.jsx)(m.Text,{children:"Convert to app".concat(i?": ".concat(i):"")})})})}e.s(["UserMessage",()=>P,"UserMessageContainer",()=>R,"UserMessageContent",()=>O,"UserMessageSurface",()=>N],798790),e.s(["ConvertMockupToAppResponse",()=>L],831147)},269746,e=>{"use strict";var t=e.i(276385),n=e.i(366492),r=e.i(761201),i=e.i(858248),a=e.i(709485),o=e.i(712516),s=e.i(446530),l=e.i(613355),u=e.i(396776),c=e.i(625484),d=e.i(363201),p=(0,s.cssRecord)({buttonLink:[l.rcss.reset.button,l.rcss.linkStyle]});function f(e){var s=e.performPaneOperation,l=e.editSecretsAuthz;return(0,t.jsx)(o.default,{pane:{type:"envEditor"},bodyText:(0,t.jsxs)(c.View,{gap:4,children:[l.isAuthorized?null:(0,t.jsx)(u.StatusBanner,{icon:(0,t.jsx)(d.default,{}),text:l.message}),(0,t.jsx)("div",{children:(0,t.jsx)(n.default,{href:r.LINKS_DOCS.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),(0,t.jsxs)("div",{children:["Not sure where to start?"," ",(0,t.jsx)("button",{onClick:function(){s({operation:"open",pane:{type:"integrations"}}),(0,i.track)(a.events.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:p.buttonLink,children:"Explore Integrations."})]})]})})}function m(e){var i=e.message;return(0,t.jsx)(o.default,{pane:{type:"envEditor"},bodyText:(0,t.jsxs)(c.View,{gap:4,children:[(0,t.jsx)("div",{children:i}),(0,t.jsx)("div",{children:(0,t.jsx)(n.default,{href:r.LINKS_DOCS.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}e.s(["EnvEditorEmpty",()=>f,"EnvEditorUnauthorized",()=>m])},343166,e=>{e.v({iconBase:"EnvVarTypeIcon-module__7n-TXa__iconBase",iconDevOnly:"EnvVarTypeIcon-module__7n-TXa__iconDevOnly",iconProdOnly:"EnvVarTypeIcon-module__7n-TXa__iconProdOnly",iconShared:"EnvVarTypeIcon-module__7n-TXa__iconShared",iconSplit:"EnvVarTypeIcon-module__7n-TXa__iconSplit"})},800766,e=>{e.v({gridContainer:"AddEnvVar-module__a6fKCG__gridContainer"})},998803,e=>{e.v({copyButtonWrapper:"EnvVarField-module__tfLO-a__copyButtonWrapper",fieldInput:"EnvVarField-module__tfLO-a__fieldInput",inputWrapper:"EnvVarField-module__tfLO-a__inputWrapper",isEditing:"EnvVarField-module__tfLO-a__isEditing",isKey:"EnvVarField-module__tfLO-a__isKey"})},717574,e=>{e.v({wrapper:"SecretItemMenu-module__NqaiNa__wrapper"})},802743,e=>{e.v({devValueWrapperEditing:"EnvVarItem-module__qoP15G__devValueWrapperEditing",gridContainer:"EnvVarItem-module__qoP15G__gridContainer",gridRow:"EnvVarItem-module__qoP15G__gridRow",valueColumnEditing:"EnvVarItem-module__qoP15G__valueColumnEditing"})},365870,e=>{e.v({loadingContainer:"EnvVarsEditor-module__aQqAba__loadingContainer"})},305669,630937,14257,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(480028),a=e.i(446530),o=e.i(613355),s=e.i(140487),l=e.i(127227),u=e.i(136540),c=e.i(51054),d=e.i(396776),p=e.i(929872),f=e.i(960178),m=e.i(751273),h=e.i(625484),g=e.i(841691),v=e.i(90102),x=e.i(363201),y=e.i(292642),b=(0,a.cssRecord)({root:[{maxHeight:"70vh"}],header:[o.rcss.gap(4),o.rcss.align.start,{"& > *:first-child":[o.rcss.flex.growAndShrink(1),{alignSelf:"end"}]}],list:[o.rcss.borderRadius(),o.rcss.overflowY("auto")],item:[o.rcss.display.grid,o.rcss.align.center,o.rcss.justify.spaceBetween,o.rcss.px(8),o.rcss.py(12),o.rcss.border({direction:"bottom",color:i.tokens.outlineDimmer,width:1}),{gridTemplateColumns:"1fr 1fr","&:last-child":{borderBottom:"none"},"> *:last-child":{justifyContent:"end"}}],itemName:[o.rcss.flex.row,o.rcss.gap(8),o.rcss.align.center,o.rcss.overflow("hidden"),{"*":{overflow:"hidden",textOverflow:"ellipsis"}}],itemValue:[o.rcss.overflow("hidden"),o.rcss.flex.row,o.rcss.gap(4),o.rcss.align.center,{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},span:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}]}),S=function(e){var a=e.name,o=e.value,s=e.checked,c=e.onCheck,d=e.disabled,p=e.disabledReason,f=e.linked,S=(0,t._)((0,r.useState)(!0),2),_=S[0],w=S[1];return(0,n.jsxs)(h.View,{css:b.item,children:[(0,n.jsxs)("div",{css:b.itemName,children:[f?(0,n.jsx)(m.Tooltip,{tooltip:"Linked to Account Secrets",children:(0,n.jsx)(y.default,{color:i.tokens.accentPrimaryStronger})}):(0,n.jsx)(l.Checkbox,{checked:s,onChange:c,id:"secret-".concat(a),name:"Select secret",disabled:d}),(0,n.jsx)("label",{htmlFor:"secret-".concat(a),children:a}),d&&!f&&p?(0,n.jsx)(m.Tooltip,{tooltip:p,children:(0,n.jsx)(x.default,{color:i.tokens.foregroundDimmer})}):null]}),(0,n.jsxs)(h.View,{css:b.itemValue,"data-sensitive":_,children:[(0,n.jsx)("span",{children:_?"****************":o}),(0,n.jsx)(u.IconButton,{alt:_?"Hide secret":"Show secret",onClick:function(){return w(!_)},children:_?(0,n.jsx)(v.default,{}):(0,n.jsx)(g.default,{})})]})]})};function _(e){var i=e.secrets,a=e.onSelectSecrets,l=e.actionText,u=e.helpText,m=e.existingKeys,g=e.linkedSecrets,v=void 0===g?[]:g,y=(0,t._)((0,r.useState)(new Set),2),_=y[0],w=y[1],j=(0,t._)((0,r.useState)(""),2),T=j[0],D=j[1],k=v.length>=10,C=v.length+_.size>=10,E=(0,r.useCallback)(function(){return i.filter(function(e){return _.has(e.name)})},[i,_]),A=new Set(v.map(function(e){return e.secret.id})),I=T.trim()?i.filter(function(e){return e.name.toLowerCase().includes(T.toLowerCase())}):i;return(0,n.jsxs)(h.View,{css:b.root,p:8,gap:8,children:[k?(0,n.jsx)(d.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(x.default,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):C?(0,n.jsx)(d.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(x.default,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,n.jsx)(h.View,{css:b.header,gap:8,row:!0,justify:"space-between",children:(0,n.jsx)(f.Text,{variant:"subheadDefault",children:"Account secrets"})}),(0,n.jsx)(f.Text,{color:"dimmer",children:u}),(0,n.jsx)(h.View,{shrink:0,children:(0,n.jsx)(c.SearchBar,{placeholder:"Search secrets...",value:T,onChange:function(e){return D(e.target.value)},onClear:function(){return D("")}})}),(0,n.jsx)(p.Surface,{elevated:!0,shrink:!0,css:b.list,children:0===I.length?(0,n.jsx)(h.View,{p:16,css:o.rcss.textAlign.center,children:(0,n.jsx)(f.Text,{color:"dimmer",children:T.trim()?"No secrets match your search":"No account secrets available"})}):I.map(function(e){return(0,n.jsx)(S,{checked:_.has(e.name),onCheck:function(t){t&&v.length+_.size>=10||w(function(n){var r=new Set(n);return t?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:A.has(e.id),disabled:m.has(e.name)||k||!_.has(e.name)&&C,disabledReason:m.has(e.name)?"A secret with this name already exists in this Repl":k?"Secret limit reached. Please unlink some secrets before adding more.":C&&!_.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})}),(0,n.jsx)(s.Button,{colorway:"primary",text:l,disabled:0===_.size,onClick:function(){return a(E())},size:"small"})]})}e.s(["default",()=>_],305669);var w=e.i(297083),j=e.i(817556),T=e.i(878420),D=e.i(64386),k=e.i(921737),C=e.i(987154),E=e.i(504908),A=e.i(343166),I={split:{tooltip:"This configuration has separate values for your published app and when testing on Replit",icon:E.default,styleClass:A.default.iconSplit},shared:{tooltip:"This configuration is shared between your published app and when testing on Replit",icon:y.default,styleClass:A.default.iconShared},prodOnly:{tooltip:"This configuration only exists in your published app",icon:C.default,styleClass:A.default.iconProdOnly},devOnly:{tooltip:"This configuration only exists when testing on Replit",icon:k.default,styleClass:A.default.iconDevOnly}};function R(e){var t=I[e.envVarType];if(!t)return null;var r=t.icon;return(0,n.jsx)(m.Tooltip,{tooltip:t.tooltip,maxWidth:180,children:(0,n.jsx)(p.Surface,{elevated:!0,align:"center",justify:"center",br:4,clsx:[A.default.iconBase,t.styleClass],children:(0,n.jsx)(r,{})})})}var P=e.i(939562),M=e.i(607278),O=e.i(818503),N=e.i(795581),L=e.i(800766),B={shared:"shared",production:"prodOnly",development:"devOnly"};function V(e){var i=e.onClose,a=e.onAdd,o=e.existingKeysMap,l=e.environment,u=(0,t._)((0,r.useState)({key:"",value:"",environment:l}),2),c=u[0],d=u[1],p=(0,t._)((0,r.useState)(!1),2),f=p[0],m=p[1],g=(0,r.useMemo)(function(){var e=c.key.trim();if(!e)return"Key is required";var t=o.get(e);if(t){if(t.has(c.environment))return"This variable already exists in this environment. Edit it instead.";if("shared"===c.environment){if(t.has("production")||t.has("development"))return"This key exists in production or development. Cannot add to shared as it would conflict."}else if(t.has("shared"))return"This key exists in shared. Cannot add to production/development as it would conflict."}},[o,c.key,c.environment]),v=c.key.trim().length>0&&!g,x=function(){m(!0),v&&(a({key:c.key.trim(),value:c.value,environment:c.environment}),i())};return(0,n.jsxs)(h.View,{py:8,gap:8,onKeyDown:function(e){"Enter"===e.key&&x()},children:[(0,n.jsxs)(h.View,{clsx:L.default.gridContainer,align:"end",children:[(0,n.jsx)(R,{envVarType:B[l]}),(0,n.jsx)(h.View,{gap:2,children:(0,n.jsxs)(N.TextField,{validate:function(){return g},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"envVarKey",value:c.key,onChange:function(e){return d(function(t){return(0,D._)((0,T._)({},t),{key:e})})},isInvalid:f&&!!g,children:[(0,n.jsx)(O.Label,{color:"dimmer",multiline:!1,children:"Key"}),(0,n.jsx)(M.Input,{autoComplete:"off",autoFocus:!0}),f?(0,n.jsx)(P.FieldError,{children:g}):null]})}),(0,n.jsx)(h.View,{gap:2,children:(0,n.jsxs)(N.TextField,{isRequired:!0,minLength:1,name:"envVarValue",value:c.value,onChange:function(e){return d(function(t){return(0,D._)((0,T._)({},t),{value:e})})},children:[(0,n.jsx)(O.Label,{color:"dimmer",multiline:!1,children:"Value"}),(0,n.jsx)(M.Input,{autoComplete:"off"})]})})]}),(0,n.jsxs)(h.View,{row:!0,gap:8,justify:"end",children:[(0,n.jsx)(s.Button,{size:"small",text:"Cancel",onClick:function(){return i()}}),(0,n.jsx)(s.Button,{size:"small",text:"Add configuration",colorway:"primary",disabled:!v,onClick:x})]})]})}var U=e.i(721281),F=e.i(88619),H=e.i(998803);function G(e){var t,r=e.value,i=e.isEditing,a=e.onChange,o=e.copyTooltipText,s=e.isKey,l=e.placeholder,u=i&&a;return(0,n.jsxs)(h.View,{clsx:H.default.inputWrapper,children:[!u&&(0,n.jsx)(h.View,{clsx:H.default.copyButtonWrapper,children:(0,n.jsx)(F.CopyIconButton,{tooltipText:o,textToCopy:r})}),(0,n.jsx)(M.Input,{value:r,onChange:function(e){return a(e.target.value)},clsx:[H.default.fieldInput,(t={},(0,U._)(t,H.default.isEditing,u),(0,U._)(t,H.default.isKey,void 0!==s&&s),t)],disabled:!i,placeholder:l})]})}var z=e.i(42458),q={both:{envLabel:"published app and workspace testing",buttonText:"Remove both",environments:["production","development"]},production:{envLabel:"published app",buttonText:"Remove published app value",environments:["production"]},development:{envLabel:"workspace testing",buttonText:"Remove workspace testing value",environments:["development"]}};function W(e){var t,r,i,a,o,l,u=e.conflict,c=e.onDeleteEnvVar,p=e.contextType,m=q[r=(t=u.conflictingEnvs).includes("production"),i=t.includes("development"),r&&i?"both":r?"production":"development"],h=(a=u.key,o=m.envLabel,l=m.environments.length>1,"singleEnv"===p?"This ".concat(o," value for ").concat(a," is overriding the shared value."):l?"".concat(a," has ").concat(o," values that override the shared value."):"".concat(a," has a ").concat(o," value that overrides the shared value."));return(0,n.jsx)(d.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(z.default,{}),text:(0,n.jsx)(f.Text,{variant:"small",children:h}),action:(0,n.jsx)(s.Button,{size:"small",text:m.buttonText,onClick:function(){m.environments.forEach(function(e){c(u.key,e)})}})})}var K=e.i(569910),$=e.i(119274),Y=e.i(283110),X=e.i(283023),Q=e.i(196353),J=e.i(952030),Z=e.i(703505),ee=e.i(717574);function et(e){var t=e.onEdit,r=e.onDelete,i=function(e){switch(e.type){case"disabled":case"deploymentOnly":return null;case"synced":return{label:"Unsync from workspace value",icon:(0,n.jsx)(E.default,{}),onClick:e.optOut};case"unsynced":return{label:"Sync to workspace value",icon:(0,n.jsx)(y.default,{}),onClick:e.sync};case"shared":return{label:"Add testing value",icon:(0,n.jsx)(J.default,{}),onClick:e.addTestingOverride};case"split":return{label:"Remove testing value",icon:(0,n.jsx)(Y.default,{}),onClick:e.removeOverride};case"prodOnly":case"devOnly":return{label:"Convert to shared configuration",icon:(0,n.jsx)(y.default,{}),onClick:e.convertToShared};default:(0,K.default)(e)}}(e.environmentControlState);return(0,n.jsx)(p.Surface,{elevated:!0,clsx:ee.default.wrapper,children:(0,n.jsxs)($.PopupMenu,{placement:"bottom right",trigger:(0,n.jsx)(u.IconButton,{size:32,tooltipBehavior:"hidden",alt:"Options",children:(0,n.jsx)(Q.default,{})}),children:[(0,n.jsx)($.MenuItem,{label:"Edit",icon:(0,n.jsx)(X.default,{}),onAction:t}),i?(0,n.jsx)($.MenuItem,{label:i.label,icon:i.icon,onAction:i.onClick}):null,(0,n.jsx)($.MenuItem,{label:"Delete",icon:(0,n.jsx)(Z.default,{}),isDestructive:!0,onAction:r})]})})}e.s(["SecretItemMenu",()=>et],630937);var en=e.i(802743);function er(e){var a=e.envKey,o=e.onUpdate,l=e.onDeleteEnvVar,u=(0,t._)((0,r.useState)(!1),2),c=u[0],d=u[1],p=(0,t._)((0,r.useState)(!1),2),g=p[0],v=p[1],y=(0,t._)((0,r.useState)(a),2),b=y[0],S=y[1],_=(0,t._)((0,r.useState)(function(){switch(e.type){case"shared":case"devOnly":case"prodOnly":return e.value;case"split":return e.prodValue}}),2),w=_[0],j=_[1],T=(0,t._)((0,r.useState)(function(){return"split"===e.type?e.devValue:""}),2),D=T[0],k=T[1],C=function(){if(!c)switch(e.type){case"shared":case"devOnly":case"prodOnly":return e.value;case"split":return e.prodValue}return w}(),E="split"===e.type||g;return(0,n.jsxs)(h.View,{gap:4,children:[!c&&e.conflict?(0,n.jsx)(W,{conflict:e.conflict,onDeleteEnvVar:l,contextType:"shared"===e.type||"split"===e.type?"unified":"singleEnv"}):null,(0,n.jsxs)(h.View,{clsx:en.default.gridContainer,gap:4,children:[(0,n.jsxs)(h.View,{clsx:en.default.gridRow,children:[(0,n.jsx)(R,{envVarType:e.type}),(0,n.jsx)(G,{value:c?b:a,isEditing:c&&!g,onChange:S,copyTooltipText:"Copy key",isKey:!0,placeholder:"Key"}),(0,n.jsx)(h.View,{clsx:[c?en.default.valueColumnEditing:""],children:(0,n.jsx)(G,{value:C,isEditing:c,onChange:j,copyTooltipText:"Copy value",placeholder:"Value"})}),!c&&(0,n.jsx)(et,{onEdit:function(){switch(S(a),e.type){case"shared":case"devOnly":case"prodOnly":j(e.value);break;case"split":j(e.prodValue),k(e.devValue)}d(!0)},onDelete:function(){switch(e.type){case"shared":l(a,"shared");break;case"split":l(a,"development"),l(a,"production");break;case"devOnly":l(a,"development");break;case"prodOnly":l(a,"production")}},environmentControlState:function(){switch(e.type){case"split":return{type:"split",removeOverride:function(){return e.onRemoveOverride(a,e.prodValue)}};case"shared":return{type:"shared",addTestingOverride:function(){v(!0),j(e.value),k(e.value),d(!0)}};case"prodOnly":return{type:"prodOnly",convertToShared:function(){return e.onConvertToShared(a,e.value)}};case"devOnly":return{type:"devOnly",convertToShared:function(){return e.onConvertToShared(a,e.value)}}}}()})]}),E?(0,n.jsxs)(h.View,{clsx:en.default.gridRow,children:[(0,n.jsx)(h.View,{}),(0,n.jsxs)(h.View,{row:!0,gap:6,pr:4,align:"center",justify:"end",children:[(0,n.jsx)(f.Text,{color:"dimmer",variant:"small",children:"Testing value"}),(0,n.jsx)(m.Tooltip,{tooltip:"The value used when testing your app on Replit",maxWidth:180,children:(0,n.jsx)(x.default,{color:i.tokens.foregroundDimmest})})]}),(0,n.jsx)(h.View,{clsx:[c?en.default.devValueWrapperEditing:""],children:(0,n.jsx)(G,{placeholder:"Testing value",value:c||g||"split"!==e.type?D:e.devValue,isEditing:c||g,onChange:k,copyTooltipText:"Copy testing value"})})]}):null]}),c?(0,n.jsxs)(h.View,{row:!0,gap:8,justify:"end",children:[(0,n.jsx)(s.Button,{size:"small",text:"Cancel",onClick:function(){switch(S(a),e.type){case"shared":case"devOnly":case"prodOnly":j(e.value);break;case"split":j(e.prodValue),k(e.devValue)}v(!1),d(!1)}}),(0,n.jsx)(s.Button,{size:"small",colorway:"primary",text:"Save",onClick:function(){if(g&&"shared"===e.type){e.onCreateOverride(a,D,w),v(!1),d(!1);return}if("shared"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"shared"}}]),d(!1);return}if("split"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"production"}},{oldKey:a,envVar:{key:b,value:D,environment:"development"}}]),d(!1);return}if("prodOnly"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"production"}}]),d(!1);return}if("devOnly"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"development"}}]),d(!1);return}}})]}):null]})}var ei=e.i(988676);function ea(e){var i=e.groupedEnvVars,a=e.onUpdateEnvVar,o=e.onDeleteEnvVar,l=e.onAddEnvVar,u=e.onSplitDevAndProd,c=e.onReplaceWithShared,d=e.showAddEnvVar,p=e.onCloseAddEnvVar,m=e.onShowAdd,g=e.showAddProdOnly,v=e.setShowAddProdOnly,x=e.showAddDevOnly,y=e.setShowAddDevOnly,b=(0,t._)((0,r.useState)(!1),2),S=b[0],_=b[1],T=(0,t._)((0,r.useState)(!1),2),D=T[0],k=T[1],C=null!=g?g:S,E=null!=v?v:_,A=null!=x?x:D,I=null!=y?y:k,R=i.unified,P=i.prodOnly,M=i.devOnly,O=i.conflicts,N=(0,r.useMemo)(function(){var e=new Map;return R.forEach(function(t){var n,r,i;e.has(t.key)||e.set(t.key,new Set),"shared"===t.type?null==(n=e.get(t.key))||n.add("shared"):(null==(r=e.get(t.key))||r.add("development"),null==(i=e.get(t.key))||i.add("production"))}),P.forEach(function(t){var n;e.has(t.key)||e.set(t.key,new Set),null==(n=e.get(t.key))||n.add("production")}),M.forEach(function(t){var n;e.has(t.key)||e.set(t.key,new Set),null==(n=e.get(t.key))||n.add("development")}),e},[R,P,M]),L=function(e,t){return(0,w._)(function(){return(0,j._)(this,function(n){return a(e,"production",{key:e,value:t,environment:"shared"}),[2]})})()},B=function(e,t){return(0,w._)(function(){return(0,j._)(this,function(n){return a(e,"development",{key:e,value:t,environment:"shared"}),[2]})})()};return(0,n.jsx)(h.View,{py:8,gap:8,children:(0,n.jsxs)(h.View,{gap:8,children:[(0,n.jsxs)(h.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsx)(h.View,{gap:4,grow:!0,shrink:!0,children:(0,n.jsx)(f.Text,{variant:"small",children:"Configurations are similar to secrets, but should only be used for non-sensitive information. They're useful for having a variable that's different between your published app and when testing on Replit."})}),m?(0,n.jsx)(s.Button,{iconLeft:(0,n.jsx)(J.default,{}),text:"New configuration",colorway:"primary",size:"small",onClick:m}):null]}),d?(0,n.jsx)(V,{onClose:p,onAdd:l,existingKeysMap:N,environment:"shared"}):null,R.length>0?(0,n.jsx)(h.View,{gap:12,children:R.map(function(e){var t=O.find(function(t){return t.key===e.key});return"shared"===e.type&&u?(0,n.jsx)(er,{type:"shared",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){var t=e.oldKey,n=e.envVar;a(t,n.environment,n)})},onDeleteEnvVar:o,onCreateOverride:u},e.key):"split"===e.type&&c?(0,n.jsx)(er,{type:"split",envKey:e.key,devValue:e.devValue,prodValue:e.prodValue,conflict:t,onUpdate:function(e){e.forEach(function(e){var t=e.oldKey,n=e.envVar;a(t,n.environment,n)})},onDeleteEnvVar:o,onRemoveOverride:c},e.key):null})}):null,P.length>0||C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.DividerH,{}),(0,n.jsxs)(h.View,{gap:8,children:[C?(0,n.jsx)(V,{onClose:function(){return E(!1)},onAdd:l,existingKeysMap:N,environment:"production"}):null,(0,n.jsx)(h.View,{gap:12,children:P.length?P.map(function(e){var t=O.find(function(t){return t.key===e.key});return(0,n.jsx)(er,{type:"prodOnly",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){a(e.oldKey,"production",e.envVar)})},onDeleteEnvVar:o,onConvertToShared:L},e.key)}):(0,n.jsx)(h.View,{px:6,children:(0,n.jsx)(f.Text,{color:"dimmer",variant:"small",children:"No published app only configurations"})})})]})]}):null,M.length>0||A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.DividerH,{}),(0,n.jsxs)(h.View,{gap:8,children:[A?(0,n.jsx)(V,{onClose:function(){return I(!1)},onAdd:l,existingKeysMap:N,environment:"development"}):null,(0,n.jsx)(h.View,{gap:8,children:M.length?M.map(function(e){var t=O.find(function(t){return t.key===e.key});return(0,n.jsx)(er,{type:"devOnly",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){a(e.oldKey,"development",e.envVar)})},onDeleteEnvVar:o,onConvertToShared:B},e.key)}):(0,n.jsx)(h.View,{px:6,children:(0,n.jsx)(f.Text,{color:"dimmer",variant:"small",children:"No testing only configurations"})})})]})]}):null]})})}var eo=e.i(906368),es=e.i(222342),el=e.i(858248),eu=e.i(709485),ec=e.i(927158),ed=e.i(529810),ep=e.i(940745),ef=e.i(365870);function em(e){var i,a,o,s,l,u,c,d,p,m,g,v,x,y,b=e.editAuthorization,S=e.error,_=e.showAddEnvVar,T=e.setShowAddEnvVar,D=e.showAddProdOnly,k=e.setShowAddProdOnly,C=e.showAddDevOnly,E=e.setShowAddDevOnly,A=(i=(0,es.default)().showError,a=(0,ed.default)().dotReplit,s=(o=(0,t._)((0,r.useState)({unified:[],prodOnly:[],devOnly:[],conflicts:[]}),2))[0],l=o[1],c=(u=(0,t._)((0,r.useState)(!0),2))[0],d=u[1],p=(0,ec.usePid2Callback)(function(e){return function(){return(0,w._)(function(){var t,n;return(0,j._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.environment.getEnvVarsGroupedByKey.rpc({})];case 1:return(t=r.sent()).ok&&l({unified:t.payload.unified,prodOnly:t.payload.prodOnly,devOnly:t.payload.devOnly,conflicts:t.payload.conflicts||[]}),d(!1),[3,3];case 2:return n=r.sent(),eo.captureException(n),i("Failed to fetch environment variables"),d(!1),[3,3];case 3:return[2]}})})()}},[i]),m=(0,ec.usePid2Callback)(function(e){return function(t){return(0,w._)(function(){var n;return(0,j._)(this,function(r){switch(r.label){case 0:return[4,e.environment.setEnvVars.rpc(t)];case 1:if(!(n=r.sent()).ok)return i("ENV_VAR_MUTATION_CONFLICT_ERROR"===n.payload.code?"Environment variable conflict detected":"DOT_REPLIT_EDITING_ERROR"===n.payload.code?"Failed to update .replit file":n.payload.message||"Failed to update environment variables"),[2];return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==p?void 0:p()];case 2:return r.sent(),[2]}})})()}},[i,p]),g=(0,ec.usePid2Callback)(function(e){return function(t,n){return(0,w._)(function(){var r;return(0,j._)(this,function(a){switch(a.label){case 0:return[4,e.environment.deleteEnvVars.rpc([{key:t,env:n}])];case 1:if(!(r=a.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===r.payload.code?"Failed to update .replit file":r.payload.message||"Failed to delete environment variable"),[2];return[4,null==p?void 0:p()];case 2:return a.sent(),[2]}})})()}},[i,p]),v=(0,ec.usePid2Callback)(function(e){return function(t,n,r){return(0,w._)(function(){var a;return(0,j._)(this,function(o){switch(o.label){case 0:return[4,e.environment.splitDevAndProd.rpc({key:t,devValue:n,prodValue:r})];case 1:if(!(a=o.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===a.payload.code?"Failed to update .replit file":a.payload.message||"Failed to split environment variable"),[2];return[4,null==p?void 0:p()];case 2:return o.sent(),[2]}})})()}},[i,p]),x=(0,ec.usePid2Callback)(function(e){return function(t,n){return(0,w._)(function(){var r;return(0,j._)(this,function(a){switch(a.label){case 0:return[4,e.environment.replaceWithShared.rpc({key:t,value:n})];case 1:if(!(r=a.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===r.payload.code?"Failed to update .replit file":r.payload.message||"Failed to combine environment variable"),[2];return[4,null==p?void 0:p()];case 2:return a.sent(),[2]}})})()}},[i,p]),(0,r.useEffect)(function(){if(p)return a.watch(function(){p()})},[a,p]),{groupedEnvVars:s,isLoading:c,addEnvVar:(0,r.useCallback)(function(e){return(0,w._)(function(){return(0,j._)(this,function(t){switch(t.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"created",multiline:!1}),[4,null==m?void 0:m([{key:e.key,value:e.value,env:e.environment}])];case 1:return t.sent(),[2]}})})()},[m]),updateEnvVar:(0,r.useCallback)(function(e,t,n){return(0,w._)(function(){return(0,j._)(this,function(r){switch(r.label){case 0:if((0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),t===n.environment)return[3,2];return[4,null==g?void 0:g(e,t)];case 1:r.sent(),r.label=2;case 2:if(e===n.key)return[3,4];return[4,null==g?void 0:g(e,t)];case 3:r.sent(),r.label=4;case 4:return[4,null==m?void 0:m([{key:n.key,value:n.value,env:n.environment}])];case 5:return r.sent(),[2]}})})()},[m,g]),deleteEnvVar:(0,r.useCallback)(function(e,t){return(0,w._)(function(){return(0,j._)(this,function(n){switch(n.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"deleted"}),[4,null==g?void 0:g(e,t)];case 1:return n.sent(),[2]}})})()},[g]),splitDevAndProd:(0,r.useCallback)(function(e,t,n){return(0,w._)(function(){return(0,j._)(this,function(r){switch(r.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==v?void 0:v(e,t,n)];case 1:return r.sent(),[2]}})})()},[v]),replaceWithShared:(0,r.useCallback)(function(e,t){return(0,w._)(function(){return(0,j._)(this,function(n){switch(n.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==x?void 0:x(e,t)];case 1:return n.sent(),[2]}})})()},[x])}),I=A.groupedEnvVars,R=A.isLoading,P=A.addEnvVar,M=A.updateEnvVar,O=A.deleteEnvVar,N=A.splitDevAndProd,L=A.replaceWithShared;return R?(0,n.jsx)(h.View,{className:ef.default.loadingContainer,align:"center",justify:"center",children:(0,n.jsx)(ep.default,{size:24})}):!b||S?(0,n.jsx)(h.View,{className:ef.default.emptyState,p:16,children:(0,n.jsx)(f.Text,{color:"dimmer",children:null!=(y=null==S?void 0:S.message)?y:"Unable to determine environment variable permissions, please refresh your browser."})}):(0,n.jsxs)(h.View,{className:ef.default.body,grow:!0,shrink:!0,children:[b.isAuthorized?null:(0,n.jsx)(h.View,{p:8,children:(0,n.jsx)(f.Text,{children:b.message})}),(0,n.jsx)(ea,{groupedEnvVars:I,onUpdateEnvVar:M,onDeleteEnvVar:O,onAddEnvVar:P,onSplitDevAndProd:N,onReplaceWithShared:L,showAddEnvVar:_,onCloseAddEnvVar:function(){T(!1)},showAddProdOnly:D,setShowAddProdOnly:k,showAddDevOnly:C,setShowAddDevOnly:E})]})}e.s(["default",()=>em],14257)},935835,e=>{"use strict";var t=e.i(167626),n=e.i(530658);function r(e,t){return e.split(t).length-1}var i={parse:function(e){var t=new Map,n=e.split(/\n|\r|\r\n/),i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!function(e){var t=e.trim();return 0===t.length||t.startsWith("#")}(u)){var c=(u=function(e){if(!e.includes("#"))return e;var t=e.split("#"),n=!1,i=[],a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;(1===r(c,'"')||r(c,"'"))&&(n?(n=!1,i.push(c)):n=!0),(0===i.length||n)&&i.push(c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i.join("#")}(u)).indexOf("="),d=u.indexOf(":");if(-1!==d||-1!==c){var p=c;-1!==d&&(d<c||-1===c)&&(p=d);var f=u.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),m=function(e,t){var n=e.trim();if(0===n.length)return n;var r=n.length-1,i='"'===n[0]&&'"'===n[r],a="'"===n[0]&&"'"===n[r];return(a||i)&&(n=n.slice(1,-1)),i&&(n=(n=n.replace(/\\./g,function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e})).replace(/\\([^$])/g,"$1")),a||(n=n.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(e){var n=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===n)return e;if("\\"===n[1]||"("===n[2])return n[0].slice(1);var r=n[4];return""!==r?t.get(r)||"":e})),n}(u.slice(p+1),t);t.set(f,m)}}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return t},serialize:function(e){return((0,t._)(e,Map)?Array.from(e):Object.entries(e)).reduce(function(e,t){var r=(0,n._)(t,2),i=r[0],a=r[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+"".concat(i,'="').concat(a,'"\n')},"")}};e.s(["default",()=>i])},644230,e=>{e.v({addSecretTitleContainer:"index-module__87l8Pa__addSecretTitleContainer",addSecretValueLabel:"index-module__87l8Pa__addSecretValueLabel",body:"index-module__87l8Pa__body",envEditorBody:"index-module__87l8Pa__envEditorBody",loadingContainer:"index-module__87l8Pa__loadingContainer",secretAccessibilityText:"index-module__87l8Pa__secretAccessibilityText",secretItem:"index-module__87l8Pa__secretItem",secretSelect:"index-module__87l8Pa__secretSelect",tabExtraText:"index-module__87l8Pa__tabExtraText"})},316799,837605,32967,97845,e=>{"use strict";var t,n=e.i(530658),r=e.i(389959),i=e.i(368964),a=e.i(207237),o=e.i(297083),s=e.i(878420),l=e.i(64386),u=e.i(346715),c=e.i(817556),d=e.i(276385),p=e.i(678420),f=e.i(761201),m=e.i(993796),h=e.i(222342),g=e.i(858248),v=e.i(709485),x=e.i(529810),y=e.i(952521),b=e.i(269746),S=e.i(12291),_=e.i(952685);e.i(545082);var w=e.i(91442),j=e.i(729122),T=e.i(305669),D=e.i(354429),k=e.i(14257),C=e.i(906368),E=e.i(682532),A=e.i(179302),I=e.i(221250),R=e.i(542101),P=e.i(935835),M=e.i(262206),O=e.i(480028),N=e.i(613355),L=e.i(140487),B=e.i(739521),V=e.i(396776),U=e.i(929872),F=e.i(960178),H=e.i(625484),G=e.i(616278),z=e.i(383748),q=v.events.ENV_EDITOR_USED;(t={})[t.VALID=0]="VALID",t[t.ERROR_PARSE_JSON=1]="ERROR_PARSE_JSON",t[t.ERROR_PARSE_ENV=2]="ERROR_PARSE_ENV",t[t.ERROR_STRINGS=3]="ERROR_STRINGS",t[t.ERROR_SAVE=4]="ERROR_SAVE",t[t.ERROR_MISSING_KEYS=5]="ERROR_MISSING_KEYS";var W=(0,r.forwardRef)(function(e,t){var i=e.secrets,a=e.update,s=e.disabledMessage,l=(0,n._)((0,r.useState)(!1),2),u=l[0],p=l[1],f=(0,n._)((0,r.useState)(!1),2),m=f[0],h=f[1],v=(0,n._)((0,r.useState)(!1),2),x=v[0],y=v[1],b=(0,n._)((0,r.useState)(0),2),S=b[0],_=b[1],w=(0,n._)((0,r.useState)(0),2),j=w[0],T=w[1],D=0===S,k=(0,E.linter)(function(e){var t=e.state.doc.toString(),n=0===j?K(t):$(t);return _(n),(0,g.track)(q,{action:0===n?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),W=(0,R.default)(),Y=W.ref,X=W.view,Q=function(){m||p(!1)},J=function(e){T(e),y(!1),p(!0),(0,g.track)(q,{action:"rawEditorOpened"})},Z=(0,r.useCallback)(function(){void 0!==s||m||J(0)},[s,m]),ee=(0,r.useCallback)(function(){void 0!==s||m||J(1)},[s,m]);(0,r.useImperativeHandle)(t,function(){return{openJSONEditor:Z,openEnvEditor:ee,isSaving:m,disabledMessage:s}},[m,s,Z,ee]);var et=function(){if(!X)return!1;var e=X.state.doc.toString(),t=0===j?K(e):$(e);return _(t),0===t},en=function(){return(0,o._)(function(){var e,t;return(0,c._)(this,function(r){switch(r.label){case 0:if(!X||!et())return[2];h(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=X.state.doc.toString(),[4,a(0===j?new Map(Object.entries(JSON.parse(e)).map(function(e){var t=(0,n._)(e,2);return[t[0],t[1]]})):P.default.parse(e))];case 2:return r.sent(),h(!1),y(!0),setTimeout(function(){Q(),setTimeout(function(){y(!1)},500)},500),[3,4];case 3:return t=r.sent(),C.captureException(t),(0,g.track)(q,{action:"rawEditorUpdatedError"}),_(4),h(!1),[3,4];case 4:return[2]}})})()};return(0,r.useEffect)(function(){if(X){var e=0===j?JSON.stringify(Object.fromEntries(i.entries()),null,2):P.default.serialize(i);0===j&&"{}"===e&&(e="{\n  \n}"),X.dispatch({changes:{from:0,to:X.state.doc.length,insert:e}}),X.dispatch({selection:{anchor:X.state.doc.length-2*(0===j)}}),X.focus()}},[X,i,j]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(B.Modal,{isOpen:u,onRequestClose:function(){return Q()},children:(0,d.jsxs)(H.View,{gap:24,children:[(0,d.jsx)(F.Header,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,d.jsx)(F.Text,{children:0===j?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,d.jsx)(U.Surface,{css:[N.rcss.borderRadius(8),N.rcss.transition.snappy,N.rcss.p(4),{border:"1px solid ".concat(O.tokens.outlineDimmer),":hover":{borderColor:O.tokens.outlineStronger}}],elevated:!0,children:(0,d.jsx)(I.default,{ref:Y,readOnly:m||x,extensions:[k,A.keymap.of([{key:(0,M.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return en(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===j?"json":"properties",hideGutter:!0})}),(0,d.jsxs)(H.View,{row:!0,gap:4,justify:"end",children:[!D&&(0,d.jsx)(V.StatusBanner,{icon:(0,d.jsx)(z.default,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(S)}),(0,d.jsxs)(H.View,{row:!0,gap:12,children:[(0,d.jsx)(L.Button,{onClick:Q,text:"Cancel"}),(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(G.default,{}),stretch:!0,colorway:x?"positive":"primary",text:x?"Saved!":"Save",disabled:!D||m||x,onClick:function(){return en()}})]})]})]})})})});function K(e){try{var t=JSON.parse(e);for(var n in t){if("string"!=typeof n||"string"!=typeof t[n])return 3;if(!n.trim())return 5}return 0}catch(e){return 1}}function $(e){try{var t=e.replace(/#.*$/gm,"").split("\n"),r="",i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if((r+=(r?"\n":"")+u).trim()){var c=(r.match(/'/g)||[]).length,d=(r.match(/"/g)||[]).length;if(c%2!=0||d%2!=0){if(u===t[t.length-1])return 2;continue}r=""}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var p=P.default.parse(e),f=!0,m=!1,h=void 0;try{for(var g,v=p[Symbol.iterator]();!(f=(g=v.next()).done);f=!0)if(!(0,n._)(g.value,1)[0].trim())return 5}catch(e){m=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw h}}return 0}catch(e){return 2}}var Y=e.i(877212),X=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"},{title:"Coinbase Developer Platform",description:"Use Coinbase Developer Platform to build on chain agents and apps.",pattern:/^(CDP_|COINBASE_).*/,defaultLink:"https://replit.com/guides/coinbase-developer-platform-agentkit-quickstart-guide"}],Q=e.i(446530),J=e.i(88619),Z=e.i(939562),ee=e.i(136540),et=e.i(607278),en=e.i(818503),er=e.i(119274),ei=e.i(795581),ea=e.i(751273),eo=e.i(283023),es=e.i(841691),el=e.i(90102),eu=e.i(292642),ec=e.i(196353),ed=e.i(793579),ep=e.i(703505),ef=e.i(42458),em=(0,Q.cssRecord)({valueInput:[N.rcss.flex.grow(0),{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}],linkedSecret:[{'&[data-unlinking="true"]':{opacity:.5,pointerEvents:"none"}}]}),eh=(0,Q.cssRecord)({root:[N.rcss.p(4),N.rcss.rowWithGap(4),N.rcss.borderRadius(4),N.rcss.width("44%"),N.rcss.display.flex,N.rcss.overflowX("hidden"),N.rcss.backgroundColor.backgroundHigher],text:[N.rcss.flex.growAndShrink(1)]});function eg(e){var t=e.value;return(0,d.jsxs)(U.Surface,{elevated:!0,css:eh.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:"Copy secret key",textToCopy:t}),(0,d.jsx)(ea.Tooltip,{tooltip:(0,d.jsx)(F.Text,{children:t}),children:function(e,n){return(0,d.jsx)(F.Text,(0,l._)((0,s._)({ref:n},e),{multiline:!1,css:eh.text,children:t}))}})]})}var ev=(0,Q.cssRecord)({root:[N.rcss.p(4),N.rcss.rowWithGap(4),N.rcss.borderRadius(4),N.rcss.flex.growAndShrink(1),N.rcss.align.center,N.rcss.backgroundColor.backgroundHigher],text:[N.rcss.flex.growAndShrink(1),N.rcss.truncate,{fontFamily:O.tokens.fontFamilyCode}],input:[{border:"none",background:"inherit",fontFamily:O.tokens.fontFamilyCode,'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function ex(e){var t=e.value,i=e.placeholder,a=void 0===i?"Enter your secret value":i,o=e.onChange,s=e.canEditDisabledMessage,l=e.defaultVisible,u=(0,n._)((0,r.useState)(void 0!==l&&l),2),c=u[0],p=u[1],f=void 0===s;return(0,d.jsxs)(U.Surface,{elevated:!0,css:ev.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:f?"Copy secret value":s,textToCopy:f?t:""}),o&&f?(0,d.jsx)(et.Input,{value:t,onChange:function(e){return o(e.target.value)},placeholder:a,css:ev.input,"data-sensitive":t&&!c}):(0,d.jsx)(F.Text,{multiline:!1,css:ev.text,children:t?(0,d.jsx)(d.Fragment,{children:c?t:"•".repeat(8)}):a}),(0,d.jsx)(ee.IconButton,{alt:"Toggle Secret",tooltipContents:s,tooltipBehavior:f?"hidden":void 0,onClick:function(){return p(!c)},disabled:!f,children:c?(0,d.jsx)(el.default,{}):(0,d.jsx)(es.default,{})})]})}var ey=(0,Q.cssRecord)({keySection:[N.rcss.width("44%")],titleLabel:[N.rcss.pt(2),N.rcss.pb(4),{label:[N.rcss.flex.row,N.rcss.gap(4),N.rcss.align.center]}]});function eb(e){var t=e.name,n=e.value,r=void 0===n?"":n,i=e.isEditing,a=e.isSensitive,o=e.canEdit,u=void 0===o||o,c=e.editDisabledMessage,p=e.onToggleSensitive,f=e.renderSuffix,m=e.renderKeyExtra;return(0,d.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,d.jsxs)(H.View,{css:eh.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:"Copy secret key",textToCopy:t}),(0,d.jsx)(ea.Tooltip,{tooltip:(0,d.jsx)(F.Text,{children:t}),children:function(e,n){return(0,d.jsx)(F.Text,(0,l._)((0,s._)({ref:n},e),{multiline:!1,css:eh.text,children:t}))}}),m?(0,d.jsx)(H.View,{justify:"center",children:null==m?void 0:m()}):null]}),(0,d.jsxs)(H.View,{css:ev.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:u?"Copy secret value":c,textToCopy:u?r:""}),i&&u?(0,d.jsx)(et.Input,{value:r,onChange:function(){},placeholder:"Enter your secret value",css:ev.input,"data-sensitive":r&&a}):(0,d.jsx)(F.Text,{multiline:!1,css:ev.text,children:r?(0,d.jsx)(d.Fragment,{children:a?"•".repeat(8):r}):"Enter your secret value"}),(0,d.jsx)(ee.IconButton,{alt:"Toggle Secret",tooltipContents:c,tooltipBehavior:u?"hidden":void 0,onClick:p,disabled:!u,children:a?(0,d.jsx)(es.default,{}):(0,d.jsx)(el.default,{})})]}),null==f?void 0:f()]})}function eS(e){var t=e.secret,i=e.onUpdateSecret,a=e.onDeleteSecret,o=e.onSearchSecret,u=e.editAuthorizationErrorMessage,c=(0,n._)((0,r.useState)(""===t.value?{key:t.key,value:""}:null),2),p=c[0],f=c[1],m=(0,n._)((0,r.useState)(!1),2),h=m[0],g=m[1],v=(0,n._)((0,r.useState)(!0),2),x=v[0],y=v[1],b=(0,r.useMemo)(function(){var e,n,r,i,a,o;return n=null!=(e=null==p?void 0:p.key)?e:t.key,null!=(i=null==(o=null==(a=X.find(function(e){return e.pattern.test(n)}))||null==(r=a.presetSecrets)?void 0:r.find(function(e){return e.key===n}))?void 0:o.link)?i:null==a?void 0:a.defaultLink},[null==p?void 0:p.key,t.key]),S=void 0===u;return p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e_,{keyValue:p.key,onKeyChange:function(e){return f(function(t){return t?(0,l._)((0,s._)({},t),{key:e}):t})},value:p.value,onValueChange:function(e){return f(function(t){return t?(0,l._)((0,s._)({},t),{value:e}):t})},isSensitive:x,onToggleSensitive:function(){return y(!x)},renderValueExtra:function(){return b&&(0,d.jsx)(F.Text,{variant:"small",children:(0,d.jsx)("a",{href:b,target:"_blank",children:"Where do I find this?"})})},onDelete:function(){return g(!0)},onCancel:function(){return f(null)},onSave:function(){i(t.key,{key:p.key.trim(),value:p.value}),f(null)},saveButtonText:""===t.value?"Add Secret":"Update Secret"}),h&&(0,d.jsx)(ej,{keys:[t.key],isOpen:h,onClose:function(){return g(!1)},onConfirm:function(){return a(t.key)}})]}):(0,d.jsx)(eb,{name:t.key,value:t.value,isEditing:!1,isSensitive:x,canEdit:S,editDisabledMessage:u,onToggleSensitive:function(){return y(!x)},renderSuffix:function(){return(0,d.jsxs)(U.Surface,{elevated:!0,br:4,children:[(0,d.jsxs)(er.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(ee.IconButton,{size:32,tooltipBehavior:"hidden",alt:"Options",children:(0,d.jsx)(ec.default,{})}),children:[S?(0,d.jsx)(er.MenuItem,{label:"Edit",icon:(0,d.jsx)(eo.default,{}),onAction:function(){return f({key:t.key,value:t.value})}}):null,(0,d.jsx)(er.MenuItem,{label:"Find Usages",icon:(0,d.jsx)(ed.default,{}),onAction:function(){return o(t.key)}}),S?(0,d.jsx)(er.MenuItem,{label:"Delete",icon:(0,d.jsx)(ep.default,{}),isDestructive:!0,onAction:function(){return g(!0)}}):null]}),h?(0,d.jsx)(ej,{keys:[t.key],isOpen:h,onClose:function(){return g(!1)},onConfirm:function(){return a(t.key)}}):null]})}})}function e_(e){var t=e.keyLabel,n=e.keyValue,i=e.onKeyChange,a=e.valueLabel,o=e.value,s=e.onValueChange,l=e.isSensitive,u=e.onToggleSensitive,c=e.isValueReadOnly,p=e.disableValueVisibilityToggle,f=e.renderValueExtra,m=e.onDelete,h=e.onCancel,g=e.onSave,v=e.saveButtonText,x=e.deleteButtonText,y=e.isSaving,b=e.keyError,S=(0,r.useMemo)(function(){return null!==n.match(D.POSIX_ENV_VAR_PATTERN)},[n]),_=b||(!S&&n?D.POSIX_ENV_VAR_ERROR:void 0);return(0,d.jsxs)(H.View,{gap:8,onKeyDown:function(e){"Enter"===e.key&&g()},children:[(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsx)(H.View,{css:ey.keySection,gap:2,children:(0,d.jsxs)(ei.TextField,{validate:function(){return b||(!S&&n?D.POSIX_ENV_VAR_ERROR:void 0)},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:n,onChange:i,isInvalid:!!_,children:[(0,d.jsx)(en.Label,{color:"dimmer",multiline:!1,css:ey.titleLabel,children:void 0===t?"Key":t}),(0,d.jsx)(et.Input,{placeholder:"SECRET_KEY",autoComplete:"off",css:em.valueInput,autoFocus:!0}),(0,d.jsx)(Z.FieldError,{children:_})]})}),(0,d.jsxs)(H.View,{grow:!0,shrink:!0,gap:2,children:[(0,d.jsxs)(ei.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:o,onChange:function(e){return null==s?void 0:s(e)},children:[(0,d.jsxs)(en.Label,{color:"dimmer",multiline:!1,css:ey.titleLabel,children:[void 0===a?"Value":a," ",(0,d.jsx)(ee.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:u,disabled:p,size:12,children:l?(0,d.jsx)(es.default,{}):(0,d.jsx)(el.default,{})})]}),(0,d.jsx)(et.Input,{"data-sensitive":l,css:em.valueInput,readOnly:c,autoComplete:"off"})]}),null==f?void 0:f()]})]}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[m?(0,d.jsx)(L.Button,{size:"small",text:void 0===x?"Delete":x,colorway:"negative",onClick:m,disabled:!!_,loading:y}):null,(0,d.jsx)(H.View,{grow:!0}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsx)(L.Button,{size:"small",text:"Cancel",onClick:h,loading:y}),(0,d.jsx)(L.Button,{size:"small",colorway:"primary",text:v,disabled:!n.length||!!_||!S,loading:y,onClick:g})]})]})]})}function ew(e){var t=e.link,i=e.onUpdateLink,a=e.onUnlink,s=e.existingKeys,l=(0,n._)((0,r.useState)(null),2),u=l[0],p=l[1],f=(0,n._)((0,r.useState)(!0),2),m=f[0],h=f[1],g=(0,n._)((0,r.useState)(!1),2),v=g[0],x=g[1],y=(0,n._)((0,r.useState)(!1),2),b=y[0],S=y[1],_=u&&s.has(u.alias)&&u.alias!==t.alias?"A secret with this name already exists":void 0;return u?(0,d.jsx)(e_,{keyLabel:"Name",keyValue:u.alias,onKeyChange:function(e){return p({alias:e})},value:t.secret.value,isSensitive:m,onToggleSensitive:function(){return h(!m)},isValueReadOnly:!0,onDelete:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:S(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,a(t.id)];case 2:return e.sent(),[3,4];case 3:return S(!1),[7];case 4:return[2]}})})()},onCancel:function(){return p(null)},onSave:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:if(_)return[2];x(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,i(t.id,u.alias.trim())];case 2:return e.sent(),p(null),[3,4];case 3:return x(!1),[7];case 4:return[2]}})})()},saveButtonText:"Update",deleteButtonText:"Unlink",isSaving:v||b,keyError:_}):(0,d.jsx)(H.View,{css:em.linkedSecret,"data-unlinking":b,children:(0,d.jsx)(eb,{name:t.alias,value:t.secret.value,isEditing:!1,isSensitive:m,canEdit:!0,onToggleSensitive:function(){return h(!m)},renderKeyExtra:function(){return(0,d.jsx)(ea.Tooltip,{tooltip:"Linked to Account Secret: ".concat(t.secret.name),children:(0,d.jsx)(eu.default,{color:O.tokens.accentPrimaryStronger})})},renderSuffix:function(){return(0,d.jsxs)(er.PopupMenu,{trigger:(0,d.jsx)(U.Surface,{elevated:!0,br:4,children:(0,d.jsx)(ee.IconButton,{size:32,alt:"Options",children:(0,d.jsx)(ec.default,{})})}),children:[(0,d.jsx)(er.MenuItem,{label:"Edit",icon:(0,d.jsx)(eo.default,{}),onAction:function(){return p({alias:t.alias})}}),(0,d.jsx)(er.MenuItem,{label:"Unlink",icon:(0,d.jsx)(ep.default,{}),isDestructive:!0,onAction:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:S(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,a(t.id)];case 2:return e.sent(),[3,4];case 3:return S(!1),[7];case 4:return[2]}})})()}})]})}})})}function ej(e){var t=e.keys,n=e.isOpen,r=e.onClose,i=e.onConfirm,a=e.loading,o=t.length>1,s=(0,Y.useSupportsAgent)();return(0,d.jsx)(B.Modal,{isOpen:n,onRequestClose:r,children:(0,d.jsxs)(H.View,{gap:12,children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:o?"Delete secrets?":"Delete ".concat(t[0],"?")}),(0,d.jsxs)(F.Text,{color:"dimmer",children:["Are you sure you would like to delete"," ",o?"these secrets (".concat(t.join(", "),")"):"this secret","? This cannot be undone."]}),s?(0,d.jsx)(V.StatusBanner,{icon:(0,d.jsx)(ef.default,{}),text:"Deleting these secrets may break historical agent checkpoint previews that depend on them. Previews always use the latest secrets.",colorway:"warning"}):null,(0,d.jsxs)(H.View,{justify:"end",row:!0,gap:8,children:[(0,d.jsx)(L.Button,{text:"Cancel",onClick:r}),(0,d.jsx)(L.Button,{text:"Delete",colorway:"negative",onClick:i,loading:a})]})]})})}e.s(["LinkedSecretItem",()=>ew,"SecretItem",()=>eS,"SecretKey",()=>eg,"SecretValue",()=>ex],837605);var eT=e.i(988676),eD=e.i(604963),ek=e.i(679668),eC=e.i(442060),eE=e.i(368357),eA=e.i(761922),eI=e.i(363201),eR=e.i(940745),eP=e.i(952030),eM=e.i(644230);e.i(630937);var eO=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eN(e){var t=e.onClose,i=e.onAdd,a=e.otherKeys,o=(0,n._)((0,r.useState)(!0),2),u=o[0],c=o[1],p=(0,n._)((0,r.useState)({key:"",value:""}),2),f=p[0],m=p[1],h=(0,n._)((0,r.useState)(function(){var e=Math.floor(Math.random()*eO.length);return eO[e]}),1)[0],g=(0,r.useMemo)(function(){return null!==f.key.match(D.POSIX_ENV_VAR_PATTERN)},[f.key]),v=(0,r.useMemo)(function(){return a.includes(f.key)?"Secret already exists":!g&&f.key?D.POSIX_ENV_VAR_ERROR:void 0},[a,f.key,g]),x=f.key.length>0&&!v,y=function(){x&&(i({key:f.key.trim(),value:f.value}),m({key:"",value:""}))};return(0,d.jsxs)(H.View,{gap:8,py:8,onKeyDown:function(e){"Enter"===e.key&&y()},children:[(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsx)(H.View,{clsx:eM.default.addSecretTitleContainer,children:(0,d.jsxs)(ei.TextField,{validate:function(){return v},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return m(function(t){return(0,l._)((0,s._)({},t),{key:e})})},isInvalid:!!v,children:[(0,d.jsx)(en.Label,{color:"dimmer",multiline:!1,children:"Key"}),(0,d.jsx)(et.Input,{placeholder:h,autoComplete:"off",autoFocus:!0}),(0,d.jsx)(Z.FieldError,{children:v})]})}),(0,d.jsx)(H.View,{grow:!0,shrink:!0,gap:4,children:(0,d.jsxs)(ei.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return m(function(t){return(0,l._)((0,s._)({},t),{value:e})})},children:[(0,d.jsxs)(en.Label,{color:"dimmer",multiline:!1,clsx:eM.default.addSecretValueLabel,children:["Value",(0,d.jsx)(ee.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!u)},size:12,children:u?(0,d.jsx)(es.default,{}):(0,d.jsx)(el.default,{})})]}),(0,d.jsx)(et.Input,{"data-sensitive":u,autoComplete:"off"})]})})]}),(0,d.jsxs)(H.View,{row:!0,gap:8,justify:"end",children:[(0,d.jsx)(L.Button,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,d.jsx)(L.Button,{size:"small",text:"Add Secret",colorway:"primary",disabled:!x,onClick:y})]})]})}function eL(e){var t=e.secrets,i=e.onUpdateSecret,a=e.onDeleteSecret,o=e.onAddSecret,s=e.showAddSecret,l=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,m=e.userSecrets,h=e.onUpdateLink,g=e.onUnlink,v=(0,r.useMemo)(function(){return new Set((0,u._)(t.keys()).concat((0,u._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[t,f]),x=(0,r.useMemo)(function(){return(0,u._)(t.entries()).filter(function(e){var t=(0,n._)(e,2);return""===(t[0],t[1])})},[t]),y=(0,r.useMemo)(function(){return(0,u._)(t.entries()).filter(function(e){var t=(0,n._)(e,2);return""!==(t[0],t[1])})},[t]);return s||0!==x.length||0!==y.length||(null==f?void 0:f.length)?(0,d.jsxs)(H.View,{py:8,gap:8,children:[0!==x.length&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(H.View,{px:8,gap:8,children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,d.jsx)(F.Text,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,d.jsx)(H.View,{gap:8,children:x.map(function(e){var t=(0,n._)(e,2),r=t[0],o=t[1];return(0,d.jsx)(U.Surface,{elevated:!0,clsx:eM.default.secretItem,p:8,children:(0,d.jsx)(eS,{secret:{key:r,value:o},onUpdateSecret:i,onDeleteSecret:a,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},r)})})]}),(0,d.jsx)(eT.DividerH,{})]}),(0,d.jsxs)(H.View,{gap:8,children:[s?(0,d.jsx)(eN,{onClose:c,onAdd:o,otherKeys:Object.keys(t)}):null,y.map(function(e){var t=(0,n._)(e,2),r=t[0],o=t[1];return(0,d.jsx)(eS,{secret:{key:r,value:o},onUpdateSecret:i,onDeleteSecret:a,onSearchSecret:l,editAuthorizationErrorMessage:p},r)}),f&&f.length>0?(0,d.jsxs)(d.Fragment,{children:[y.length>0?(0,d.jsx)(eT.DividerH,{}):null,f.map(function(e){return(0,d.jsx)(ew,{link:e,onUpdateLink:h,onUnlink:g,userSecrets:m,existingKeys:v},e.id)})]}):null]})]}):null}function eB(e){var t,i=e.secrets,a=e.activeFile,o=(0,n._)((0,r.useState)(null==(t=i.keys().next())?void 0:t.value),2),s=o[0],l=o[1],c=(0,_.default)(a);return void 0!==s&&c&&(0,S.getEnvCodeForLanguage)(a,s)&&i.size>0?(0,d.jsxs)(H.View,{px:8,py:16,gap:8,children:[(0,d.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(F.Text,{multiline:!1,children:"Access secret"}),(0,d.jsx)(ek.Select,{"aria-label":"Select secret to access",clsx:eM.default.secretSelect,items:(0,u._)(i.keys()).map(function(e){return{title:e}}),selectedItem:{title:s},onChange:function(e){return l(e.title)}})]}),(0,d.jsx)(S.default,{elevated:!0,keyName:s,filePath:a})]}):null}var eV=function(e){var t,n=e.performPaneOperation,r=e.showAddSecret,i=e.setShowAddSecret,a=e.secrets,s=e.editAuthorization,l=e.error,u=e.dismissibleElement,p=u.isDone,m=u.setAsDone,y=e.linkedSecrets,S=e.userSecrets,_=e.onUpdateLink,T=e.onUnlink,D=e.rawEditorRef,k=(0,h.default)().showConfirm,C=(0,x.default)().secrets,E=(0,j.useRunInfo)().isRunning,A=(0,w.useCursorFilepath)(),I=function(){i(!1)},R=a.size>0||y&&y.length>0;return!s||l?(0,d.jsx)(b.EnvEditorUnauthorized,{message:null!=(t=null==l?void 0:l.message)?t:"Unable to determine secret eligibility, please refresh your browser."}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(H.View,{clsx:eM.default.envEditorBody,grow:!0,shrink:!0,children:[s.isAuthorized&&!p?(0,d.jsx)(H.View,{p:8,children:(0,d.jsx)(V.StatusBanner,{icon:(0,d.jsx)(eI.default,{}),closable:!0,closeAction:function(){return m()},colorway:"primary",text:(0,d.jsxs)(F.Text,{clsx:eM.default.secretAccessibilityText,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,d.jsx)("a",{href:f.LINKS_DOCS.SECRETS,target:"_blank",children:"our documentation"}),"."]})})}):null,R||!1!==r?null:(0,d.jsx)(b.EnvEditorEmpty,{performPaneOperation:n,editSecretsAuthz:s}),(0,d.jsx)(eL,{secrets:a,onUpdateSecret:function(e,t){return(0,o._)(function(){var n;return(0,c._)(this,function(r){return(0,g.track)(v.events.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),(n=new Map(a)).delete(e),n.set(t.key,t.value),C.replaceAll(n),[2]})})()},onDeleteSecret:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){return(0,g.track)(v.events.ENV_EDITOR_USED,{action:"deleted"}),C.removeEntries(e),[2]})})()},onAddSecret:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){return(0,g.track)(v.events.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),C.addEntries([{key:e.key,value:e.value}]),E&&k("Re-run your App to use this secret"),I(),[2]})})()},showAddSecret:r,onSearch:function(e){return n({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:s.isAuthorized?void 0:s.message,onClose:I,linkedSecrets:y,userSecrets:S,onUpdateLink:_,onUnlink:T}),A&&R?(0,d.jsx)(eB,{secrets:a,activeFile:A}):null]}),(0,d.jsx)(W,{ref:D,secrets:a,update:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return[4,C.replaceAll(e)];case 1:return t.sent(),[2]}})})()},disabledMessage:s.isAuthorized?void 0:s.message})]})};function eU(e,t){return(0,p.useUnlinkSharedSecretsMutation)({update:function(n,r,i){var a=r.data,o=i.variables;(null==a?void 0:a.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&n.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!o)return e;var n,r,i=null!=(r=null==(n=e.getRepl.sharedSecretLinks)?void 0:n.filter(function(e){return!o.input.ids.includes(e.id)}))?r:[];return t(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function eF(e,t){return(0,p.useLinkSharedSecretsMutation)({update:function(n,r){return(0,o._)(function(n,r){var i,a,o,d,f,m,h;return(0,c._)(this,function(c){switch(c.label){case 0:if((null==(i=r.data)?void 0:i.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return o=i.linkSharedSecrets.links,m=(null==(d=n.readQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}}))||null==(a=d.getRepl)?void 0:a.__typename)==="Repl"&&null!=(f=d.getRepl.sharedSecretLinks)?f:[],[4,t((h=(0,u._)(m).concat((0,u._)(o))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),n.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:h})}):e}),c.label=2;case 2:return[2]}})}).apply(this,arguments)}})}function eH(e){var t,b,S,_,w,j=e.performPaneOperation,D=(0,a.default)(),C=(0,x.default)().secrets,E=(0,n._)(eU(D,C.replaceAllExternalSecrets),1)[0],A=(0,n._)(eF(D,C.replaceAllExternalSecrets),1)[0],I=(0,n._)((t=(0,x.default)().secrets,(0,p.useUpdateSharedSecretLinkMutation)({update:function(e,n){var r=n.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:D}},function(e){if((null==e||null==(n=e.getRepl)?void 0:n.__typename)!=="Repl")return e;var n,r,a,o=null!=(a=null==(r=e.getRepl.sharedSecretLinks)?void 0:r.map(function(e){return e.id===i.id?i:e}))?a:[];return t.replaceAllExternalSecrets(o.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:o})})})}}})),1)[0],R=(0,m.useFlag)({controlName:"flag-manage-environment-tool",default:!1}),P=(0,n._)((0,r.useState)(new Map),2),M=P[0],O=P[1],N=(0,n._)((0,r.useState)(!1),2),B=N[0],V=N[1],U=(0,n._)((0,r.useState)(!1),2),G=U[0],z=U[1],q=(0,n._)((0,r.useState)(!1),2),W=q[0],K=q[1],$=(0,n._)((0,r.useState)(!1),2),Y=$[0],X=$[1],Q=(0,n._)((0,r.useState)(!1),2),J=Q[0],Z=Q[1],ee=(0,r.useRef)(null),et=(0,h.default)(),en=(0,y.useMemoedDismissibleElement)("editors-have-secret-access-warning"),ei=(0,p.useSecretsPaneAuthorizationsQuery)({variables:{replId:D}}),eo=ei.data,es=ei.loading,el=ei.error,ec=(null==eo?void 0:eo.getRepl.__typename)==="Repl"?eo.getRepl:void 0,ed=null==ec?void 0:ec.authorizations.editSecrets,ep=(0,p.useReplLinkedSecretsQuery)({variables:{replId:D}}),ef=ep.data,em=ep.loading,eh=(0,p.useWorkspaceSecretsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,eg=(0,r.useMemo)(function(){if((null==ef?void 0:ef.getRepl.__typename)==="Repl"&&ef.getRepl.sharedSecretLinks)return ef.getRepl.sharedSecretLinks},[ef]),ev=(0,r.useMemo)(function(){var e;return(null==eh||null==(e=eh.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?eh.currentUser.secrets.items:[]},[eh]),ex=(0,r.useMemo)(function(){return new Set((0,u._)(M.keys()).concat((0,u._)((null==eg?void 0:eg.map(function(e){return e.alias}))||[])))},[M,eg]),ey=(0,r.useMemo)(function(){return ev.map(function(e){return{id:e.id,value:e.value||""}})},[ev]);return((0,r.useEffect)(function(){(0,g.trackOnce)(v.events.ENV_EDITOR_USED,{action:"opened",tab:"repl"})},[]),(0,r.useEffect)(function(){var e=C.watch(function(e){O(e)});return function(){e()}},[C,O]),!M||es||em||en.isLoading)?(0,d.jsx)(H.View,{align:"center",justify:"center",clsx:eM.default.loadingContainer,children:(0,d.jsx)(eR.default,{size:24})}):(0,d.jsxs)(H.View,{css:eM.default.body,grow:!0,p:8,gap:12,shrink:!0,children:[(0,d.jsxs)(H.View,{children:[(0,d.jsxs)(H.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsxs)(er.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(L.Button,{text:"More",size:"small"}),children:[(0,d.jsx)(er.MenuItem,{label:"Docs",icon:(0,d.jsx)(eC.default,{}),href:f.LINKS_DOCS.SECRETS,target:"_blank"}),(0,d.jsx)(er.MenuItem,{label:"Edit as JSON",icon:(0,d.jsx)(eE.default,{}),onAction:function(){var e;null==(e=ee.current)||e.openJSONEditor()},isDisabled:!(null==ed?void 0:ed.isAuthorized)||(null==(b=ee.current)?void 0:b.isSaving)===!0||!!(null==(S=ee.current)?void 0:S.disabledMessage)}),(0,d.jsx)(er.MenuItem,{label:"Edit as .env",icon:(0,d.jsx)(eA.default,{}),onAction:function(){var e;null==(e=ee.current)||e.openEnvEditor()},isDisabled:!(null==ed?void 0:ed.isAuthorized)||(null==(_=ee.current)?void 0:_.isSaving)===!0||!!(null==(w=ee.current)?void 0:w.disabledMessage)})]}),(null==ec?void 0:ec.isOwner)?(0,d.jsxs)(eD.PopoverTrigger,{label:"Link Account Secrets",isOpen:J,onOpenChange:Z,placement:"bottom",offset:8,children:[(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(eu.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["Link"," ",(0,d.jsx)("span",{css:eM.default.tabExtraText,children:"Account Secrets"})]}),size:"small",disabled:!(null==ed?void 0:ed.isAuthorized)}),(0,d.jsx)(T.default,{secrets:ev,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets",existingKeys:ex,onSelectSecrets:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,A({variables:{input:{resourceId:D,resourceType:i.SharedSecretResourceType.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return t.sent(),et.showConfirm("Secrets linked to this App"),Z(!1),(0,g.track)(v.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return t.sent(),et.showError("Failed to link secrets"),[3,3];case 3:return[2]}})})()},linkedSecrets:eg})]}):null,(0,d.jsx)(ea.Tooltip,{isDisabled:null==ed?void 0:ed.isAuthorized,tooltip:null==ed?void 0:ed.message,children:(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(eP.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["New ",(0,d.jsx)("span",{css:eM.default.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==ed?void 0:ed.isAuthorized),onClick:function(){return V(!0)}})})]})]}),(0,d.jsx)(eV,{performPaneOperation:j,showAddSecret:B,setShowAddSecret:V,secrets:M,dismissibleElement:en,editAuthorization:ed,error:el,linkedSecrets:eg,userSecrets:ey,rawEditorRef:ee,onUpdateLink:function(e,t){return(0,o._)(function(){return(0,c._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,I({variables:{input:{id:e,resourceId:D,resourceType:i.SharedSecretResourceType.Repl,alias:t}}})];case 1:return n.sent(),et.showConfirm("Secret link updated"),[3,3];case 2:return n.sent(),et.showError("Failed to update secret link"),[3,3];case 3:return[2]}})})()},onUnlink:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E({variables:{input:{resourceId:D,resourceType:i.SharedSecretResourceType.Repl,ids:[e]}}})];case 1:return t.sent(),et.showConfirm("Secret unlinked"),[3,3];case 2:return t.sent(),et.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})})()}})]}),R?(0,d.jsxs)(H.View,{css:eM.default.configurationsSection,children:[(0,d.jsxs)(H.View,{css:eM.default.sectionHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:"Configurations"}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsxs)(er.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(L.Button,{text:"More",size:"small"}),children:[(0,d.jsx)(er.MenuItem,{label:"New published app configuration",icon:(0,d.jsx)(eP.default,{}),onAction:function(){return K(!0)}}),(0,d.jsx)(er.MenuItem,{label:"New testing configuration",icon:(0,d.jsx)(eP.default,{}),onAction:function(){return X(!0)}})]}),(0,d.jsx)(ea.Tooltip,{isDisabled:null==ed?void 0:ed.isAuthorized,tooltip:null==ed?void 0:ed.message,children:(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(eP.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["New ",(0,d.jsx)("span",{css:eM.default.tabExtraText,children:"configuration"})]}),colorway:"primary",size:"small",disabled:!(null==ed?void 0:ed.isAuthorized),onClick:function(){return z(!0)}})})]})]}),(0,d.jsx)(k.default,{performPaneOperation:j,editAuthorization:ed,showAddEnvVar:G,setShowAddEnvVar:z,showAddProdOnly:W,setShowAddProdOnly:K,showAddDevOnly:Y,setShowAddDevOnly:X})]}):null]})}function eG(e){var t=(0,a.default)(),o=(0,n._)(eF(t,e),1)[0],s=(0,r.useCallback)(function(e){return o({variables:{input:{resourceId:t,resourceType:i.SharedSecretResourceType.Repl,secrets:e}}})},[o,t]),l=(0,n._)(eU(t,e),1)[0];return{linkSecrets:s,unlinkSecrets:(0,r.useCallback)(function(e){return l({variables:{input:{resourceId:t,resourceType:i.SharedSecretResourceType.Repl,ids:e}}})},[l,t])}}e.s(["default",()=>eH,"useLinkSharedSecretsWithCache",()=>eF,"useUnlinkSharedSecretsWithCache",()=>eU],32967),e.s(["useLinkUnlinkSecrets",()=>eG],316799),e.i(242933);var ez=e.i(424360);e.i(925218);var eq=e.i(112077);function eW(){var e=(0,eq.useCreateObservable)(null),t=(0,r.useMemo)(function(){return new ez.Multicast(function(t){return e.subscribe(function(e){if(e){var n=!1,r=null,i=function(){var n=e.scrollHeight-(e.scrollTop+e.clientHeight);n!==r&&(r=n,t.next(n))},a=function(){n||(n=!0,requestAnimationFrame(function(){n=!1,i()}))};return i(),e.addEventListener("scroll",a,{passive:!0}),function(){return e.removeEventListener("scroll",a)}}})})},[e]);return{setElement:(0,r.useCallback)(function(t){return e.set(t)},[e]),distanceFromBottom:t}}e.s(["useDistanceFromBottom",()=>eW],97845)},652488,e=>{e.v({button:"ScrollToLatestButton-module__3hieVa__button",buttonContent:"ScrollToLatestButton-module__3hieVa__buttonContent"})},501431,e=>{e.v({content:"AutoScroller-module__ZCuA_W__content",root:"AutoScroller-module__ZCuA_W__root",scroll:"AutoScroller-module__ZCuA_W__scroll",thumb:"AutoScroller-module__ZCuA_W__thumb",thumbUi:"AutoScroller-module__ZCuA_W__thumbUi",track:"AutoScroller-module__ZCuA_W__track"})},488174,e=>{e.v({bordered:"Pane-module__yukHDW__bordered",divider:"Pane-module__yukHDW__divider",elevated:"Pane-module__yukHDW__elevated",header:"Pane-module__yukHDW__header",left:"Pane-module__yukHDW__left",middleText:"Pane-module__yukHDW__middleText",root:"Pane-module__yukHDW__root"})},495663,e=>{e.v({envItem:"EnvironmentRequested-module__YzIbEq__envItem",envList:"EnvironmentRequested-module__YzIbEq__envList"})},932708,e=>{e.v({envHeader:"index-module__VR971W__envHeader",envRow:"index-module__VR971W__envRow",envValueRoot:"index-module__VR971W__envValueRoot",input:"index-module__VR971W__input",primaryButton:"index-module__VR971W__primaryButton"})},272643,e=>{e.v({requestedSecretsList:"SecretsRequested-module__FbxOSG__requestedSecretsList",requestedSecretsListItem:"SecretsRequested-module__FbxOSG__requestedSecretsListItem",root:"SecretsRequested-module__FbxOSG__root",seeAllButton:"SecretsRequested-module__FbxOSG__seeAllButton"})},147721,376363,608434,901708,653412,80858,922463,245329,822229,613909,593366,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(131141),s=e.i(721281),l=e.i(878420),u=e.i(64386),c=e.i(886513),d=e.i(467951),p=e.i(649960),f=e.i(480028),m=e.i(446530),h=e.i(613355),g=e.i(764848),v=e.i(136540),x=e.i(929872),y=e.i(960178),b=e.i(625484);e.i(312917);var S=e.i(675186);e.i(925218);var _=e.i(112077),w=e.i(128068),j=e.i(802088),T=e.i(97845),D=e.i(98816),k=e.i(387491),C=e.i(315801),E=e.i(343252),A=e.i(31290),I=e.i(869226),R=e.i(337761),P=e.i(119468),M=function(e){return"object"==(void 0===e?"undefined":(0,P._)(e))&&null!=e&&1===e.nodeType},O=function(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e},N=function(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n,r=getComputedStyle(e,null);return O(r.overflowY,t)||O(r.overflowX,t)||!!(n=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e))&&(n.clientHeight<e.scrollHeight||n.clientWidth<e.scrollWidth)}return!1},L=function(e,t,n,r,i,a,o,s){return a<e&&o>t||a>e&&o<t?0:a<=e&&s<=n||o>=t&&s>=n?a-e-r:o>t&&s<n||a<e&&s>n?o-t+i:0},B=function(e){var t=e.parentElement;return null==t?e.getRootNode().host||null:t},V=function(e,t){if("undefined"==typeof document)return[];var n,r,i,a,o,s,l=t.scrollMode,u=t.block,c=t.inline,d=t.boundary,p=t.skipOverflowHiddenElements,f="function"==typeof d?d:function(e){return e!==d};if(!M(e))throw TypeError("Invalid target");for(var m=document.scrollingElement||document.documentElement,h=[],g=e;M(g)&&f(g);){if((g=B(g))===m){h.push(g);break}null!=g&&g===document.body&&N(g)&&!N(document.documentElement)||null!=g&&N(g,p)&&h.push(g)}for(var v=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,x=null!=(a=null==(i=window.visualViewport)?void 0:i.height)?a:innerHeight,y=null!=(o=window.scrollX)?o:pageXOffset,b=null!=(s=window.scrollY)?s:pageYOffset,S=e.getBoundingClientRect(),_=S.height,w=S.width,j=S.top,T=S.right,D=S.bottom,k=S.left,C="start"===u||"nearest"===u?j:"end"===u?D:j+_/2,E="center"===c?k+w/2:"end"===c?T:k,A=[],I=0;I<h.length;I++){var R=h[I],P=R.getBoundingClientRect(),O=P.height,V=P.width,U=P.top,F=P.right,H=P.bottom,G=P.left;if("if-needed"===l&&j>=0&&k>=0&&D<=x&&T<=v&&j>=U&&D<=H&&k>=G&&T<=F)break;var z=getComputedStyle(R),q=parseInt(z.borderLeftWidth,10),W=parseInt(z.borderTopWidth,10),K=parseInt(z.borderRightWidth,10),$=parseInt(z.borderBottomWidth,10),Y=0,X=0,Q="offsetWidth"in R?R.offsetWidth-R.clientWidth-q-K:0,J="offsetHeight"in R?R.offsetHeight-R.clientHeight-W-$:0,Z="offsetWidth"in R?0===R.offsetWidth?0:V/R.offsetWidth:0,ee="offsetHeight"in R?0===R.offsetHeight?0:O/R.offsetHeight:0;if(m===R)Y="start"===u?C:"end"===u?C-x:"nearest"===u?L(b,b+x,x,W,$,b+C,b+C+_,_):C-x/2,X="start"===c?E:"center"===c?E-v/2:"end"===c?E-v:L(y,y+v,v,q,K,y+E,y+E+w,w),Y=Math.max(0,Y+b),X=Math.max(0,X+y);else{Y="start"===u?C-U-W:"end"===u?C-H+$+J:"nearest"===u?L(U,H,O,W,$+J,C,C+_,_):C-(U+O/2)+J/2,X="start"===c?E-G-q:"center"===c?E-(G+V/2)+Q/2:"end"===c?E-F+K+Q:L(G,F,V,q,K+Q,E,E+w,w);var et=R.scrollLeft,en=R.scrollTop;Y=Math.max(0,Math.min(en+Y/ee,R.scrollHeight-O/ee+J)),X=Math.max(0,Math.min(et+X/Z,R.scrollWidth-V/Z+Q)),C+=en-Y,E+=et-X}A.push({el:R,top:Y,left:X})}return A},U=function(e){return!1===e?{block:"end",inline:"nearest"}:e===Object(e)&&0!==Object.keys(e).length?e:{block:"start",inline:"nearest"}};function F(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if("object"==(void 0===t?"undefined":(0,P._)(t))&&"function"==typeof t.behavior)return t.behavior(n?V(e,t):[]);if(n){var r=U(t),i=V(e,r),a="scrollBehavior"in document.body.style;i.forEach(function(e){var t=e.el,n=e.top,i=e.left;t.scroll&&a?t.scroll({top:n,left:i,behavior:r.behavior}):(t.scrollTop=n,t.scrollLeft=i)})}}function H(e,t,n){n&&F(e,t),t&&(void 0===t?"undefined":(0,P._)(t))==="object"?(t.skipOverflowHiddenElements=!0,F(e,t)):F(e,{skipOverflowHiddenElements:!0})}e.s(["default",()=>H],376363);var G=e.i(187505),z=e.i(754873),q=e.i(496019),W=e.i(652488),K=(0,f.cvarsFrom)("ScrollToLatestButton.module.css",["--opacity","--scale","--y","--bottom-offset","--pointer-events"]);function $(e){var t;return t={},(0,s._)(t,K.y,e?"-8px":"0px"),(0,s._)(t,K.scale,e?"1":"0.25"),(0,s._)(t,K.opacity,e?"1":"0"),(0,s._)(t,K.pointerEvents,e?"auto":"none"),t}function Y(e){var t=(0,G.useTrackClick)().trackClick,n=(0,a.useRef)(null);(0,I.useStyleSet)(n,e.show,$);var r=e.bottomOffset?(0,s._)({},K.bottomOffset,e.bottomOffset+"px"):void 0;return(0,i.jsxs)("button",{style:r,ref:n,clsx:W.default.button,css:z.interactive.filledAndOutlined,onClick:function(n){t({target:"scroll_to_latest_button",productArea:"agent"}),e.onClick(n)},children:[(0,i.jsx)(q.default,{size:12,clsx:W.default.buttonContent}),(0,i.jsx)(y.Text,{variant:"small",clsx:W.default.buttonContent,children:"Scroll to latest"})]})}e.s(["ScrollToLatestButton",()=>Y],608434);var X=e.i(501431),Q=(0,f.cvarsFrom)("AutoScroller.module.css",["--first-child-margin","--track-width","--track-height","--track-opacity","--track-pointer-events","--track-transition-delay","--thumb-ui-width","--thumb-width","--thumb-height","--thumb-transform","--scroll-height"]),J={height:Q.scrollHeight};function Z(e){var t=e.children,r=e.scrollerRef,o=e.shouldAutoScrollRef,d=e.scrollCache,p=e.scrollCacheKey,f=e.alignToEnd,m=e.autoScrollBehavior,h=e.buttonOffset,g=(0,c._)(e,["children","scrollerRef","shouldAutoScrollRef","scrollCache","scrollCacheKey","alignToEnd","autoScrollBehavior","buttonOffset"]),v=function(e){var t,r,i,o,s,l,u,c,d,p,f,m,h,g,v,x=e.shouldAutoScrollRef,y=e.scrollCache,b=e.scrollCacheKey,E=e.autoScrollBehavior,A=e.scrollToEndOnInitialRender,I=void 0===A||A,R=(0,_.useCreateObservable)(!1),P=(0,n._)((0,a.useState)(null),2),M=P[0],O=P[1],N=(0,n._)((0,a.useState)(null),2),L=N[0],B=N[1],V=(0,n._)((0,a.useState)(null),2),U=V[0],F=V[1],G=(0,D.default)(y),z=(t=(0,_.useCreateObservable)({scrollTop:0,scrollHeight:0,clientHeight:0}),r=(0,_.useCreateObservable)("idle"),(0,a.useEffect)(function(){var e=function(){n&&clearTimeout(n),i||(i=!0,requestAnimationFrame(function(){if(i=!1,L){var e=L.scrollHeight,a=L.scrollTop,o=L.clientHeight;r.set(t.current.scrollTop>=a?"backwards":"forwards"),t.set({scrollHeight:e,scrollTop:a,clientHeight:o}),n=setTimeout(function(){r.set("idle")},200)}}))};if(L){var n=null,i=!1;return e(),L.addEventListener("scroll",e),function(){L.removeEventListener("scroll",e),n&&clearTimeout(n)}}},[L,t,r]),{measurements:t,scrollDirection:r}),q=z.measurements,W=z.scrollDirection,K=(i=(0,_.useCreateObservable)({width:0,height:0}),(0,a.useEffect)(function(){if(L){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;s.target===L&&i.set({width:Math.round(s.contentRect.width),height:Math.round(s.contentRect.height)})}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}})).observe(L),function(){null==e||e.disconnect()}}},[L,i]),{scrollSize:i}).scrollSize,$=(s=(o={shouldAutoScrollRef:x,autoScrollBehavior:E,anchorEl:M,scrollEl:L,contentEl:U,scrollToEndOnInitialRender:I}).shouldAutoScrollRef,l=o.autoScrollBehavior,u=o.anchorEl,c=o.scrollEl,d=o.contentEl,f=void 0===(p=o.scrollToEndOnInitialRender)||p,h=(m=(0,n._)((0,a.useState)(!1),2))[0],g=m[1],v=(0,a.useRef)(l),(0,a.useEffect)(function(){if(u&&c&&d){var e=0,t=!f,n=new S.AnimationLoop(function(n,r){if(e+=n,!s.current)return e=0,g(!1),r();var i=c.scrollTop,a=Math.max(Math.min(u.getBoundingClientRect().top-c.getBoundingClientRect().top+i,c.scrollHeight-c.clientHeight),0);if("instant"===v.current||!t)return t=!0,e=0,c.scrollTop=a,g(!1),r();var o=(0,k.damp)({current:i,target:a,elapsed:e,delta:n});if(c.scrollTop=o,o===a)return e=0,g(!1),r();g(!0)}),r=new ResizeObserver(function(){s.current&&n.start()});return r.observe(u),r.observe(c),r.observe(d),s.current&&!f&&n.start(),function(){n.stop(),r.disconnect(),g(!1)}}},[s,u,c,d,f]),{autoScrolling:h}).autoScrolling;(0,a.useEffect)(function(){if(M&&L)return $?void R.set(!1):(0,C.inView)(M,function(){return R.set(!1),function(){R.set(!0)}},{root:L,rootMargin:"100px"})},[R,$,M,L]),(0,a.useEffect)(function(){if(M&&L){var e=G.current,t=e.get(b);return I&&(t?L.scrollTo(0,t):H(M,{behavior:"instant"})),function(){e.set(b,L.scrollTop)}}},[M,L,G,b,I]);var Y=(0,T.useDistanceFromBottom)(),X=Y.setElement,Q=Y.distanceFromBottom,J=(0,a.useMemo)(function(){return Q.select(function(e){return e<=4})},[Q]);(0,j.useObserver)(J,{next:function(e){e&&(x.current=!0)}});var Z=(0,w.useObservableRef)(J);return(0,a.useEffect)(function(){if(L)return L.addEventListener("wheel",e),L.addEventListener("pointerdown",t),L.addEventListener("pointerup",n),function(){L.removeEventListener("wheel",e),L.removeEventListener("pointerdown",t),L.removeEventListener("pointerup",n)};function e(e){if(e.deltaY<0){x.current=!1;return}}function t(){x.current=!1}function n(){Z.current&&(x.current=!0)}},[L,x,Z]),{showButton:R,anchorRef:O,scrollRef:(0,a.useCallback)(function(e){X(e),B(e)},[X]),scrollEl:L,contentRef:F,scrollToLatest:function(){M&&H(M,{behavior:"smooth"})},scrollSize:K,measurements:q,scrollDirection:W,autoScrolling:$}}({shouldAutoScrollRef:o,scrollCache:d,scrollCacheKey:p,autoScrollBehavior:void 0===m?"instant":m,scrollToEndOnInitialRender:!0}),x=v.showButton,y=v.anchorRef,A=v.scrollRef,R=v.contentRef,P=v.scrollToLatest,M=v.scrollSize,O=v.measurements,N=v.scrollEl,L=v.scrollDirection,B=(0,a.useRef)(null);(0,I.useStyleSet)(B,M,function(e){return(0,s._)({},Q.scrollHeight,e.height+"px")});var V="0";f&&(V="auto 0 0 0");var U=(0,E.useMergeRefs)([A,r],{breadcrumb:"client/components/AutoScroller.tsx"});return(0,i.jsxs)(b.View,{innerRef:B,clsx:X.default.root,style:(0,s._)({},Q.firstChildMargin,V),children:[(0,i.jsxs)(b.View,(0,u._)((0,l._)({clsx:X.default.scroll,grow:!0,shrink:!0,innerRef:U},g),{children:[(0,i.jsx)(b.View,{clsx:X.default.content,grow:!0,innerRef:R,children:t}),(0,i.jsx)(b.View,{innerRef:y}),N?(0,i.jsx)(ee,{shouldAutoScrollRef:o,scrollDirection:L,scrollEl:N,measurements:O}):null]})),(0,i.jsx)(Y,{bottomOffset:void 0===h?0:h,show:x,onClick:P})]})}function ee(e){var t=e.measurements,n=e.scrollDirection,r=e.scrollEl,o=e.shouldAutoScrollRef,l=(0,a.useRef)(null),u=(0,a.useRef)(!1),c=(0,a.useRef)(null),d=(0,a.useRef)(null),p=(0,a.useCallback)(function(){c.current&&clearTimeout(c.current),d.current&&clearTimeout(d.current)},[]),f=(0,a.useCallback)(function(){p(),u.current||(c.current=setTimeout(function(){(0,R.styleSet)(l,(0,s._)({},Q.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,R.styleSet)(l,(0,s._)({},Q.trackPointerEvents,"none"))},1200))},[p]);(0,a.useEffect)(function(){var e=function(e){var t;"idle"===e?f():(p(),(0,R.styleSet)(l,(t={},(0,s._)(t,Q.trackOpacity,o.current?"0":"1"),(0,s._)(t,Q.trackPointerEvents,"auto"),t)))};e(n.current);var t=n.subscribe(e);return function(){t(),p()}},[n,f,p,o]),(0,I.useStyleSet)(l,t,function(e){var t,n=e.clientHeight,r=e.clientHeight/e.scrollHeight*n,i=e.scrollHeight-e.clientHeight,a=i>0?e.scrollTop/i*(n-r):0,o=e.clientHeight>=e.scrollHeight?0:16;return t={},(0,s._)(t,Q.trackWidth,o+"px"),(0,s._)(t,Q.trackHeight,n+"px"),(0,s._)(t,Q.thumbWidth,o+"px"),(0,s._)(t,Q.thumbHeight,r+"px"),(0,s._)(t,Q.thumbTransform,"translate(0, ".concat(a,"px)")),t});var m=(0,a.useCallback)(function(e){var n=0;o.current=!1;var i=!1;(0,A.measureMouseMove)(e,{start:function(){n=r.scrollTop},move:function(e){var a=e.delta;i||(i=!0,requestAnimationFrame(function(){i=!1;var e=t.current,o=e.clientHeight,s=e.scrollHeight,l=a.y/o;r.scrollTop=n+s*l}))}})},[r,t,o]),h=(0,a.useRef)(!1),g=(0,a.useCallback)(function(e){if(e.target===e.currentTarget){var n=e.currentTarget.getBoundingClientRect(),i=(e.clientY-n.y)/n.height;r.scrollTop=t.current.scrollHeight*i}},[r,t]),v=(0,a.useCallback)(function(e){e.deltaY<0&&(o.current=!1),h.current||(h.current=!0,requestAnimationFrame(function(){h.current=!1,r.scrollTop=r.scrollTop+e.deltaY}))},[r,o]);return(0,i.jsx)(b.View,{innerRef:l,clsx:X.default.track,onMouseEnter:function(){u.current=!0,p()},onMouseLeave:function(){u.current=!1,f()},onWheel:v,onClick:g,children:(0,i.jsx)(b.View,{clsx:X.default.thumb,onPointerDown:m,children:(0,i.jsx)(b.View,{clsx:X.default.thumbUi})})})}e.s(["AutoScroller",()=>Z,"scrollSizeTokens",()=>J],901708);var et=e.i(264661),en=e.i(488174);function er(e){var t,r=e.left,o=e.title,l=e.right,u=e.elevated,c=void 0===u||u,f=e.bordered,m=e.onOpenPane,h=e.openPaneButtonAlt,S=e.children,_=e.renderChildrenOnlyWhenInView,w=void 0!==_&&_,j=e.showOpenPaneButton,T=(0,a.useRef)(null),D=(0,d.useInView)(T,{amount:0}),k=(0,a.useMemo)(function(){return!w||D},[D,w]),C=(0,n._)((0,a.useState)(0),2),E=C[0],A=C[1],I=(0,p.default)(function(e){!w||(!w||D)&&e.height>E&&A(e.height)},{type:"debounce",wait:500});return(0,i.jsxs)(b.View,{clsx:[en.default.root,(t={},(0,s._)(t,en.default.elevated,c),(0,s._)(t,en.default.bordered,void 0===f||f),t)],innerRef:T,children:[(0,i.jsxs)(b.View,{css:en.default.header,py:4,px:6,row:!0,gap:4,align:"center",justify:"space-between",children:[(0,i.jsx)(b.View,{css:en.default.left,align:"center",children:r}),(0,i.jsx)(b.View,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,i.jsx)(y.Text,{css:en.default.middleText,children:o})}),(0,i.jsxs)(b.View,{align:"center",row:!0,gap:2,children:[l,m&&(void 0===j||j)?(0,i.jsxs)(i.Fragment,{children:[l?(0,i.jsx)(g.DividerV,{css:en.default.divider}):null,(0,i.jsx)(v.IconButton,{alt:void 0===h?"Open Pane":h,onClick:m,children:(0,i.jsx)(et.default,{})})]}):null]})]}),(0,i.jsx)(x.Surface,{innerRef:I,style:{minHeight:E},elevated:c,children:k?S:null})]})}var ei=(0,m.cssRecord)({content:[(0,s._)({},h.media.max("mobileMax"),[h.rcss.maxHeight("calc(".concat(J.height," - 60px)")),h.rcss.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],package:[h.rcss.borderRadius(4),h.rcss.px(8),h.rcss.py(4),h.rcss.width("calc(50% - ".concat(f.tokens.space4,")"))]});function ea(e){var t=e.text,n=e.packageList,r=e.getPackageIcon,a=e.children,o=(0,c._)(e,["text","packageList","getPackageIcon","children"]);return(0,i.jsxs)(er,(0,u._)((0,l._)({renderChildrenOnlyWhenInView:!0},o),{children:[n.length?(0,i.jsx)(b.View,{css:ei.content,p:8,children:(0,i.jsxs)(b.View,{gap:8,children:[(0,i.jsx)(y.Text,{color:"dimmest",children:t}),(0,i.jsx)(b.View,{row:!0,wrap:"wrap",gap:8,children:n.map(function(e,t){return(0,i.jsx)(x.Surface,{css:ei.package,row:!0,gap:8,align:"center",justify:"space-between",elevated:!0,children:(0,i.jsxs)(b.View,{row:!0,gap:4,align:"center",children:[r(e),(0,i.jsx)(y.Text,{children:e})]})},t)})})]})}):null,a]}))}function eo(e){switch(e){case 1:default:return"development";case 2:return"production";case 3:return"shared"}}e.s(["EventPane",()=>er,"EventPaneWithPackages",()=>ea],653412),e.s(["getEnvironmentLabel",()=>eo],80858);var es=e.i(140487),el=e.i(616278),eu=e.i(357399),ec=e.i(495663);function ed(e){var t=e.envVars,n=e.openEnvEditor;return(0,i.jsx)(er,{left:(0,i.jsx)(eu.default,{size:16}),title:"".concat(t.length," environment ").concat(1===t.length?"variable":"variables"," requested"),children:(0,i.jsxs)(b.View,{gap:12,p:12,children:[(0,i.jsx)(b.View,{className:ec.default.envList,gap:4,children:t.map(function(e,t){return(0,i.jsxs)(b.View,{row:!0,align:"center",justify:"space-between",className:ec.default.envItem,gap:4,p:8,children:[(0,i.jsxs)(b.View,{row:!0,align:"center",gap:8,children:[(0,i.jsx)(y.Text,{variant:"small",color:"default",children:e.key}),(0,i.jsxs)(y.Text,{variant:"small",color:"dimmer",children:["(",eo(e.environment),")"]})]}),(0,i.jsx)(el.default,{size:16,color:f.tokens.accentPositiveDefault})]},"".concat(e.key,"-").concat(e.environment,"-").concat(t))})}),(0,i.jsx)(b.View,{children:(0,i.jsx)(es.Button,{onClick:n,variant:"outlined",size:"small",text:"See all environment variables"})})]})})}var ep=e.i(607278),ef=e.i(751273),em=e.i(841691),eh=e.i(90102),eg=e.i(940745),ev=e.i(932708);function ex(e){var s=e.openEnvEditor,l=e.envVars,u=e.onComplete,c=e.waitingOnUser,d=e.sessionId,p=e.addEnvEntries,f=(0,n._)((0,a.useState)(!0),2),m=f[0],h=f[1],g=(0,n._)((0,a.useState)(!1),2),x=g[0],S=g[1],_=(0,n._)((0,a.useState)(function(){return l.map(function(e){return{key:e.key,environment:e.environment,value:""}})}),2),w=_[0],j=_[1],T=(0,a.useCallback)(function(e,t){j((0,o.produce)(function(n){n[e].value=t}))},[]),D=(0,a.useMemo)(function(){return w.every(function(e){return""!==e.value.trim()})},[w]),k=(0,a.useCallback)(function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(!D||x)return[2];S(!0),e.label=1;case 1:return e.trys.push([1,,4,5]),[4,p(w)];case 2:return e.sent(),[4,u(w)];case 3:return e.sent(),[3,5];case 4:return S(!1),[7];case 5:return[2]}})})()},[w,D,u,x,p]);return c?(0,i.jsx)(er,{left:(0,i.jsx)(eu.default,{size:16}),title:"Environment Variables",children:(0,i.jsxs)(b.View,{gap:16,p:8,children:[(0,i.jsxs)(b.View,{gap:8,children:[(0,i.jsxs)(b.View,{className:"".concat(ev.default.envRow," ").concat(ev.default.envHeader),children:[(0,i.jsx)(b.View,{children:(0,i.jsx)(y.Text,{variant:"small",color:"dimmer",children:"Key"})}),(0,i.jsx)(b.View,{children:(0,i.jsx)(y.Text,{variant:"small",color:"dimmer",children:"Environment"})}),(0,i.jsxs)(b.View,{row:!0,align:"center",justify:"space-between",children:[(0,i.jsx)(y.Text,{variant:"small",color:"dimmer",children:"Value"}),(0,i.jsx)(ef.Tooltip,{tooltip:m?"Show values":"Hide values",children:(0,i.jsx)(v.IconButton,{alt:m?"Show values":"Hide values",tooltipBehavior:"hidden",onClick:function(){return h(!m)},size:18,children:m?(0,i.jsx)(em.default,{}):(0,i.jsx)(eh.default,{})})})]})]}),w.map(function(e,t){return(0,i.jsxs)(b.View,{className:ev.default.envRow,children:[(0,i.jsx)(b.View,{children:(0,i.jsx)(ep.Input,{value:e.key,disabled:!0,className:ev.default.input})}),(0,i.jsx)(b.View,{children:(0,i.jsx)(ep.Input,{value:eo(e.environment),disabled:!0,className:ev.default.input})}),(0,i.jsx)(b.View,{className:ev.default.envValueRoot,"data-sensitive":m,gap:8,children:(0,i.jsx)(ep.Input,{value:e.value,onChange:function(e){return T(t,e.target.value)},placeholder:"Enter value...",className:ev.default.input,autoComplete:"off"})})]},"".concat(e.key,"-").concat(e.environment))})]}),(0,i.jsxs)(b.View,{row:!0,gap:4,wrap:"wrap",children:[(0,i.jsx)(es.Button,{className:ev.default.primaryButton,onClick:k,disabled:!D,text:"Save Variables",loading:x,iconLeft:x?(0,i.jsx)(eg.default,{size:16}):void 0,colorway:"primary"}),(0,i.jsx)(es.Button,{onClick:s,variant:"outlined",text:"Open Env Editor"})]})]})}):(0,i.jsx)(ed,{envVars:l,openEnvEditor:s,sessionId:d})}e.s(["EnvironmentInput",()=>ex],147721);var ey=e.i(346715),eb=e.i(906368),eS=e.i(678420),e_=e.i(222342);function ew(e){var t=(0,n._)((0,a.useState)(e),2),r=t[0],i=t[1],o=(0,n._)((0,a.useState)(null),2),s=o[0],l=o[1];return e!==r&&(l(r),i(e)),s}e.s(["usePrevious",()=>ew],922463);var ej=e.i(858248),eT=e.i(709485),eD=e.i(509908),ek=e.i(368964),eC=e.i(466640),eE=e.i(207237),eA=e.i(546284),eI=e.i(32967),eR=e.i(127227),eP=e.i(739521),eM=(0,m.cssRecord)({secretName:[h.rcss.fontWeight.medium],secretValueCellHeader:[h.rcss.gap(4),h.rcss.color.foregroundDimmer],tableRow:[h.rcss.flex.column,h.rcss.gap(8)],secretsRow:[h.rcss.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:f.tokens.space24}],secretValueCell:[h.rcss.flex.column,h.rcss.gap(4),{width:"30%"}],confirmationMessage:[h.rcss.color.accentPositiveStronger,h.rcss.flex.row,h.rcss.align.center,h.rcss.gap(4)]});function eO(e){var t=e.value,r=e.label,o=(0,n._)((0,a.useState)(!1),2),s=o[0],l=o[1],u=(0,a.useCallback)(function(){l(function(e){return!e})},[]);return(0,i.jsxs)(b.View,{css:eM.secretValueCell,children:[(0,i.jsxs)(b.View,{css:eM.secretValueCellHeader,row:!0,align:"center",children:[(0,i.jsx)("span",{children:r}),(0,i.jsx)(v.IconButton,{alt:"Toggle Visibility",onClick:u,children:s?(0,i.jsx)(em.default,{}):(0,i.jsx)(eh.default,{})})]}),(0,i.jsx)(y.Text,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?t:"••••••••"})]})}function eN(e){var o=e.existingSecrets,s=e.accountSecrets,l=e.onContinue,u=e.step,c=e.linkedSecrets,d=e.onSecretsUpdated,p=e.replaceAllExternalSecrets,f=e.removeEntries,m=(0,e_.default)(),h=(0,n._)((0,eC.useUpdateSharedSecretsWithCache)(),1)[0],g=(0,eE.default)(),v=(0,n._)((0,eI.useLinkSharedSecretsWithCache)(g,p),1)[0],x=(0,n._)((0,eI.useUnlinkSharedSecretsWithCache)(g,p),1)[0],S=(0,n._)((0,a.useState)(o),2),_=S[0],w=S[1],j=(0,n._)((0,a.useState)(!0),2),T=j[0],D=j[1],k=(0,n._)((0,a.useState)(!1),2),C=k[0],E=k[1],A="done"===u,I=(0,n._)((0,a.useState)(new Set),2),R=I[0],P=I[1],M=(0,n._)((0,a.useState)(!1),2),O=M[0],N=M[1];(0,a.useEffect)(function(){w(o),1===o.length&&P(new Set([o[0].key]))},[o]);var L=(0,a.useCallback)(function(e){P(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),B=(0,a.useMemo)(function(){return new Map(s.map(function(e){return[e.name,e]}))},[s]),V=(0,a.useCallback)(function(){D(!1),l()},[l]),U=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,o,s,u,p,y;return(0,r._)(this,function(r){switch(r.label){case 0:if(0===R.size)return V(),[2];N(!0),r.label=1;case 1:if(r.trys.push([1,8,,9]),o=_.filter(function(e){return R.has(e.key)}),!((u=((null==c||null==(e=c.getRepl)?void 0:e.__typename)==="Repl"&&null!=(s=c.getRepl.sharedSecretLinks)?s:[]).filter(function(e){return o.some(function(t){return t.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,x({variables:{input:{resourceId:g,resourceType:ek.SharedSecretResourceType.Repl,ids:u}}})];case 2:r.sent(),r.label=3;case 3:return[4,f.apply(void 0,(0,ey._)(o.map(function(e){return e.key})))];case 4:return r.sent(),[4,h({variables:{input:{ownerType:ek.SharedSecretOwnerType.Account,secrets:o.map(function(e){var t,n;return{id:null!=(n=null==(t=B.get(e.key))?void 0:t.id)?n:"",name:e.key,value:e.value}})}}})];case 5:if(p=r.sent(),(0,ej.track)(eT.events.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null==(t=p.data)?void 0:t.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==(i=p.data)||null==(n=i.updateSharedSecrets)?void 0:n.updatedSecrets)))return[3,7];return[4,v({variables:{input:{resourceId:g,resourceType:ek.SharedSecretResourceType.Repl,secrets:p.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:r.sent(),(0,ej.track)(eT.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:p.data.updateSharedSecrets.updatedSecrets.length}),r.label=7;case 7:return D(!1),N(!1),E(!0),l(),(null==(a=p.data)?void 0:a.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==d||d(o.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return y=r.sent(),eb.captureException(y),m.showError("Something went wrong. Please try again."),N(!1),[3,9];case 9:return[2]}})})()},[h,x,_,R,l,V,B,m,v,g,c,d,f]),F=_.length,H=(0,eA.default)("Secret",F),G=1===F?"it":"them",z=R.size,q=(0,eA.default)("Secret",z),W=(0,a.useMemo)(function(){return 1===_.length?_[0]:null},[_]);return 0===F||"savingExistingSecrets"!==u&&"done"!==u?null:W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.Text,{children:['A Secret named "',W.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(es.Button,{text:"Replace Account Secret",onClick:U,loading:O,disabled:A}),(0,i.jsx)(es.Button,{text:"Not now",variant:"outlined",onClick:V,loading:O,disabled:A})]}),A&&C&&(0,i.jsxs)(b.View,{css:eM.confirmationMessage,children:[(0,i.jsx)(el.default,{size:16}),"Secret updated and linked"]})]}):(0,i.jsx)(eP.Modal,{isOpen:T,onRequestClose:V,children:(0,i.jsxs)(b.View,{gap:16,children:[(0,i.jsxs)(y.Header,{level:3,variant:"subheadDefault",children:[F," matching ",H," already exist",1===F?"s":""," in your account.",(0,i.jsx)("br",{}),"Would you like to replace ",G,"?"]}),(0,i.jsx)(b.View,{gap:8,children:_.map(function(e){var t=s.find(function(t){return t.name===e.key});return(0,i.jsxs)(b.View,{css:eM.tableRow,p:6,children:[(0,i.jsx)(b.View,{row:!0,align:"center",children:(0,i.jsx)(y.Text,{css:eM.secretName,children:e.key})}),(0,i.jsxs)(b.View,{css:eM.secretsRow,row:!0,align:"center",children:[(0,i.jsx)(b.View,{css:eM.checkboxCell,children:(0,i.jsx)(eR.Checkbox,{checked:R.has(e.key),onChange:function(){return L(e.key)}})}),(0,i.jsx)(eO,{label:"Existing",value:(null==t?void 0:t.value)||""}),(0,i.jsx)(eO,{label:"New",value:e.value})]})]},e.key)})}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(es.Button,{text:"Cancel",onClick:V,disabled:O}),(0,i.jsx)(es.Button,{colorway:"primary",text:"Replace ".concat(z," ").concat(q),onClick:U,loading:O})]})]})})}var eL=e.i(952030),eB=(0,m.cssRecord)({confirmationMessage:[h.rcss.color.accentPositiveStronger,h.rcss.flex.row,h.rcss.align.center,h.rcss.gap(4)]});function eV(e){var o=e.newSecrets,s=e.step,l=e.onContinue,u=e.linkSecrets,c=e.unlinkSecrets,d=e.linkedSecrets,p=e.onSecretsUpdated,f=e.removeEntries,m=(0,e_.default)(),h=(0,n._)((0,a.useState)(!1),2),g=h[0],v=h[1],x=(0,n._)((0,eC.useCreateSharedSecretsWithCache)(),1)[0],S=(0,n._)((0,a.useState)(!1),2),_=S[0],w=S[1],j=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,s,h;return(0,r._)(this,function(r){switch(r.label){case 0:v(!0),r.label=1;case 1:return r.trys.push([1,8,,9]),[4,x({variables:{input:{ownerType:ek.SharedSecretOwnerType.Account,secrets:o.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null==(e=(t=r.sent()).data)?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return i=t.data.createSharedSecrets.createdSecrets,[4,f.apply(void 0,(0,ey._)(o.map(function(e){return e.key})))];case 3:if(r.sent(),!((s=((null==d||null==(n=d.getRepl)?void 0:n.__typename)==="Repl"&&null!=(a=d.getRepl.sharedSecretLinks)?a:[]).filter(function(e){return o.some(function(t){return t.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,c(s)];case 4:r.sent(),r.label=5;case 5:return[4,u(i.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:r.sent(),null==p||p(i.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,ej.track)(eT.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:i.length}),r.label=7;case 7:return(0,ej.track)(eT.events.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),w(!0),l(),[3,9];case 8:return h=r.sent(),eb.captureException(h),m.showError("Something went wrong."),[3,9];case 9:return v(!1),[2]}})})()},[o,l,x,m,u,c,d,p,f]);return 0===o.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.Text,{children:["Would you like to save"," ",1===o.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===o.length?"it":"them"," in other Apps?"]}),o.length>1&&(0,i.jsx)(y.Text,{color:"dimmest",children:o.map(function(e){return e.key}).join(", ")}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(es.Button,{text:"Add to Account Secrets",onClick:j,iconLeft:(0,i.jsx)(eL.default,{}),loading:g,disabled:"savingNewSecrets"!==s||_}),(0,i.jsx)(es.Button,{text:"Not now",variant:"outlined",onClick:l,disabled:"savingNewSecrets"!==s||_,loading:g})]}),_&&(0,i.jsxs)(b.View,{css:eB.confirmationMessage,children:[(0,i.jsx)(el.default,{size:16}),(0,eA.default)("Secret",o.length)," saved to account"]})]})}var eU=e.i(292642),eF=e.i(530310),eH=e.i(504908),eG=e.i(272643);function ez(e){var t,r=e.watch,o=(0,n._)((0,a.useState)(new Map),2),s=o[0],l=o[1];return(0,a.useEffect)(function(){return r(l)},[r]),(0,i.jsx)(b.View,{clsx:eG.default.root,gap:4,children:(0,i.jsxs)(b.View,{gap:4,children:[(0,i.jsx)(b.View,{row:!0,align:"center",gap:6,justify:"space-between",children:(0,i.jsxs)(b.View,{row:!0,align:"center",gap:6,children:[(0,i.jsx)(eF.default,{color:f.tokens.foregroundDimmer}),(0,i.jsxs)(y.Text,{color:"dimmer",children:[(0,eA.default)("secrets",null==(t=e.keys)?void 0:t.length,!0)," requested"]}),(0,i.jsx)(y.Text,{variant:"small",multiline:!1,color:"dimmest",children:"•"}),(0,i.jsx)(es.Button,{clsx:eG.default.seeAllButton,variant:"underlinedOnHover",text:"See all secrets",onClick:e.openSecerets})]})}),(0,i.jsx)(b.View,{clsx:eG.default.requestedSecretsList,gap:6,row:!0,children:e.keys.map(function(e){return(0,i.jsxs)(b.View,{align:"center",row:!0,gap:4,clsx:eG.default.requestedSecretsListItem,p:4,children:[(null==s?void 0:s.get(e))?(0,i.jsx)(eU.default,{color:f.tokens.foregroundDimmer,size:12}):(0,i.jsx)(eH.default,{color:f.tokens.foregroundDimmest,size:12}),(0,i.jsx)(y.Text,{variant:"small",color:"dimmer",children:e})]},e)})})]})})}var eq=e.i(606867);function eW(e){return(0,i.jsxs)(eq.default,(0,u._)((0,l._)({viewBox:"0 0 16 16"},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var eK=e.i(880321),e$=e.i(85742),eY=(0,m.cssRecord)({root:[h.rcss.flex.row,h.rcss.justify.spaceBetween,h.rcss.align.center],metadata:[h.rcss.flex.column,h.rcss.gap(8),h.rcss.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(f.tokens.backgroundDefault," !important")}}]}),eX=(0,a.forwardRef)(function(e,t){var n=e.secretKey,r=e.secretValue,a=e.isSensitive,o=(0,c._)(e,["secretKey","secretValue","isSensitive"]);return(0,i.jsx)(e$.BaseListBoxItem,(0,u._)((0,l._)({},o),{ref:t,textValue:n,css:eY.root,children:(0,i.jsxs)("div",{css:eY.metadata,children:[(0,i.jsx)(y.Text,{color:"dimmer",variant:"small",css:eY.label,children:n}),(0,i.jsx)(y.Text,{variant:"small",css:eY.value,"data-sensitive":a,children:a?"********":r})]})}))}),eQ=(0,a.forwardRef)(function(e,t){var n=e.accountSecrets,r=e.onChange,o=e.onSelectionChange,s=e.value,l=e.isSensitive,u=e.readOnly,c=e.keyName,d=e.selectedKey,p=(0,a.useRef)(!1);return(0,i.jsx)(eK.ComboBox,{ref:t,triggerIcon:(0,i.jsx)(eW,{}),css:eY.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(c," Value"),isRequired:!0,isDisabled:u,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var t,i=n.find(function(t){return t.name===e});r(null!=(t=null==i?void 0:i.value)?t:""),o(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){p.current||(r(e),o(null))},inputValue:s,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:n.map(function(e){return(0,i.jsx)(eX,{isSensitive:l,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),eJ=e.i(967629),eZ=e.i(216373),e0=(0,eJ.css)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:f.tokens.space8,"> *":{height:"fit-content"}}),e1=(0,m.cssRecord)({root:[e0]}),e2=(0,m.cssRecord)({actions:[h.rcss.gap(4),h.rcss.flex.wrap],secretHeader:[e0,h.rcss.mb(4),h.rcss.fontSize("small"),h.rcss.color.foregroundDimmer,{lineHeight:f.tokens.lineHeightSmall,"> div":[h.rcss.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[h.rcss.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[h.rcss.flex.column,h.rcss.flex.growAndShrink(1)],input:[{backgroundColor:f.tokens.backgroundDefault}],secretValueFooter:[h.rcss.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),e4=(0,a.forwardRef)(function(e,t){var n=e.keyName,r=e.value,o=e.onChange,s=e.readOnly,l=e.accountSecrets,u=e.isSensitive,c=e.selectedKey,d=e.onSelectedKeyChange,p=(0,a.useMemo)(function(){return(0,ey._)(l).sort(function(e,t){return e.name===n?-1:+(t.name===n)})},[l,n]);return(0,i.jsxs)(b.View,{css:e1.root,children:[(0,i.jsx)(b.View,{children:(0,i.jsx)(ep.Input,{value:n,disabled:!0,css:e2.input})}),(0,i.jsx)(b.View,{css:e2.secretValueRoot,row:!0,align:"start","data-sensitive":u,children:(0,i.jsxs)(b.View,{css:e2.secretValueInput,children:[(0,i.jsx)(eQ,{ref:t,accountSecrets:p,onChange:o,onSelectionChange:d,value:r,isSensitive:u,readOnly:s,keyName:n,selectedKey:c}),c?(0,i.jsxs)(b.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(ef.Tooltip,{tooltip:"Link Account Secret to this Repl",children:(0,i.jsx)(eU.default,{color:f.tokens.accentPrimaryStronger})}),(0,i.jsxs)(y.Text,{variant:"small",color:"dimmer",css:e2.secretValueFooter,children:["Using ",c]})]}):null]})})]})});function e8(e){var s=e.keys,c=e.addEntries,d=e.removeEntries,p=e.onComplete,f=e.sessionId,m=e.waitingOnUser,h=e.replId,g=e.linkSecrets,x=e.unlinkSecrets,y=e.replaceAllExternalSecrets,S=e.watch,_=e.openSecrets,w=(0,e_.default)(),j=(0,n._)((0,a.useState)(!1),2),T=j[0],D=j[1],k=(0,n._)((0,a.useState)(!0),2),C=k[0],E=k[1],A=(0,eS.useWorkspaceSecretsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,I=(0,a.useMemo)(function(){var e;return(null==A||null==(e=A.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?A.currentUser.secrets.items:[]},[A]),R=(0,eS.useReplLinkedSecretsQuery)({variables:{replId:h}}).data,P=(0,n._)((0,a.useState)(s.map(function(e){return{key:e,value:""}})),2),M=P[0],O=P[1],N=(0,n._)((0,a.useState)(new Map),2),L=N[0],B=N[1];(0,a.useEffect)(function(){I&&M.every(function(e){return""===e.value})&&(O((0,o.produce)(function(e){e.forEach(function(e){var t=I.find(function(t){return t.name===e.key});t&&(e.value=t.value)})})),B((0,o.produce)(function(e){s.forEach(function(t){var n=I.find(function(e){return e.name===t});n&&e.set(t,n.name)})})))},[I,s,M]);var V=(0,n._)((0,a.useState)(m?"selecting":"done"),2),U=V[0],F=V[1],H=(0,n._)((0,a.useState)([]),2),G=H[0],z=H[1],q=(0,n._)((0,a.useState)([]),2),W=q[0],K=q[1],$=(0,n._)((0,a.useState)([]),2),Y=($[0],$[1]),X=(0,a.useRef)(!1);(0,a.useEffect)(function(){!X.current&&s&&((0,eD.trackAgentAnalyticsEvent)({action:"secrets_requested",secretsRequested:s,sessionId:f}),X.current=!0)},[s,f]);var Q=(0,a.useMemo)(function(){return M.every(function(e){return!!e.value})},[M]),J=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextNewSecrets,n=e.nextExistingEntries,r=e.nextMatchingEntries;t&&z(t),n&&K(n),r&&Y(r);var i=null!=t?t:G,a=null!=n?n:W,o={selecting:function(){return i.length>0?"savingNewSecrets":a.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return a.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};U in o&&F("function"==typeof o[U]?o[U]():o[U])},[W,G,U]),Z=ew(U),ee=(0,a.useRef)("done"===U);(0,a.useEffect)(function(){"selecting"===U||ee.current||(L.size>0&&(0,ej.track)(eT.events.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:L.size}),ee.current=!0,p().catch(function(e){eb.captureException(e),w.showError("Something went wrong. Please try again."),ee.current=!1,Z&&F(Z)}))},[p,U,L,w,Z]);var et=(0,a.useRef)(null),en=(0,a.useRef)(null),ei=(0,a.useCallback)(function(){en.current&&en.current.focus()},[]);return(0,i.jsxs)(b.View,{gap:8,children:[m?(0,i.jsx)(er,{left:(0,i.jsx)(eF.default,{size:16}),title:"Secrets",children:(0,i.jsxs)(b.View,{p:8,children:[(0,i.jsxs)(b.View,{css:e2.secretHeader,children:[(0,i.jsx)(b.View,{children:"Key"}),(0,i.jsxs)(b.View,{children:["Value",(0,i.jsx)(v.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return E(!C)},size:18,children:C?(0,i.jsx)(em.default,{}):(0,i.jsx)(eh.default,{})})]})]}),(0,i.jsxs)(b.View,{gap:8,innerRef:et,children:[M.map(function(e,t){var n,r=e.key,a=e.value;return(0,i.jsx)(e4,{isSensitive:C,keyName:r,value:a,readOnly:"done"===U,accountSecrets:I,selectedKey:null!=(n=L.get(r))?n:null,onSelectedKeyChange:function(e){B(function(t){var n=new Map(t);return e?n.set(r,e):n.delete(r),n})},onChange:function(e){O(function(t){return t.map(function(t){return t.key===r?(0,u._)((0,l._)({},t),{value:e}):t})})},ref:t===M.length-1?en:void 0},r)}),(0,i.jsxs)(b.View,{css:e2.actions,row:!0,justify:"space-between",children:[I.length>0&&"selecting"===U?(0,i.jsx)(es.Button,{iconLeft:(0,i.jsx)(eW,{}),text:"Choose from Account Vault",onClick:ei,disabled:"selecting"!==U,loading:T}):(0,i.jsx)("span",{}),(0,i.jsx)(es.Button,{colorway:"primary",iconLeft:T?(0,i.jsx)(eg.default,{}):(0,i.jsx)(eZ.default,{}),text:"Continue",onClick:function(){return(0,t._)(function(){var e,t,n,i,a,o,s,l,u;return(0,r._)(this,function(r){switch(r.label){case 0:D(!0),r.label=1;case 1:if(r.trys.push([1,8,,9]),e=new Map(I.map(function(e){return[e.name,e]})),n=(t=M.reduce(function(t,n){var r=e.get(n.key);return r?r.value===n.value?t.matchingEntries.push(n):t.existingEntries.push(n):t.newEntries.push(n),t},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,i=t.existingEntries,!((a=t.matchingEntries).length>0||i.length>0||n.length>0))return[3,7];if(!((o=(0,ey._)(a).concat((0,ey._)(i),(0,ey._)(n)).map(function(e){return e.key})).length>0))return[3,3];return[4,d.apply(void 0,(0,ey._)(o.map(function(e){return e})))];case 2:r.sent(),r.label=3;case 3:if(s=(0,ey._)(a).concat((0,ey._)(i),(0,ey._)(n)).map(function(e){var t=e.key,n=L.get(t);if(n){var r=I.find(function(e){return e.name===n});if(r)return{secretId:r.id,alias:t}}return null}).filter(function(e){return null!==e}),l=(0,ey._)(a).concat((0,ey._)(i),(0,ey._)(n)).filter(function(e){return!L.has(e.key)}),!(s.length>0))return[3,5];return[4,g(s)];case 4:r.sent(),r.label=5;case 5:if(!(l.length>0))return[3,7];return[4,c(l)];case 6:r.sent(),r.label=7;case 7:return J({nextNewSecrets:n,nextExistingEntries:i,nextMatchingEntries:a}),[3,9];case 8:return u=r.sent(),eb.captureException(u),w.showError("Something went wrong. Please try again."),[3,9];case 9:return D(!1),[2]}})})()},loading:T,disabled:"selecting"!==U||!Q||T})]})]})]})}):(0,i.jsx)(ez,{openSecerets:_,watch:S,keys:s}),(0,i.jsx)(eV,{removeEntries:d,newSecrets:G,step:U,onContinue:J,linkSecrets:g,unlinkSecrets:x,linkedSecrets:R,onSecretsUpdated:function(e){B(function(t){var n=new Map(t);return e.forEach(function(e){var t=e.key,r=e.selectedKey;n.set(t,r)}),n})}}),(0,i.jsx)(eN,{removeEntries:d,replaceAllExternalSecrets:y,existingSecrets:W,accountSecrets:I,onContinue:J,step:U,linkedSecrets:R,onSecretsUpdated:function(e){B(function(t){var n=new Map(t);return e.forEach(function(e){var t=e.key,r=e.selectedKey;n.set(t,r)}),n})}})]})}function e6(e){var n=e.sendAskUserForActionResponse,i=e.requestedEnvVars,o=e.eventId;return{handleCompleteEnvironmentConfigRequest:(0,a.useCallback)(function(e){return(0,t._)(function(){return(0,r._)(this,function(t){switch(t.label){case 0:if(!i||0===i.length)return[2];return[4,n({type:"envVarsResponse",requestEventId:o,providedEnvVars:e.map(function(e){return{key:e.key,value:e.value,environment:e.environment}})})];case 1:return t.sent(),[2]}})})()},[n,i,o])}}e.s(["SecretInput",()=>e8,"SecretItem",()=>e4],245329),e.s(["useHandleCompleteEnvironmentConfigRequest",()=>e6],822229);var e3=e.i(541793),e5=e.i(924908),e9=(0,e3.atom)(new Set);function e7(){var e=(0,e5.useValue)(e9);return(0,a.useCallback)(function(t){return!!t&&e.has(t)},[e])}function te(){var e=(0,e5.useSet)(e9);return(0,a.useCallback)(function(t){e(function(e){if(e.has(t))return e;var n=new Set(e);return n.add(t),n})},[e])}e.s(["useDismissActionRequest",()=>te,"useIsActionRequestDismissed",()=>e7],613909);var tt=(0,e3.atom)(void 0);function tn(){return(0,e5.useValue)(tt)}function tr(){var e=(0,e5.useGet)(tt);return(0,a.useCallback)(function(){return e()},[e])}function ti(){var e=(0,e5.useSet)(tt);return(0,a.useCallback)(function(t){return e(t)},[e])}function ta(){var e=(0,e5.useSet)(tt);return(0,a.useCallback)(function(){return e(void 0)},[e])}e.s(["useClearInitialBuildApprovalUserSecretsResponse",()=>ta,"useGetInitialBuildApprovalUserSecretsResponse",()=>tr,"useInitialBuildApprovalUserSecretsResponse",()=>tn,"useSetInitialBuildApprovalUserSecretsResponse",()=>ti],593366)},858404,e=>{e.v({"border-rotate":"index-module__FzfM4q__border-rotate",content:"index-module__FzfM4q__content","fallback-animation":"index-module__FzfM4q__fallback-animation",highlightBackground:"index-module__FzfM4q__highlightBackground",inner:"index-module__FzfM4q__inner",root:"index-module__FzfM4q__root"})},68612,727894,39411,782416,502305,471458,621929,872069,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(207237),o=e.i(927158),s=e.i(147721),l=e.i(245329),u=e.i(822229),c=e.i(986194),d=e.i(188507);e.i(877212);var p=e.i(924908),f=e.i(613909),m=e.i(593366);e.i(925218);var h=e.i(641555),g=e.i(374106),v=e.i(231346),x={direction:"forward",state:{phase:null},reducer:function(e,t){(0,g.isEventContentsKind)(e,"initialBuildStateUpdateEventContents")&&(t.phase=e.contents.contents.initialBuildStateUpdateEventContents.phase)}};function y(e){var t,n=(0,v.useIsInitialAgentSession)(null!=(t=null==e?void 0:e.id)?t:null);return(0,h.useObservableMemo)(function(){return n?null==e?void 0:e.reduce(x,100):void 0},[e,n],{default:void 0})}function b(e){return!!e&&[d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_STARTED,d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW,d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_STARTED,d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW].includes(e)}function S(e){var t=y(e),n=(0,h.useObservableMemo)(function(){return null==e?void 0:e.reduce(_,100)},[e],{default:null});return(0,i.useMemo)(function(){if(!n)return null;var e=n.content;return(0,c.isKind)(e,"approveInitialBuildVisualPhaseRequest")&&(null==t?void 0:t.phase)!==d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW||(0,c.isKind)(e,"approveInitialBuildMvpRequest")&&(null==t?void 0:t.phase)!==d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW?null:n},[n,null==t?void 0:t.phase])}e.s(["isInitialBuildStarted",()=>b,"useInitialBuildState",()=>y],727894);var _={direction:"reverse",state:{content:null,eventId:null,respondedEventIds:new Set,hasAcknowledgedUserMessage:!1,isResponseInProgress:!1},map:function(e){return{content:e.content,eventId:e.eventId,isResponseInProgress:e.isResponseInProgress}},reducer:function(e,t){if(((0,c.isKind)(e.contents.contents,"acknowledgeUserMessage")||(0,g.isEventAgentToolDataKind)(e,"acknowledgeUserMessage"))&&(t.hasAcknowledgedUserMessage=!0),(0,g.isEventContentsKind)(e,"agentAskUserForActionResponse")){var n=(0,c.unkind)(e.contents.contents),r=n.response,i=n.requestEventId;if(r&&(t.respondedEventIds.add(i),(0,c.isKind)(r,"approveBlueprintResponse")))return!1}if((0,g.isEventContentsKind)(e,"agentAskUserForActionRequest")){var a=(0,c.unkind)(e.contents.contents).request,o=t.respondedEventIds.has(e.id),s=o&&!t.hasAcknowledgedUserMessage;if(a&&(0,c.isKind)(a,"approveTaskListRequest")&&(!o||s))return t.content=(0,c.withKind)("approveTaskListRequest",a.approveTaskListRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveInitialBuildVisualPhaseRequest")&&(!o||s))return t.content=(0,c.withKind)("approveInitialBuildVisualPhaseRequest",a.approveInitialBuildVisualPhaseRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveInitialBuildMvpRequest")&&(!o||s))return t.content=(0,c.withKind)("approveInitialBuildMvpRequest",a.approveInitialBuildMvpRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveBlueprintRequest")&&(!o||s))return t.content=(0,c.withKind)("approveBlueprintRequest",a.approveBlueprintRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"queryRequest")&&(!o||s))return t.content=(0,c.withKind)("queryRequest",a.queryRequest),t.eventId=e.id,t.isResponseInProgress=s,!1}}};function w(e){var r=e.sessionId,a=e.sendAskUserForActionResponse,o=e.requestedSecrets,s=e.eventId,l=(0,p.useChatter)(),u=(0,h.useObservableMemo)(function(){return r?l.sessions.get(r):null},[l,r]),g=y(u),v=b(null==g?void 0:g.phase),x=S(u),_=(0,f.useIsActionRequestDismissed)(),w=(null==x?void 0:x.content)&&((0,c.isKind)(x.content,"approveInitialBuildVisualPhaseRequest")||(0,c.isKind)(x.content,"approveInitialBuildMvpRequest"))&&!_(x.eventId),j=(0,m.useInitialBuildApprovalUserSecretsResponse)(),T=(0,m.useSetInitialBuildApprovalUserSecretsResponse)(),D=v&&(null==j?void 0:j.secretsRequestEventId)===s;return{handleCompleteSecretsRequest:(0,i.useCallback)(function(){return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:if(!o||0===o.length)return[2];if(v&&w)return T({providedSecrets:o.map(function(e){return{key:e.key,status:d.UserSecretResponseStatus.SECRET_COMPLETED}}),secretsRequestEventId:s}),[2];return[4,a({type:"userSecretsResponse",requestEventId:s,providedSecretKeys:null!=(e=null==o?void 0:o.map(function(e){return e.key}))?e:[]})];case 1:return t.sent(),[2]}})})()},[a,o,v,s,T,w]),isThisSecretsResponseStagedForInitialBuildApproval:D}}e.s(["useAgentAskUserForActionRequest",()=>S],39411),e.s(["useHandleCompleteSecretsRequest",()=>w],782416);var j=e.i(462995),T=e.i(878420),D=e.i(64386),k="file://";function C(e){var t=e;return e.startsWith(k)&&(t=e.slice(k.length)),t.startsWith("/")&&(t=t.slice(1)),t}e.s(["trimFileUrlPrefix",()=>C],502305);var E=e.i(828224),A="rag://rag_source_";function I(e){var t=e.openWebview,n=e.ragSources;return(0,i.useMemo)(function(){return function(e){var a,o=null==(a=e.node.properties)?void 0:a.href,s=(0,i.useMemo)(function(){if(t&&"string"==typeof o)try{var e=new URL(o);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(n){n.preventDefault(),t(e.pathname,parseInt(e.port,10))}}catch(e){return}},[o]);if("string"==typeof o&&o.startsWith(A)){var l=o.slice(A.length),u=null==n?void 0:n.find(function(e){return e.id===l});if(!u)return(0,r.jsxs)(i.Fragment,{children:["[",e.children,"]"]});var c=C(u.url);return(0,r.jsx)(E.default,(0,D._)((0,T._)({},e),{href:"#"+c,filePath:"",target:""}))}return(0,r.jsx)(E.default,(0,D._)((0,T._)({},e),{type:void 0!==s?"button":e.type,href:void 0!==s?"#":e.href,onClick:s}))}},[t,n])}e.s(["default",()=>I],471458);var R=e.i(80858),P=e.i(625484),M=e.i(858404);function O(e){var c=e.openPane,d=e.sessionId,p=e.sendAskUserForActionResponse,f=e.requestedSecrets,m=e.requestedEnvVars,h=e.eventId,g=e.message,v=e.state,x=e.secrets,y=e.waitingOnUser,b=e.linkSecrets,S=e.unlinkSecrets,_=I({openWebview:(0,i.useCallback)(function(e,t){return c({type:"webview",data:{ports:{path:e,port:t,type:"local"}}})},[c])}),T=(0,i.useCallback)(function(){return c({type:"envEditor"})},[c]),D=(0,a.default)(),k=w({sessionId:d,sendAskUserForActionResponse:p,requestedSecrets:f,eventId:h}),C=k.handleCompleteSecretsRequest,E=k.isThisSecretsResponseStagedForInitialBuildApproval,A=(0,u.useHandleCompleteEnvironmentConfigRequest)({sendAskUserForActionResponse:p,requestedEnvVars:m,eventId:h}).handleCompleteEnvironmentConfigRequest,O=(0,o.usePid2Callback)(function(e){return function(r){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return t=r.map(function(e){return{key:e.key,value:e.value,env:(0,R.getEnvironmentLabel)(e.environment)}}),[4,e.environment.setEnvVars.rpc(t)];case 1:return n.sent(),[2]}})})()}});return(0,r.jsx)(P.View,{clsx:M.default.root,justify:"space-between",children:(0,r.jsxs)(P.View,{clsx:M.default.inner,children:[(0,r.jsx)(P.View,{align:"center",justify:"center",clsx:M.default.highlightBackground,children:(0,r.jsx)(P.View,{})}),(0,r.jsxs)(P.View,{clsx:M.default.content,gap:8,children:[(0,r.jsx)(j.MessageMarkdown,{messageState:v,text:g,linkComponent:_}),f?(0,r.jsx)(l.SecretInput,{openSecrets:T,replId:D,keys:f.map(function(e){return e.key}),addEntries:x.addEntries,removeEntries:x.removeEntries,watch:x.watch,replaceAllExternalSecrets:x.replaceAllExternalSecrets,onComplete:C,sessionId:d,waitingOnUser:y&&!E,linkSecrets:b,unlinkSecrets:S}):null,m&&O?(0,r.jsx)(s.EnvironmentInput,{openEnvEditor:T,envVars:m,onComplete:A,sessionId:d,waitingOnUser:y,addEnvEntries:O}):null]})]})})}e.s(["AgentMessage",()=>O],68612);var N=e.i(569384),L=e.i(973245),B=e.i(951262);function V(){var e=(0,N._)(["\n  mutation RecordTipInteraction(\n    $tipId: String!\n    $interactionType: TipInteractionType!\n    $interactionContext: String\n    $recommendedReason: String\n  ) {\n    recordTipInteraction(\n      tipId: $tipId\n      interactionType: $interactionType\n      interactionContext: $interactionContext\n      recommendedReason: $recommendedReason\n    ) {\n      __typename\n      ... on RecordTipInteractionResult {\n        tipState {\n          id\n          title\n          description\n          content\n          tags\n          priority\n          timeRecommended\n          timeCompleted\n          timeDismissed\n          timeInteracted\n          externalUrl\n        }\n        success\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return V=function(){return e},e}var U={},F=(0,L.gql)(V());function H(e){var t=(0,T._)({},U,e);return B.useMutation(F,t)}e.s(["useRecordTipInteractionMutation",()=>H],621929);var G=e.i(908410),z=e.i(134628),q=e.i(479407);function W(e){var t=e.type,n=e.onComplete;return(0,i.useEffect)(function(){var e=function(e){return(0,q.tourBridgeMessageHandler)(e,function(e){var r=e.tour;"complete"===r.action&&r.type===t&&n()})};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[n,t]),{showTour:(0,i.useCallback)(function(){(0,q.sendMessage)({messageType:z.BridgeMessageType.TOUR,tour:{type:t,action:"show"}},(0,G.nanoid)())},[t])}}e.s(["default",()=>W],872069)},585956,e=>{e.v({bodyCell:"TipRecommendation-module__Bzwv4q__bodyCell",headerCell:"TipRecommendation-module__Bzwv4q__headerCell",iconCell:"TipRecommendation-module__Bzwv4q__iconCell",iconCellExpanded:"TipRecommendation-module__Bzwv4q__iconCellExpanded",root:"TipRecommendation-module__Bzwv4q__root"})},995253,e=>{e.v({root:"AskUserForAction-module__Uw2Y3a__root"})},191654,731532,840732,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(621929),s=e.i(180703),l=e.i(207237),u=e.i(441329),c=e.i(952521),d=e.i(872069),p=e.i(492267),f=e.i(858248),m=e.i(709485);function h(e){var t=e.interactionType.toLowerCase(),n={tipId:e.tip.id,tipTitle:e.tip.title,action:t,context:e.context,replId:e.replId,sessionId:e.sessionId,eventId:e.eventId};e.tip.recommendedReason&&(n.recommendedReason=e.tip.recommendedReason),e.tipTags&&(n.tipTags=e.tipTags),void 0!==e.tipPriority&&(n.tipPriority=e.tipPriority),void 0!==e.wasInitiallyExpanded&&(n.wasInitiallyExpanded=e.wasInitiallyExpanded),void 0!==e.hasInteractedBefore&&(n.hasInteractedBefore=e.hasInteractedBefore),e.externalUrl&&(n.externalUrl=e.externalUrl),e.ctaTrigger&&(n.ctaTrigger=e.ctaTrigger),void 0!==e.isInteractive&&(n.isInteractive=e.isInteractive),(0,f.track)(m.events.TIP_SYSTEM_USED,n)}var g=e.i(480028),v=e.i(140487),x=e.i(91720),y=e.i(960178),b=e.i(625484),S=e.i(576073),_=e.i(903283),w=e.i(585956);function j(e,t,n){var r;return(null==e?void 0:e.id)===(null==t||null==(r=t.tip)?void 0:r.id)?"Bonsai tour tip override":n}function T(e){var t=e.tip,n=e.expanded,r=e.onToggleExpanded,a=e.onLearnMoreClick,o=e.loading,s=void 0!==o&&o;return(0,i.jsx)(b.View,{py:8,children:(0,i.jsxs)(b.View,{clsx:w.default.root,p:12,gap:8,style:n?void 0:{cursor:"pointer"},onClick:n?void 0:r,children:[(0,i.jsx)(b.View,{clsx:[w.default.iconCell,n&&w.default.iconCellExpanded],children:(0,i.jsx)(_.default,{size:16,color:g.tokens.foregroundDimmer})}),(0,i.jsxs)(b.View,{gap:8,clsx:w.default.headerCell,style:n?{cursor:"pointer"}:void 0,onClick:n?r:void 0,children:[(0,i.jsxs)(y.Text,{variant:"small",color:"dimmer",children:["Tip: ",t.title]}),(0,i.jsx)(S.default,{color:g.tokens.foregroundDimmer,rotate:180*!!n})]}),n?(0,i.jsxs)(b.View,{clsx:w.default.bodyCell,gap:4,children:[t.description?(0,i.jsx)(y.Text,{multiline:!0,children:t.description}):null,t.externalUrl||t.ctaTrigger?(0,i.jsx)(b.View,{row:!0,pt:4,children:t.externalUrl?(0,i.jsx)(x.ButtonLink,{variant:"outlined",text:t.ctaLabel||"Learn more",onClick:a,href:t.externalUrl,target:"_blank",disabled:s}):t.ctaTrigger?(0,i.jsx)(v.Button,{variant:"outlined",text:t.ctaLabel||"Learn more",onClick:a,disabled:s}):null}):null]}):null]})})}function D(e){var f,m,g,v,x,y,b,S,_,w,D,k,C,E,A,I,R,P,M,O,N,L,B=e.event,V=e.onDismiss,U=e.tipData,F=e.bonsaiTourTipInfo,H=e.openPane,G=e.onNewSession,z=(0,l.default)(),q=(0,p.useIsAgentStackRepl)(),W=(f=U.allTipsById,m=B.tip,(0,a.useMemo)(function(){return f.get(m.id)},[f,m.id])),K=(x=(v=(0,n._)((0,s.default)("bonsai-tour-tip-override-event-id",null),2))[0],y=v[1],S=(b=(0,c.useMemoedDismissibleElement)("bonsai-ws-agent-onboarding")).isDone,_=b.setAsDone,w=(0,u.useDoesBonsaiSupportFeatureFlag)("flag-mb-ws-agent-onboard"),D=(0,a.useMemo)(function(){if(x===B.id&&(null==F?void 0:F.tip))return F.tip;if(null==W?void 0:W.timeRecommended)return W;var e,t=null==F||null==(e=F.tip)?void 0:e.timeRecommended,n=!!x;return(null==F?void 0:F.isInBonsaiWebview)&&!S&&F.tip&&(!W||W.id!==F.tip.id)&&w&&!(t&&n)?F.tip:W},[x,B.id,F,W,S,w]),(0,a.useEffect)(function(){var e;(null==D?void 0:D.id)===(null==F||null==(e=F.tip)?void 0:e.id)&&x!==B.id&&y(B.id)},[null==D?void 0:D.id,null==F||null==(g=F.tip)?void 0:g.id,x,B.id,y]),k=(0,a.useMemo)(function(){return!U.recommendedTips.has((null==D?void 0:D.id)||"")},[U.recommendedTips,null==D?void 0:D.id]),{tip:D,setBonsaiTourAsDone:_,shouldRecordRecommendation:k}),$=K.tip,Y=K.setBonsaiTourAsDone,X=K.shouldRecordRecommendation,Q=(0,a.useMemo)(function(){return!!$&&(!!(U.recommendedTips.size<5||U.recommendedTips.has($.id))||!!$.timeInteracted&&!$.timeCompleted||U.latestTipId===$.id&&!!U.anyLatestFiveInteracted)},[$,U]),J=(C=U.hasInteractedBefore,A=(E=(0,n._)((0,o.useRecordTipInteractionMutation)(),2))[0],I=E[1].loading,R=(0,l.default)(),P=(0,a.useRef)(null),M=(0,a.useMemo)(function(){return $?"".concat(B.id,"-").concat($.id):null},[B.id,$]),(0,a.useEffect)(function(){if($&&!$.timeRecommended&&!I&&X&&M&&P.current!==M){P.current=M;var e,t,n,r=j($,F,B.tip.recommendedReason);h({tip:{id:$.id,title:$.title,recommendedReason:r},interactionType:"recommended",context:"agent_chat",replId:R,sessionId:B.sessionId,eventId:B.id,tipTags:null==(e=$.tags)?void 0:e.filter(Boolean),tipPriority:$.priority,wasInitiallyExpanded:Q,hasInteractedBefore:C,externalUrl:null!=(t=null==$?void 0:$.externalUrl)?t:null,ctaTrigger:null!=(n=null==$?void 0:$.ctaTrigger)?n:null,isInteractive:!!((null==$?void 0:$.externalUrl)||(null==$?void 0:$.ctaTrigger))}),A({variables:{tipId:$.id,interactionType:"RECOMMENDED",recommendedReason:r}})}},[$,I,X,B,R,Q,C,A,M,F]),{recordTipInteractionMutation:A,loading:I}),Z=J.recordTipInteractionMutation,ee=J.loading,et=(0,d.default)({type:"agent",onComplete:function(){null==V||V()}}).showTour,en=(0,n._)((0,a.useState)(!1),2),er=en[0],ei=en[1];(0,a.useEffect)(function(){ei(Q)},[Q]),O=U.hasInteractedBefore,N=(0,a.useRef)(!1),L=(0,l.default)(),(0,a.useEffect)(function(){N.current=!1},[B.tip.id]),(0,a.useEffect)(function(){var e=Date.now(),t=B.created?new Date(B.created).getTime():e;"none"===B.tip.id&&!N.current&&e-t<=5e3&&(N.current=!0,h({tip:B.tip,interactionType:"no_tip_recommended",context:"agent_chat",replId:L,sessionId:B.sessionId,eventId:B.id,hasInteractedBefore:O,externalUrl:null,ctaTrigger:null,isInteractive:!1}))},[B,L,O]);var ea=(0,a.useCallback)(function(){var e,t,n,r=!er;ei(r),h({tip:{id:(null==$?void 0:$.id)||B.tip.id,title:(null==$?void 0:$.title)||B.tip.title,recommendedReason:j($,F,B.tip.recommendedReason)},interactionType:r?"accordion_opened":"accordion_closed",context:"agent_chat",replId:z,sessionId:B.sessionId,eventId:B.id,tipTags:null==$||null==(e=$.tags)?void 0:e.filter(Boolean),tipPriority:null==$?void 0:$.priority,wasInitiallyExpanded:Q,hasInteractedBefore:U.hasInteractedBefore,externalUrl:null!=(t=null==$?void 0:$.externalUrl)?t:null,ctaTrigger:null!=(n=null==$?void 0:$.ctaTrigger)?n:null,isInteractive:!!((null==$?void 0:$.externalUrl)||(null==$?void 0:$.ctaTrigger))})},[er,B.tip,z,B.sessionId,B.id,$,Q,U.hasInteractedBefore,F]);return!$||q?null:(0,i.jsx)(T,{tip:$,expanded:er,onToggleExpanded:ea,onLearnMoreClick:function(){return(0,t._)(function(){var e,t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(!$||ee)return[2];return h({tip:{id:$.id,title:$.title,recommendedReason:B.tip.recommendedReason},interactionType:"interacted",context:"agent_chat",replId:z,sessionId:B.sessionId,eventId:B.id,tipTags:null==(e=$.tags)?void 0:e.filter(Boolean),tipPriority:$.priority,wasInitiallyExpanded:Q,hasInteractedBefore:U.hasInteractedBefore,externalUrl:null!=(t=null==$?void 0:$.externalUrl)?t:null,ctaTrigger:null!=(n=null==$?void 0:$.ctaTrigger)?n:null,isInteractive:!!((null==$?void 0:$.externalUrl)||(null==$?void 0:$.ctaTrigger))}),[4,Z({variables:{tipId:$.id,interactionType:"INTERACTED",interactionContext:"agent_chat"}})];case 1:if(r.sent(),$.ctaTrigger)switch($.ctaTrigger){case"bonsai_tour":Y(),et();break;case"auth_pane":null==H||H({type:"replitAuth"});break;case"database_pane":null==H||H({type:"neon"});break;case"create_new_chat":null==G||G();break;case"security_scan_pane":null==H||H({type:"securityScan"})}return[2]}})})()},loading:ee})}e.s(["TipRecommendation",()=>D],191654);var k=e.i(878420),C=e.i(346715),E=e.i(245329),A=e.i(782416),I=e.i(462995);function R(e){var t=e.items,r=e.maxVisibleItems,i=e.reverse,o=(0,n._)((0,a.useState)(!1),2),s=o[0],l=o[1],u=t.length-r,c=u>1,d=(0,a.useMemo)(function(){var e=i?(0,C._)(t).reverse():t;return c&&!s?i?e.slice(0,r):e.slice(-r):e},[t,c,s,r,i]);return{isExpanded:s,setIsExpanded:l,maxItemsReached:c,visibleItems:d,hiddenItemsCount:u}}e.s(["useExpandableItems",()=>R],731532);var P=e.i(616278),M=e.i(995253),O=(0,a.memo)(function(e){var t,n,r=e.newFeatureRequests,a=e.secretsRequest,o=e.addingIntegrationRequest;return(null==r?void 0:r.length)&&r.length>0?(0,i.jsx)(L,(0,k._)({},e)):(null==a||null==(t=a.secrets)?void 0:t.length)&&a.secrets.length>0?(0,i.jsx)(N,(0,k._)({},e)):((null==o||null==(n=o.connectionIds)?void 0:n.length)&&o.connectionIds.length,null)});function N(e){var t,n=e.eventId,r=e.sessionId,o=e.message,s=e.state,u=e.secretsRequest,c=e.openPane,d=e.sendAskUserForActionResponse,p=e.secrets,f=e.linkSecrets,m=e.unlinkSecrets,h=e.isSecretsRequestFulfilled,g=(0,A.useHandleCompleteSecretsRequest)({eventId:n,sessionId:r,requestedSecrets:null==u?void 0:u.secrets,sendAskUserForActionResponse:d}),v=g.handleCompleteSecretsRequest,x=g.isThisSecretsResponseStagedForInitialBuildApproval,y=(0,a.useCallback)(function(){return c({type:"envEditor"})},[c]),S=(0,l.default)();return(0,i.jsxs)(b.View,{p:8,gap:8,children:[(0,i.jsx)(I.MessageMarkdown,{messageState:s,text:o}),(0,i.jsx)(E.SecretInput,{openSecrets:y,replId:S,keys:null!=(t=null==u?void 0:u.secrets.map(function(e){return e.key}))?t:[],addEntries:p.addEntries,removeEntries:p.removeEntries,watch:p.watch,replaceAllExternalSecrets:p.replaceAllExternalSecrets,onComplete:v,sessionId:r,waitingOnUser:!x&&!h,linkSecrets:f,unlinkSecrets:m})]})}function L(e){var t=e.eventId,n=e.message,r=e.state,a=e.newFeatureRequests,o=e.sendAskUserForActionResponse,s=null==a?void 0:a.find(function(e){return e.isSelected}),l=s&&a?(0,C._)(a.filter(function(e){return e!==s})).concat([s]):null!=a?a:[],u=!!s,c=R({items:l,maxVisibleItems:2,reverse:!1}),d=c.visibleItems,p=c.isExpanded,f=c.hiddenItemsCount,m=c.setIsExpanded,h=c.maxItemsReached;return(0,i.jsxs)(b.View,{clsx:M.default.root,gap:6,children:[(0,i.jsx)(I.MessageMarkdown,{text:n,messageState:r}),d.length?(0,i.jsxs)(b.View,{row:!0,style:{flexWrap:"wrap",gap:8},children:[d.map(function(e){return(0,i.jsx)(v.Button,{shrink:!0,iconLeft:e.isSelected?(0,i.jsx)(P.default,{}):void 0,disabled:u,colorway:e.isSelected?"primary":void 0,size:"small",variant:"outlined",onClick:function(){return o({type:"nextStepResponse",data:e,requestEventId:t})},text:e.featureName},e.id)}),h?(0,i.jsx)(v.Button,{iconLeft:(0,i.jsx)(S.default,{rotate:180*!!p}),size:"small",onClick:function(){return m(!p)},text:p?"Show less":"Show ".concat(f," more")}):null]}):null]})}e.s(["AskUserForAction",()=>O],840732)},915711,e=>{e.v({strikethrough:"WorkMetricsSummary-module__gRDgYa__strikethrough"})},875797,e=>{e.v({breakdownDescription:"AgentWorkMetrics-module__ZNlk0W__breakdownDescription",container:"AgentWorkMetrics-module__ZNlk0W__container",hasUsageCostBreakdown:"AgentWorkMetrics-module__ZNlk0W__hasUsageCostBreakdown",header:"AgentWorkMetrics-module__ZNlk0W__header",strikethrough:"AgentWorkMetrics-module__ZNlk0W__strikethrough",textContainer:"AgentWorkMetrics-module__ZNlk0W__textContainer",usageCostItemLabel:"AgentWorkMetrics-module__ZNlk0W__usageCostItemLabel"})},44660,659131,374358,e=>{"use strict";var t=e.i(721281),n=e.i(878420),r=e.i(64386),i=e.i(530658),a=e.i(276385),o=e.i(389959),s=e.i(629536),l=e.i(993796),u=e.i(649960),c=e.i(546284);function d(e){if(e<60)return(0,c.default)("second",e,!0);if(e<3600){var t=Math.floor(e/60);return(0,c.default)("minute",t,!0)}var n=Math.floor(e/3600),r=Math.floor(e%3600/60);return r>0?"".concat(n,"h ").concat(r,"m"):"".concat(n,"h")}e.s(["humanizeDuration",()=>d],659131);var p=e.i(960178),f=e.i(751273),m=e.i(625484),h=e.i(651499),g=e.i(915711);function v(e){var t=e.durationPrefix,n=e.usageCents,r=e.workDurationSeconds,i=e.isRefunded,o=e.isInProgress,s=e.tooltipPlacement,l=e.preDiscountsUsageCents;if(void 0===r)return null;var u="".concat(void 0===t?"Worked for":t," ").concat(d(Math.max(r,1))),c="";return void 0!==i&&i?c="You have been refunded for this checkpoint":!(void 0!==o&&o)&&void 0!==n&&n>0&&(c=void 0!==l&&l>0?(0,a.jsxs)(a.Fragment,{children:["This work cost"," ",(0,a.jsxs)(p.Text,{className:g.default.strikethrough,variant:"small",color:"dimmer",children:["$",(l/100).toFixed(2)]}),(0,a.jsxs)(p.Text,{variant:"small",color:"dimmer",children:["$",(n/100).toFixed(2)]})]}):"This work cost $".concat((n/100).toFixed(2))),(0,a.jsx)(f.Tooltip,{tooltip:c,placement:void 0===s?"bottom-start":s,isDisabled:!c,children:(0,a.jsxs)(m.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(h.default,{size:16}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:u})]})})}e.s(["WorkMetricsSummary",()=>v],374358);var x=e.i(613355),y={timeWorked:{title:"Time worked"},workDone:{title:"Work done"},itemsRead:{title:"Items read"},codeChanged:{title:"Code changed"},agentUsage:{title:"Agent Usage"},extendedThinking:{title:"Extended thinking"},highPowerModel:{title:"High power model"}};function b(e){var t=e.type,r=e.description,i=e.maxWidth,o=e.whiteSpace,s=y[t],l=(0,n._)({},i&&{maxWidth:i}),u=(0,n._)({},o&&{whiteSpace:o});return(0,a.jsxs)(m.View,{gap:4,style:l,children:[(0,a.jsx)(p.Text,{variant:"small",css:x.rcss.fontWeight.medium,children:s.title}),r?(0,a.jsx)(p.Text,{variant:"small",style:u,children:r}):null]})}var S=e.i(480028),_=e.i(396776),w=e.i(929872),j=e.i(14007),T=e.i(576073),D=e.i(462783),k=e.i(744895),C=e.i(363201),E=e.i(875797),A=new Date("2025-12-08T22:00:00Z");function I(e){var t=e.workDurationSeconds,s=e.usageCents,l=e.defaultExpanded,u=e.isFreemiumRepl,c=e.ubbV2,d=void 0===c||c,g=e.refunded,y=e.workType,b=e.isInProgress,_=void 0!==b&&b,j=e.preDiscountsUsageCents,T=(0,i._)((0,o.useState)(void 0!==l&&l),2),k=T[0],A=T[1],I=j===s?void 0:j,P=(0,o.useMemo)(function(){var e,t,n;return e=s,t=u,n=d,void 0===e?25:n?e:25*!t},[s,u,d]);if(!d){var M="";return _||(M=u?"This ".concat(y," cost $0"):"This ".concat(y," cost $0.25")),(0,a.jsx)(w.Surface,{clsx:E.default.container,children:(0,a.jsx)(m.View,{row:!0,align:"center",p:8,children:(0,a.jsx)(m.View,{clsx:E.default.textContainer,children:(0,a.jsxs)(m.View,{row:!0,gap:8,align:"center",pl:4,children:[(0,a.jsx)(h.default,{size:16}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:M})]})})})})}return(0,a.jsxs)(w.Surface,{clsx:E.default.container,elevated:!0,children:[(0,a.jsxs)(m.View,{clsx:E.default.header,row:!0,align:"center",p:8,onClick:function(){return A(!k)},children:[(0,a.jsx)(m.View,{clsx:E.default.textContainer,children:k?(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:(0,a.jsxs)(m.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(h.default,{size:16}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:"Show less"})]})}):(0,a.jsx)(v,{workDurationSeconds:t,usageCents:P,isInProgress:_,isRefunded:g,tooltipPlacement:"bottom-start",preDiscountsUsageCents:I})}),(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[g&&!k?(0,a.jsx)(f.Tooltip,{tooltip:"This checkpoint was affected by an incident. No progress was lost, and the cost has been refunded. Check your email for more information.",children:(0,a.jsx)(C.default,{size:16,color:S.tokens.foregroundDimmest})}):null,(0,a.jsx)(D.default,{size:16,color:S.tokens.foregroundDimmest,rotate:180*!k,css:x.rcss.transition.snappy})]})]}),k?(0,a.jsx)(R,(0,r._)((0,n._)({},e),{costToShow:P,preDiscountsUsageCents:I})):null]})}function R(e){var n,r,h,g,v=e.workDurationSeconds,y=e.toolCalls,w=e.addedLinesOfCode,D=e.removedLinesOfCode,I=e.usageCents,R=e.preDiscountsUsageCents,P=e.capabilityUsage,M=e.relatedEffortBreakdowns,O=e.numLocRead,N=e.numFilesRead,L=e.costToShow,B=e.refunded,V=e.workType,U=e.isFreeQuickEditRun,F=e.eventCreated,H=(0,i._)((0,o.useState)(!1),2),G=H[0],z=H[1],q=(0,u.default)(function(e){z(e.width<240)}),W=null!=O?O:0,K=null!=N?N:0,$=(void 0!==w||void 0!==D)&&(null!=w?w:0)+(null!=D?D:0)>0,Y=M&&M.length>0,X=(0,i._)((0,o.useState)(!1),2),Q=X[0],J=X[1],Z=(0,l.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),ee=(null!=(r=null==P?void 0:P.advancedModelProfileLlmCalls)?r:0)>0&&(!Z||F&&F<A);return(0,a.jsxs)(m.View,{px:12,pt:4,pb:12,gap:8,innerRef:q,children:[void 0!==v&&v>0?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Time worked"}),(0,a.jsx)(f.Tooltip,{tooltip:(n=v<60?(0,c.default)("second",v,!0):"".concat((0,c.default)("minute",Math.floor(v/60),!0)," and ").concat((0,c.default)("second",v%60,!0)),G?(0,a.jsx)(b,{type:"timeWorked",description:n}):n),children:(0,a.jsx)(p.Text,{variant:"small",children:d(v)})})]}):null,void 0!==y&&y>0?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Work done"}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"workDone",description:"Number of actions taken by Agent"}):"Number of actions taken by Agent",children:(0,a.jsx)(p.Text,{variant:"small",children:(0,c.default)("action",y,!0)})})]}):null,W>0||K>0?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Items read"}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"itemsRead",description:"".concat((0,c.default)("line",W,!0)," and ").concat((0,c.default)("file",K,!0))}):"".concat((0,c.default)("line",W,!0)," and ").concat((0,c.default)("file",K,!0)),children:(0,a.jsx)(p.Text,{variant:"small",children:W>K?(0,c.default)("line",W,!0):(0,c.default)("file",K,!0)})})]}):null,$?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Code changed"}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"codeChanged",description:"".concat((0,c.default)("line",null!=w?w:0,!0)," added and ").concat((0,c.default)("line",null!=D?D:0,!0)," removed")}):"".concat((0,c.default)("line",null!=w?w:0,!0)," added and ").concat((0,c.default)("line",null!=D?D:0,!0)," removed"),children:(0,a.jsxs)(m.View,{row:!0,gap:4,children:[(0,a.jsxs)(p.Text,{variant:"small",children:["+",w]}),(0,a.jsxs)(p.Text,{color:"dimmer",variant:"small",children:["-",D]})]})})]}):null,void 0!==I&&I>0?(0,a.jsxs)(m.View,{gap:8,children:[(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsxs)(m.View,{row:!0,align:"center",onClick:function(){return Y?J(!Q):void 0},clsx:[E.default.usageCostItemLabel,(0,t._)({},E.default.hasUsageCostBreakdown,Y)],gap:8,children:[(0,a.jsxs)(p.Text,{variant:"small",color:"default",children:[s.AGENT_NAME," Usage"]}),Y?(0,a.jsx)(T.default,{size:16,color:S.tokens.foregroundDimmest,rotate:180*!!Q,css:x.rcss.transition.snappy}):null]}),(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[!G&&(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[(null!=(h=null==P?void 0:P.thinkingEnabledLlmCalls)?h:0)>0&&(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"extendedThinking",description:"Increased cost by about 1.25x"}),children:(0,a.jsx)(j.default,{size:12,color:S.tokens.foregroundDimmer})}),ee?(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"highPowerModel"}),children:(0,a.jsx)(k.default,{size:12,color:S.tokens.foregroundDimmer})}):null]}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"agentUsage",description:"Usage is first deducted from your monthly credit",maxWidth:200,whiteSpace:"normal"}):"Usage is first deducted from your monthly credit",children:(0,a.jsxs)(m.View,{row:!0,gap:8,children:[void 0!==R&&R>0?(0,a.jsxs)(p.Text,{className:E.default.strikethrough,variant:"small",color:"dimmer",children:["$",(R/100).toFixed(2)]}):null,(0,a.jsxs)(p.Text,{variant:"small",children:["$",(L/100).toFixed(2)]})]})}),G?(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[(null!=(g=null==P?void 0:P.thinkingEnabledLlmCalls)?g:0)>0&&(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"extendedThinking",description:"Increased cost by about 1.25x"}),children:(0,a.jsx)(j.default,{size:12,color:S.tokens.foregroundDimmer})}),ee?(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"highPowerModel"}),children:(0,a.jsx)(k.default,{size:12,color:S.tokens.foregroundDimmer})}):null]}):null]})]}),Y&&Q?(0,a.jsx)(m.View,{pl:20,gap:8,children:M.map(function(e,t){return(0,a.jsxs)(m.View,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",clsx:E.default.breakdownDescription,children:function(e){var t,n,r;if((null==(t=e.effortType)?void 0:t.$kind)==="task"&&(null==(n=e.effortType.task)?void 0:n.taskId))return e.effortType.task.description;switch(null==(r=e.effortType)?void 0:r.$kind){case"task":return"Task execution";case"general":return"General work";case"initialization":return"Agent initialization";case"discountedEffort":return"Promo: High power model at no extra cost";default:return"Work completed"}}(e)}),(0,a.jsxs)(p.Text,{variant:"small",color:"dimmest",children:[e.usageCents<0?"-":"","$",(Math.abs(e.usageCents)/100).toFixed(2)]})]},t)})}):null]}):null,U?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:"space-between",gap:8,children:[(0,a.jsxs)(p.Text,{variant:"small",color:"default",children:[s.AGENT_NAME," Usage"]}),(0,a.jsx)(f.Tooltip,{tooltip:"Fast edits are free for a limited time",children:(0,a.jsx)(p.Text,{variant:"small",style:{color:S.tokens.accentPositiveStronger},children:"Free"})})]}):null,B?(0,a.jsx)(_.StatusBanner,{icon:(0,a.jsx)(C.default,{}),text:"You have been refunded for this ".concat(V),colorway:"blue"}):null]})}e.s(["AgentWorkMetrics",()=>I],44660)},81143,e=>{"use strict";function t(e){return void 0!==e.workDurationSeconds&&e.workDurationSeconds>0||void 0!==e.addedLinesOfCode&&e.addedLinesOfCode>0||void 0!==e.removedLinesOfCode&&e.removedLinesOfCode>0||void 0!==e.toolCalls&&e.toolCalls>0||void 0!==e.usageCents&&e.usageCents>0||void 0!==e.numLocRead&&e.numLocRead>0||void 0!==e.numFilesRead&&e.numFilesRead>0}e.s(["hasAnyMetric",()=>t])},51236,e=>{e.v({container:"Checkpoint-module__W0jY0W__container"})},527717,e=>{e.v({root:"EndOfRunSummary-module__ipPvUG__root"})},529675,e=>{e.v({surface:"ErrorMessage-module__tuPsEG__surface"})},645424,e=>{e.v({cancelButton:"AgentPlanningDialogs-module__sqzuCW__cancelButton",dialog:"AgentPlanningDialogs-module__sqzuCW__dialog",disabled:"AgentPlanningDialogs-module__sqzuCW__disabled",editPlanButton:"AgentPlanningDialogs-module__sqzuCW__editPlanButton",grow1:"AgentPlanningDialogs-module__sqzuCW__grow1",hasDrawerAbove:"AgentPlanningDialogs-module__sqzuCW__hasDrawerAbove",initialBuildModeItem:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeItem",initialBuildModeItemContainer:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeItemContainer",initialBuildModeOptions:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeOptions",interactiveLabel:"AgentPlanningDialogs-module__sqzuCW__interactiveLabel",noShades:"AgentPlanningDialogs-module__sqzuCW__noShades",noticeColorway:"AgentPlanningDialogs-module__sqzuCW__noticeColorway",selected:"AgentPlanningDialogs-module__sqzuCW__selected",statusRow:"AgentPlanningDialogs-module__sqzuCW__statusRow"})},857253,e=>{e.v({btnBonsai:"MobileAgentTourNudge-module__aJI9MG__btnBonsai",btnLeft:"MobileAgentTourNudge-module__aJI9MG__btnLeft",btnRight:"MobileAgentTourNudge-module__aJI9MG__btnRight",mobileQr:"MobileAgentTourNudge-module__aJI9MG__mobileQr",root:"MobileAgentTourNudge-module__aJI9MG__root"})},19208,e=>{e.v({surface:"index-module__YdT9ma__surface"})},67760,(e,t,n)=>{var r,i,a=e.r(365738),o=Object.prototype.toString,s=Math.max;t.exports=(r=function(e){if(!(e&&e.length))return[];var t=0;e=function(e,t){for(var n=-1,r=e?e.length:0,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(e,function(e){var n,r,i,l,u,c,d,p;if((i=n=e)&&(void 0===i?"undefined":a._(i))=="object"&&null!=(r=n)&&"number"==typeof(l=r.length)&&l>-1&&l%1==0&&l<=0x1fffffffffffff&&"[object Function]"!=(d=void 0===(c=u=r)?"undefined":a._(c),p=c&&("object"==d||"function"==d)?o.call(u):"")&&"[object GeneratorFunction]"!=p)return t=s(e.length,t),!0});for(var n=t,r=function(t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,function(e){return null==e?void 0:e[t]})},i=-1,l=Array(n);++i<n;)l[i]=r(i);return l},i=s(void 0===i?r.length-1:i,0),function(){for(var e=arguments,t=-1,n=s(e.length-i,0),a=Array(n);++t<n;)a[t]=e[i+t];t=-1;for(var o=Array(i+1);++t<i;)o[t]=e[t];o[i]=a;switch(o.length){case 0:return r.call(this);case 1:return r.call(this,o[0]);case 2:return r.call(this,o[0],o[1]);case 3:return r.call(this,o[0],o[1],o[2])}return r.apply(this,o)})},30305,e=>{e.v({dividerContainer:"RollbackStatus-module__ruRP2q__dividerContainer",dividerLine:"RollbackStatus-module__ruRP2q__dividerLine",dividerText:"RollbackStatus-module__ruRP2q__dividerText",flexShrink:"RollbackStatus-module__ruRP2q__flexShrink",revertIcon:"RollbackStatus-module__ruRP2q__revertIcon",root:"RollbackStatus-module__ruRP2q__root",subtext:"RollbackStatus-module__ruRP2q__subtext"})},885952,e=>{e.v({appIcon:"SetupImport-module__uC9EDa__appIcon",root:"SetupImport-module__uC9EDa__root",statusIcon:"SetupImport-module__uC9EDa__statusIcon"})},918388,e=>{e.v({borderedContainer:"AutoscaleMachineConfiguration2-module__LbpU1a__borderedContainer"})},14428,e=>{e.v({cost:"MachineConfigurationSelector-module__MyGrca__cost","loading-pulse":"MachineConfigurationSelector-module__MyGrca__loading-pulse",loadingState:"MachineConfigurationSelector-module__MyGrca__loadingState",select:"MachineConfigurationSelector-module__MyGrca__select",selectWrapper:"MachineConfigurationSelector-module__MyGrca__selectWrapper"})},759239,(e,t,n)=>{var r=e.r(365738),i=globalThis,a=function(){return function(){"use strict";var e,t,n={949:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CronParser=void 0;var r=n(515);t.CronParser=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.expression=e,this.dayOfWeekStartIndexZero=t,this.monthStartIndexZero=n}return e.prototype.parse=function(){var e,t,n=null!=(e=this.expression)?e:"";if("@reboot"===n)return["@reboot","","","","","",""];if(n.startsWith("@")){var r=this.parseSpecial(this.expression);t=this.extractParts(r)}else t=this.extractParts(this.expression);return this.normalize(t),this.validate(t),t},e.prototype.parseSpecial=function(e){var t={"@yearly":"0 0 1 1 *","@annually":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@midnight":"0 0 * * *","@hourly":"0 * * * *","@reboot":"@reboot"}[e];if(!t)throw Error("Unknown special expression.");return t},e.prototype.extractParts=function(e){if(!this.expression)throw Error("cron expression is empty");for(var t=e.trim().split(/[ ]+/),n=0;n<t.length;n++)if(t[n].includes(",")){var r=t[n].split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}).map(function(e){return isNaN(Number(e))?e:Number(e)}).filter(function(e){return null!==e&&""!==e});0===r.length&&r.push("*"),r.sort(function(e,t){return null!==e&&null!==t?e-t:0}),t[n]=r.map(function(e){return null!==e?e.toString():""}).join(",")}if(t.length<5)throw Error("Expression has only ".concat(t.length," part").concat(1==t.length?"":"s",". At least 5 parts are required."));if(5==t.length)t.unshift(""),t.push("");else if(6==t.length)/\d{4}$/.test(t[5])||"?"==t[4]||"?"==t[2]?t.unshift(""):t.push("");else if(t.length>7)throw Error("Expression has ".concat(t.length," parts; too many!"));return t},e.prototype.normalize=function(e){var t=this;if(e[3]=e[3].replace("?","*"),e[5]=e[5].replace("?","*"),e[2]=e[2].replace("?","*"),0==e[0].indexOf("0/")&&(e[0]=e[0].replace("0/","*/")),0==e[1].indexOf("0/")&&(e[1]=e[1].replace("0/","*/")),0==e[2].indexOf("0/")&&(e[2]=e[2].replace("0/","*/")),0==e[3].indexOf("1/")&&(e[3]=e[3].replace("1/","*/")),0==e[4].indexOf("1/")&&(e[4]=e[4].replace("1/","*/")),0==e[6].indexOf("1/")&&(e[6]=e[6].replace("1/","*/")),e[5]=e[5].replace(/(^\d)|([^#/\s]\d)/g,function(e){var n=e.replace(/\D/,""),r=n;return t.dayOfWeekStartIndexZero?"7"==n&&(r="0"):r=(parseInt(n)-1).toString(),e.replace(n,r)}),"L"==e[5]&&(e[5]="6"),"?"==e[3]&&(e[3]="*"),e[3].indexOf("W")>-1&&(e[3].indexOf(",")>-1||e[3].indexOf("-")>-1))throw Error("The 'W' character can be specified only when the day-of-month is a single day, not a range or list of days.");var n={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};for(var r in n)e[5]=e[5].replace(RegExp(r,"gi"),n[r].toString());e[4]=e[4].replace(/(^\d{1,2})|([^#/\s]\d{1,2})/g,function(e){var n=e.replace(/\D/,""),r=n;return t.monthStartIndexZero&&(r=(parseInt(n)+1).toString()),e.replace(n,r)});var i={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12};for(var a in i)e[4]=e[4].replace(RegExp(a,"gi"),i[a].toString());"0"==e[0]&&(e[0]=""),!/\*|\-|\,|\//.test(e[2])&&(/\*|\//.test(e[1])||/\*|\//.test(e[0]))&&(e[2]+="-".concat(e[2]));for(var o=0;o<e.length;o++)if(-1!=e[o].indexOf(",")&&(e[o]=e[o].split(",").filter(function(e){return""!==e}).join(",")||"*"),"*/1"==e[o]&&(e[o]="*"),e[o].indexOf("/")>-1&&!/^\*|\-|\,/.test(e[o])){var s=null;switch(o){case 4:s="12";break;case 5:s="6";break;case 6:s="9999";break;default:s=null}if(null!==s){var l=e[o].split("/");e[o]="".concat(l[0],"-").concat(s,"/").concat(l[1])}}},e.prototype.validate=function(e){var t="0-9,\\-*/";this.validateOnlyExpectedCharactersFound(e[0],t),this.validateOnlyExpectedCharactersFound(e[1],t),this.validateOnlyExpectedCharactersFound(e[2],t),this.validateOnlyExpectedCharactersFound(e[3],"0-9,\\-*/LW"),this.validateOnlyExpectedCharactersFound(e[4],t),this.validateOnlyExpectedCharactersFound(e[5],"0-9,\\-*/L#"),this.validateOnlyExpectedCharactersFound(e[6],t),this.validateAnyRanges(e)},e.prototype.validateAnyRanges=function(e){r.default.secondRange(e[0]),r.default.minuteRange(e[1]),r.default.hourRange(e[2]),r.default.dayOfMonthRange(e[3]),r.default.monthRange(e[4],this.monthStartIndexZero),r.default.dayOfWeekRange(e[5],this.dayOfWeekStartIndexZero)},e.prototype.validateOnlyExpectedCharactersFound=function(e,t){var n=e.match(RegExp("[^".concat(t,"]+"),"gi"));if(n&&n.length)throw Error("Expression contains invalid values: '".concat(n.toString(),"'"))},e}()},333:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionDescriptor=void 0;var r=n(823),i=n(949);t.ExpressionDescriptor=function(){function e(t,n){if(this.expression=t,this.options=n,this.expressionParts=[,,,,,],!this.options.locale&&e.defaultLocale&&(this.options.locale=e.defaultLocale),!e.locales[this.options.locale]){var r=Object.keys(e.locales)[0];console.warn("Locale '".concat(this.options.locale,"' could not be found; falling back to '").concat(r,"'.")),this.options.locale=r}this.i18n=e.locales[this.options.locale],void 0===n.use24HourTimeFormat&&(n.use24HourTimeFormat=this.i18n.use24HourTimeFormatByDefault())}return e.toString=function(t,n){var r=void 0===n?{}:n,i=r.throwExceptionOnParseError,a=r.verbose,o=r.dayOfWeekStartIndexZero,s=r.monthStartIndexZero,l=r.use24HourTimeFormat,u=r.locale,c=r.logicalAndDayFields,d={throwExceptionOnParseError:void 0===i||i,verbose:void 0!==a&&a,dayOfWeekStartIndexZero:void 0===o||o,monthStartIndexZero:void 0!==s&&s,use24HourTimeFormat:l,locale:void 0===u?null:u,logicalAndDayFields:void 0!==c&&c};return d.tzOffset&&console.warn("'tzOffset' option has been deprecated and is no longer supported."),new e(t,d).getFullDescription()},e.initialize=function(t,n){void 0===n&&(n="en"),e.specialCharacters=["/","-",",","*"],e.defaultLocale=n,t.load(e.locales)},e.prototype.getFullDescription=function(){var e,t,n="";try{var r=new i.CronParser(this.expression,this.options.dayOfWeekStartIndexZero,this.options.monthStartIndexZero);if(this.expressionParts=r.parse(),"@reboot"===this.expressionParts[0])return(null==(t=(e=this.i18n).atReboot)?void 0:t.call(e))||"Run once, at startup";var a=this.getTimeOfDayDescription(),o=this.getDayOfMonthDescription(),s=this.getMonthDescription(),l=this.getDayOfWeekDescription(),u=this.getYearDescription();n+=a+o+l+s+u,n=(n=this.transformVerbosity(n,!!this.options.verbose)).charAt(0).toLocaleUpperCase()+n.substr(1)}catch(e){if(this.options.throwExceptionOnParseError)throw"".concat(e);n=this.i18n.anErrorOccuredWhenGeneratingTheExpressionD()}return n},e.prototype.getTimeOfDayDescription=function(){var t=this.expressionParts[0],n=this.expressionParts[1],i=this.expressionParts[2],a="";if(r.StringUtilities.containsAny(n,e.specialCharacters)||r.StringUtilities.containsAny(i,e.specialCharacters)||r.StringUtilities.containsAny(t,e.specialCharacters))if(!(!t&&n.indexOf("-")>-1)||n.indexOf(",")>-1||n.indexOf("/")>-1||r.StringUtilities.containsAny(i,e.specialCharacters))if(!t&&i.indexOf(",")>-1&&-1==i.indexOf("-")&&-1==i.indexOf("/")&&!r.StringUtilities.containsAny(n,e.specialCharacters)){var o=i.split(",");a+=this.i18n.at();for(var s=0;s<o.length;s++)a+=" ",a+=this.formatTime(o[s],n,""),s<o.length-2&&(a+=","),s==o.length-2&&(a+=this.i18n.spaceAnd())}else{var l=this.getSecondsDescription(),u=this.getMinutesDescription(),c=this.getHoursDescription();if((a+=l)&&u&&(a+=", "),a+=u,u===c)return a;a&&c&&(a+=", "),a+=c}else{var d=n.split("-");a+=r.StringUtilities.format(this.i18n.everyMinuteBetweenX0AndX1(),this.formatTime(i,d[0],""),this.formatTime(i,d[1],""))}else a+=this.i18n.atSpace()+this.formatTime(i,n,t);return a},e.prototype.getSecondsDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[0],this.i18n.everySecond(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Seconds(t),t)},function(t){return e.i18n.secondsX0ThroughX1PastTheMinute()},function(t){return"0"==t?"":20>parseInt(t)?e.i18n.atX0SecondsPastTheMinute(t):e.i18n.atX0SecondsPastTheMinuteGt20()||e.i18n.atX0SecondsPastTheMinute(t)})},e.prototype.getMinutesDescription=function(){var e=this,t=this.expressionParts[0],n=this.expressionParts[2];return this.getSegmentDescription(this.expressionParts[1],this.i18n.everyMinute(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Minutes(t),t)},function(t){return e.i18n.minutesX0ThroughX1PastTheHour()},function(r){try{return"0"==r&&-1==n.indexOf("/")&&""==t?e.i18n.everyHour():20>parseInt(r)?e.i18n.atX0MinutesPastTheHour(r):e.i18n.atX0MinutesPastTheHourGt20()||e.i18n.atX0MinutesPastTheHour(r)}catch(t){return e.i18n.atX0MinutesPastTheHour(r)}})},e.prototype.getHoursDescription=function(){var e=this,t=this.expressionParts[2],n=0,i=[];t.split("/")[0].split(",").forEach(function(e){var t=e.split("-");2===t.length&&i.push({value:t[1],index:n+1}),n+=t.length});var a=0;return this.getSegmentDescription(t,this.i18n.everyHour(),function(t){var n=i.find(function(e){return e.value===t&&e.index===a})&&"0"!==e.expressionParts[1];return a++,n?e.formatTime(t,"59",""):e.formatTime(t,"0","")},function(t){return r.StringUtilities.format(e.i18n.everyX0Hours(t),t)},function(t){return e.i18n.betweenX0AndX1()},function(t){return e.i18n.atX0()})},e.prototype.getDayOfWeekDescription=function(){var e=this,t=this.i18n.daysOfTheWeek();return"*"==this.expressionParts[5]?"":this.getSegmentDescription(this.expressionParts[5],this.i18n.commaEveryDay(),function(n,r){var i=n;n.indexOf("#")>-1?i=n.substring(0,n.indexOf("#")):n.indexOf("L")>-1&&(i=i.replace("L",""));var a=parseInt(i),o=e.i18n.daysOfTheWeekInCase?e.i18n.daysOfTheWeekInCase(r)[a]:t[a];if(n.indexOf("#")>-1){var s=null,l=n.substring(n.indexOf("#")+1),u=n.substring(0,n.indexOf("#"));switch(l){case"1":s=e.i18n.first(u);break;case"2":s=e.i18n.second(u);break;case"3":s=e.i18n.third(u);break;case"4":s=e.i18n.fourth(u);break;case"5":s=e.i18n.fifth(u)}o=s+" "+o}return o},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0DaysOfTheWeek(t),t)},function(t){var n=t.substring(0,t.indexOf("-"));return"*"!=e.expressionParts[3]?e.i18n.commaAndX0ThroughX1(n):e.i18n.commaX0ThroughX1(n)},function(t){var n=null;if(t.indexOf("#")>-1){var r=t.substring(t.indexOf("#")+1),i=t.substring(0,t.indexOf("#"));n=e.i18n.commaOnThe(r,i).trim()+e.i18n.spaceX0OfTheMonth()}else n=t.indexOf("L")>-1?e.i18n.commaOnTheLastX0OfTheMonth(t.replace("L","")):"*"!=e.expressionParts[3]?e.options.logicalAndDayFields?e.i18n.commaOnlyOnX0(t):e.i18n.commaAndOnX0():e.i18n.commaOnlyOnX0(t);return n})},e.prototype.getMonthDescription=function(){var e=this,t=this.i18n.monthsOfTheYear();return this.getSegmentDescription(this.expressionParts[4],"",function(n,r){return r&&e.i18n.monthsOfTheYearInCase?e.i18n.monthsOfTheYearInCase(r)[parseInt(n)-1]:t[parseInt(n)-1]},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0Months(t),t)},function(t){return e.i18n.commaMonthX0ThroughMonthX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInMonthX0?e.i18n.commaOnlyInMonthX0():e.i18n.commaOnlyInX0()})},e.prototype.getDayOfMonthDescription=function(){var e=this,t=null,n=this.expressionParts[3];switch(n){case"L":t=this.i18n.commaOnTheLastDayOfTheMonth();break;case"WL":case"LW":t=this.i18n.commaOnTheLastWeekdayOfTheMonth();break;default:var i=n.match(/(\d{1,2}W)|(W\d{1,2})/);if(i){var a=parseInt(i[0].replace("W","")),o=1==a?this.i18n.firstWeekday():r.StringUtilities.format(this.i18n.weekdayNearestDayX0(),a.toString());t=r.StringUtilities.format(this.i18n.commaOnTheX0OfTheMonth(),o)}else{var s=n.match(/L-(\d{1,2})/);if(s){var l=s[1];t=r.StringUtilities.format(this.i18n.commaDaysBeforeTheLastDayOfTheMonth(l),l)}else{if("*"==n&&"*"!=this.expressionParts[5])return"";t=this.getSegmentDescription(n,this.i18n.commaEveryDay(),function(t){return"L"==t?e.i18n.lastDay():e.i18n.dayX0?r.StringUtilities.format(e.i18n.dayX0(),t):t},function(t){return"1"==t?e.i18n.commaEveryDay():e.i18n.commaEveryX0Days(t)},function(t){return e.i18n.commaBetweenDayX0AndX1OfTheMonth(t)},function(t){return e.i18n.commaOnDayX0OfTheMonth(t)})}}}return t},e.prototype.getYearDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[6],"",function(e){return/^\d+$/.test(e)?new Date(parseInt(e),1).getFullYear().toString():e},function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Years(t),t)},function(t){return e.i18n.commaYearX0ThroughYearX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInYearX0?e.i18n.commaOnlyInYearX0():e.i18n.commaOnlyInX0()})},e.prototype.getSegmentDescription=function(e,t,n,i,a,o){var s=null,l=e.indexOf("/")>-1,u=e.indexOf("-")>-1,c=e.indexOf(",")>-1;if(e)if("*"===e)s=t;else if(l||u||c)if(c){for(var d=e.split(","),p="",f=0;f<d.length;f++)if(f>0&&d.length>2&&(p+=",",f<d.length-1&&(p+=" ")),f>0&&d.length>1&&(f==d.length-1||2==d.length)&&(p+="".concat(this.i18n.spaceAnd()," ")),d[f].indexOf("/")>-1||d[f].indexOf("-")>-1){var m=d[f].indexOf("-")>-1&&-1==d[f].indexOf("/"),h=this.getSegmentDescription(d[f],t,n,i,m?this.i18n.commaX0ThroughX1:a,o);m&&(h=h.replace(", ","")),p+=h}else l?p+=this.getSegmentDescription(d[f],t,n,i,a,o):p+=n(d[f]);s=l?p:r.StringUtilities.format(o(e),p)}else if(l){var d=e.split("/");if(s=r.StringUtilities.format(i(d[1]),d[1]),d[0].indexOf("-")>-1){var g=this.generateRangeSegmentDescription(d[0],a,n);0!=g.indexOf(", ")&&(s+=", "),s+=g}else if(-1==d[0].indexOf("*")){var v=r.StringUtilities.format(o(d[0]),n(d[0]));v=v.replace(", ",""),s+=r.StringUtilities.format(this.i18n.commaStartingX0(),v)}}else u&&(s=this.generateRangeSegmentDescription(e,a,n));else s=r.StringUtilities.format(o(e),n(e));else s="";return s},e.prototype.generateRangeSegmentDescription=function(e,t,n){var i="",a=e.split("-"),o=n(a[0],1),s=n(a[1],2),l=t(e);return i+r.StringUtilities.format(l,o,s)},e.prototype.formatTime=function(e,t,n){var r=parseInt(e)+0,i=parseInt(t)+0;i>=60?(i-=60,r+=1):i<0&&(i+=60,r-=1),r>=24?r-=24:r<0&&(r=24+r);var a="",o=!1;this.options.use24HourTimeFormat||(a=(o=!!(this.i18n.setPeriodBeforeTime&&this.i18n.setPeriodBeforeTime()))?"".concat(this.getPeriod(r)," "):" ".concat(this.getPeriod(r)),r>12&&(r-=12),0===r&&(r=12));var s="";return n&&(s=":".concat(("00"+n).substring(n.length))),"".concat(o?a:"").concat(("00"+r.toString()).substring(r.toString().length),":").concat(("00"+i.toString()).substring(i.toString().length)).concat(s).concat(o?"":a)},e.prototype.transformVerbosity=function(e,t){if(!t&&(e=(e=(e=(e=e.replace(RegExp(", ".concat(this.i18n.everyMinute()),"g"),"")).replace(RegExp(", ".concat(this.i18n.everyHour()),"g"),"")).replace(RegExp(this.i18n.commaEveryDay(),"g"),"")).replace(/\, ?$/,""),this.i18n.conciseVerbosityReplacements))for(var n=0,r=Object.entries(this.i18n.conciseVerbosityReplacements());n<r.length;n++){var i=r[n],a=i[0],o=i[1];e=e.replace(RegExp(a,"g"),o)}return e},e.prototype.getPeriod=function(e){return e>=12?this.i18n.pm&&this.i18n.pm()||"PM":this.i18n.am&&this.i18n.am()||"AM"},e.locales={},e}()},747:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.enLocaleLoader=void 0;var r=n(486);t.enLocaleLoader=function(){function e(){}return e.prototype.load=function(e){e.en=new r.en},e}()},486:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.en=void 0,t.en=function(){function e(){}return e.prototype.atX0SecondsPastTheMinuteGt20=function(){return null},e.prototype.atX0MinutesPastTheHourGt20=function(){return null},e.prototype.commaMonthX0ThroughMonthX1=function(){return null},e.prototype.commaYearX0ThroughYearX1=function(){return null},e.prototype.use24HourTimeFormatByDefault=function(){return!1},e.prototype.anErrorOccuredWhenGeneratingTheExpressionD=function(){return"An error occurred when generating the expression description. Check the cron expression syntax."},e.prototype.everyMinute=function(){return"every minute"},e.prototype.everyHour=function(){return"every hour"},e.prototype.atSpace=function(){return"At "},e.prototype.everyMinuteBetweenX0AndX1=function(){return"Every minute between %s and %s"},e.prototype.at=function(){return"At"},e.prototype.spaceAnd=function(){return" and"},e.prototype.everySecond=function(){return"every second"},e.prototype.everyX0Seconds=function(){return"every %s seconds"},e.prototype.secondsX0ThroughX1PastTheMinute=function(){return"seconds %s through %s past the minute"},e.prototype.atX0SecondsPastTheMinute=function(){return"at %s seconds past the minute"},e.prototype.everyX0Minutes=function(){return"every %s minutes"},e.prototype.minutesX0ThroughX1PastTheHour=function(){return"minutes %s through %s past the hour"},e.prototype.atX0MinutesPastTheHour=function(){return"at %s minutes past the hour"},e.prototype.everyX0Hours=function(){return"every %s hours"},e.prototype.betweenX0AndX1=function(){return"between %s and %s"},e.prototype.atX0=function(){return"at %s"},e.prototype.commaEveryDay=function(){return", every day"},e.prototype.commaEveryX0DaysOfTheWeek=function(){return", every %s days of the week"},e.prototype.commaX0ThroughX1=function(){return", %s through %s"},e.prototype.commaAndX0ThroughX1=function(){return", %s through %s"},e.prototype.first=function(){return"first"},e.prototype.second=function(){return"second"},e.prototype.third=function(){return"third"},e.prototype.fourth=function(){return"fourth"},e.prototype.fifth=function(){return"fifth"},e.prototype.commaOnThe=function(){return", on the "},e.prototype.spaceX0OfTheMonth=function(){return" %s of the month"},e.prototype.lastDay=function(){return"the last day"},e.prototype.commaOnTheLastX0OfTheMonth=function(){return", on the last %s of the month"},e.prototype.commaOnlyOnX0=function(){return", only on %s"},e.prototype.commaAndOnX0=function(){return", and on %s"},e.prototype.commaEveryX0Months=function(){return", every %s months"},e.prototype.commaOnlyInX0=function(){return", only in %s"},e.prototype.commaOnTheLastDayOfTheMonth=function(){return", on the last day of the month"},e.prototype.commaOnTheLastWeekdayOfTheMonth=function(){return", on the last weekday of the month"},e.prototype.commaDaysBeforeTheLastDayOfTheMonth=function(){return", %s days before the last day of the month"},e.prototype.firstWeekday=function(){return"first weekday"},e.prototype.weekdayNearestDayX0=function(){return"weekday nearest day %s"},e.prototype.commaOnTheX0OfTheMonth=function(){return", on the %s of the month"},e.prototype.commaEveryX0Days=function(){return", every %s days"},e.prototype.commaBetweenDayX0AndX1OfTheMonth=function(){return", between day %s and %s of the month"},e.prototype.commaOnDayX0OfTheMonth=function(){return", on day %s of the month"},e.prototype.commaEveryHour=function(){return", every hour"},e.prototype.commaEveryX0Years=function(){return", every %s years"},e.prototype.commaStartingX0=function(){return", starting %s"},e.prototype.daysOfTheWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e.prototype.monthsOfTheYear=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},e.prototype.atReboot=function(){return"Run once, at startup"},e}()},515:function(e,t){var n=function(e,t){if(!e)throw Error(t)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){}return e.secondRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=59,"seconds part must be >= 0 and <= 59")}},e.minuteRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=59,"minutes part must be >= 0 and <= 59")}},e.hourRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=23,"hours part must be >= 0 and <= 23")}},e.dayOfMonthRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=1&&i<=31,"DOM part must be >= 1 and <= 31")}},e.monthRange=function(e,t){for(var r=e.split(","),i=0;i<r.length;i++)if(!isNaN(parseInt(r[i],10))){var a=parseInt(r[i],10);n(a>=1&&a<=12,t?"month part must be >= 0 and <= 11":"month part must be >= 1 and <= 12")}},e.dayOfWeekRange=function(e,t){for(var r=e.split(","),i=0;i<r.length;i++)if(!isNaN(parseInt(r[i],10))){var a=parseInt(r[i],10);n(a>=0&&a<=6,t?"DOW part must be >= 0 and <= 6":"DOW part must be >= 1 and <= 7")}},e}()},823:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtilities=void 0,t.StringUtilities=function(){function e(){}return e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/%s/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.shift()})},e.containsAny=function(e,t){return t.some(function(t){return e.indexOf(t)>-1})},e}()}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,i),a.exports}var a={};return Object.defineProperty(a,"__esModule",{value:!0}),a.toString=void 0,e=i(333),t=i(747),e.ExpressionDescriptor.initialize(new t.enLocaleLoader),a.default=e.ExpressionDescriptor,a.toString=e.ExpressionDescriptor.toString,a}()};if("object"===r._(n)&&"object"===r._(t))t.exports=a();else if("function"==typeof define&&define.amd){let t;void 0!==(t=a())&&e.v(t)}else"object"===r._(n)?n.cronstrue=a():i.cronstrue=a()},947592,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},t.exports=n.default},693955,(e,t,n)=>{"use strict";var r,i=e.r(954546),a=e.r(365738);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=Object.prototype.toString.call(e);return i._(e,Date)||(void 0===e?"undefined":a._(e))==="object"&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(Error().stack)),new Date(NaN))};var o=(r=e.r(947592))&&r.__esModule?r:{default:r};t.exports=n.default},48654,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,i.default)(1,arguments),!isNaN((0,r.default)(e))};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},429881,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var i;if(n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix)if(n.comparison>0)return"in "+i;else return i+" ago";return i};var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.exports=n.default},527508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}},t.exports=n.default},488365,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(527508))&&r.__esModule?r:{default:r};n.default={date:(0,i.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},t.exports=n.default},727525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,i){return r[e]};var r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.exports=n.default},8629,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;r=e.values[l]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}},t.exports=n.default},691958,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(8629))&&r.__esModule?r:{default:r};n.default={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,i.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,i.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},t.exports=n.default},678985,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r=String(t),i=n||{},a=r.match(e.matchPattern);if(!a)return null;var o=a[0],s=r.match(e.parsePattern);if(!s)return null;var l=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:l=i.valueCallback?i.valueCallback(l):l,rest:r.slice(o.length)}}},t.exports=n.default},417644,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r,i=String(t),a=n||{},o=a.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],l=i.match(s);if(!l)return null;var u=l[0],c=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return r="[object Array]"===Object.prototype.toString.call(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(c,function(e){return e.test(u)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(c,function(e){return e.test(u)}),r=e.valueCallback?e.valueCallback(r):r,{value:r=a.valueCallback?a.valueCallback(r):r,rest:i.slice(u.length)}}},t.exports=n.default},207756,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e.r(678985)),i=a(e.r(417644));function a(e){return e&&e.__esModule?e:{default:e}}n.default={ordinalNumber:(0,r.default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,i.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,i.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},t.exports=n.default},963919,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=l(e.r(429881)),i=l(e.r(488365)),a=l(e.r(727525)),o=l(e.r(691958)),s=l(e.r(207756));function l(e){return e&&e.__esModule?e:{default:e}}n.default={code:"en-US",formatDistance:r.default,formatLong:i.default,formatRelative:a.default,localize:o.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},t.exports=n.default},555023,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)},t.exports=n.default},970266,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,a.default)(2,arguments),new Date((0,i.default)(e).getTime()+(0,r.default)(t))};var r=o(e.r(555023)),i=o(e.r(693955)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},209021,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,r.default)(t);return(0,i.default)(e,-n)};var r=o(e.r(555023)),i=o(e.r(970266)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},374369,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n},t.exports=n.default},474293,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(374369))&&r.__esModule?r:{default:r};n.default={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return(0,i.default)("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):(0,i.default)(n+1,2)},d:function(e,t){return(0,i.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return(0,i.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,i.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,i.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,i.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=Math.floor(e.getUTCMilliseconds()*Math.pow(10,n-3));return(0,i.default)(r,t.length)}},t.exports=n.default},520019,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((n-t.getTime())/864e5)+1};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},167852,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-(7*(n<1)+n-1)),t.setUTCHours(0,0,0,0),t};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},596841,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var s=(0,i.default)(o),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var u=(0,i.default)(l);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1};var r=o(e.r(693955)),i=o(e.r(167852)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},57269,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,i.default)(n)};var r=o(e.r(596841)),i=o(e.r(167852)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},424341,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=(0,r.default)(e);return Math.round(((0,i.default)(t).getTime()-(0,a.default)(t).getTime())/6048e5)+1};var r=s(e.r(693955)),i=s(e.r(167852)),a=s(e.r(57269)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},171771,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(1,arguments);var n=t||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,l=null==s?0:(0,r.default)(s),u=null==n.weekStartsOn?l:(0,r.default)(n.weekStartsOn);if(!(u>=0&&u<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=(0,i.default)(e),d=c.getUTCDay();return c.setUTCDate(c.getUTCDate()-(7*(d<u)+d-u)),c.setUTCHours(0,0,0,0),c};var r=o(e.r(555023)),i=o(e.r(693955)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},247167,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=(0,i.default)(e,t),s=n.getUTCFullYear(),l=t||{},u=l.locale,c=u&&u.options&&u.options.firstWeekContainsDate,d=null==c?1:(0,r.default)(c),p=null==l.firstWeekContainsDate?d:(0,r.default)(l.firstWeekContainsDate);if(!(p>=1&&p<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(s+1,0,p),f.setUTCHours(0,0,0,0);var m=(0,a.default)(f,t),h=new Date(0);h.setUTCFullYear(s,0,p),h.setUTCHours(0,0,0,0);var g=(0,a.default)(h,t);return n.getTime()>=m.getTime()?s+1:n.getTime()>=g.getTime()?s:s-1};var r=s(e.r(555023)),i=s(e.r(693955)),a=s(e.r(171771)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},129705,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=t||{},s=n.locale,l=s&&s.options&&s.options.firstWeekContainsDate,u=null==l?1:(0,r.default)(l),c=null==n.firstWeekContainsDate?u:(0,r.default)(n.firstWeekContainsDate),d=(0,i.default)(e,t),p=new Date(0);return p.setUTCFullYear(d,0,c),p.setUTCHours(0,0,0,0),(0,a.default)(p,t)};var r=s(e.r(555023)),i=s(e.r(247167)),a=s(e.r(171771)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},711232,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=(0,r.default)(e);return Math.round(((0,i.default)(n,t).getTime()-(0,a.default)(n,t).getTime())/6048e5)+1};var r=s(e.r(693955)),i=s(e.r(171771)),a=s(e.r(129705)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},175395,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(e.r(474293)),i=c(e.r(520019)),a=c(e.r(424341)),o=c(e.r(596841)),s=c(e.r(711232)),l=c(e.r(247167)),u=c(e.r(374369));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+(t||"")+(0,u.default)(a,2)}function p(e,t){return e%60==0?(e>0?"-":"+")+(0,u.default)(Math.abs(e)/60,2):f(e,t)}function f(e,t){var n=Math.abs(e);return(e>0?"-":"+")+(0,u.default)(Math.floor(n/60),2)+(t||"")+(0,u.default)(n%60,2)}n.default={G:function(e,t,n){var r=+(e.getUTCFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear();return n.ordinalNumber(i>0?i:1-i,{unit:"year"})}return r.default.y(e,t)},Y:function(e,t,n,r){var i=(0,l.default)(e,r),a=i>0?i:1-i;if("YY"===t){var o=a%100;return(0,u.default)(o,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):(0,u.default)(a,t.length)},R:function(e,t){var n=(0,o.default)(e);return(0,u.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,u.default)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,u.default)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,u.default)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return r.default.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return(0,u.default)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,s.default)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):(0,u.default)(i,t.length)},I:function(e,t,n){var r=(0,a.default)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):(0,u.default)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):r.default.d(e,t)},D:function(e,t,n){var r=(0,i.default)(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):(0,u.default)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,u.default)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,u.default)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,u.default)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return r.default.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):r.default.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,u.default)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):(0,u.default)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):r.default.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):r.default.s(e,t)},S:function(e,t){return r.default.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return p(i);case"XXXX":case"XX":return f(i);default:return f(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return p(i);case"xxxx":case"xx":return f(i);default:return f(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+d(i,":");default:return"GMT"+f(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+d(i,":");default:return"GMT"+f(i,":")}},t:function(e,t,n,r){var i=Math.floor((r._originalDate||e).getTime()/1e3);return(0,u.default)(i,t.length)},T:function(e,t,n,r){var i=(r._originalDate||e).getTime();return(0,u.default)(i,t.length)}},t.exports=n.default},463849,(e,t,n)=>{"use strict";function r(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function i(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={p:i,P:function(e,t){var n,a=e.match(/(P+)(p+)?/),o=a[1],s=a[2];if(!s)return r(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(o,t)).replace("{{time}}",i(s,t))}},t.exports=n.default},906695,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},t.exports=n.default},539530,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isProtectedDayOfYearToken=function(e){return -1!==r.indexOf(e)},n.isProtectedWeekYearToken=function(e){return -1!==i.indexOf(e)},n.throwProtectedError=function(e,t,n){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))};var r=["D","DD"],i=["YY","YYYY"]},628251,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){(0,p.default)(2,arguments);var f=String(t),y=n||{},b=y.locale||i.default,S=b.options&&b.options.firstWeekContainsDate,_=null==S?1:(0,d.default)(S),w=null==y.firstWeekContainsDate?_:(0,d.default)(y.firstWeekContainsDate);if(!(w>=1&&w<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var j=b.options&&b.options.weekStartsOn,T=null==j?0:(0,d.default)(j),D=null==y.weekStartsOn?T:(0,d.default)(y.weekStartsOn);if(!(D>=0&&D<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw RangeError("locale must contain localize property");if(!b.formatLong)throw RangeError("locale must contain formatLong property");var k=(0,o.default)(e);if(!(0,r.default)(k))throw RangeError("Invalid time value");var C=(0,u.default)(k),E=(0,a.default)(k,C),A={firstWeekContainsDate:w,weekStartsOn:D,locale:b,_originalDate:k};return f.match(h).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,l.default[t])(e,b.formatLong,A):e}).join("").match(m).map(function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(g)[1].replace(v,"'");var i=s.default[r];if(i)return!y.useAdditionalWeekYearTokens&&(0,c.isProtectedWeekYearToken)(n)&&(0,c.throwProtectedError)(n,t,e),!y.useAdditionalDayOfYearTokens&&(0,c.isProtectedDayOfYearToken)(n)&&(0,c.throwProtectedError)(n,t,e),i(E,n,b.localize,A);if(r.match(x))throw RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n}).join("")};var r=f(e.r(48654)),i=f(e.r(963919)),a=f(e.r(209021)),o=f(e.r(693955)),s=f(e.r(175395)),l=f(e.r(463849)),u=f(e.r(906695)),c=e.r(539530),d=f(e.r(555023)),p=f(e.r(947592));function f(e){return e&&e.__esModule?e:{default:e}}var m=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,h=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,g=/^'([^]*?)'?$/,v=/''/g,x=/[a-zA-Z]/;t.exports=n.default},792130,e=>{e.v({button:"FreeDomainClaimSection-module__hng7Ia__button",buttonContainer:"FreeDomainClaimSection-module__hng7Ia__buttonContainer",container:"FreeDomainClaimSection-module__hng7Ia__container",content:"FreeDomainClaimSection-module__hng7Ia__content",freeText:"FreeDomainClaimSection-module__hng7Ia__freeText",header:"FreeDomainClaimSection-module__hng7Ia__header",headerText:"FreeDomainClaimSection-module__hng7Ia__headerText",strikethroughPrice:"FreeDomainClaimSection-module__hng7Ia__strikethroughPrice"})},79271,e=>{e.v({container:"FreeDomainUpsellInfoBox-module__uA4uUq__container",header:"FreeDomainUpsellInfoBox-module__uA4uUq__header",withBorder:"FreeDomainUpsellInfoBox-module__uA4uUq__withBorder"})},867559,e=>{e.v({self:"FreeTierUpsellBanner-module__NxVGBW__self",text:"FreeTierUpsellBanner-module__NxVGBW__text"})},314535,202975,774671,484921,129928,422145,66373,682872,489172,956002,71834,109644,664219,479373,365692,777373,332822,788401,832550,34912,500179,691302,697859,823166,137737,32144,680250,713547,636567,358637,182492,462216,863753,368487,791134,793203,295745,341734,828454,870078,591069,57354,452831,635528,398594,605526,976191,e=>{"use strict";var t,n,r=e.i(276385),i=e.i(389959),a=e.i(188507),o=e.i(546469),s=e.i(44660),l=e.i(190120),u=e.i(287999),c=e.i(81143),d=e.i(849954),p=e.i(248011),f=e.i(625484),m=e.i(51236),h=(0,i.memo)(function(e){var t=e.checkpoint,n=e.onSessionChange,h=e.onRenameTitle,g=e.eventState,v=t.id,x=t.revert,y=(0,d.default)({checkpoint:t,onSessionChange:n}).onRevert,b=(0,p.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,S=(0,i.useMemo)(function(){return{isPaid:t.isPaid,usageIndicatorVariant:b?o.UsageIndicatorVariant.Starter:o.UsageIndicatorVariant.Paid}},[t.isPaid,b]);return(0,r.jsxs)(f.View,{"data-event-id":v,"data-commit-id":t.commitId,gap:0,clsx:m.default.container,children:[(0,r.jsx)(l.CheckpointCard,{title:t.title,commitId:t.commitId,enableHelium:t.heliumCheckpointCreated,author:(0,u.commitAuthorToCheckpointAuthor)(t.author),onOpenCommit:e.onOpenCommit,date:t.created,screenshot:t.screenshotUrl,isReverting:(null==x?void 0:x.status)==="inflight",isInProgress:g===a.EventState.IN_PROGRESS,costInfo:S,variant:l.CheckpointCardVariant.ChatFeedDefault,onRevert:y,onRenameTitle:h?function(e){return h(t.commitId,e)}:void 0,isLatest:t.isLatest,isDirty:t.isDirty,hasFurtherNonSummaryEvents:t.hasFurtherNonSummaryEvents,openPane:e.openPane}),t.isPaid&&(0,c.hasAnyMetric)(t)?(0,r.jsx)(s.AgentWorkMetrics,{workDurationSeconds:t.workDurationSeconds,addedLinesOfCode:t.addedLinesOfCode,removedLinesOfCode:t.removedLinesOfCode,toolCalls:t.toolCalls,usageCents:t.usageCents,numLocRead:t.numLocRead,numFilesRead:t.numFilesRead,capabilityUsage:t.capabilityUsage,isFreemiumRepl:b,ubbV2:t.ubbV2,refunded:t.refunded,defaultExpanded:t.triggerReason===a.CheckpointTriggerReason.CHECKPOINT_TRIGGER_REASON_RAPID_BUILD_FEEDBACK,workType:"checkpoint",isInProgress:g===a.EventState.IN_PROGRESS,eventCreated:t.created}):null]})});e.s(["Checkpoint",()=>h],314535);var g=e.i(878420),v=e.i(64386),x=e.i(527717);function y(e){var t=e.summary,n=(0,p.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl;return(0,c.hasAnyMetric)(t)?(0,r.jsx)(f.View,{"data-event-id":t.id,gap:8,clsx:x.default.root,children:(0,r.jsx)(s.AgentWorkMetrics,(0,v._)((0,g._)({},t),{isFreemiumRepl:n,workType:"run",ubbV2:!0,defaultExpanded:!1,preDiscountsUsageCents:t.preDiscountsUsageCents,eventCreated:t.created}))}):null}e.s(["EndOfRunSummary",()=>y],202975);var b=e.i(530658),S=e.i(480028),_=e.i(754873),w=e.i(929872),j=e.i(960178),T=e.i(916271),D=e.i(576073),k=e.i(42458),C=e.i(529675),E=(0,i.memo)(function(e){var t=(0,b._)((0,i.useState)(!1),2),n=t[0],a=t[1];return(0,r.jsxs)(f.View,{gap:6,children:[(0,r.jsxs)(f.View,{css:_.interactive.nofill,tag:"button",row:!0,px:4,gap:6,align:"center",justify:"space-between",onClick:function(){return a(function(e){return!e})},children:[(0,r.jsxs)(f.View,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,r.jsx)(k.default,{color:S.tokens.foregroundDimmer}),(0,r.jsx)(j.Text,{color:"dimmer",children:e.shortMessage||"Agent ran into an error"})]}),(0,r.jsx)(D.default,{color:S.tokens.foregroundDimmer,rotate:180*!!n})]}),n?(0,r.jsx)(w.Surface,{p:8,elevated:!0,clsx:C.default.surface,children:(0,r.jsx)(T.default,{children:e.message})}):null]})});e.s(["ErrorMessage",()=>E],774671);var A=e.i(798790),I=e.i(721281),R=e.i(654647),P=e.i(629536),M=e.i(145864),O=e.i(796674),N=e.i(670413),L=e.i(45442),B=e.i(131614),V="Start building";e.s(["TASK_LIST_START_BUILDING_MESSAGE",()=>V],484921);var U=e.i(509908),F=e.i(262206),H=e.i(926118),G=e.i(907371),z=e.i(173703),q=e.i(696770),W=e.i(140487),K=e.i(127227),$=e.i(818503),Y=e.i(734882),X=e.i(751273),Q=e.i(608263),J=e.i(616278),Z=e.i(452002),ee=e.i(658975),et=e.i(491404),en=e.i(940745),er=e.i(645424),ei="Build functionality",ea="Continue building",eo=[a.StackBlueprint.STACK_BLUEPRINT_FULLSTACK_JS,a.StackBlueprint.STACK_BLUEPRINT_EXPO];function es(e,t){(0,i.useEffect)(function(){if(!t){var n=function(t){"Enter"===t.key&&(0,N.getCmdOrCtrl)(t)&&(t.preventDefault(),e())};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}},[e,t])}function el(){return(0,r.jsx)(H.KeyComboBlocks,{keyCombo:(0,F.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"}),small:!0,hideBorder:!0})}function eu(e){var t=e.isInMobileWorkspace,n=e.onStartBuilding,o=e.stackBlueprint,s=e.sessionId,l=(0,O.useManagerWhoFlag)(),u=!!o&&eo.includes(o),c=(0,b._)((0,i.useState)(function(){if(l||!u)return a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC}),2),d=c[0],p=c[1];return(0,r.jsx)(ec,{isDesignModeSupported:u,initialBuildMode:d,setInitialBuildMode:p,sessionId:s,stackBlueprint:o,onStartBuilding:n,isInMobileWorkspace:t,flagManagerWho:l})}function ec(e){var t=e.isDesignModeSupported,n=e.initialBuildMode,o=e.setInitialBuildMode,s=e.sessionId,l=e.stackBlueprint,u=e.onStartBuilding,c=e.isInMobileWorkspace,d=e.flagManagerWho,p=n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,m="Start building";!d&&p&&(m="Start designing");var h=(0,M.useGetPlanProposalUserSecretsResponse)(),g=(0,M.useClearPlanProposalUserSecretsResponse)(),v=(0,i.useCallback)(function(){n&&(u({initialBuildMode:n,userSecretsResponse:h()}),g())},[u,n,h,g]);es(v,c),(0,i.useEffect)(function(){!t&&p&&o(a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC)},[t,p,o]);var x=(0,M.useSetAgentPlanApprovalState)(),y=(0,i.useCallback)(function(){x("revising"),(0,U.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_initiated",sessionId:s,stackBlueprint:l,skipRapidBuild:!0})},[s,x,l]),S=(0,L.useAgentSettings)(),_=(0,b._)((0,i.useState)(!1),2),w=_[0],T=_[1];return(0,r.jsxs)(eh,{colorShade:"default",children:[(0,r.jsx)(j.Text,{textWrap:"pretty",children:"I've created a feature list based on your request. If everything looks good, we can start building."}),!d&&(0,r.jsx)(j.Text,{textWrap:"pretty",children:"How do you want to continue?"}),(0,r.jsx)(f.View,{gap:8,children:d?(0,r.jsx)(W.Button,{text:m,onClick:v,iconRight:(0,r.jsx)(Q.default,{}),colorway:"primary"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(R.ListBox,{"aria-label":"Initial build mode",selectionMode:"single",clsx:er.default.initialBuildModeOptions,children:[(0,r.jsx)(ed,{mode:a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC,isSelected:n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC,onSelect:o,sessionId:s,stackBlueprint:l}),(0,r.jsx)(ed,{mode:a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,disabledReason:t?void 0:"Unavailable with this app type",isSelected:n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,onSelect:o,sessionId:s,stackBlueprint:l})]}),(0,r.jsx)(f.View,{children:(0,r.jsx)(X.Tooltip,{tooltip:"Select an option above to continue",isDisabled:void 0!==n,placement:"top",children:(0,r.jsx)(W.Button,{text:m,onClick:v,iconRight:(0,r.jsx)(Q.default,{}),colorway:"primary",disabled:void 0===n})})})]})}),(0,r.jsxs)(f.View,{justify:"space-between",row:!0,gap:8,children:[(0,r.jsx)(W.Button,{clsx:er.default.editPlanButton,size:"small",text:"Edit plan",variant:"nofill",onClick:y}),(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:S,isOpen:w,onOpenChange:T,buttonText:"Agent tools",isFastModeUnavailable:!0})]})]})}function ed(e){var t,n=e.mode,o=e.isSelected,s=e.disabledReason,l=e.onSelect,u=e.sessionId,c=e.stackBlueprint,d=(0,q.useShadesFlag)(),p=!!s,m=n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,h=m?"design":"build",g=m?"Start with a design":"Build the entire app",v=m?"Best if you want to see a design prototype first, then iterate on visuals or features":"Best if you want ".concat(P.AGENT_NAME," to build out the full functionality of your app"),x=(0,i.useCallback)(function(){!p&&(l(n),u&&(0,U.trackAgentPlanningAnalyticsEvent)({action:"plan_initial_build_mode_selected",sessionId:u,stackBlueprint:c,initialBuildMode:n}))},[l,n,p,u,c]),y=(0,G.useCreateInteractive)({variant:"filledAndOutlined"});return(0,r.jsx)(R.ListBoxItem,{clsx:er.default.initialBuildModeItemContainer,id:n,onAction:x,textValue:g,children:(0,r.jsx)(X.Tooltip,{tooltip:s,isDisabled:!p,placement:"top",children:(0,r.jsxs)(z.ShadesSurface,{gap:8,p:8,align:"stretch",border:"regular",br:"container",clsx:[y.clsx,er.default.initialBuildModeItem,(t={},(0,I._)(t,er.default.selected,o),(0,I._)(t,er.default.disabled,p),(0,I._)(t,er.default.noShades,!d),t)],style:y.style,children:[(0,r.jsxs)(f.View,{justify:"space-between",row:!0,align:"start",children:[m?(0,r.jsx)(ee.default,{size:24}):(0,r.jsx)(et.default,{size:24}),(0,r.jsx)(Y.Radio,{id:h,value:h,checked:o})]}),(0,r.jsxs)(f.View,{gap:4,children:[(0,r.jsx)(j.Text,{variant:"subheadDefault",children:g}),(0,r.jsx)(j.Text,{color:"dimmest",children:m?"5-10 mins":"20+ mins"}),(0,r.jsx)(j.Text,{color:"dimmer",children:v})]})]})})},n)}function ep(e){var t=e.onStart,n=e.onRevise,a=e.onCancel,o=e.isInMobileWorkspace,s=e.hasDrawerAbove;es(t,o);var l=(0,L.useAgentSettings)(),u=(0,b._)((0,i.useState)(!1),2),c=u[0],d=u[1];return(0,r.jsxs)(eh,{hasDrawerAbove:void 0!==s&&s,children:[(0,r.jsxs)(j.Text,{textWrap:"pretty",children:[P.AGENT_NAME," has identified a task list to work on. If everything looks good, start building to make these updates to your app."]}),(0,r.jsx)(f.View,{gap:8,children:(0,r.jsxs)(f.View,{row:!0,gap:8,children:[(0,r.jsx)(W.Button,{className:er.default.grow1,text:"Revise plan",onClick:n,iconLeft:(0,r.jsx)(Z.default,{})}),(0,r.jsx)(W.Button,{className:er.default.grow1,text:V,onClick:t,iconLeft:(0,r.jsx)(J.default,{}),iconRight:o?void 0:(0,r.jsx)(el,{}),colorway:"primary"})]})}),(0,r.jsxs)(f.View,{row:!0,gap:8,justify:"space-between",align:"center",wrap:!0,clsx:er.default.statusRow,children:[(0,r.jsx)(f.View,{children:(0,r.jsx)(W.Button,{size:"small",variant:"nofill",text:"Cancel",onClick:a,clsx:er.default.cancelButton})}),(0,r.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:l,isOpen:c,onOpenChange:d,buttonText:"Agent tools",isFastModeUnavailable:!0})})]})]})}function ef(e){var t=e.onStart,n=e.onDismiss,a=e.isInMobileWorkspace,o=e.visualPhaseRequestCount,s=e.isApprovalResponseInProgress,l=void 0!==s&&s,u=(0,L.useAgentSettings)(),c=(0,b._)((0,i.useState)(!1),2),d=c[0],p=c[1],m=(0,b._)((0,i.useState)(!1),2),h=m[0],g=m[1];es(t,a);var v=(0,i.useCallback)(function(){n(h)},[n,h]),x=(void 0===o?0:o)>1;return(0,r.jsxs)(eh,{children:[(0,r.jsx)(j.Text,{textWrap:"pretty",children:"I've created a visual preview of your app. If everything looks good to you, I can start building the functionality of your app."}),(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,children:[(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:"Keep iterating on design",onClick:v,disabled:l,iconRight:l?(0,r.jsx)(en.default,{}):void 0}),(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:ei,onClick:t,iconRight:(0,r.jsx)(Q.default,{}),colorway:"primary",disabled:l})]}),(0,r.jsxs)(f.View,{row:!0,justify:x?"space-between":"end",children:[x?(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(K.Checkbox,{id:"dont-ask-again",checked:h,onChange:g,disabled:l}),(0,r.jsx)($.Label,{htmlFor:"dont-ask-again",children:(0,r.jsx)(j.Text,{variant:"small",color:l?"dimmest":"dimmer",clsx:(0,I._)({},er.default.interactiveLabel,!l),children:"Don't ask again"})})]}):null,(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:u,isOpen:d,onOpenChange:p,buttonText:"Agent tools",isFastModeUnavailable:!0})]})]})]})}function em(e){var t=e.onStart,n=e.onDismiss,a=e.isInMobileWorkspace,o=e.hasDrawerAbove;es(t,a);var s=(0,L.useAgentSettings)(),l=(0,b._)((0,i.useState)(!1),2),u=l[0],c=l[1];return(0,r.jsxs)(eh,{hasDrawerAbove:void 0!==o&&o,children:[(0,r.jsxs)(j.Text,{textWrap:"pretty",children:["I've created an MVP and identified a task list to work on. If everything looks good, ",ea.toLowerCase()," to make these updates to your app."]}),(0,r.jsx)(f.View,{gap:8,children:(0,r.jsxs)(f.View,{row:!0,gap:8,children:[(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:"Dismiss",onClick:n}),(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:ea,onClick:t,iconRight:(0,r.jsx)(J.default,{}),colorway:"primary"})]})}),(0,r.jsx)(f.View,{row:!0,justify:"end",children:(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:s,isOpen:u,onOpenChange:c,buttonText:"Agent tools",isFastModeUnavailable:!0})})]})}function eh(e){var t,n=e.colorShade,i=void 0===n?"notice":n,a=e.hasDrawerAbove,o=void 0!==a&&a,s=e.children;return(0,q.useShadesFlag)()?(0,r.jsx)(z.ShadesSurface,{elevate:"1x",border:"regular",colorShade:i,p:8,gap:8,br:o?[0,0,8,8]:8,children:s}):(0,r.jsx)(w.Surface,{clsx:[er.default.dialog,(t={},(0,I._)(t,er.default.noticeColorway,"notice"===i),(0,I._)(t,er.default.hasDrawerAbove,o),t)],gap:8,elevated:!0,children:s})}function eg(e){var t=e.created,n=e.initialBuildPhase,o=e.agentConfig,s=(0,i.useMemo)(function(){return n===a.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW?{message:ei,icon:(0,r.jsx)(X.Tooltip,{tooltip:"Design prototype approved",children:(0,r.jsx)(ee.default,{size:12,color:S.tokens.foregroundDimmest})})}:n===a.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW?{message:ea,icon:(0,r.jsx)(X.Tooltip,{tooltip:"Initial prototype approved",children:(0,r.jsx)(et.default,{size:12,color:S.tokens.foregroundDimmest})})}:{message:"",icon:null}},[n]),l=s.message,u=s.icon;return(0,r.jsx)(A.UserMessageContainer,{created:t,agentConfig:o,metaContent:u,children:(0,r.jsx)(A.UserMessageSurface,{agentMode:a.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,r.jsx)(j.Text,{children:l})})})}function ev(e){var t=e.created,n=e.initialBuildMode,o=e.agentConfig,s=(0,i.useMemo)(function(){return n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC?{message:"Start building",icon:(0,r.jsx)(X.Tooltip,{tooltip:"Full build selected",children:(0,r.jsx)(et.default,{size:12,color:S.tokens.foregroundDimmest})})}:n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC?{message:"Start designing",icon:(0,r.jsx)(X.Tooltip,{tooltip:"Design prototype selected",children:(0,r.jsx)(ee.default,{size:12,color:S.tokens.foregroundDimmest})})}:{message:"",icon:null}},[n]),l=s.message,u=s.icon;return(0,r.jsx)(A.UserMessageContainer,{created:t,agentConfig:o,metaContent:u,children:(0,r.jsx)(A.UserMessageSurface,{agentMode:a.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,r.jsx)(j.Text,{children:l})})})}e.s(["AgentInitialBuildMVPReviewDialog",()=>em,"AgentInitialBuildVisualReviewDialog",()=>ef,"AgentPlanApprovalDialog",()=>eu,"AgentTaskListApprovalDialog",()=>ep,"MVP_APPROVAL_MESSAGE",()=>ea,"VISUAL_PROTOTYPE_APPROVAL_MESSAGE",()=>ei],129928),e.s(["InitialBuildPhaseApproval",()=>eg],422145),e.s(["PlanApproval",()=>ev],66373);var ex=e.i(569384),ey=e.i(973245),eb=e.i(304277),eS=e.i(566901);function e_(){var e=(0,ex._)(["\n  query MobileAgentTourNudgeCurrentUser {\n    currentUser {\n      id\n      hasPushDevicesRegistered\n    }\n  }\n"]);return e_=function(){return e},e}var ew={},ej=(0,ey.gql)(e_()),eT=e.i(650587),eD=e.i(441329),ek=e.i(952521),eC=e.i(872069),eE=e.i(604963),eA=e.i(259421),eI=e.i(283110),eR=e.i(618497),eP=e.i(527225),eM=e.i(857253);function eO(e){var t=e.isPlanApproved,n=(0,eD.useIsInBonsaiWebview)();return(0,r.jsx)(f.View,{className:eM.default.root,children:n?(0,r.jsx)(eB,{isPlanApproved:t}):(0,r.jsx)(eL,{})})}function eN(){var e,t,n,r=(0,eD.useIsInBonsaiWebview)(),i=(e=(0,g._)({},ew,void 0),eb.useQuery(ej,e)).data,a=(0,ek.useMemoedDismissibleElement)("agent-mobile-notification-nudge",function(){(0,U.trackAgentAnalyticsEvent)({action:"mobile_download_qr_dismissed"})}),o=a.isDone,s=a.isLoading,l=a.setAsDone,u=null!=(n=null==i||null==(t=i.currentUser)?void 0:t.hasPushDevicesRegistered)&&n;return{isVisible:!r&&!s&&!o&&!u,dismiss:l}}var eL=function(){var e=(0,eT.useIsMobile)(),t=(0,b._)((0,i.useState)(!1),2),n=t[0],a=t[1],o=eN(),s=o.isVisible,l=o.dismiss;if(!s)return null;var u=function(e){(0,U.trackAgentAnalyticsEvent)({action:"mobile_download_qr_clicked"}),window.open(e)},c=(0,r.jsx)(W.Button,{clsx:eM.default.btnLeft,iconLeft:(0,r.jsx)(eP.default,{}),text:"Get notified when your app is ready",variant:"outlined"});return(0,r.jsxs)(r.Fragment,{children:[e?(0,r.jsxs)(eE.PopoverTrigger,{isOpen:n,onOpenChange:function(e){e&&(0,U.trackAgentAnalyticsEvent)({action:"mobile_download_qr_viewed"}),a(e)},label:"Show download Replit mobile app QR",placement:"top",children:[c,(0,r.jsx)(f.View,{clsx:eM.default.mobileQr,children:(0,r.jsx)(eA.default,{source:"agent_plan_timeline",installText:"Tap to install the Replit app",onClick:u})})]}):(0,r.jsx)(X.Tooltip,{placement:"top",colorway:"darker",tooltip:(0,r.jsx)(f.View,{clsx:eM.default.mobileQr,children:(0,r.jsx)(eA.default,{source:"agent_plan_timeline",installText:"Scan to install the Replit app",onClick:u})}),children:c}),(0,r.jsx)(W.Button,{clsx:eM.default.btnRight,iconLeft:(0,r.jsx)(eI.default,{}),text:"",variant:"outlined",onClick:function(){l(),a(!1)}})]})},eB=function(e){var t=e.isPlanApproved,n=(0,ek.useMemoedDismissibleElement)("bonsai-ws-agent-onboarding"),i=n.isDone,a=n.isLoading,o=n.setAsDone,s=(0,eD.useDoesBonsaiSupportFeatureFlag)("flag-mb-ws-agent-onboard"),l=(0,eC.default)({type:"agent",onComplete:o}).showTour;return s?(0,r.jsx)(W.Button,{clsx:eM.default.btnBonsai,iconLeft:(0,r.jsx)(eR.default,{}),colorway:a||i||!t?void 0:"primary",text:"Learn how to create with Agent",onClick:l}):null};e.i(545082);var eV=e.i(423111),eU=e.i(446530),eF=e.i(6338),eH=e.i(613355),eG=e.i(624782),ez=e.i(363201),eq=(0,eU.cssRecord)({item:[eF.loadingStyle.foregroundPulse(),eH.rcss.borderRadius(4),eH.rcss.height(20)]});function eW(){return(0,r.jsx)(f.View,{gap:8,children:(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",grow:!0,children:[(0,r.jsx)(j.Text,{color:"dimmer",children:"App type"}),(0,r.jsx)(X.Tooltip,{placement:"bottom-start",tooltip:"The primary framework ".concat(P.AGENT_NAME," will use to build the app"),children:(0,r.jsx)(ez.default,{size:12,color:S.tokens.foregroundDimmer})}),(0,r.jsx)(f.View,{row:!0,grow:!0,css:eq.item})]})})}function eK(e){var t=e.stackBlueprint,n=e.blueprints,i=e.isEditable,o=null!=t&&t!==a.StackBlueprint.STACK_BLUEPRINT_NONE&&t!==a.StackBlueprint.STACK_BLUEPRINT_CUSTOM&&t!==a.StackBlueprint.STACK_BLUEPRINT_BEST_EFFORT_FALLBACK,s=n.length>0&&n.some(function(e){return""!==e.displayName.trim()});return o||s?(0,r.jsxs)(f.View,{gap:8,children:[o?(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(j.Text,{color:"dimmer",children:"App type"}),(0,r.jsx)(X.Tooltip,{placement:"bottom-start",tooltip:"The primary framework ".concat(P.AGENT_NAME," will use to build the app"),children:(0,r.jsx)(ez.default,{size:12,color:S.tokens.foregroundDimmer})}),(0,r.jsx)(X.Tooltip,{tooltip:P.stackBlueprintDetails[t].description,children:(0,r.jsx)(eG.Pill,{text:P.stackBlueprintDetails[t].displayName,variant:"filled"})})]}):null,s?(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",wrap:!0,children:[(0,r.jsx)(j.Text,{color:"dimmer",children:"Integrations"}),(0,r.jsx)(X.Tooltip,{placement:"bottom-start",tooltip:"Any relevant integrations for your request",children:(0,r.jsx)(ez.default,{size:12,color:S.tokens.foregroundDimmer})}),(0,r.jsx)(e$,{blueprints:n,isEditable:i})]}):null]}):null}function e$(e){var t=e.blueprints,n=e.isEditable,a=(0,b._)((0,eV.useAuthBlueprint)(),2)[1],o=[],s=!1,l=!0,u=!1,c=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;if(""!==m.displayName.trim()){("javascript_log_in_with_replit"===m.name||"python_log_in_with_replit"===m.name)&&(s=!0);var h=m.name.endsWith("_ai_integrations"),g=h?"".concat(m.displayName," (Replit managed)"):m.displayName,v=h?P.REPLIT_MANAGED_DESCRIPTION:m.description,x=(0,r.jsx)(eG.Pill,{text:g,variant:"filled"});o.push(v?(0,r.jsx)(X.Tooltip,{tooltip:v,children:x},m.name):(0,r.jsx)(f.View,{children:x},m.name))}}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}return((0,i.useEffect)(function(){s&&!n&&a(!0)},[s,n,a]),0===o.length)?null:(0,r.jsx)(r.Fragment,{children:o})}var eY=e.i(462995),eX=e.i(11235),eQ=(0,eU.cssRecord)({item:[eF.loadingStyle.foregroundPulse(),eH.rcss.borderRadius(4),eH.rcss.height(20)]});function eJ(e){var t=e.features,n=e.eventState===a.EventState.IN_PROGRESS,i=0===t.length;return(0,r.jsxs)(eX.Prose,{children:[(0,r.jsx)("p",{children:"I'll include the following features:"}),i?(0,r.jsx)(f.View,{gap:4,pt:4,children:Array.from({length:3}).map(function(e,t){return(0,r.jsx)(f.View,{css:eQ.item},t)})}):(0,r.jsx)("ul",{children:t.map(function(e){return(0,r.jsx)("li",{children:n?(0,r.jsx)(eY.FadeInTextAnimation,{children:e.name}):e.name},e.id)})})]})}var eZ=e.i(19208);function e0(e){var t=e.stackBlueprint,n=e.blueprints,a=e.features,o=e.objective,s=e.sessionId,l=e.isLatestPlan,u=e.eventState,c=eN().isVisible,d=(0,M.useAgentPlanApprovalState)(),p=l&&"approved"!==d,m=(0,M.useSetAgentPlanApprovalState)(),h=(0,i.useCallback)(function(){m("revising"),(0,U.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_initiated",sessionId:s,stackBlueprint:t,skipRapidBuild:!0})},[s,m,t]);return(0,r.jsxs)(f.View,{gap:12,p:8,children:[void 0===t?(0,r.jsx)(eW,{}):(0,r.jsx)(eK,{blueprints:n,stackBlueprint:t,isEditable:!0}),(0,r.jsx)(f.View,{children:(0,r.jsx)(j.Text,{children:o})}),(0,r.jsxs)(w.Surface,{elevated:p,p:8*!!p,gap:8,clsx:eZ.default.surface,children:[(0,r.jsx)(eJ,{features:a,eventState:u}),l&&"revising"===d?(0,r.jsx)(f.View,{p:4,children:(0,r.jsx)(j.Text,{children:"Send a message below to revise the plan."})}):null,l&&("awaiting-approval"===d||"iterating"===d)?(0,r.jsx)(W.Button,{text:"Change plan",onClick:h,iconLeft:(0,r.jsx)(Z.default,{})}):null]}),c?(0,r.jsx)(f.View,{row:!0,align:"center",justify:"start",children:(0,r.jsx)(eO,{isPlanApproved:!0})}):null]})}e.s(["PlanProposal",()=>e0],682872);var e1=e.i(67760),e2=e.i(986194),e4=e.i(257811);function e8(e){var t=e.queries,n=e.responses,a=e.created,o=(0,e1.default)(t,null!=n?n:[]),s=o.findLastIndex(function(e){return null!=(0,b._)(e,2)[1]});return(0,r.jsx)(f.View,{gap:8,pb:4,children:o.map(function(e,t){var n=(0,b._)(e,2),o=n[0],l=n[1];if(!o)return null;var u=t===s&&null!=l;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(f.View,{p:6,children:(0,r.jsx)(e6,{query:o})}),l?(0,r.jsx)(f.View,{justify:"end",pl:32,row:!0,gap:8,children:(0,r.jsxs)(f.View,{shrink:!0,align:"end",gap:6,children:[(0,r.jsx)(A.UserMessageSurface,{agentMode:void 0,acknowledged:!0,children:(0,r.jsx)(e3,{query:o,response:l})}),a&&u?(0,r.jsx)(f.View,{children:(0,r.jsx)(e4.Timestamp,{live:!0,date:a,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized",dateFormat:"switch"})}):null]})}):null]},t)})})}function e6(e){var t=e.query;return(0,e2.isKind)(t.queryType,"booleanQuery")?(0,r.jsx)(eY.MessageMarkdown,{messageState:a.EventState.COMPLETE,text:t.queryType.booleanQuery.question,textColor:"shades"}):(0,e2.isKind)(t.queryType,"choiceQuery")?(0,r.jsx)(eY.MessageMarkdown,{messageState:a.EventState.COMPLETE,text:t.queryType.choiceQuery.question,textColor:"shades"}):(0,e2.isKind)(t.queryType,"textQuery")?(0,r.jsx)(eY.MessageMarkdown,{messageState:a.EventState.COMPLETE,text:t.queryType.textQuery.question,textColor:"shades"}):null}function e3(e){var t=e.query,n=e.response;if((0,e2.isKind)(t.queryType,"booleanQuery")&&(0,e2.isKind)(n.responseType,"booleanResponse")){var i=(0,e2.unkind)(n.responseType),a=i.response,o=i.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Text,{children:a?t.queryType.booleanQuery.confirmText:t.queryType.booleanQuery.rejectText}),o?(0,r.jsx)(j.Text,{children:o}):null]})}if((0,e2.isKind)(t.queryType,"choiceQuery")&&(0,e2.isKind)(n.responseType,"choiceResponse")){var s=(0,e2.unkind)(n.responseType),l=s.response,u=s.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Text,{children:l}),u?(0,r.jsx)(j.Text,{children:u}):null]})}if((0,e2.isKind)(t.queryType,"textQuery")&&(0,e2.isKind)(n.responseType,"textResponse")){var c=(0,e2.unkind)(n.responseType).response;return(0,r.jsx)(j.Text,{children:c})}return null}e.s(["QueryRequest",()=>e8],489172);var e5=e.i(297083),e9=e.i(817556);e.i(877212);var e7=e.i(924908),te=e.i(569910),tt=e.i(993796),tn=e.i(857714),tr=e.i(245150),ti=e.i(30305),ta=(0,i.memo)(function(e){var t=(0,e7.useChatter)(),n=(0,tt.useFlag)({controlName:"flag-session-pedigree"}),i=e.event,o=e.onSessionChange,s=i.status!==a.RevertStatus.REVERT_DATA_STAGE_COMPLETE;return(0,r.jsxs)(f.View,{children:[(0,r.jsxs)(w.Surface,{clsx:ti.default.root,"data-event-id":i.id,row:!0,gap:8,children:[s?(0,r.jsx)(en.default,{clsx:ti.default.revertIcon}):(0,r.jsx)(tr.default,{clsx:ti.default.revertIcon}),(0,r.jsxs)(f.View,{gap:6,clsx:ti.default.flexShrink,children:[(0,r.jsx)(f.View,{gap:4,children:(0,r.jsx)(j.Text,{multiline:!0,variant:"text",color:"dimmer",clsx:ti.default.flexShrink,children:function(e){switch(e.status){case a.RevertStatus.REVERT_DATA_STAGE_UNKNOWN:return"Starting rollback...";case a.RevertStatus.REVERT_DATA_STAGE_LOADING_PREVIOUS_STATE:return"Loading previous checkpoint state...";case a.RevertStatus.REVERT_DATA_STAGE_SHUTTING_DOWN_WORKFLOWS:return"Shutting down workflows...";case a.RevertStatus.REVERT_DATA_STAGE_REVERTING_COMMIT:return"Reverting files to previous checkpoint...";case a.RevertStatus.REVERT_DATA_STAGE_RESTARTING_WORKFLOWS:return"Restarting workflows";case a.RevertStatus.REVERT_DATA_STAGE_ROLLING_BACK_DATABASE:return"Rolling back database...";case a.RevertStatus.REVERT_DATA_STAGE_ROLLING_BACK_DEPLOYMENT:return"Rolling back deployment...";case a.RevertStatus.REVERT_DATA_STAGE_COMPLETE:return"Rolled back to '".concat(e.checkpointTitle,"'");default:(0,te.default)(e.status)}}(i)})}),(0,r.jsxs)(f.View,{gap:12,row:!0,clsx:ti.default.subtext,children:[(0,r.jsxs)(f.View,{row:!0,gap:4,children:[(0,r.jsx)(j.Text,{multiline:!1,variant:"small",children:s?"Started":"Finished"}),(0,r.jsx)(e4.Timestamp,{textVariant:"small",live:!0,date:i.revertedAt,dateFormat:"switch"})]}),(0,r.jsx)(W.Button,{size:"small",onClick:function(){return(0,e5._)(function(){return(0,e9._)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.sessions.get(i.originalSessionId).once()];case 1:return o(e.sent()),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})()},variant:"underlined",text:"View original chat",iconLeft:(0,r.jsx)(tn.default,{})})]})]})]}),n?null:(0,r.jsxs)(f.View,{clsx:ti.default.dividerContainer,children:[(0,r.jsx)(f.View,{clsx:ti.default.dividerLine}),(0,r.jsx)(j.Text,{clsx:ti.default.dividerText,color:"dimmest",children:"New chat"})]})]})});e.s(["RollbackStatus",()=>ta],956002);var to=e.i(753007),ts=e.i(862615),tl=e.i(523579),tu=e.i(397124),tc=e.i(885952),td=(0,i.memo)(function(e){var t=e.importSource,n=e.state,i=function(e){switch(e){case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_LOVABLE:return{name:"Lovable",icon:null};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_BOLT:return{name:"Bolt",icon:null};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_REPLIT:return{name:"Replit",icon:(0,r.jsx)(tu.default,{clsx:tc.default.appIcon})};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_OTHER_GITHUB:return{name:"GitHub",icon:(0,r.jsx)(tl.default,{clsx:tc.default.appIcon})};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_FIGMA:return{name:"Figma",icon:(0,r.jsx)(ts.default,{})};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_UNKNOWN:default:return{name:"",icon:null}}}(t),o=i.name,s=i.icon,l=n===a.EventState.COMPLETE,u=n===a.EventState.IN_PROGRESS,c=(0,r.jsx)(to.default,{clsx:tc.default.statusIcon});return u&&(c=(0,r.jsx)(en.default,{})),(0,r.jsxs)(w.Surface,{elevated:!0,clsx:tc.default.root,row:!0,justify:"space-between",align:"center",children:[(0,r.jsxs)(f.View,{row:!0,align:"center",gap:12,children:[c,(0,r.jsx)(j.Text,{color:"dimmer",children:l?"Successfully imported ".concat(""!==o?"from ".concat(o):"project"):"Setting up your project".concat(""!==o?" from ".concat(o):"","…")})]}),(0,r.jsx)(f.View,{children:s})]})});function tp(){var e=(0,ex._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return tp=function(){return e},e}e.s(["SetupImport",()=>td],71834);var tf={},tm=(0,ey.gql)(tp());function th(e){var t=(0,g._)({},tf,e);return eb.useQuery(tm,t)}e.s(["useCheckReplitAppSubdomainAvailabilityQuery",()=>th],109644);var tg=e.i(951262);function tv(){var e=(0,ex._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    latestBuildStatus\n    replitAppSubdomain\n    ignoredSecrets\n    timeCreated\n    securityScanEnabled\n    currentBuild {\n      timeCreated\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n      hasPrivatePassword\n    }\n  }\n"]);return tv=function(){return e},e}function tx(){var e=(0,ex._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n      editDeploymentSubdomain(provider: $provider) {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return tx=function(){return e},e}function ty(){var e=(0,ex._)(["\n  mutation DeployOptionsToggleSecretSyncing($input: ToggleSyncingSecretInput!) {\n    toggleSyncingSecret(input: $input) {\n      __typename\n      ... on HostingDeployment {\n        id\n        ignoredSecrets\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return ty=function(){return e},e}function tb(){var e=(0,ex._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return tb=function(){return e},e}function tS(){var e=(0,ex._)(["\n  query DeploymentsDeployOptionsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return tS=function(){return e},e}var t_={},tw=(0,ey.gql)(tv()),tj=(0,ey.gql)(tx());(0,ey.gql)(ty());var tT=(0,ey.gql)(tb(),tw);function tD(e){var t=(0,g._)({},t_,e);return eb.useQuery(tT,t)}var tk=(0,ey.gql)(tS(),tj);function tC(e){var t=(0,g._)({},t_,e);return eb.useQuery(tk,t)}e.s(["DeploymentsDeployOptionsDeploymentFragmentDoc",()=>tw,"useDeploymentsDeployOptionsAuthzQuery",()=>tC,"useDeploymentsDeployOptionsQuery",()=>tD],664219);var tE=e.i(368964),tA=e.i(58261),tI=e.i(207237);function tR(){var e=(0,tA.useConnectorContext)(),t=e.connections,n=e.loading,r=(0,tI.default)(),i=t.find(function(e){var t;return e.connectorName===tE.ConnectorName.Stripe&&"development"===e.environment&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===r}))}),a=t.find(function(e){var t;return e.connectorName===tE.ConnectorName.Stripe&&"production"===e.environment&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===r}))});return{hasStripeSandboxConnection:!!i,hasStripeConnection:!!a,stripeConnection:a,stripeSandboxConnection:i,loading:n}}function tP(e){var t=e.recommendedProvider,n=e.defaultAutoscaleConfiguration,r=e.defaultRvmMachineConfiguration;switch(t){case tE.HostingBuildProvider.CloudRun:case tE.HostingBuildProvider.AzureContainerApp:return n;case tE.HostingBuildProvider.Gce:case tE.HostingBuildProvider.AzureVm:return r;default:return}}e.s(["useStripeConnection",()=>tR],479373),e.s(["getRecommendedProviderMachineConfiguration",()=>tP],365692);var tM=e.i(379334),tO=e.i(392079);function tN(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).provider,t=(0,i.useCallback)(function(e){var t,n,r=e.provider,i=(null==(n=window)||null==(t=n.location)?void 0:t.hostname)!=="replit.com";return(0,tO.getProviderInternalDomain)({provider:r,flaggedInternalDomain:tM.DEPLOYMENTS_DEFAULT_DOMAIN,isStaging:i})},[]);return{internalDomain:(0,i.useMemo)(function(){return e?t({provider:e}):void 0},[t,e]),getInternalDomain:t,isShowingFallback:!1,fallbackDomain:void 0}}function tL(){return(0,r.jsxs)(j.Text,{variant:"small",color:"dimmest",children:["Configure how your production database is created and populated when you publish."," ",(0,r.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases",children:"Learn more"})]})}e.s(["useProviderInternalDomain",()=>tN],777373);var tB=e.i(428596);function tV(e){var t=e.value,n=e.setValue,i=e.disabled,a=e.reason,o=(0,tB.useIdSeed)()("createNeonProductionDatabase");return(0,r.jsxs)(f.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(K.Checkbox,{id:o,checked:t,disabled:i,onChange:n,"aria-label":"Create production database"}),(0,r.jsxs)(f.View,{shrink:!0,gap:2,children:[(0,r.jsx)("label",{htmlFor:o,children:(0,r.jsx)(j.Text,{variant:"small",color:"default",children:"Create production database"})}),a?(0,r.jsx)(j.Text,{variant:"small",color:"dimmest",children:a}):null]})]})}function tU(e){var t=e.value,n=e.setValue,i=e.disabled,a=(0,tB.useIdSeed)()("pushDevelopmentDatabaseObjects");return(0,r.jsxs)(f.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(K.Checkbox,{id:a,checked:"data"===t,disabled:i,onChange:function(e){return n(e?"data":"schema")},"aria-label":"Copy development data to production database"}),(0,r.jsxs)(f.View,{shrink:!0,gap:2,children:[(0,r.jsx)("label",{htmlFor:a,children:(0,r.jsx)(j.Text,{variant:"small",color:"default",children:"Set up your production database with your current development data"})}),(0,r.jsx)(j.Text,{variant:"small",color:"dimmest",children:"This will initialize your production database with the data and schemas from your development database."})]})]})}function tF(e){var t=e.value,n=e.setValue,a=(0,i.useCallback)(function(e){e?n({createDatabase:!0,pushDevelopmentDatabaseObjects:"schema"}):n({createDatabase:!1,pushDevelopmentDatabaseObjects:null})},[n]),o=(0,i.useCallback)(function(e){return t.createDatabase&&n((0,v._)((0,g._)({},t),{pushDevelopmentDatabaseObjects:e}))},[n,t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tV,{value:t.createDatabase,setValue:a,disabled:!1}),t.createDatabase&&(0,r.jsx)(tU,{value:t.pushDevelopmentDatabaseObjects,setValue:o})]})}function tH(e){var t=e.value,n=e.setValue,i=e.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tV,{value:!0,reason:i,disabled:!0}),(0,r.jsx)(tU,{value:t.pushDevelopmentDatabaseObjects,setValue:function(e){return n((0,v._)((0,g._)({},t),{pushDevelopmentDatabaseObjects:e}))}})]})}function tG(e){var t=e.value,n=e.setValue,i=e.disabled,a=(0,tB.useIdSeed)()("overwriteData");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(K.Checkbox,{id:a,checked:"overwriteData"===t,disabled:i,onChange:function(e){return n(e?"overwriteData":null)},"aria-label":"Copy development database to production database"}),(0,r.jsxs)(f.View,{shrink:!0,gap:2,children:[(0,r.jsx)("label",{htmlFor:a,children:(0,r.jsx)(j.Text,{variant:"small",multiline:!1,children:"Copy your development database to production database"})}),(0,r.jsxs)(j.Text,{variant:"small",color:"dimmest",children:["This will replace your production database with your development database, overwriting any existing production data. This is a destructive action, but you can always restore your production database,"," ",(0,r.jsx)("a",{href:"https://docs.replit.com/cloud-services/storage-and-databases/sql-database#restore-tool",target:"_blank",children:"learn more."})]})]})]})})}function tz(e){var t=e.value,n=e.setValue;return(0,r.jsx)(tG,{value:t.pushDevelopmentDatabaseObjects,setValue:function(e){return n({createDatabase:!0,pushDevelopmentDatabaseObjects:e})}})}var tq=e.i(396776);function tW(e){var t=e.value,n=e.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tq.StatusBanner,{colorway:"warning",text:n,icon:(0,r.jsx)(k.default,{})}),(0,r.jsx)(tV,{value:t.createDatabase,disabled:!0})]})}function tK(e){var t=e.state;switch(t.$case){case"noProdDbAllowed":return(0,r.jsx)(tW,{value:t.value,reason:t.reason});case"createProdDbIfDevData":return(0,r.jsx)(tH,{value:t.value,setValue:t.setValue,reason:t.reason});case"canCreateProdDb":return(0,r.jsx)(tF,{value:t.value,setValue:t.setValue});case"existingProdDb":return(0,r.jsx)(tz,{value:t.value,setValue:t.setValue});default:(0,te.default)(t)}}var t$=e.i(992785);function tY(e){var t=(0,b._)((0,i.useState)(e),2),n=t[0],r=t[1],a=(0,i.useRef)(e);return(0,i.useEffect)(function(){(0,t$.default)(a.current,e)||(a.current=e,r(e))},[e]),[n,r]}var tX=e.i(965153);function tQ(e){var t=e.state,n=(0,b._)(tY("noProdDbAllowed"===t.$case?!!t.forceExpandToggle:!0===t.value.createDatabase),2),i=n[0],a=n[1];return(0,r.jsx)(tX.AccordionItem,{headerContent:(0,r.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,r.jsx)(j.Text,{children:"Production database settings"})}),expanded:i,onClick:function(){return a(!i)},children:(0,r.jsxs)(f.View,{gap:8,px:4,pb:6,children:[(0,r.jsx)(tL,{}),(0,r.jsx)(tK,{state:t})]})})}function tJ(e){var t=e.state,n=(0,b._)(tY("noProdDbAllowed"===t.$case&&!!t.forceExpandToggle),2),i=n[0],a=n[1];return"noProdDbAllowed"!==t.$case||t.forceExpandToggle?(0,r.jsx)(tX.AccordionItem,{headerContent:(0,r.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,r.jsx)(j.Text,{children:"Production database settings"})}),expanded:i,onClick:function(){return a(!i)},children:(0,r.jsxs)(z.ShadesSurface,{p:4,br:"container",gap:12,children:[(0,r.jsx)(tL,{}),(0,r.jsx)(tK,{state:t})]})}):null}e.s(["CreateNeonProductionDatabaseToggleSection",()=>tQ,"SuggestDeployCreateNeonProductionDatabaseToggleSection",()=>tJ],332822);var tZ=e.i(927158);function t0(e){var t=new URL(e.connectionString.replace("postgres://","https://").replace("postgresql://","https://"));return t.pathname="/".concat(e.databaseName),t.search="?sslmode=require",t.toString().replace("https://","postgresql://")}e.i(529810),e.s(["normalizeConnectionString",()=>t0],788401);var t1=function(e){var t=e.connectionString,n=e.skip,r=void 0!==n&&n,a=(0,b._)((0,i.useState)([]),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(!1),2),u=l[0],c=l[1],d=(0,tZ.usePid2Callback)(function(e){return function(){return(0,e5._)(function(){var n;return(0,e9._)(this,function(i){switch(i.label){case 0:if(r)return[2];return c(!0),[4,e.database.getTables.rpc({connectionString:t})];case 1:if(!(n=i.sent()).ok)return c(!1),[2];return s(n.payload.tables),c(!1),[2]}})})()}},[t,r]);return(0,i.useEffect)(function(){d&&d()},[d]),{tables:o,loading:u,refetch:d}},t2=function(e){var t=e.connectionString,n=e.skip,r=void 0!==n&&n,a=(0,b._)((0,i.useState)(null),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(!1),2),u=l[0],c=l[1],d=(0,tZ.usePid2Callback)(function(e){return function(){return(0,e5._)(function(){var n;return(0,e9._)(this,function(i){switch(i.label){case 0:if(r)return[2];return c(!0),[4,e.database.getPgMajorVersion.rpc({connectionString:t})];case 1:if(!(n=i.sent()).ok)return c(!1),[2];return s(n.payload.majorVersion),c(!1),[2]}})})()}},[t,r]);return(0,i.useEffect)(function(){!r&&d&&d()},[d,r]),{majorVersion:o,loading:u,refetch:d}},t4=function(e){var t=(0,b._)((0,i.useState)(0),2),n=t[0],r=t[1],a=(0,b._)((0,i.useState)(!1),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(null),2),u=l[0],c=l[1],d="neon"===e.kind?t0(e):e.connectionString,p=(0,tZ.usePid2Callback)(function(t){return function(){return(0,e5._)(function(){var n;return(0,e9._)(this,function(i){switch(i.label){case 0:if("neon"===e.kind&&e.isFrozen)return r(0),c("Database is frozen"),s(!1),[2];return s(!0),c(null),[4,t.database.getDatabaseSize.rpc({connectionString:d})];case 1:if(!(n=i.sent()).ok)return s(!1),c(n.payload.message),r(0),[2];return r(n.payload.size),c(null),s(!1),[2]}})})()}},[d,e]);return(0,i.useEffect)(function(){p&&p()},[p]),{databaseSize:n,loading:o,error:u,refetch:p}};e.s(["useGetDatabaseSize",()=>t4,"useGetPgMajorVersion",()=>t2,"useGetTables",()=>t1],832550);var t8=function(e){return{$case:"noProdDbAllowed",defaultValue:{createDatabase:!1,pushDevelopmentDatabaseObjects:null},reason:e.reason,forceExpandToggle:e.forceExpandToggle}},t6=function(e){var t=e.reason,n=e.createDatabase;return{$case:"createProdDbIfDevData",defaultValue:{createDatabase:null!=n?n:null,pushDevelopmentDatabaseObjects:"schema"},reason:t}};function t3(e){var t,n=e.isRedeploy,r=e.neonDevelopmentDatabase,a=e.neonProductionDatabase,o=e.heliumDevelopmentDatabase,s=e.hasStripeSandboxConnection,l=void 0!==s&&s,u=null!=(t=null==r?void 0:r.connectionString)?t:null==o?void 0:o.connectionString,c=!o&&!!(null==r?void 0:r.isFrozen),d=t2({connectionString:null!=u?u:"",skip:!u||c}),p=d.majorVersion,f=d.loading,m=(0,i.useMemo)(function(){var e,t,i,s,u,d,f,m;return t=(e={hasNeonProductionDatabase:!!a,hasNeonDevelopmentDatabase:!!r,hasHeliumDevelopmentDatabase:!!o,isRedeploy:n,isFrozen:c,pgMajorVersion:p,hasStripeSandboxConnection:l}).hasNeonProductionDatabase,i=e.hasNeonDevelopmentDatabase,s=e.hasHeliumDevelopmentDatabase,u=e.isRedeploy,d=e.isFrozen,f=e.pgMajorVersion,m=e.hasStripeSandboxConnection,d?t8({reason:"Development database is frozen. Address outstanding invoices to unfreeze it.",forceExpandToggle:!0}):null!==f&&16!==f&&17!==f?t8({reason:"Development database is on PostgreSQL version ".concat(f,". Production databases are only supported on PostgreSQL 16 and 17."),forceExpandToggle:!0}):i||s?t?u?{$case:"existingProdDb",defaultValue:{createDatabase:!0,pushDevelopmentDatabaseObjects:null}}:t8({reason:"An existing production database from a previous published app was found. Delete the existing database via the settings tab in the Database pane and create a new one.",forceExpandToggle:!0}):m?t6({reason:"A production database is required for Stripe integration.",createDatabase:!0}):s?t6({reason:"A production database will only be created if you have data in your development database."}):{$case:"canCreateProdDb",defaultValue:{createDatabase:!1,pushDevelopmentDatabaseObjects:null}}:t8({reason:"A development database is required to create a production database. You can create a development database via the Database pane."})},[a,r,o,n,c,p,l]),h=(0,b._)(tY(m.defaultValue),2),x=h[0],y=h[1];return(0,v._)((0,g._)({},m),{value:x,setValue:y,loading:f})}e.s(["useCreateNeonProductionDatabaseState",()=>t3],34912);var t5=e.i(963084);function t9(){var e=(0,ex._)(["\n  query ReservedVMMachineConfigurations(\n    $provider: HostingMachineConfigurationProvider!\n  ) {\n    hostingMachineConfigurations(input: { provider: $provider }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return t9=function(){return e},e}var t7={},ne=(0,ey.gql)(t9(),t5.MachineConfigurationFragmentDoc),nt=e.i(107129),nn=e.i(241703),nr=e.i(607278),ni=(0,eU.cssRecord)({self:[eH.rcss.colWithGap(8)],selfGrow:[eH.rcss.colWithGap(8),eH.rcss.flex.grow(1)],label:[eH.rcss.maxWidth("100%")],labelText:[eH.rcss.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[eH.rcss.flex.growAndShrink(1),eH.rcss.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[eH.rcss.display.flex,eH.rcss.flex.row,eH.rcss.justify.spaceBetween,eH.rcss.align.center],labelLoading:[eF.loadingStyle.foregroundPulse(),eH.rcss.width(200),eH.rcss.borderRadius(8)],inputLoading:[eF.loadingStyle.foregroundPulse(),eH.rcss.borderRadius(8)]}),na=function(e){var t=e.id,n=e.title,i=e.information,a=e.optional,o=e.detail,s=e.warning,l=e.actions,u=e.children,c=e.grow;return(0,r.jsxs)(f.View,{css:void 0!==c&&c?ni.selfGrow:ni.self,children:[(0,r.jsxs)(f.View,{css:ni.header,children:[(0,r.jsxs)(f.View,{tag:"label",htmlFor:t,css:ni.label,row:!0,gap:8,align:"center",children:[(0,r.jsx)(j.Text,{color:"dimmer",multiline:!1,children:n}),(0,r.jsx)(X.Tooltip,{tooltip:i,children:(0,r.jsx)(ez.default,{color:S.tokens.foregroundDimmest})}),void 0!==a&&a?(0,r.jsx)(j.Text,{css:ni.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,r.jsx)(j.Text,{css:ni.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,s?(0,r.jsx)(j.Text,{css:ni.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),l?(0,r.jsx)(f.View,{row:!0,gap:4,children:l}):null]}),u]})},no=function(){return(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsx)(f.View,{css:ni.header,children:(0,r.jsx)(f.View,{css:ni.labelLoading,row:!0,gap:8,align:"center",children:(0,r.jsx)(j.Text,{color:"dimmer",multiline:!1,children:" "})})}),(0,r.jsx)(f.View,{css:ni.inputLoading,children:(0,r.jsx)(nr.Input,{disabled:!0})})]})};e.s(["LabeledSectionWithHover",()=>na,"LabeledSectionWithHoverLoading",()=>no],500179);var ns=e.i(32995),nl=e.i(686631),nu=e.i(761201),nc=e.i(399344),nd=e.i(161322),np=e.i(957789),nf=e.i(589910),nm=e.i(369948),nh=e.i(918388),ng=function(e){var t=e.size,n=void 0===t?16:t,i=e.style;return(0,r.jsxs)("svg",{width:n,height:n,style:i,viewBox:"0 0 96 96",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"e399c19f-b68f-429d-b176-18c2117ff73c",x1:"-1032.172",x2:"-1059.213",y1:"145.312",y2:"65.426",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0","stop-color":"#114a8b"}),(0,r.jsx)("stop",{offset:"1","stop-color":"#0669bc"})]}),(0,r.jsxs)("linearGradient",{id:"ac2a6fc2-ca48-4327-9a3c-d4dcc3256e15",x1:"-1023.725",x2:"-1029.98",y1:"108.083",y2:"105.968",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0","stop-opacity":".3"}),(0,r.jsx)("stop",{offset:".071","stop-opacity":".2"}),(0,r.jsx)("stop",{offset:".321","stop-opacity":".1"}),(0,r.jsx)("stop",{offset:".623","stop-opacity":".05"}),(0,r.jsx)("stop",{offset:"1","stop-opacity":"0"})]}),(0,r.jsxs)("linearGradient",{id:"a7fee970-a784-4bb1-af8d-63d18e5f7db9",x1:"-1027.165",x2:"-997.482",y1:"147.642",y2:"68.561",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0","stop-color":"#3ccbf4"}),(0,r.jsx)("stop",{offset:"1","stop-color":"#2892df"})]})]}),(0,r.jsx)("path",{fill:"url(#e399c19f-b68f-429d-b176-18c2117ff73c)",d:"M33.338 6.544h26.038l-27.03 80.087a4.152 4.152 0 0 1-3.933 2.824H8.149a4.145 4.145 0 0 1-3.928-5.47L29.404 9.368a4.152 4.152 0 0 1 3.934-2.825z"}),(0,r.jsx)("path",{fill:"#0078d4",d:"M71.175 60.261h-41.29a1.911 1.911 0 0 0-1.305 3.309l26.532 24.764a4.171 4.171 0 0 0 2.846 1.121h23.38z"}),(0,r.jsx)("path",{fill:"url(#ac2a6fc2-ca48-4327-9a3c-d4dcc3256e15)",d:"M33.338 6.544a4.118 4.118 0 0 0-3.943 2.879L4.252 83.917a4.14 4.14 0 0 0 3.908 5.538h20.787a4.443 4.443 0 0 0 3.41-2.9l5.014-14.777 17.91 16.705a4.237 4.237 0 0 0 2.666.972H81.24L71.024 60.261l-29.781.007L59.47 6.544z"}),(0,r.jsx)("path",{fill:"url(#a7fee970-a784-4bb1-af8d-63d18e5f7db9)",d:"M66.595 9.364a4.145 4.145 0 0 0-3.928-2.82H33.648a4.146 4.146 0 0 1 3.928 2.82l25.184 74.62a4.146 4.146 0 0 1-3.928 5.472h29.02a4.146 4.146 0 0 0 3.927-5.472z"})]})};function nv(e){var t=e.onEditAutoscaleConfig,n=e.defaultMachineConfiguration,a=e.selectedMachineConfiguration,o=e.machineConfigurations,s=e.isAzureDeployment,l=e.isFreeUser,u=(0,i.useMemo)(function(){if(s){var e=(0,nf.getMachineConfigurationBySlug)({slug:null==n?void 0:n.configurationSlug,machineConfigurations:o});if(!e||!n)return;return{vcpu:e.vcpu,memory:e.memory,maxInstances:n.maxInstances}}if(l){var t=(0,nf.getMachineConfigurationBySlug)({slug:null==n?void 0:n.configurationSlug,machineConfigurations:o});if(!t||!n)return;return{vcpu:t.vcpu,memory:t.memory,maxInstances:n.maxInstances}}var r=(0,nf.getMachineConfigurationBySlug)({slug:null==a?void 0:a.configurationSlug,machineConfigurations:o});if(r&&a)return{vcpu:r.vcpu,memory:r.memory,maxInstances:a.maxInstances}},[n,a,o,s,l]),c=3600*(0,nd.useAtomValue)(np.totalCostAtom);if(!u)return null;var d=u.vcpu,p=u.memory,m=u.maxInstances;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{row:!0,justify:"space-between",align:"center",className:nh.default.borderedContainer,children:[(0,r.jsxs)(j.Text,{children:[s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ng,{style:{position:"relative",top:"2px"}})," -"," "]}):null,d," vCPUs / ",p," GiB RAM / ",m," max"]}),s||l?null:(0,r.jsx)(W.Button,{size:"small",text:"Edit",iconRight:(0,r.jsx)(nm.default,{}),onClick:t})]}),s||l?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{row:!0,justify:"space-between",children:[(0,r.jsx)(j.Text,{variant:"small",children:"Per machine:"}),(0,r.jsxs)(j.Text,{variant:"small",children:["$",c.toFixed(3),"/hour"]})]}),(0,r.jsxs)(f.View,{row:!0,justify:"space-between",children:[(0,r.jsx)(j.Text,{variant:"small",children:"At max traffic:"}),(0,r.jsxs)(j.Text,{variant:"small",children:["$",(c*m).toFixed(3),"/hour"]})]})]})]})}e.s(["AutoscaleMachineConfiguration2",()=>nv,"AzureLogo",()=>ng],691302);var nx=e.i(508775),ny=e.i(679668);e.i(947095);var nb=e.i(882648),nS=e.i(14428);function n_(e){var t=e.selectedItem,n=e.machineConfigurations,a=e.disabled,o=e.onError,s=e.onChange,l=e.onConfirm,u=e.loading,c=(0,b._)((0,i.useState)(!1),2),d=c[0],p=c[1],m=(0,(0,nc.useDeploymentCostDetails)().getMachineConfigurationCostDetailsBySlug)(null==t?void 0:t.configurationSlug),h=m.costPerHour,g=m.costPerMonth,v=n&&(null==n?void 0:n.length)>0;if(!t)return(0,r.jsx)(f.View,{className:nS.default.loadingState,children:(0,r.jsx)(nr.Input,{disabled:!0})});var x=(0,nx.isAzureDeploymentConfigurationSlug)(null==t?void 0:t.configurationSlug)?(0,r.jsx)(ng,{}):void 0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{className:nS.default.selectWrapper,children:[(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(ny.Select,{"aria-label":"Select machine configuration",className:nS.default.select,initialSelectedItem:{id:t.configurationId,title:t.configurationLabel,icon:x},items:v?Object.values(n).map(function(e){var t=e.id;return{title:e.label,id:t,icon:x}}):[],onChange:function(e){var t=e.id,r=null==n?void 0:n.find(function(e){return e.id===t});if(!r)return void o("An error occurred trying to validate selected machine configuration");var i={configurationId:r.id,configurationLabel:r.label,configurationSlug:r.slug,maxInstances:1};"function"==typeof s&&s(i)},disabled:a})}),(0,r.jsx)(f.View,{shrink:!0,row:!0,gap:2,align:"center",children:(0,r.jsxs)(f.View,{className:nS.default.cost,row:!0,gap:4,children:[(0,r.jsxs)(j.Text,{variant:"subheadDefault",multiline:!1,children:["$",g]}),(0,r.jsx)(j.Text,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,r.jsxs)(j.Text,{color:"dimmer",variant:"small",multiline:!1,children:["($",h,"/hour)"]})]})})]}),"function"==typeof l?(0,r.jsxs)(f.View,{gap:8,pt:8,children:[(0,r.jsx)(W.Button,{colorway:"primary",text:"Approve and update",iconRight:(0,r.jsx)(nb.ArrowRight,{}),onClick:function(){p(!0),Promise.resolve(l(t)).catch(function(e){null==o||o(e.message||"Failed to update configuration")}).finally(function(){p(!1)})},loading:void 0!==u&&u,disabled:a||d}),(0,r.jsxs)(j.Text,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,r.jsx)("a",{href:nu.LINKS_DOCS.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]})}function nw(e){var t,n,r=e.provider,a=e.onError,o=e.onLoad,s=e.skip,l=function(e){switch(e){case tE.HostingBuildProvider.AzureVm:return tE.HostingBuildProvider.AzureVm;case tE.HostingBuildProvider.AzureContainerApp:return tE.HostingBuildProvider.AzureContainerApp;case tE.HostingBuildProvider.Gce:default:return tE.HostingBuildProvider.Gce}}(r),u=(t={variables:{provider:l},skip:s,onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename?a("Something went wrong"):o&&o(e.hostingMachineConfigurations.results)},onError:function(e){return a(e.message)}},n=(0,g._)({},t7,t),eb.useQuery(ne,n)),c=u.data,d=u.loading,p=(null==c?void 0:c.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?c.hostingMachineConfigurations.results:null;return{defaultMachineConfiguration:(0,i.useMemo)(function(){if(p)return function(e){var t=e.machineConfigurations,n=e.provider,r=e.onError;if(t){var i=t.find(function(e){return e.slug===function(e){switch(e.provider){case tE.HostingBuildProvider.AzureVm:return tM.AZURE_VM_DEFAULT_MACHINE_CONFIGURATION_SLUG;case tE.HostingBuildProvider.AzureContainerApp:return tM.AZURE_CONTAINER_APP_DEFAULT_MACHINE_CONFIGURATION_SLUG;case tE.HostingBuildProvider.Gce:return tM.RVM_DEFAULT_MACHINE_CONFIGURATION_SLUG;default:throw Error("Unsupported provider for slug")}}({provider:n})});if(!i)return void r("An error occurred trying to validate default machine configuration");var a=i.id,o=i.slug;return{configurationId:a,configurationLabel:i.label,configurationSlug:o,maxInstances:1}}}({machineConfigurations:p,provider:l,onError:a})},[p,l,a]),machineConfigurations:p,loading:d}}e.s(["MachineConfigurationSelector",()=>n_],697859);var nj=function(e){var t=e.type,n=e.initialMachineConfiguration,a=e.onChange,o=e.onConfirm,s=e.onError,l=e.onBack,u=e.provider,c=(0,b._)((0,i.useState)(n?(0,v._)((0,g._)({},n),{maxInstances:1}):void 0),2),d=c[0],p=c[1],m=nw({provider:u,onError:s}),h=m.defaultMachineConfiguration,x=m.machineConfigurations,y=m.loading;(0,i.useEffect)(function(){(0,nt.trackDeploymentSectionViewed)({context:nn.Views.AutoscaleMachineConfiguration})},[]),(0,i.useEffect)(function(){if(x&&!d){if(!h)return void s("An error occurred trying to validate default machine configuration2");p(h),"function"==typeof a&&a(h)}},[x,h,d,a,s]);var S=x&&(null==x?void 0:x.length)>0,_=y||!S||"azure_vm"===t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ns.PaneSection,{maxWidth:!0,children:(0,r.jsx)(nl.ViewBack,{onBack:l})}),(0,r.jsx)(ns.PaneSection,{maxWidth:!0,children:(0,r.jsxs)(f.View,{gap:16,children:[(0,r.jsxs)(f.View,{gap:4,children:[(0,r.jsx)(j.Text,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,r.jsx)(j.Text,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,r.jsx)(na,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:(0,r.jsx)(n_,{selectedItem:d,machineConfigurations:x,disabled:_,provider:u,onError:s,onChange:function(e){p((0,v._)((0,g._)({},e),{maxInstances:1})),a&&a(e)},onConfirm:o,loading:y})})]})})]})};e.s(["ReservedVMMachineConfiguration",()=>nj,"useReservedVmConfigurations",()=>nw],823166);var nT=e.i(167626),nD=e.i(346715),nk=e.i(517884),nC=e.i(131141),nE=e.i(967963),nA=e.i(903381),nI=e.i(262664),nR=e.i(424746),nP=e.i(483820),nM=e.i(914279),nO=e.i(729678),nN=e.i(331820);function nL(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{domainName:e.domainName,contact:{firstName:t.firstName,lastName:t.lastName,companyName:t.companyName||null,address1:t.address1,address2:t.address2||null,city:t.city,state:t.state,zip:t.zip,country:t.country,phone:t.phone,email:t.email},expectedCharge:e.purchasePrice?Math.round(100*e.purchasePrice):0,years:1,isFreeDomain:n}}var nB=e.i(255615),nV=e.i(178339),nU=e.i(672963),nF=e.i(98816);e.i(32967);var nH=e.i(630937),nG=e.i(837605),nz=e.i(987154),nq=e.i(292642),nW=e.i(504908);function nK(e){var t=e.existsInDev;return e.isAutoSynced?(0,r.jsx)(X.Tooltip,{tooltip:"This secret is automatically synced to your deployment",children:(0,r.jsx)(f.View,{css:nY.deploymentOnly,children:(0,r.jsx)(nq.default,{})})}):t?(0,r.jsx)(X.Tooltip,{tooltip:"Syncing has been disabled for this secret",children:(0,r.jsx)(f.View,{css:nY.unsynced,children:(0,r.jsx)(nW.default,{})})}):(0,r.jsx)(X.Tooltip,{tooltip:"This secret only exists as a deployment secret",children:(0,r.jsx)(f.View,{css:nY.deploymentOnly,children:(0,r.jsx)(nz.default,{})})})}var n$=[eH.rcss.borderRadius(8),eH.rcss.width(32),eH.rcss.height(32),_.interactive.filled,eH.rcss.justify.center,eH.rcss.align.center],nY=(0,eU.cssRecord)({unsynced:(0,nD._)(n$).concat([eH.rcss.color.orangeStrongest]),deploymentOnly:(0,nD._)(n$).concat([eH.rcss.color.accentPrimaryStrongest])}),nX=e.i(721321),nQ=e.i(136540),nJ=e.i(841691),nZ=e.i(90102),n0=(0,eU.cssRecord)({input:[eH.rcss.color.greyStrongest],loading:[eF.loadingStyle.backgroundPulse(S.tokens.backgroundHighest,S.tokens.backgroundHigher)],error:[eH.rcss.color.accentNegativeDefault]}),n1=function(e){var t=e.id,n=e.value,a=e.loading,o=e.disabled,s=e.onChange,l=e.error,u=e.placeholder,c=e.type,d=void 0===c?"text":c,p=e.onFocus,m=(0,nE.hasCommand)(n),h=(0,i.useId)();return d||(d="text"),(0,r.jsxs)(f.View,{grow:!0,shrink:!0,gap:4,children:[(0,r.jsx)(nr.Input,{id:t,value:!a&&m?n:"",onChange:function(e){return s(e.target.value)},css:a?n0.loading:n0.input,disabled:a||o,"aria-describedby":h,placeholder:a?"":u,type:d,onFocus:p}),l?(0,r.jsx)(f.View,{css:n0.error,"aria-live":"polite","aria-atomic":"true",id:h,children:(0,r.jsx)("span",{children:l})}):null]})},n2=(0,eU.cssRecord)({root:[eH.rcss.rowWithGap(8),eH.rcss.align.center],iconButton:[eH.rcss.height("100%"),eH.rcss.borderRadius(8),{"& button":eH.rcss.height(32)}],keyInput:[eH.rcss.width("40%")],error:[eH.rcss.color.accentNegativeDefault]}),n4=function(e){var t=e.index,n=e.name,a=e.value,o=e.disabled,s=e.updateEnvVarName,l=e.updateEnvVarValue,u=e.removeEnvVar,c=e.otherKeys,d=e.devSecrets,p=e.canEditDevSecretsDisabledMessage,m=e.canEditDeploySecretsDisabledMessage,h=e.ignoredSecrets,g=e.optOutSyncing,v=e.optInSyncing,x=e.syncToWorkspace,y=(0,tB.useIdSeed)(),S=(0,b._)((0,i.useState)(""===n||""===a),2),_=S[0],T=S[1],D=!!(n&&a),k=(0,nF.default)(D),C=(0,nU.default)(function(){C.current&&k.current&&T(!1)},[k]),E=!!(d&&d.has(n)),A=void 0===m,I=E?h.includes(n)?{type:"unsynced",sync:function(){return x(n)}}:{type:"synced",optOut:function(){return g(n)}}:{type:"deploymentOnly"};if(_)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{css:n2.root,innerRef:C,children:[(0,r.jsx)(f.View,{css:n2.keyInput,children:(0,r.jsx)(nr.Input,{placeholder:"Name",id:"".concat(y,"-name-").concat(t),value:n,onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&D&&(g(n),T(!1))},disabled:o})}),(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(nr.Input,{placeholder:"Value",name:"".concat(y,"-value-").concat(t),value:a,onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&D&&(g(n),T(!1))},disabled:o})}),o?null:(0,r.jsx)(w.Surface,{elevated:!0,css:n2.iconButton,children:(0,r.jsx)(nQ.IconButton,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){D?(g(n),T(!1)):(u(),v(n))},children:D?(0,r.jsx)(J.default,{}):(0,r.jsx)(eI.default,{})})})]}),c.includes(n)?(0,r.jsxs)(j.Text,{variant:"small",css:n2.error,children:['Secret "',n,'" already exists']}):null]});var R=(0,r.jsx)(nK,{existsInDev:E,isAutoSynced:!h.includes(n)&&E});return(0,r.jsxs)(f.View,{css:n2.root,children:[void 0===p?R:null,(0,r.jsx)(nG.SecretKey,{value:n}),(0,r.jsx)(nG.SecretValue,{value:a,canEditDisabledMessage:m}),A?(0,r.jsx)(nH.SecretItemMenu,{onEdit:function(){return T(!0)},onDelete:function(){u(),v(n)},environmentControlState:I}):null]})},n8=function(e){var t,n=e.id,a=e.subdomain,o=e.provider,s=e.deploymentId,l=e.onChange,u=e.onBlur,c=e.updateValidity,d=e.disabled,p=e.canEditDisabledMessage,m=tN({provider:o}),h=m.internalDomain,g=m.isShowingFallback,v=th({variables:{subdomain:a,deploymentId:s},skip:0===a.length}),x=v.data,y=v.loading,b=v.error,S=(null==x?void 0:x.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&x.replitAppSubdomainAvailability.available,_=(null==x?void 0:x.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?x.replitAppSubdomainAvailability.message:null==x||null==(t=x.replitAppSubdomainAvailability)?void 0:t.errorMessage;return((0,i.useEffect)(function(){y||c(S)},[S,y,c]),b)?(0,r.jsx)(tq.StatusBanner,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,r.jsxs)(f.View,{children:[(0,r.jsxs)(f.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(X.Tooltip,{tooltip:p,isDisabled:!d,children:(0,r.jsx)(nr.Input,{id:n,placeholder:"subdomain",value:a,onChange:function(e){return l(e.target.value)},onBlur:u,disabled:d})})}),(0,r.jsx)(j.Text,{multiline:!1,children:h})]}),(0,r.jsxs)(f.View,{row:!0,gap:4,pt:4,align:"center",children:[y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(en.default,{}),(0,r.jsx)(j.Text,{multiline:!1,children:"Checking availability"})]}):null,S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.default,{color:"green"}),(0,r.jsx)(j.Text,{css:[eH.rcss.color.greenDefault],multiline:!1,children:"Available"})]}):null,S||y||!(a.length>0)?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.default,{color:"red"}),(0,r.jsx)(j.Text,{css:[eH.rcss.color.redDefault],multiline:!1,children:_})]}),g?(0,r.jsx)(tq.StatusBanner,{colorway:"warning",text:"The ".concat(tM.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(h," URL above.")}):null]})]})},n6=function(e){var t=e.appType,n=e.onChange,i=(0,tB.useIdSeed)();return(0,r.jsx)(nX.ButtonGroup,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[eH.rcss.width("100%"),eH.rcss.flex.row],children:[{value:tE.DeployHostingBuildAppType.Server,name:"Web Server",description:"ex. an API or website"},{value:tE.DeployHostingBuildAppType.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,r.jsx)(f.View,{grow:!0,children:(0,r.jsx)(X.Tooltip,{tooltip:e.description,children:(0,r.jsx)(nX.ButtonGroupItem,{id:i(e.value),value:e.value,text:e.name})})},t)})})},n3=(0,eU.cssRecord)({root:[eH.rcss.borderRadius(4),eH.rcss.flex.growAndShrink(1),eH.rcss.align.center,eH.rcss.backgroundColor.backgroundHigher],text:[eH.rcss.flex.growAndShrink(1),eH.rcss.truncate],input:[{border:"none",background:"inherit",'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function n5(e){var t=e.value,n=e.placeholder,a=void 0===n?"Enter your deployment password":n,o=e.onChange,s=e.canEditDisabledMessage,l=e.error,u=(0,b._)((0,i.useState)(!1),2),c=u[0],d=u[1],p=void 0===s,m=(0,i.useId)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Surface,{elevated:!0,css:n3.root,p:4,row:!0,gap:4,children:(0,r.jsxs)(f.View,{row:!0,align:"center",children:[o&&p?(0,r.jsx)(nr.Input,{value:t,size:a.length,onChange:function(e){return o(e.target.value)},placeholder:a,css:n3.input,"data-sensitive":t&&!c,"aria-describedby":m}):(0,r.jsx)(j.Text,{multiline:!1,css:n3.text,children:t?(0,r.jsx)(r.Fragment,{children:c?t:"•".repeat(8)}):a}),(0,r.jsx)(nQ.IconButton,{alt:"Toggle Secret",tooltipContents:s,tooltipBehavior:p?"hidden":void 0,onClick:function(){return d(!c)},disabled:!p,children:c?(0,r.jsx)(nZ.default,{}):(0,r.jsx)(nJ.default,{})})]})}),l?(0,r.jsx)(f.View,{css:n0.error,"aria-live":"polite","aria-atomic":"true",id:m,children:(0,r.jsx)("span",{children:l})}):null]})}e.s(["CommandInput",()=>n1,"DeploymentPrivatePasswordInput",()=>n5,"DeploymentTargetSelector",()=>n6,"EnvVarInput",()=>n4,"PrimaryDomainInput",()=>n8],137737);var n9=e.i(341190),n7=e.i(223808),re=e.i(11176),rt=(0,eU.cssRecord)({self:{ul:{maxHeight:"300px"}},select:[eH.rcss.border()],error:[eH.rcss.color.accentNegativeStronger],button:[eH.rcss.reset.button,eH.rcss.viewStyle,_.interactive.nofill,eH.rcss.align.center,eH.rcss.display.inlineFlex,{borderColor:_.interactive.outlined.borderColor}],popover:[eH.rcss.width("max-content"),eH.rcss.overflow("auto"),eH.rcss.p(1),eH.rcss.minWidth(240)],listbox:[eH.rcss.maxHeight(300),eH.rcss.minWidth(300),eH.rcss.overflow("auto")],dropdownItemAndContainer:[eH.rcss.flex.row,eH.rcss.align.center,_.interactive.listItem,eH.rcss.px(8),eH.rcss.py(4)],selectedTimezoneCode:[eH.rcss.textAlign.left,eH.rcss.rowWithGap(8)],timezoneCode:[eH.rcss.textAlign.left,eH.rcss.rowWithGap(8)],header:[eH.rcss.pt(8),eH.rcss.px(8),eH.rcss.pb(4),eH.rcss.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(S.tokens.outlineDimmest)}],search:[{borderBottom:"1px solid ".concat(S.tokens.outlineDimmest)}],searchInput:[eH.rcss.width("100%")],dropdownHeader:[eH.rcss.fontWeight.medium],loading:[eH.rcss.maxWidth(70),eF.loadingStyle.backgroundPulse(S.tokens.backgroundHighest,S.tokens.backgroundHigher)]});function rn(e){var t=e.initialTimezone,n=e.onChange,a=e.loading,o=e.error,s=(0,b._)((0,i.useState)(),2),l=s[0],u=s[1],c=(0,i.useId)();return(0,i.useEffect)(function(){if(!a){if(t&&!l)return void u(t);if(!l&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,tM.isValidTimezone)(e)){n(e),u(e);return}var r="America/Los_Angeles";n(r),u(r)}}},[n,l,t,a]),(0,r.jsxs)(f.View,{css:rt.self,children:[a||!l?(0,r.jsx)(nr.Input,{css:rt.loading,disabled:!0}):(0,r.jsx)(ru,{selectedTzCode:l,onSelectionChange:function(e){"string"==typeof e&&(n(e),u(e))},css:rt.select}),o?(0,r.jsx)(f.View,{css:rt.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,r.jsx)("span",{children:o})}):null]})}var rr=(0,eU.cssRecord)({self:[rt.dropdownItemAndContainer,eH.rcss.justify.spaceBetween,{backgroundColor:S.tokens.interactiveBackground}]});function ri(e){var t=e.title;return(0,r.jsxs)(f.View,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,r.jsx)(f.View,{css:rt.selectedTimezoneCode,align:"center",children:(0,r.jsx)(j.Text,{variant:"text",color:"dimmer",children:t})}),(0,r.jsx)(D.default,{})]})}function ra(e){var t=e.tzCode,n=e.selected;return(0,r.jsxs)(f.View,{css:n?rr.self:rt.dropdownItemAndContainer,children:[(0,r.jsx)(f.View,{css:rt.timezoneCode,align:"center",children:(0,r.jsx)(j.Text,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,r.jsx)(f.View,{align:"center",row:!0,children:n?(0,r.jsx)(J.default,{size:16}):null})]})}var ro=(0,eU.cssRecord)({self:[rt.button,eH.rcss.align.center,eH.rcss.px(8),eH.rcss.py(4),(0,I._)({},eH.media.min("mobileMax"),[eH.rcss.rowWithGap(4)])]});function rs(e){return e.toLowerCase().replaceAll("_"," ")}var rl=re.validSchedulerTimezones.map(function(e){var t=e.value,n=e.abbr,r=e.utc,i=rs(t),a=rs(n),o=r.map(function(e){return{tzCode:e,normalizedUtcValue:rs(e)}});return(0,v._)((0,g._)({},e),{normalizedValue:i,normalizedAbbr:a,normalizedUtc:o,searchableText:rs([e.value,e.abbr].concat((0,nD._)(e.utc)).join(" "))})});function ru(e){var t=e.selectedTzCode,n=e.onSelectionChange,a=(0,b._)((0,i.useState)(""),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(re.validSchedulerTimezones),2),u=l[0],c=l[1],d=(0,b._)((0,i.useState)(re.validSchedulerTimezones.find(function(e){return e.utc.includes(t)})),2),p=d[0],m=d[1];(0,i.useEffect)(function(){m(re.validSchedulerTimezones.find(function(e){return e.utc.includes(t)}))},[t]);var h=(0,n7.default)(function(e){c(function(e){if(!e)return re.validSchedulerTimezones;var t=rs(e);return rl.map(function(n){var r=0,i=n.searchableText,a=n.normalizedValue,o=n.normalizedAbbr,s=n.normalizedUtc,l=n.utc;if(i.includes(t)){a.includes(t)&&(r+=10/(a.indexOf(t)+1)),o.includes(t)&&(r+=8/(o.indexOf(t)+1));var u=l;return s.some(function(e){return e.normalizedUtcValue.includes(t)})&&(r+=5,e.length>=3&&(u=s.map(function(e){var n=e.tzCode,r=e.normalizedUtcValue;return r.includes(t)?{tzCode:n,utcScore:5/(r.indexOf(t)+1)}:{tzCode:n,utcScore:0}}).sort(function(e,t){return t.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,v._)((0,g._)({},n),{utc:u,score:r})}return(0,v._)((0,g._)({},n),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,t){return t.score-e.score})}(e))},100),x=function(e){s(e),h(e)};return(0,r.jsxs)(nV.Select,{onSelectionChange:n,"aria-label":"Timezone Select",children:[p?(0,r.jsx)(nB.Button,{css:rt.button,children:(0,r.jsx)(ri,{title:p.abbr})}):(0,r.jsx)(X.Tooltip,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,r.jsxs)(nB.Button,{css:ro.self,children:[(0,r.jsx)(j.Text,{color:"dimmer",children:"Select"}),(0,r.jsx)(ez.default,{})]})}),(0,r.jsxs)(eE.RawPopover,{css:rt.popover,background:"default",placement:"bottom right",children:[(0,r.jsx)(f.View,{css:rt.search,p:8,children:(0,r.jsx)(nr.Input,{css:rt.searchInput,value:o,onChange:function(e){return x(e.target.value)},placeholder:"Search"})}),(0,r.jsx)(R.ListBox,{css:rt.listbox,children:u.map(function(e){var n=e.value,i=e.abbr,a=e.utc;return(0,r.jsxs)(R.ListBoxSection,{children:[(0,r.jsx)(n9.Header,{css:rt.header,children:(0,r.jsxs)(j.Text,{variant:"small",color:"dimmest",css:rt.dropdownHeader,children:[n," (",i,")"]})}),a.map(function(e){return(0,r.jsx)(R.ListBoxItem,{id:e,textValue:e,children:(0,r.jsx)(ra,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var rc=e.i(611159),rd=e.i(759239);e.i(925218);var rp=e.i(802088),rf=e.i(311106),rm=e.i(858248),rh=e.i(709485),rg=function(e){var t,n,r,o,s,l,u,c,d,p,f,m,h,g=e.onDescriptionTranslation,v=e.onExpressionTranslation,x=e.onError,y=(0,i.useRef)(null),S=(0,b._)((0,i.useState)(!1),2),_=S[0],w=S[1],j=function(e,t){(0,rf.sendSentryError)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),x(t||e)},T=(n=(t={onTranslation:function(e,t,n){if(!_&&(y.current&&clearTimeout(y.current),t)){if(!e)return void g("Unable to derive valid translation from description");var r,i=(r=e.match(/`([^`]+)`(?=[^`]*$)/))?r[1]:null;if(!i||!(0,rc.isValidCron)(i))return void g("Unable to derive valid Cron expression from description");g(i),(0,rm.track)(rh.events.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:"scheduleToCronExpression",translation:e,prompt:n})}},onError:function(e){return j(e,"Error translating description")}}).onTranslation,r=t.onError,o=(0,e7.useChatter)(),l=(s=(0,b._)((0,i.useState)(!1),2))[0],u=s[1],d=(c=(0,b._)((0,i.useState)(null),2))[0],p=c[1],f=(0,i.useRef)(""),m=(0,i.useCallback)(function(e){return(0,e5._)(function(){var t;return(0,e9._)(this,function(n){switch(n.label){case 0:return u(!0),f.current=e.content,[4,o.sessions.create({sessionType:a.SessionType.SINGLE_USE_SESSION,title:"Cron Schedule Translation"})];case 1:if(!(t=n.sent()).ok)return u(!1),r("Failed to create session"),[2];return p(t.payload),[4,t.payload.appendEvent({kind:"translate",content:e.content,inputTarget:e.inputTarget,outputTarget:e.outputTarget,modelType:a.ModelType.BASIC})];case 2:return n.sent().ok||(u(!1),r("Failed to send translation request")),[2]}})})()},[o.sessions,r]),h=(0,i.useMemo)(function(){return null==d?void 0:d.reduce(rv,"global").result},[d]),(0,rp.useObserver)(h,{next:function(e){(null==e?void 0:e.completed)&&l&&u(!1),(null==e?void 0:e.code)&&n(e.code,e.completed,f.current)}}),{sendMessage:m,loading:l}),D=T.sendMessage,k=T.loading;return(0,i.useEffect)(function(){return function(){y.current&&clearTimeout(y.current)}},[y]),{translateDescriptionToExpression:function(e){return(0,e5._)(function(){return(0,e9._)(this,function(t){return(y.current&&clearTimeout(y.current),e)?(D({inputTarget:a.TranslationTarget.ENGLISH,outputTarget:a.TranslationTarget.CRON,content:e}),y.current=setTimeout(function(){w(!0),j("Translation timed out")},8e3)):g(""),[2]})})()},translateExpressionToDescription:function(e){if(!e)return void v("");if(!(0,rc.isValidCron)(e))return void v("Invalid cron expression");try{var t=rd.default.toString(e,{verbose:!0});v(t),(0,rm.track)(rh.events.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:"cronExpressionToSchedule",translation:t,prompt:e})}catch(e){j((0,nT._)(e,Error)?e.message:"Failed to translate cron expression","Invalid cron expression")}},loading:k}},rv={direction:"reverse",state:{code:null,completed:!1},reducer:function(e,t){(0,e2.isKind)(e.contents.contents,"messageEventContents")&&e.sender.type===a.UserType.AI&&(t.code=(0,e2.unkind)(e.contents.contents).content,t.completed=e.state===a.EventState.COMPLETE&&!!t.code)}};function rx(){return(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:S.tokens.blurpleStronger}),(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:S.tokens.blurpleStronger}),(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:S.tokens.blurpleStronger})]})}var ry=eH.container.min(480),rb=(0,eU.cssRecord)({cronConfig:[(0,I._)({},ry,[eH.rcss.colWithGap(0),eH.rcss.rowWithGap(8),eH.rcss.align.start])],crontabLabeledInput:[eH.rcss.flex.growAndShrink(1),eH.rcss.maxWidth(128)],translationSwitch:[eH.rcss.mb(4),(0,I._)({transform:"rotate(90deg)",alignSelf:"flex-start"},ry,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[eH.rcss.height(32),eH.rcss.width(32),eH.rcss.center],timezoneSelect:[eH.rcss.flex.shrink(1),(0,I._)({minWidth:75},ry,{paddingTop:30})]});function rS(e){var t=e.callback,n=e.delay,r=(0,i.useRef)();return(0,i.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function r_(e){var t=e.initialCrontab,n=e.initialTimezone,r=e.externalLoading,a=e.onCrontabChange,o=e.onTimezoneChange,s=(0,b._)((0,i.useState)(!1),2),l=s[0],u=s[1],c=(0,b._)((0,i.useState)(null),2),d=c[0],p=c[1],f=(0,b._)((0,i.useState)(null),2),m=f[0],h=f[1],g=(0,b._)((0,i.useState)(null!=t?t:null),2),v=g[0],x=g[1],y=(0,b._)((0,i.useState)(null!=n?n:null),2),S=y[0],_=y[1],w=(0,b._)((0,i.useState)("scheduleToCronExpression"),2),j=w[0],T=w[1],D=rg({onDescriptionTranslation:function(e){u(!1),x(e),null==a||a(e)},onExpressionTranslation:function(e){u(!1),h(e)},onError:function(e){u(!1),p(e)}}),k=D.translateDescriptionToExpression,C=D.translateExpressionToDescription,E=D.loading,A=rS({callback:function(e){return k(e)},delay:3e3}).callerFunction,I=rS({callback:u,delay:500}).callerFunction,R=E||l||null!=r&&r;return(0,i.useEffect)(function(){if(t&&!m&&!R){T("cronExpressionToSchedule");var e=setTimeout(function(){C(t)},100);return function(){return clearTimeout(e)}}},[t,m,R,C]),{describeSchedule:m,crontab:v,timezone:S,error:d,loading:R,scheduleToCronExpression:"scheduleToCronExpression"===j,cronExpressionToSchedule:"cronExpressionToSchedule"===j,setCrontab:function(e){x(e),null==a||a(e)},setTimezone:function(e){_(e),null==o||o(e)},handleOnInputChanged:function(e,t){switch(t){case"scheduleToCronExpression":h(e);break;case"cronExpressionToSchedule":x(e),null==a||a(e)}(E||l||null!=r&&r)&&u(!1),""!==e&&null!==e&&("cronExpressionToSchedule"===t?C(e):(I(!0),A(e)))},setTranslationType:T}}function rw(e){var t=e.crontab,n=e.timezone,i=e.crontabError,a=e.timezoneError,o=e.cronLoading,s=e.error,l=e.onCronExpressionChange,u=e.onTimezoneChange;return(0,r.jsxs)(f.View,{grow:!0,shrink:!0,pb:16,gap:8,children:[(0,r.jsx)(f.View,{css:rb.crontabLabeledInput,children:(0,r.jsx)(na,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(s,". Enter valid Cron expression."),grow:!0,children:(0,r.jsx)(n1,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:o,disabled:!1,onChange:l,error:i})})}),(0,r.jsx)(f.View,{css:rb.timezoneSelect,children:(0,r.jsx)(rn,{initialTimezone:n,onChange:u,error:a,loading:o})})]})}function rj(e){var t=e.describeSchedule,n=e.crontab,i=e.timezone,a=e.crontabError,o=e.cronLoading,s=e.timezoneError,l=e.loading,u=void 0!==l&&l,c=e.scheduleToCronExpression,d=e.cronExpressionToSchedule,p=e.onScheduleDescriptionChange,m=e.onCronExpressionChange,h=e.onTimezoneChange,g=e.onScheduleDescriptionFocus,v=e.onCronExpressionFocus;return(0,r.jsxs)(f.View,{css:rb.cronConfig,grow:!0,shrink:!0,gap:8,children:[(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(na,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,r.jsx)(n1,{id:"describeSchedule",value:t,placeholder:n?"":"Every day at 3:00 AM",loading:o,disabled:u&&!c,onChange:p,onFocus:g})})}),(0,r.jsx)(f.View,{css:rb.translationSwitch,shrink:!0,children:(0,r.jsx)(X.Tooltip,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,r.jsx)(f.View,{css:rb.translationSwitchIcon,children:u?(0,r.jsx)(en.default,{color:S.tokens.blurpleStronger}):(0,r.jsx)(rx,{})})})}),(0,r.jsx)(f.View,{css:rb.crontabLabeledInput,children:(0,r.jsx)(na,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,r.jsx)(n1,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:o,disabled:u&&!d,onChange:m,onFocus:v,error:a})})}),(0,r.jsx)(f.View,{css:rb.timezoneSelect,children:(0,r.jsx)(rn,{initialTimezone:i,onChange:h,error:s,loading:o})})]})}e.s(["CronExpressionErrorFallback",()=>rw,"CronExpressionInterface",()=>rj,"useCronExpressionWithTranslation",()=>r_],32144),e.s(["DeploymentInfo",()=>oz,"LabeledSection",()=>oG,"Type",()=>oH],635528);var rT=e.i(366492),rD=e.i(613141);function rk(){var e=(0,ex._)(["\n  fragment PendingDomainsRepl on Repl {\n    id\n    pendingDomains {\n      domainName\n      status\n      message\n    }\n  }\n"]);return rk=function(){return e},e}function rC(){var e=(0,ex._)(["\n  query PendingDomainsQuery($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...PendingDomainsRepl\n      }\n    }\n  }\n  ","\n"]);return rC=function(){return e},e}function rE(){var e=(0,ex._)(["\n  subscription PendingDomainsUpdates($replId: String!) {\n    pendingDomainsUpdates(replId: $replId) {\n      id\n      ...PendingDomainsRepl\n    }\n  }\n  ","\n"]);return rE=function(){return e},e}var rA={},rI=(0,ey.gql)(rk()),rR=(0,ey.gql)(rC(),rI);function rP(e){var t=(0,g._)({},rA,e);return eb.useQuery(rR,t)}var rM=(0,ey.gql)(rE(),rI);function rO(e){var t=(0,g._)({},rA,e);return rD.useSubscription(rM,t)}function rN(){var e=(0,ex._)(["\n  fragment DomainItemDnsRecord on DnsRecord {\n    id\n    answer\n    type\n    ttl\n    host\n    isProtected\n  }\n"]);return rN=function(){return e},e}function rL(){var e=(0,ex._)(["\n  fragment DomainItem on Domain {\n    id\n    status\n    state\n    domain\n    managed\n    timeCreated\n    purchaseDate\n    autorenew\n    registrantEmailVerified\n    dnsRecords {\n      id\n      ...DomainItemDnsRecord\n    }\n    user {\n      id\n    }\n  }\n  ","\n"]);return rL=function(){return e},e}function rB(){var e=(0,ex._)(["\n  mutation CreateDnsRecord($input: CreateDnsRecordInput!) {\n    createDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on CreateDnsRecordOutput {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rB=function(){return e},e}function rV(){var e=(0,ex._)(["\n  mutation DeleteDnsRecord($input: DeleteDnsRecordInput!) {\n    deleteDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on DeleteDnsRecordOutput {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rV=function(){return e},e}function rU(){var e=(0,ex._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains2 {\n          id\n        }\n        repl {\n          ...PendingDomainsRepl\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return rU=function(){return e},e}function rF(){var e=(0,ex._)(["\n  mutation VerifyDomain($input: VerifyDomainInput!) {\n    verifyDomain(input: $input) {\n      ... on Domain {\n        id\n        state\n      }\n    }\n  }\n"]);return rF=function(){return e},e}function rH(){var e=(0,ex._)(["\n  mutation setShouldDomainAutoRenew($input: SetShouldDomainAutoRenewInput!) {\n    setShouldDomainAutoRenew(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on SetShouldDomainAutoRenewResult {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rH=function(){return e},e}e.s(["PendingDomainsReplFragmentDoc",()=>rI,"usePendingDomainsQueryQuery",()=>rP,"usePendingDomainsUpdatesSubscription",()=>rO],680250);var rG={},rz=(0,ey.gql)(rN()),rq=(0,ey.gql)(rL(),rz),rW=(0,ey.gql)(rB(),rq);function rK(e){var t=(0,g._)({},rG,e);return tg.useMutation(rW,t)}var r$=(0,ey.gql)(rV(),rq);function rY(e){var t=(0,g._)({},rG,e);return tg.useMutation(r$,t)}var rX=(0,ey.gql)(rU(),rI);function rQ(e){var t=(0,g._)({},rG,e);return tg.useMutation(rX,t)}var rJ=(0,ey.gql)(rF());function rZ(e){var t=(0,g._)({},rG,e);return tg.useMutation(rJ,t)}var r0=(0,ey.gql)(rH(),rq);function r1(e){var t=(0,g._)({},rG,e);return tg.useMutation(r0,t)}function r2(){var e=(0,ex._)(["\n  fragment Domains2Repl on Repl {\n    id\n    org {\n      id\n    }\n  }\n"]);return r2=function(){return e},e}function r4(){var e=(0,ex._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      title\n      apexProxy\n    }\n    domains2 {\n      id\n      ...DomainItem\n      whois @include(if: $isGlowup) {\n        registrar\n        creationDate\n        expiryDate\n      }\n      currentDnsRecords @include(if: $isGlowup) {\n        A\n        TXT\n      }\n      renewalPriceCents @include(if: $isGlowup)\n    }\n  }\n  ","\n"]);return r4=function(){return e},e}function r8(){var e=(0,ex._)(["\n  query Domains2Repl($id: String!) {\n    getRepl(id: $id) {\n      ...Domains2Repl\n    }\n  }\n  ","\n"]);return r8=function(){return e},e}function r6(){var e=(0,ex._)(["\n  query HostingDeploymentDomains($id: String!, $isGlowup: Boolean!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return r6=function(){return e},e}function r3(){var e=(0,ex._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains2 {\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return r3=function(){return e},e}e.s(["DomainItemFragmentDoc",()=>rq,"useCreateDnsRecordMutation",()=>rK,"useDeleteDnsRecordMutation",()=>rY,"useHostingDeploymentsUnlinkDomainMutation",()=>rQ,"useSetShouldDomainAutoRenewMutation",()=>r1,"useVerifyDomainMutation",()=>rZ],713547);var r5={},r9=(0,ey.gql)(r2()),r7=(0,ey.gql)(r4(),rq),ie=(0,ey.gql)(r8(),r9);function it(e){var t=(0,g._)({},r5,e);return eb.useQuery(ie,t)}var ir=(0,ey.gql)(r6(),r7);function ii(e){var t=(0,g._)({},r5,e);return eb.useQuery(ir,t)}function ia(e){var t=(0,g._)({},r5,e);return eS.useLazyQuery(ir,t)}var io=(0,ey.gql)(r3(),rq);function is(e){var t=(0,g._)({},r5,e);return tg.useMutation(io,t)}function il(){var e=(0,ex._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return il=function(){return e},e}function iu(){var e=(0,ex._)(["\n  query HostingDeploymentSettings($id: String!, $isGlowup: Boolean!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        repl {\n          id\n          org {\n            id\n          }\n        }\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return iu=function(){return e},e}function ic(){var e=(0,ex._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ic=function(){return e},e}e.s(["HostingDeploymentDomainsDocument",()=>ir,"HostingDeploymentDomainsHostingDeploymentFragmentDoc",()=>r7,"useDomains2ReplQuery",()=>it,"useHostingDeploymentDomainsLazyQuery",()=>ia,"useHostingDeploymentDomainsQuery",()=>ii,"useLinkHostingDeploymentDomainMutation",()=>is],636567);var id={},ip=(0,ey.gql)(il()),im=(0,ey.gql)(iu(),r7,t5.MachineConfigurationFragmentDoc);function ih(e){var t=(0,g._)({},id,e);return eb.useQuery(im,t)}var ig=(0,ey.gql)(ic(),ip);function iv(e){var t=(0,g._)({},id,e);return eb.useQuery(ig,t)}function ix(e){var t=(0,g._)({},id,e);return eS.useLazyQuery(ig,t)}e.s(["useHostingDeploymentSettingsAuthzLazyQuery",()=>ix,"useHostingDeploymentSettingsAuthzQuery",()=>iv,"useHostingDeploymentSettingsQuery",()=>ih],358637);var iy=e.i(327516);e.s(["formatDistance",()=>iy.default],182492);var iy=iy,ib=e.i(628251);function iS(e,t,n){var r,i,a,o,s=function(e,t,n){if(n&&!n.code)throw Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return s.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=n.length-1;r>=0;--r)if("timeZoneName"===n[r].type)return n[r].value}(s,t):(r=s,i=t,a=r.format(i).replace(/\u200E/g,""),(o=/ [\w-+ ]+$/.exec(a))?o[0].substr(1):"")}var i_={year:0,month:1,day:2,hour:3,minute:4,second:5},iw={};function ij(e,t,n,r,i,a,o){var s=new Date(0);return s.setUTCFullYear(e,t,n),s.setUTCHours(r,i,a,o),s}var iT=/^(Z)$/,iD=/^([+-]\d{2})$/,ik=/^([+-]\d{2}):?(\d{2})$/;function iC(e,t,n){if(!e||(r=iT.exec(e)))return 0;if(r=iD.exec(e))return iA(a=parseInt(r[1],10))?-(36e5*a):NaN;if(r=ik.exec(e)){var r,i,a=parseInt(r[1],10),o=parseInt(r[2],10);return iA(a,o)?(i=36e5*Math.abs(a)+6e4*o,a>0?-i:i):NaN}if(function(e){if(iI[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),iI[e]=!0,!0}catch(e){return!1}}(e)){t=new Date(t||Date.now());var s,l=iE(n?t:ij((s=t).getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e);return-(n?l:function(e,t,n){var r=e.getTime()-t,i=iE(new Date(r),n);if(t===i)return t;var a=iE(new Date(r-=i-t),n);return i===a?i:Math.max(i,a)}(t,l,e))}return NaN}function iE(e,t){var n,r,i,a,o,s=(o=function(e){if(!iw[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));iw[e]="06/25/2014, 00:00:00"===t||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===t?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return iw[e]}(t)).formatToParts?function(e,t){try{for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var a=i_[n[i].type];a>=0&&(r[a]=parseInt(n[i].value,10))}return r}catch(e){if((0,nT._)(e,RangeError))return[NaN];throw e}}(o,e):(n=o,r=e,i=n.format(r).replace(/\u200E/g,""),[(a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i))[3],a[1],a[2],a[4],a[5],a[6]]),l=ij(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),u=e.getTime(),c=u%1e3;return l-(u-=c>=0?c:1e3+c)}function iA(e,t){return -23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var iI={};function iR(e,t){var n=e?iC(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(n))throw RangeError("Invalid time zone specified: "+e);return n}function iP(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}function iM(e,t){var n=Math.abs(e);return(e>0?"-":"+")+iP(Math.floor(n/60),2)+(t||"")+iP(Math.floor(n%60),2)}function iO(e,t){return e%60==0?(e>0?"-":"+")+iP(Math.abs(e)/60,2):iM(e,t)}let iN={X:function(e,t,n,r){var i=iR(r.timeZone,r._originalDate||e);if(0===i)return"Z";switch(t){case"X":return iO(i);case"XXXX":case"XX":return iM(i);default:return iM(i,":")}},x:function(e,t,n,r){var i=iR(r.timeZone,r._originalDate||e);switch(t){case"x":return iO(i);case"xxxx":case"xx":return iM(i);default:return iM(i,":")}},O:function(e,t,n,r){var i,a,o,s,l,u=iR(r.timeZone,r._originalDate||e);switch(t){case"O":case"OO":case"OOO":return"GMT"+(a=(i=u)>0?"-":"+",s=Math.floor((o=Math.abs(i))/60),0==(l=o%60)?a+String(s):a+String(s)+":"+iP(l,2));default:return"GMT"+iM(u,":")}},z:function(e,t,n,r){var i=r._originalDate||e;switch(t){case"z":case"zz":case"zzz":return iS("short",i,r);default:return iS("long",i,r)}}};var iL=e.i(119468),iB=e.i(555023),iV=e.i(906695),iU=/^([0-9W+-]+)(T| )(.*)/,iF=/^([0-9W+-]+)(.*)/,iH=/^(\d{2})$/,iG=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],iz=/^(\d{4})/,iq=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],iW=/^-(\d{2})$/,iK=/^-?(\d{3})$/,i$=/^-?(\d{2})-?(\d{2})$/,iY=/^-?W(\d{2})$/,iX=/^-?W(\d{2})-?(\d{1})$/,iQ=/^(\d{2}([.,]\d*)?)$/,iJ=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,iZ=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,i0=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;function i1(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var i2=[31,28,31,30,31,30,31,31,30,31,30,31],i4=[31,29,31,30,31,30,31,31,30,31,30,31];function i8(e){return e%400==0||e%4==0&&e%100!=0}function i6(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=i8(e);if(r&&n>i4[t]||!r&&n>i2[t])return!1}return!0}function i3(e,t,n){return!(t<0)&&!(t>52)&&(null==n||!(n<0)&&!(n>6))}function i5(e,t,n){return(null==e||!(e<0)&&!(e>=25))&&(null==t||!(t<0)&&!(t>=60))&&(null==n||!(n<0)&&!(n>=60))}var i9=/([xXOz]+)|''|'(''|[^'])+('|$)/g,i7=e.i(928838),ae=e.i(68893),at=e.i(391222),an=e.i(883002),ar=(0,eU.cssRecord)({name:[eH.rcss.color.foregroundDefault,eH.rcss.fontWeight.medium],itemRight:[eH.rcss.textAlign.right],disabledLog:{cursor:"not-allowed"}}),ai=function(e){var t,n,i=e.onClick,a=(0,nM.useDeploymentMode)(),o=(0,nc.useDeploymentCurrentBuild)();if(a===ae.DeploymentMode.Loading||!o)return(0,r.jsx)(en.default,{size:12});var s=o.status,l=o.hasDeployLogs,u=!l;return(0,r.jsx)(f.View,{shrink:!0,row:!0,gap:0,children:(0,r.jsxs)(f.View,{grow:!0,shrink:!0,pr:4,align:"center",row:!0,gap:8,children:[(0,r.jsx)(at.DeploymentStatusDot,{status:s}),(0,r.jsx)(f.View,{grow:!0,shrink:!0,align:"center",children:(0,r.jsxs)(j.Text,{multiline:!1,children:[(0,r.jsx)("span",{css:ar.name,children:(null!=(n=null==(t=o.user)?void 0:t.displayName)?n:tM.DELETED_USER_DISPLAY_NAME)+" "}),(0,i7.getStatusSentenceText)(s,o.suspendedReason)+" ",!function(e){switch(e){case tE.HostingBuildStatus.Building:case tE.HostingBuildStatus.Promoting:case tE.HostingBuildStatus.Running:case tE.HostingBuildStatus.Pending:case tE.HostingBuildStatus.Failed:case tE.HostingBuildStatus.Success:return!0;case tE.HostingBuildStatus.Resuming:case tE.HostingBuildStatus.Suspending:case tE.HostingBuildStatus.Suspended:case tE.HostingBuildStatus.UpdatingTier:return!1}}(s)?null:(0,r.jsx)(X.Tooltip,{tooltip:function(e,t,n){var r=String(t),i={},a=r.match(i9);if(a){var o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=null==n.additionalDigits?2:(0,iB.default)(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw RangeError("additionalDigits must be 0, 1 or 2");if((0,nT._)(e,Date)||(void 0===e?"undefined":(0,iL._)(e))==="object"&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i=function(e){var t,n={},r=iU.exec(e);if(r?(n.date=r[1],t=r[3]):(r=iF.exec(e))?(n.date=r[1],t=r[2]):(n.date=null,t=e),t){var i=i0.exec(t);i?(n.time=t.replace(i[1],""),n.timeZone=i[1].trim()):n.time=t}return n}(e),a=function(e,t){var n,r=iG[t],i=iq[t];if(n=iz.exec(e)||i.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=iH.exec(e)||r.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(i.date,r),o=a.year,s=function(e,t){if(null===t)return null;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(n=iW.exec(e))return(a=new Date(0),i6(t,r=parseInt(n[1],10)-1))?(a.setUTCFullYear(t,r),a):new Date(NaN);if(n=iK.exec(e)){var n,r,i,a=new Date(0),o=parseInt(n[1],10);return!function(e,t){if(t<1)return!1;var n=i8(e);return(!n||!(t>366))&&(!!n||!(t>365))}(t,o)?new Date(NaN):(a.setUTCFullYear(t,0,o),a)}if(n=i$.exec(e)){a=new Date(0),r=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return i6(t,r,s)?(a.setUTCFullYear(t,r,s),a):new Date(NaN)}if(n=iY.exec(e))return i3(t,i=parseInt(n[1],10)-1)?i1(t,i):new Date(NaN);if(n=iX.exec(e)){i=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return i3(t,i,l)?i1(t,i,l):new Date(NaN)}return null}(a.restDateString,o);if(isNaN(s)||!s)return new Date(NaN);var l,u=s.getTime(),c=0;if(i.time&&isNaN(c=function(e){if(t=iQ.exec(e))return i5(n=parseFloat(t[1].replace(",",".")))?n%24*36e5:NaN;if(t=iJ.exec(e))return i5(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*36e5+6e4*r:NaN;if(t=iZ.exec(e)){var t,n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseFloat(t[3].replace(",","."));return i5(n,r,i)?n%24*36e5+6e4*r+1e3*i:NaN}return null}(i.time)))return new Date(NaN);if(i.timeZone||n.timeZone){if(isNaN(l=iC(i.timeZone||n.timeZone,new Date(u+c))))return new Date(NaN)}else l=(0,iV.default)(new Date(u+c)),l=(0,iV.default)(new Date(u+c+l));return new Date(u+c+l)}(e,i);r=a.reduce(function(e,t){if("'"===t[0])return e;var n=e.indexOf(t),r="'"===e[n-1],a=e.replace(t,"'"+iN[t[0]](o,t,null,i)+"'");return r?a.substring(0,n-1)+a.substring(n+1):a},r)}return(0,ib.default)(e,r,i)}(new Date(o.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,t){return(0,r.jsx)("span",(0,v._)((0,g._)({},e),{ref:t,children:(0,iy.default)(new Date(o.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,r.jsx)(f.View,{css:ar.itemRight,children:(0,r.jsx)(nQ.IconButton,{alt:l?"View deploy logs":"Deploy logs expire after 30 days",onClick:i,disabled:u,css:u&&ar.disabledLog,children:(0,r.jsx)(an.default,{})})})]})})},aa=(t={},(0,I._)(t,tE.HostingBuildProvider.Gce,"Reserved VM"),(0,I._)(t,tE.HostingBuildProvider.CloudRun,"Autoscale"),(0,I._)(t,tE.HostingBuildProvider.Static,"Static"),(0,I._)(t,tE.HostingBuildProvider.Cron,"Scheduled"),(0,I._)(t,tE.HostingBuildProvider.AzureVm,"Reserved VM"),(0,I._)(t,tE.HostingBuildProvider.AzureContainerApp,"Autoscale"),t),ao=e.i(830597),iy=iy,as=e.i(714165),al=tr;e.s(["RotateCcw",()=>al.default],462216);var al=tr,au=(0,eU.cssRecord)({buildIdColumn:[eH.rcss.flex.row,eH.rcss.minWidth(85)],pillSpanActivityLog:[eH.rcss.pl(16)],displayName:[eH.rcss.fontWeight.medium,eH.rcss.pl(6)],formattedText:[eH.rcss.pl(4),eH.rcss.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),ac=function(e){var t=e.build,n=t.id.slice(0,8);return(0,r.jsx)(X.Tooltip,{tooltip:t.id,children:n})},ad=(n={},(0,I._)(n,tE.HostingActivityLogType.Deploy,"published"),(0,I._)(n,tE.HostingActivityLogType.Rollback,"rolled back"),(0,I._)(n,tE.HostingActivityLogType.Fail,"failed to publish"),n),ap=function(e){var t=e.type,n=e.isExpoLaunch,r=e.expoLaunchStatus;if(n&&r)switch(r){case tE.ExpoLaunchStatus.Success:return"published to App Store";case tE.ExpoLaunchStatus.Failure:case tE.ExpoLaunchStatus.Canceled:return"failed to publish to App Store";default:return null}return t in ad?ad[t]:null},af=function(e){var t,n=e.build,i=null==(t=n.rollbackSourceBuildId)?void 0:t.slice(0,8);return(0,r.jsx)(X.Tooltip,{tooltip:n.rollbackSourceBuildId,children:(0,r.jsx)(eG.Pill,{iconLeft:(0,r.jsx)(al.default,{}),text:i})})},am=function(e){var t,n,i,a,o,s=e.activityLogItem,l=e.formattedTime,u=s.build,c=null!=(o=null==(t=u.user)?void 0:t.displayName)?o:tM.DELETED_USER_DISPLAY_NAME,d=ap(s);if(!d)return null;var p=u.rollbackSourceBuildId;return(0,r.jsxs)(f.View,{pb:4,align:"center",row:!0,children:[(0,r.jsx)("span",{css:au.buildIdColumn,children:(0,r.jsx)(ac,{build:u})}),(0,r.jsx)(as.Avatar,{src:(null==(n=u.user)?void 0:n.image)||null,size:16,username:(null==(i=u.user)?void 0:i.username)||"",fullName:(null==(a=u.user)?void 0:a.fullName)||""}),(0,r.jsx)("span",{css:au.displayName,children:c}),(0,r.jsxs)("span",{css:au.formattedText,children:[" "+d," "+l]}),p?(0,r.jsx)("span",{css:au.pillSpanActivityLog,children:(0,r.jsx)(af,{build:u})}):null," "]})},ah=function(e){var t,n,i,a,o,s=e.activityLogItem,l=e.formattedTime,u=s.build,c=null!=(o=null==(t=u.user)?void 0:t.displayName)?o:tM.DELETED_USER_DISPLAY_NAME,d=ap(s);if(!d)return null;var p=u.rollbackSourceBuildId;return(0,r.jsxs)(f.View,{children:[(0,r.jsxs)(f.View,{row:!0,align:"center",children:[(0,r.jsx)(ac,{build:u}),p?(0,r.jsx)("span",{css:au.pillSpanActivityLog,children:(0,r.jsx)(af,{build:u})}):null]}),(0,r.jsxs)(f.View,{py:4,row:!0,align:"center",children:[(0,r.jsx)(as.Avatar,{src:(null==(n=u.user)?void 0:n.image)||null,size:24,username:(null==(i=u.user)?void 0:i.username)||"",fullName:(null==(a=u.user)?void 0:a.fullName)||""}),(0,r.jsx)("span",{css:au.displayName,children:c}),(0,r.jsxs)("span",{css:au.formattedText,children:[" "+d," "+l]})]})]})},ag=function(e){var t=e.activityLogItem,n=(0,eT.useIsMobile)(),i=new Date(t.isExpoLaunch&&t.timeCreated?t.timeCreated:t.build.timeCreated),a=Date.now(),o=(0,iy.default)(i,a,{addSuffix:!0});return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)(ah,{activityLogItem:t,formattedTime:o}):(0,r.jsx)(am,{activityLogItem:t,formattedTime:o})})};function av(){var e=(0,ex._)(["\n  fragment ExpoLaunch on ExpoLaunchDetails {\n    id\n    status\n    isFinished\n    startedAt\n    finishedAt\n  }\n"]);return av=function(){return e},e}function ax(){var e=(0,ex._)(["\n  query AppStoreLaunchInfo($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        expoLaunch {\n          ... on ExpoLaunchSession {\n            id\n            hostingBuildId\n            launches {\n              ios {\n                ...ExpoLaunch\n              }\n            }\n          }\n        }\n        expoLaunchHistory(count: 10) {\n          ... on ExpoLaunchHistoryConnection {\n            sessions {\n              id\n              hostingBuildId\n              launches {\n                id\n                platform\n                status\n                finishedAt\n                isFinished\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return ax=function(){return e},e}e.s(["ActivityLogText",()=>ag,"ActivityLogTextBuildPill",()=>ac,"RollbackBuildPill",()=>af],863753);var ay={},ab=(0,ey.gql)(av()),aS=(0,ey.gql)(ax(),ab);function a_(){var e,t,n=(0,tI.default)(),a=(0,nc.useDeploymentCurrentBuild)(),o=(e={variables:{replId:n},fetchPolicy:"cache-and-network",ssr:!1,skip:!n},t=(0,g._)({},ay,e),eb.useQuery(aS,t)).data,s=(0,i.useMemo)(function(){if(!(null==a?void 0:a.id)||!o)return null;var e="Repl"===o.getRepl.__typename?o.getRepl:null;if(!e)return null;var t=(null==(n=e.expoLaunch)?void 0:n.__typename)==="ExpoLaunchSession"?e.expoLaunch:null;if((null==t?void 0:t.hostingBuildId)===a.id){var n,r,i,s=null==(i=t.launches)?void 0:i.ios;if((null==s?void 0:s.status)===tE.ExpoLaunchStatus.Success)return s}if((null==(r=e.expoLaunchHistory)?void 0:r.__typename)==="ExpoLaunchHistoryConnection"){var l=!0,u=!1,c=void 0;try{for(var d,p=e.expoLaunchHistory.sessions[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;if(f.hostingBuildId===a.id){var m=f.launches.find(function(e){return e.platform===tE.ExpoLaunchPlatform.Ios});if((null==m?void 0:m.status)===tE.ExpoLaunchStatus.Success)return m}}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}return null},[null==a?void 0:a.id,o]);if(!s)return null;var l=s.finishedAt;return(0,r.jsx)(oG,{label:"App Store",children:(0,r.jsxs)(f.View,{shrink:!0,row:!0,gap:4,align:"center",children:[(0,r.jsx)(j.Text,{multiline:!1,children:"Published to App Store"}),l?(0,r.jsx)(e4.Timestamp,{date:l,dateFormat:"relative",placement:"right"}):null]})})}function aw(){var e=(0,ex._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return aw=function(){return e},e}var aj={},aT=(0,ey.gql)(aw()),aD=e.i(596139),ak=(0,eU.cssRecord)({deploymentInfoWrapper:[eH.rcss.flex.growAndShrink(1),eH.rcss.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[eH.rcss.flex.growAndShrink(1),eH.rcss.colWithGap(12)]});function aC(){var e,t,n,i=(0,tI.default)(),a=(0,nc.useDeploymentCurrentBuild)(),o=(0,nc.useDeploymentDeployability)().deployability,s=(e={variables:{replId:i}},t=(0,g._)({},aj,e),eb.useQuery(aT,t)).data;if(!a)return null;var l=(null==s?void 0:s.getRepl.__typename)==="Repl"&&(null==(n=s.getRepl.org)?void 0:n.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",u=o.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(l," to resolve."),c="If no action is taken your deployment will be deleted ".concat(tM.UBBFailureGracePeriodDays," days after the date it was suspended. For more assistance reach out to support at ");return a.suspendedReason===tE.HostingBuildSuspendedReason.Ubb?(0,r.jsx)(f.View,{css:ak.deploymentInfoWrapper,children:(0,r.jsx)(f.View,{css:ak.deploymentSuspension,children:(0,r.jsx)(tq.StatusBanner,{icon:(0,r.jsx)(ez.default,{}),text:["Your deployment was suspended due to a billing failure. ".concat(u," ").concat(c),(0,r.jsx)("a",{href:"mailto:support@replit.com",children:(0,r.jsx)("u",{children:"support@replit.com"})},""),"."]})})}):a.suspendedReason===tE.HostingBuildSuspendedReason.SubscriptionRequired?(0,r.jsx)(f.View,{css:ak.deploymentInfoWrapper,children:(0,r.jsx)(f.View,{css:ak.deploymentSuspension,children:(0,r.jsx)(tq.StatusBanner,{icon:(0,r.jsx)(ez.default,{}),text:["Your deployment was suspended due to requiring an active ".concat(aD.corePlanName," membership. ").concat(u," ").concat(c),(0,r.jsx)("a",{href:"mailto:support@replit.com",children:(0,r.jsx)("u",{children:"support@replit.com"})},""),"."]})})}):null}function aE(){var e=(0,ex._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return aE=function(){return e},e}function aA(){var e=(0,ex._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return aA=function(){return e},e}e.s(["DeploymentSuspendedReason",()=>aC],368487);var aI={},aR=(0,ey.gql)(aE()),aP=(0,ey.gql)(aA(),aR),aM=e.i(165550),aO=e.i(222342),aN=e.i(559073);function aL(e){var t,n,a=e.disabled,o=e.onSuccessfulExecution,s=(0,nc.useDeploymentId)(),l=(0,nc.useDeploymentCurrentBuild)(),u=(0,nM.useDeploymentMode)(),c=(0,aO.default)().showError,d=(0,b._)((0,i.useState)(),2),p=d[0],f=d[1],m=function(e){f(e.message),c(e.message)},h=(0,b._)((t={onError:m,onCompleted:function(e){var t=e.executeScheduledJob;if("ExecuteScheduledJobResult"===t.__typename){null==o||o(t.execution);return}m(Error("An error occurred while executing the scheduled job"))}},n=(0,g._)({},aI,t),tg.useMutation(aP,n)),2),v=h[0],x=h[1].loading,y=!!(!s||!l||x||p||void 0!==a&&a),S=(null==l?void 0:l.status)===tE.HostingBuildStatus.Success,_=u===ae.DeploymentMode.Ready,w=!y&&_&&S,j=_?"You must successfully publish your project before being able to run it":"Can't run while published app is ".concat((0,aM.getReadableMode)(u));return(0,r.jsx)(X.Tooltip,{tooltip:j,isDisabled:w,children:(0,r.jsx)(W.Button,{text:"Run now",iconLeft:x?(0,r.jsx)(en.default,{}):(0,r.jsx)(aN.default,{}),size:"small",disabled:y||!w,onClick:function(){s&&!y&&v({variables:{deploymentId:s}})}})})}function aB(){var e=(0,ex._)(["\n  query GetDomainContactForPurchase {\n    getDomainContactForPurchase {\n      hasSavedContact\n      firstName\n      lastName\n      companyName\n      address1\n      address2\n      city\n      state\n      zip\n      country\n      phone\n      email\n    }\n  }\n"]);return aB=function(){return e},e}e.s(["ExecuteScheduledJobButton",()=>aL],791134);var aV={},aU=(0,ey.gql)(aB()),aF=e.i(719335),aH=e.i(604999),aG=e.i(703774);e.i(375581);var az=e.i(169099),aq=e.i(584426);function aW(e){var t=e.initialAddress,n=e.onAddressChange,a=e.onValidationChange,o=(0,b._)((0,i.useState)(!1),2),s=o[0],l=o[1],u=(0,i.useRef)("");(0,i.useEffect)(function(){var e=JSON.stringify(t);u.current!==e&&(u.current=e,n(t))},[t,n]);var c=(0,i.useCallback)(function(e){var t=e.value.address,r=e.value.name,i=e.value.phone;a&&a(e.complete);var o="",s="";if(r&&(void 0===r?"undefined":(0,iL._)(r))==="object")o=r.first_name||"",s=r.last_name||"";else if("string"==typeof r){var l=r.trim().split(/\s+/);l.length>1?(o=l[0],s=l.slice(1).join(" ")):o=r}var u=(null==t?void 0:t.state)||"",c=(null==t?void 0:t.postal_code)||"",d=(null==t?void 0:t.city)||"",p=u,f=c,m=d;e.complete&&(u.trim()||(p="N/A"),c.trim()||(f="00000"),d.trim()||(m="N/A")),n({firstName:o,lastName:s,address1:(null==t?void 0:t.line1)||"",address2:(null==t?void 0:t.line2)||"",city:m,state:p,zip:f,country:(null==t?void 0:t.country)||"",phone:i||""})},[n,a]),d=(0,i.useMemo)(function(){return{mode:"billing",fields:{phone:"always"},validation:{phone:{required:"always"}},defaultValues:{firstName:t.firstName,lastName:t.lastName,phone:t.phone,address:{line1:t.address1,line2:t.address2,city:t.city,state:t.state,postal_code:t.zip,country:t.country}},display:{name:"split"}}},[t]);return s?(0,r.jsxs)(j.Text,{children:["Something went wrong loading the address form. Please contact us at"," ",(0,r.jsx)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"."]}):(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsx)(f.View,{style:{display:"none"},children:(0,r.jsx)(aF.PaymentElement,{})}),(0,r.jsx)(aF.AddressElement,{onLoadError:function(){return l(!0)},options:d,onChange:c})]})}function aK(e){var t=(0,aG.useTheme)().isDarkColorScheme,n=t?az.replitDark:aq.replitLight,i={theme:t?"night":"stripe",variables:{colorPrimary:n.values.global.foregroundDefault,colorBackground:n.values.global.backgroundHigher,colorText:n.values.global.foregroundDefault,colorTextPlaceholder:n.values.global.foregroundDimmest,focusOutline:"2px solid ".concat(n.values.global.accentPrimaryDefault),colorDanger:n.values.global.accentNegativeDefault,colorDangerText:n.values.global.accentNegativeDefault,fontFamily:"'IBM Plex Sans', sans-serif",spacingUnit:"0px",fontSizeBase:S.values.fontSizeDefault,focusBoxShadow:"0",borderRadius:S.values.space4,gridRowSpacing:S.values.space8},rules:{".Input":{boxShadow:"0px",fontSize:S.values.fontSizeDefault,lineHeight:S.values.lineHeightDefault,padding:"".concat(S.values.space4," ").concat(S.values.space8),outlineOffset:eH.sharedFocusStyles.outlineOffset},".Label":{paddingBottom:S.values.space4,marginBottom:"0px",fontSize:S.values.fontSizeSmall,lineHeight:S.values.lineHeightSmall},".Block":{boxShadow:"0px"},".DropdownItem":{boxShadow:"0px"}}};return(0,r.jsx)(f.View,{children:(0,r.jsx)(aH.default,{options:{appearance:i,mode:"setup",currency:"usd",payment_method_types:["card"]},children:(0,r.jsx)(aW,(0,g._)({},e))})})}var a$=e.i(939562),aY=e.i(887877),aX=e.i(795581),aQ=e.i(352767),aJ=(0,eU.cssRecord)({scrollArea:[{overflowY:"auto",minHeight:0,maxHeight:"100%"}],primaryActionButton:[eH.rcss.py(12),{fontSize:S.tokens.fontSizeDefault}],root:[eH.rcss.overflow("hidden")],relativeContainer:[{position:"relative",minHeight:0,maxHeight:"100%"}]});function aZ(e){var t,n,a,o=e.selectedDomain,s=e.onSubmit,l=e.onBack,u=e.isSubmitting,c=e.preservedContactInfo,d=(t={fetchPolicy:"network-only",skip:!!c,ssr:!1},n=(0,g._)({},aV,t),eb.useQuery(aU,n)),p=d.data,m=d.loading,h=(0,b._)((0,i.useState)({firstName:"",lastName:"",companyName:"",address1:"",address2:"",city:"",state:"",zip:"",country:"US",phone:"",email:""}),2),x=h[0],y=h[1],S=(0,b._)((0,i.useState)(!1),2),_=S[0],T=S[1],D=(0,b._)((0,i.useState)(!1),2),k=D[0],C=D[1];(0,i.useEffect)(function(){if(c)y(c);else if(null==p?void 0:p.getDomainContactForPurchase){var e=p.getDomainContactForPurchase;y({firstName:e.firstName,lastName:e.lastName,companyName:e.companyName||"",address1:e.address1,address2:e.address2||"",city:e.city,state:e.state,zip:e.zip,country:e.country,phone:e.phone,email:e.email})}},[p,c]);var E=function(){I&&s(x)},A=(0,i.useCallback)(function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},[]),I=_&&k,R=(0,i.useCallback)(function(e){y(function(t){return(0,g._)({},t,e)})},[]),P=(0,i.useMemo)(function(){return{firstName:x.firstName||"",lastName:x.lastName||"",address1:x.address1||"",address2:x.address2||"",city:x.city||"",state:x.state||"",zip:x.zip||"",country:x.country||"US",phone:x.phone||""}},[x.firstName,x.lastName,x.address1,x.address2,x.city,x.state,x.zip,x.country,x.phone]);return((0,i.useEffect)(function(){x.email&&C(A(x.email))},[x.email,A]),m)?(0,r.jsxs)(f.View,{align:"center",p:8,children:[(0,r.jsx)(en.default,{size:16}),(0,r.jsx)(j.Text,{children:"Loading your information..."})]}):(0,r.jsxs)(f.View,{p:8,gap:16,css:aJ.root,shrink:!0,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(nQ.IconButton,{alt:"Go back",onClick:l,children:(0,r.jsx)(aQ.default,{})}),(0,r.jsx)(j.Header,{level:2,children:"Domain registration contact"}),(0,r.jsx)(eG.Pill,{colorway:"primary",text:"Beta"})]}),(0,r.jsx)(f.View,{css:aJ.relativeContainer,shrink:!0,children:(0,r.jsxs)(f.View,{css:aJ.scrollArea,gap:16,children:[(0,r.jsx)(f.View,{gap:8,children:(0,r.jsx)(j.Text,{color:"dimmer",children:"This information will be used for WHOIS records and domain registration. You can edit any field below."})}),(0,r.jsxs)(aY.Form,{onSubmit:function(e){e.preventDefault(),E()},children:[(0,r.jsx)(w.Surface,{p:16,children:(0,r.jsxs)(f.View,{gap:12,children:[(0,r.jsxs)(aX.TextField,{name:"companyName",children:[(0,r.jsx)($.Label,{children:"Company name (optional)"}),(0,r.jsx)(nr.Input,{value:null!=(a=x.companyName)?a:"",onChange:function(e){return y((0,v._)((0,g._)({},x),{companyName:e.target.value}))},disabled:u})]}),(0,r.jsx)(aK,{initialAddress:P,onAddressChange:R,onValidationChange:T}),(0,r.jsxs)(aX.TextField,{isRequired:!0,name:"email",type:"email",children:[(0,r.jsx)($.Label,{children:"Email"}),(0,r.jsx)(nr.Input,{value:x.email,onChange:function(e){var t=e.target.value;y((0,v._)((0,g._)({},x),{email:t})),C(A(t))},disabled:u}),(0,r.jsx)(a$.FieldError,{})]})]})}),(0,r.jsx)(f.View,{justify:"center",children:(0,r.jsx)(W.Button,{variant:"default",colorway:"positive",type:"submit",loading:u,text:"Continue with ".concat(o.domainName),disabled:!I||u,css:aJ.primaryActionButton})})]})]})})]})}e.s(["ContactStep",()=>aZ],793203);var a0=e.i(739521);function a1(e){var t=e.isOpen,n=e.selectedDomain,i=e.onSubmit,a=e.onClose,o=e.isSubmitting;return(0,r.jsx)(a0.Modal,{isOpen:t,onRequestClose:a,children:(0,r.jsx)(aZ,{selectedDomain:n,onSubmit:i,onBack:a,isSubmitting:o,preservedContactInfo:null})})}function a2(){var e=(0,ex._)(["\n  query SearchForDomain($input: SearchDomainsInput!) {\n    searchDomains(input: $input) {\n      ... on DomainSearchOutput {\n        results {\n          domainName\n          sld\n          tld\n          purchasable\n          premium\n          purchasePrice\n          purchaseType\n          renewalPrice\n          years\n        }\n      }\n    }\n  }\n"]);return a2=function(){return e},e}e.s(["DomainContactModal",()=>a1],295745);var a4={},a8=(0,ey.gql)(a2());function a6(e){var t=(0,g._)({},a4,e);return eb.useQuery(a8,t)}e.s(["useSearchForDomainQuery",()=>a6],341734);var a3=e.i(162914),a5=e.i(187505);function a9(e){return null==e?"N/A":"$".concat(e.toFixed(2))}function a7(e,t){switch(t.type){case"select_domain":return{step:"contact",selectedDomain:t.payload,contactInfo:null};case"contact_submitted":if(null==e.selectedDomain)throw Error("Selected domain is null");return{step:"confirm",selectedDomain:e.selectedDomain,contactInfo:t.payload,purchaseErrorMessage:null};case"edit_contact":if("confirm"!==e.step)break;return{step:"contact",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo};case"purchase_failed":if(null==e.selectedDomain||"confirm"!==e.step)throw Error("Invalid state for purchase failure");return{step:"confirm",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo,purchaseErrorMessage:t.payload};case"search":return{step:"search",selectedDomain:null,contactInfo:null};case"processing":if(null==e.selectedDomain||"confirm"!==e.step)throw Error("Invalid state for processing");return{step:"processing",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo}}return e}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"search",selectedDomain:null,contactInfo:null},t=(0,b._)((0,i.useReducer)(a7,e),2);return{state:t[0],dispatch:t[1]}}e.s(["formatPrice",()=>a9,"useDomainState",()=>oe],828454);var ot=e.i(85742),on=e.i(698043),or=e.i(498540),oi=e.i(503536),oa=e.i(431601),oo=e.i(792130),os=(0,eU.cssRecord)({scrollArea:[eH.rcss.maxHeight(350),{display:"flex",flexDirection:"column",overflowY:"auto",paddingBottom:8}],domainResult:[eH.rcss.borderRadius(8),eH.rcss.border({color:S.tokens.outlineDimmer}),eH.rcss.hover([eH.rcss.border({color:S.tokens.outlineDefault}),eH.rcss.backgroundColor.accentPrimaryDimmest]),eH.rcss.mb(8),{flexShrink:0}],noResults:[eH.rcss.borderRadius(8),eH.rcss.border({color:S.tokens.outlineDimmer}),eH.rcss.mb(8)]});function ol(e){var t,n,a,o,s,l,u,c=e.onClaimAndPublish,d=e.disabled,p=void 0!==d&&d,m=e.isPublishing,h=void 0!==m&&m,g=e.isRepublish,v=void 0!==g&&g,x=(0,b._)((0,i.useState)(null),2),y=x[0],_=x[1],w=(0,b._)((0,i.useState)(!0),2),T=w[0],D=w[1],k=(0,a5.useTrackClick)().trackClick,C=(n=(t=(0,b._)((0,i.useState)(""),2))[0],a=t[1],l=(s=a6({variables:{input:{keyword:o=(0,a3.default)(n,500)}},skip:!o})).data,u=s.loading,{searchTerm:n,setSearchTerm:a,qualifyingDomains:((null==l?void 0:l.searchDomains)&&"DomainSearchOutput"===l.searchDomains.__typename?l.searchDomains.results.filter(function(e){return null!=e}):[]).filter(function(e){return null!=e.purchasePrice&&e.purchasePrice<=nu.FREE_DOMAIN_PRICE_CAP_DOLLARS&&!0===e.purchasable}),debouncedSearchTerm:o,loading:u||n!==o}),E=C.searchTerm,A=C.setSearchTerm,I=C.qualifyingDomains,R=C.debouncedSearchTerm,P=C.loading;(0,i.useEffect)(function(){y&&E!==y.domainName&&(_(null),D(!0))},[E,y]);var M=E.length>0,O=y?v?"Claim and republish":"Claim and publish":v?"Republish":"Publish";return(0,r.jsxs)(f.View,{clsx:oo.default.container,children:[(0,r.jsx)(f.View,{clsx:oo.default.header,children:(0,r.jsxs)(j.Text,{variant:"small",clsx:oo.default.headerText,children:["Claim your free domain up to $",nu.FREE_DOMAIN_PRICE_CAP_DOLLARS]})}),(0,r.jsx)(f.View,{clsx:oo.default.content,children:(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(nq.default,{size:16}),(0,r.jsx)(j.Text,{variant:"small",children:"Search for a domain"})]}),(0,r.jsxs)(on.SearchableListBox,{children:[(0,r.jsx)(or.SearchField,{placeholder:"Search for a domain...",value:E,onChange:function(e){return A(e)},isDisabled:p||h}),T&&M?(0,r.jsx)(ot.ListBox,{css:os.scrollArea,onAction:function(e){var t=I.find(function(t){return t.domainName===e});t&&(_(t),A(t.domainName),D(!1))},items:I,isLoading:P,renderEmptyState:function(){return P?null:(0,r.jsx)(f.View,{css:os.noResults,align:"center",justify:"center",p:16,children:(0,r.jsxs)(j.Text,{color:"dimmer",children:['No qualifying domains found for "',R,'"']})})},disabledKeys:p||h?I.map(function(e){return e.domainName}):[],children:function(e){return(0,r.jsxs)(ot.BaseListBoxItem,{textValue:"".concat(e.domainName," - ").concat(e.purchasable?"available":"unavailable"," ").concat(e.years>1?"".concat(a9(e.purchasePrice)," for ").concat(e.years," years"):a9(e.purchasePrice)),id:e.domainName,css:os.domainResult,children:[(0,r.jsxs)(f.View,{gap:4,grow:!0,children:[(0,r.jsxs)(f.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(j.Text,{children:e.domainName}),e.purchasable?(0,r.jsx)(f.View,{row:!0,gap:2,align:"center",children:(0,r.jsx)(J.default,{size:12,color:S.tokens.accentPositiveDefault})}):null,e.premium?(0,r.jsx)(oa.default,{size:12,color:S.tokens.accentPrimaryDefault}):null]}),null!=e.renewalPrice&&(0,r.jsx)(j.Text,{variant:"small",color:"dimmer",children:e.years>1?(0,r.jsx)(X.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(e.years," years for the displayed price."),children:(0,r.jsxs)("span",{children:["Renews at ",a9(e.renewalPrice)," ","every ",e.years," years"]})}):(0,r.jsxs)(r.Fragment,{children:["Renews at ",a9(e.renewalPrice),"/yr"]})})]}),(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(j.Text,{clsx:oo.default.strikethroughPrice,children:e.years>1?(0,r.jsx)(X.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(e.years," years up front."),children:(0,r.jsxs)("span",{children:[a9(e.purchasePrice)," for"," ",e.years," years"]})}):a9(e.purchasePrice)}),(0,r.jsx)(j.Text,{clsx:oo.default.freeText,children:"Free"})]})]},e.domainName)}}):null]}),y?(0,r.jsxs)(f.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(J.default,{color:S.tokens.accentPositiveDefault}),(0,r.jsx)(j.Text,{style:{color:S.tokens.accentPositiveStrongest},multiline:!1,children:v?"Republish your App to complete domain setup":"Publish your App to complete domain setup"})]}):null]})}),(0,r.jsx)(f.View,{clsx:oo.default.buttonContainer,children:(0,r.jsx)(W.Button,{colorway:"primary",onClick:function(){y?k({productArea:"publishing",target:v?"claim_and_republish_button":"claim_and_publish_button"}):k({productArea:"publishing",target:v?"republish_button":"publish_button"}),c(y)},text:O,iconLeft:(0,r.jsx)(oi.default,{}),disabled:p||h,loading:h,clsx:oo.default.button})})]})}e.s(["FreeDomainClaimSection",()=>ol],870078);var ou=e.i(79271);function oc(e){var t=e.withBorder;return(0,r.jsx)(w.Surface,{p:16,clsx:[ou.default.container,void 0!==t&&t&&ou.default.withBorder],children:(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(nq.default,{size:16}),(0,r.jsx)(j.Text,{clsx:ou.default.header,children:"For a limited time, get a free domain when you upgrade."})]}),(0,r.jsx)(j.Text,{children:"Upgrade and get a free domain for your App! Plus persistent publishing, backend support, powerful models, and more."})]})})}function od(e,t){switch(t.type){case"select_domain":return{step:"domain_selected",selectedDomain:t.payload,contactInfo:null};case"submit_contact":if("domain_selected"!==e.step||null==e.selectedDomain)return e;return{step:"contact_submitted",selectedDomain:e.selectedDomain,contactInfo:t.payload};case"start_deployment":if("contact_submitted"!==e.step||null==e.selectedDomain||null==e.contactInfo)return console.error("Invalid state for deployment start",e),e;return{step:"deploying",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo};case"reset":return{step:"idle",selectedDomain:null,contactInfo:null};default:return e}}function op(){var e=(0,ex._)(["\n  query HasFreeDomainCredit {\n    currentUser {\n      id\n      hasFreeDomainCredit\n      isSubscribed\n    }\n  }\n"]);return op=function(){return e},e}e.s(["FreeDomainUpsellInfoBox",()=>oc],591069);var of={},om=(0,ey.gql)(op()),oh=e.i(76430);function og(e){var t,n,r,a=e.hasFreeDomainsFlagEnabled,o=e.isAzureDeployment,s=e.isOrgRepl,l=e.isDeployable,u=void 0===l||l,c=(0,ao.useValue)(nc.hideFreeDomainClaimSectionAtom),d=(0,ao.useSet)(nc.hideFreeDomainClaimSectionAtom),p=(0,ao.useSet)(nc.claimedFreeDomainAtom),f=(0,oh.useIsExpoStackWithLaunchEnabled)(),m=(0,nc.useFreeTierCloudServices)(),h=(t={fetchPolicy:"cache-and-network",ssr:!1},n=(0,g._)({},of,t),eb.useQuery(om,n)),v=h.data,x=h.loading,y=h.refetch,b=(0,i.useMemo)(function(){if(!a||o||s||f||x)return null;var e,t,n=null!=(t=null==v||null==(e=v.currentUser)?void 0:e.hasFreeDomainCredit)&&t;return m||!n||c?!m||n||u?null:"upsell":"claim"},[a,o,s,f,x,null==v||null==(r=v.currentUser)?void 0:r.hasFreeDomainCredit,m,u,c]);return{freeDomainData:v,freeDomainLoading:x,freeDomainSectionToShow:b,refetchFreeDomainCredit:y,hideClaimSection:function(e){d(!0),e&&p(e)}}}e.s(["useFreeDomainSection",()=>og],57354);var ov=e.i(754458),ox=e.i(610357),oy=e.i(51606),ob=e.i(530310),oS=e.i(26995),o_=(0,eU.cssRecord)({qrCodeWrapper:[eH.rcss.borderRadius(4),{backgroundColor:"white"}]}),ow=function(e){var t=e.currentBuild,n=e.optimisticDomain,a=(0,aO.default)().showConfirm,o=tN(),s=o.getInternalDomain,l=o.isShowingFallback,u=o.fallbackDomain,c=(0,ao.useSet)(nc.claimedFreeDomainAtom),d=(0,b._)((0,i.useState)([]),2),p=d[0],m=d[1];return(0,i.useEffect)(function(){var e=(null==(a=t.repl.hostingDeployment)?void 0:a.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,r=[],i=t.provider;switch(i){case tE.HostingBuildProvider.Gce:case tE.HostingBuildProvider.AzureVm:case tE.HostingBuildProvider.CloudRun:case tE.HostingBuildProvider.AzureContainerApp:case tE.HostingBuildProvider.Static:var a,o,l,u,d=(null==(o=t.repl.hostingDeployment)?void 0:o.__typename)==="HostingDeployment"?null==(l=t.repl.hostingDeployment)?void 0:l.replitAppSubdomain:void 0;!d&&(null==(u=t.repl.owner)?void 0:u.username)&&(d="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat(s({provider:i})),private:!1});break;case tE.HostingBuildProvider.Extension:case tE.HostingBuildProvider.Cron:break;default:(0,te.default)(i)}if(t.repl.domains){var p=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),f=!0,h=!1,g=void 0;try{for(var v,x=p[Symbol.iterator]();!(f=(v=x.next()).done);f=!0){var y=v.value;y&&r.push({href:"https://".concat(y.domain),private:!1,state:"verified"!==y.state?y.state:void 0})}}catch(e){h=!0,g=e}finally{try{f||null==x.return||x.return()}finally{if(h)throw g}}}if(n){var b="https://".concat(n),S=r.some(function(e){return e.href===b});S?S&&c(null):r.push({href:b,private:!1,state:"pending"})}m(r)},[t,s,n,c]),(0,r.jsxs)(f.View,{gap:2,grow:!0,shrink:!0,children:[l?(0,r.jsx)(tq.StatusBanner,{colorway:"warning",text:"The ".concat(tM.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(u," URL below.")}):null,p.map(function(e,t){return(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(j.Text,{css:[eH.rcss.flex.shrink(1)],multiline:!1,children:(0,r.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",css:[eH.rcss.color.foregroundDefault,{textDecoration:"none","&:hover":{textDecoration:"underline"}}],children:e.href})}),e.private?(0,r.jsx)(ob.default,{color:S.tokens.foregroundDefault}):null,(0,r.jsx)(nQ.IconButton,{alt:"Copy URL",onClick:function(){return(0,e5._)(function(){return(0,e9._)(this,function(t){switch(t.label){case 0:return[4,(0,ox.default)(e.href)];case 1:return t.sent(),a("Domain URL copied to clipboard!"),[2]}})})()},children:(0,r.jsx)(oy.default,{})}),(0,r.jsx)(oj,{url:e.href}),e.state?(0,r.jsxs)(j.Text,{multiline:!1,children:["(","pushed_to_goval"===e.state||"temporal_verification"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(t))})]})};function oj(e){var t=e.url,n=(0,b._)((0,i.useState)(!1),2),a=n[0],o=n[1];return(0,r.jsxs)(eE.PopoverTrigger,{isOpen:a,onOpenChange:function(e){return o(e)},label:"QR Code",children:[(0,r.jsx)(nQ.IconButton,{alt:"QR Code",children:(0,r.jsx)(oS.default,{})}),(0,r.jsx)(f.View,{align:"start",children:(0,r.jsx)(f.View,{css:o_.qrCodeWrapper,p:8,children:(0,r.jsx)(ov.default,{size:128,value:t})})})]})}var oT=e.i(315315),oD=e.i(806804),ok=e.i(418725),oC=e.i(492267),oE=e.i(199674),oA=e.i(546284),oI=e.i(443394),oR=e.i(867559);function oP(e){switch(e){case"neon":return{productName:"production database",upgradeReason:"persist your production data long term",modalHeading:"Upgrade to keep your database",modalSubHeading:"Get a permanent PostgreSQL database with Replit ".concat(aD.corePlanName)};case"deployment":return{productName:"published app",upgradeReason:"keep your published app running",modalHeading:"Upgrade to keep your published app",modalSubHeading:"Keep your app running 24/7 with Replit ".concat(aD.corePlanName)};case"object_storage":return{productName:"object storage",upgradeReason:"store your files permanently",modalHeading:"Upgrade for permanent file storage",modalSubHeading:"Store your files permanently with Replit ".concat(aD.corePlanName)};default:(0,te.default)(e)}}function oM(e){var t=e.product,n=e.suspendedReason,i=e.scheduledSuspensionTime,a=e.scheduledDeletionTime,o=(0,oI.getCurrentUrl)();if(void 0===a)return null;var s=new Date,l=function(e){var t=e.product,n=e.suspendedReason,r=e.daysTillScheduledSuspension,i=e.daysTillScheduledDeletion,a=oP(t),o=a.productName,s=a.upgradeReason,l=(0,oA.default)("day",i);if(n===tE.HostingBuildSuspendedReason.FreeTierCloudBudgetExceeded||n===tE.NeonDatabaseFrozenReason.FreeTierCloudBudgetExceeded||n===tE.ObjectStorageSuspendedReason.FreeTierCloudBudgetExceeded)return"Your ".concat(o," has been suspended and will expire in ").concat(i," ").concat(l," because you've used up your free Cloud credits. To unsuspend, upgrade to ").concat(aD.corePlanName,".");if(null!=n)return"Your ".concat(o," has been suspended and will expire in ").concat(i," ").concat(l,". Upgrade to ").concat(aD.corePlanName," to unsuspend.");if(void 0!==r){var u=(0,oA.default)("day",r);return"Your ".concat(o," will be suspended in ").concat(r," ").concat(u," and expire in ").concat(i," ").concat(l,". Upgrade to ").concat(s,".")}return"Your ".concat(o," will expire in ").concat(i," ").concat(l,". Upgrade to ").concat(s,".")}({product:t,suspendedReason:n,daysTillScheduledSuspension:i?Math.max(0,(0,oE.differenceInDays)(new Date(i),s)):void 0,daysTillScheduledDeletion:Math.max(0,(0,oE.differenceInDays)(new Date(a),s))}),u=oP(t),c=u.modalHeading,d=u.modalSubHeading;return(0,r.jsxs)(w.Surface,{gap:12,p:12,row:!0,elevated:!0,className:oR.default.self,align:"center",justify:"space-between",wrap:"wrap",children:[(0,r.jsx)(f.View,{className:oR.default.text,children:(0,r.jsx)(j.Text,{children:l})}),(0,r.jsx)(ok.default,{context:"workspace_free_tier_upsell_banner_".concat(t),text:"Upgrade to ".concat(aD.corePlanName),variant:"default",colorway:"primary",redirectPath:o,modalHeadingText:c,modalSubHeadingText:d})]})}e.s(["FreeTierUpsellBanner",()=>oM],452831);var oO=e.i(293265),oN=e.i(967629),oL=e.i(952030),oB=(0,oN.keyframes)("\n    50% {\n      background-color: ".concat(S.tokens.accentPositiveDimmest,";\n      outline: 1px solid ").concat(S.tokens.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),oV=(0,eU.cssRecord)({deploymentInfo:[eH.rcss.colWithGap(8),eH.rcss.p(16),eH.rcss.borderRadius(),{outline:"1px solid transparent"}]}),oU=(0,eU.cssRecord)({textButton:[eH.rcss.reset.button,eH.rcss.color.foregroundDimmest,eH.rcss.hover(eH.rcss.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[eH.rcss.cursor.pointer,eH.rcss.color.accentPrimaryStronger,eH.rcss.focusRing]}],textLink:eH.rcss.hover(eH.rcss.color.accentPrimaryStrongest),labeledSection:[eH.rcss.flex.growAndShrink(1),(0,I._)({},eH.container.min(400),[eH.rcss.flex.row,eH.rcss.align.baseline])],labeledSectionFullWidth:[eH.rcss.flex.growAndShrink(1),(0,I._)({},eH.container.min(400),[eH.rcss.flex.row,eH.rcss.align.baseline,eH.rcss.flex.grow(1),eH.rcss.justify.spaceBetween])],deploymentInfo:oV.deploymentInfo,deploymentInfoAnimate:[oV.deploymentInfo,{animation:"".concat(oB," 700ms ease-out")}],deploymentInfoTitle:[eH.rcss.flex.wrap,eH.rcss.flex.shrink(0),eH.rcss.justify.spaceBetween],deploymentInfoContent:[(0,I._)({},eH.container.min(400),eH.rcss.colWithGap(4))],typeColumn:[eH.rcss.flex.wrap,eH.rcss.flex.shrink(1)]}),oF=function(e){var t=e.text,n=e.onClick,i=e.disabled;return(0,r.jsx)("button",{css:oU.textButton,onClick:n,disabled:void 0!==i&&i,children:t})},oH=function(e){var t=e.name,n=e.isAzure,i=e.sku,a=e.canManage,o=e.usageLink,s=e.onManageClick;return(0,r.jsxs)(f.View,{css:oU.typeColumn,row:!0,gap:6,children:[(0,r.jsx)(j.Text,{multiline:!1,children:t}),i?(0,r.jsxs)(j.Text,{color:"dimmest",multiline:!1,children:["(",void 0!==n&&n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ng,{style:{position:"relative",top:"2px"}})," -"," "]}):null,i,")"]}):null,"function"==typeof s?(0,r.jsx)(oF,{text:"Manage",onClick:s,disabled:!a}):null,o?(0,r.jsx)(rT.default,{href:"/usage",css:oU.textLink,children:(0,r.jsx)(j.Text,{children:"See all usage"})}):null]})},oG=function(e){var t=e.label,n=e.children,i=e.fullWidth;return(0,r.jsxs)(f.View,{css:i?oU.labeledSectionFullWidth:oU.labeledSection,children:[(0,r.jsx)(f.View,{css:eH.rcss.minWidth(100),children:(0,r.jsx)(j.Text,{color:"dimmer",multiline:!1,children:t})}),n]})},oz=function(e){var t=e.provider,n=e.machine,a=e.onViewBuildLogs,o=e.onManageClick,s=e.onViewAction,l=(0,nM.useDeploymentMode)(),u=(0,nc.useDeploymentCurrentBuild)(),c=(0,nc.useDeploymentInProgressBuild)(),d=(0,nR.useNeonProductionDatabase)().database,p=(0,nc.useDeployBuild)().redeployWithNoNewOptions,m=(0,nc.useSetDeploymentTriggerSource)(),h=(0,nc.useFreeTierCloudServices)(),g=(0,nc.useDeploymentScheduledDeletionTime)(),v=(0,ao.useValue)(nc.claimedFreeDomainAtom),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"idle",selectedDomain:null,contactInfo:null},t=(0,b._)((0,i.useReducer)(od,e),2);return{state:t[0],dispatch:t[1]}}(),y=x.state,_=x.dispatch,T=(0,i.useRef)(null),D="domain_selected"===y.step||"contact_submitted"===y.step,C=void 0!==u,E=t!==tE.HostingBuildProvider.Static&&C&&null===u.hasImageTag,A=t===tE.HostingBuildProvider.AzureContainerApp||t===tE.HostingBuildProvider.AzureVm,I=!!((l===ae.DeploymentMode.Ready||l===ae.DeploymentMode.Suspended)&&!E&&!A&&!h),R=!!(null==u||null==(el=u.repl)||null==(es=el.org)?void 0:es.id),P=(0,tI.default)(),M=(0,oC.useIsAgentStackRepl)().isAgentStackRepl,O=(0,oO.useAgentStackPlatformType)().agentStackPlatformType,N=iv({variables:{replId:P,provider:null!=t?t:tE.HostingBuildProvider.CloudRun},skip:!t}).data,L=((null==N||null==(eu=N.getRepl)?void 0:eu.__typename)==="Repl"?N.getRepl.authorizations:{addCustomDomain:{isAuthorized:!1}}).addCustomDomain.isAuthorized,B=(0,tt.useFlag)({controlName:"flag-free-domains",default:!1}),V=l===ae.DeploymentMode.Deploying||l===ae.DeploymentMode.Preparing||!!c,U=og({hasFreeDomainsFlagEnabled:B,isAzureDeployment:A,isOrgRepl:R,isDeployable:!1}),F=U.freeDomainSectionToShow,H=U.refetchFreeDomainCredit,G=U.hideClaimSection,z=(0,i.useCallback)(function(e){return(0,e5._)(function(){return(0,e9._)(this,function(t){switch(t.label){case 0:if(!e)return[3,1];return _({type:"select_domain",payload:e}),[3,3];case 1:return m("deployments_pane_republish_button"),[4,p({hasAgentSession:!1})];case 2:t.sent(),t.label=3;case 3:return[2]}})})()},[_,m,p]),q=(0,i.useCallback)(function(e){return(0,e5._)(function(){return(0,e9._)(this,function(t){switch(t.label){case 0:if(_({type:"submit_contact",payload:e}),m("deployments_pane_claim_and_republish_button"),!("domain_selected"===y.step&&y.selectedDomain))return[3,2];return T.current=y.selectedDomain.domainName,_({type:"start_deployment"}),[4,p({hasAgentSession:!1,purchaseDomain:nL(y.selectedDomain,e,!0)})];case 1:t.sent(),_({type:"reset"}),t.label=2;case 2:return[2]}})})()},[y,_,m,p]),K=null,$=null,Y=null,X=null,Q=null,J=(0,i.useRef)(void 0);(0,i.useEffect)(function(){c&&(J.current=null==c?void 0:c.id)},[c,null==c?void 0:c.id]);var Z=(null==u?void 0:u.status)===tE.HostingBuildStatus.Success,ee=(null==u?void 0:u.id)===J.current,et=Z&&ee;(0,i.useEffect)(function(){et&&T.current&&!V&&(G(T.current),T.current=null)},[et,G,V]);var en=!!((null==u?void 0:u.provider)!==tE.HostingBuildProvider.Cron&&!M),er=function(){switch(O){case tE.AgentStackPlatformType.Slack:return"Slack";case tE.AgentStackPlatformType.Telegram:return"Telegram";case tE.AgentStackPlatformType.TimeBased:return"Time-based Automation"}}(),ei=M&&er,ea=!!g,eo=g?(0,oT.formatDate)(g):null;switch(u&&($=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(oG,{label:"Status",children:(0,r.jsx)(f.View,{shrink:!0,row:!0,gap:4,align:"center",children:(0,r.jsx)(ai,{onClick:function(){a(u)}})})}),M?null:(0,r.jsx)(oG,{label:"Visibility",children:(0,r.jsx)(f.View,{shrink:!0,row:!0,gap:4,align:"center",children:u.isPrivate?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ob.default,{color:S.tokens.foregroundDefault}),(0,r.jsx)(j.Text,{multiline:!1,children:"Private"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nz.default,{color:S.tokens.foregroundDefault}),(0,r.jsx)(j.Text,{multiline:!1,children:"Public"})]})})}),(0,r.jsx)(a_,{}),en?(0,r.jsx)(oG,{label:"Domain",children:(0,r.jsxs)(f.View,{shrink:!0,gap:8,children:[(0,r.jsx)(ow,{currentBuild:u,optimisticDomain:v||void 0}),A||R||!L?null:(0,r.jsx)("div",{children:(0,r.jsx)(W.Button,{variant:"outlined",text:"Buy a new domain",iconLeft:(0,r.jsx)(oL.default,{}),size:"small",iconRight:(0,r.jsx)(eG.Pill,{compact:!0,colorway:"primary",text:"Beta"}),onClick:function(){s({type:nn.ViewActionType.ChangeView,payload:{view:nn.Views.Domains,data:{buyDomain:!0}}})}})})]})}):null,ei?(0,r.jsx)(oG,{label:"Platform",children:(0,r.jsx)(j.Text,{multiline:!1,children:er})}):null]})),t){case tE.HostingBuildProvider.AzureVm:case tE.HostingBuildProvider.Gce:Y=(0,r.jsx)(oG,{label:"Type",fullWidth:!C,children:(0,r.jsx)(oH,{name:aa[t],sku:null==n?void 0:n.configurationLabel,canManage:I,isAzure:t===tE.HostingBuildProvider.AzureVm,onManageClick:A?void 0:o})});break;case tE.HostingBuildProvider.AzureContainerApp:case tE.HostingBuildProvider.CloudRun:Y=(0,r.jsx)(oG,{label:"Type",fullWidth:!C,children:(0,r.jsx)(oH,{name:aa[t],isAzure:t===tE.HostingBuildProvider.AzureContainerApp,sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:I,usageLink:!0,onManageClick:A?void 0:o})});break;case tE.HostingBuildProvider.Static:Y=(0,r.jsx)(oG,{label:"Type",fullWidth:!C,children:(0,r.jsx)(oH,{name:aa[t],sku:void 0,canManage:I&&C,onManageClick:o})});break;case tE.HostingBuildProvider.Cron:if(!(null==u||null==(ec=u.machineJob)?void 0:ec.timezone))break;var es,el,eu,ec,ed,ep,ef=null==u||null==(ed=u.machineJob)?void 0:ed.timezone,em=re.validSchedulerTimezones.find(function(e){return e.utc.includes(ef)}),eh=(null==em?void 0:em.abbr)||ef;Y=(0,r.jsx)(oG,{label:"Type",fullWidth:!C,children:(0,r.jsx)(oH,{name:aa[t],sku:"".concat(eh,", ").concat(null==u||null==(ep=u.machineJob)?void 0:ep.crontab),canManage:!1})}),K=(0,r.jsx)(aL,{onSuccessfulExecution:function(){s({type:nn.ViewActionType.ChangeView,payload:{view:nn.Views.Schedule}})}});break;case tE.HostingBuildProvider.Extension:case void 0:break;default:(0,te.default)(t)}var eg=(0,oD.default)("workspace","workspace-deployment-pane-production-database-banner"),ev=eg.shouldDisplay,ex=eg.register,ey=eg.dismiss;if((0,i.useEffect)(function(){d&&ex()},[d,ex]),d){var eb=ev&&d;X=(0,r.jsx)(oG,{label:"Database",children:(0,r.jsxs)(f.View,{shrink:!0,gap:8,children:[(0,r.jsxs)(f.View,{shrink:!0,row:!0,gap:8,align:"center",wrap:!0,children:[(0,r.jsx)(j.Text,{multiline:!1,children:"Production database connected"}),(0,r.jsx)(oF,{text:"Manage",onClick:function(){return s({type:nn.ViewActionType.OpenPane,payload:{type:"neon",data:{openAtDatabase:{databaseId:d.databaseId}}}})}})]}),eb?(0,r.jsx)(tq.StatusBanner,{colorway:"primary",text:(0,r.jsxs)(f.View,{shrink:!0,row:!0,gap:4,align:"center",children:["Your production database is ready! Your app can now save and manage live user data securely.",(0,r.jsx)(nQ.IconButton,{alt:"Dismiss",onClick:ey,children:(0,r.jsx)(eI.default,{})})]})}):null]})})}return(E&&(Q=(0,r.jsx)(f.View,{children:(0,r.jsx)(tq.StatusBanner,{icon:(0,r.jsx)(k.default,{}),colorway:"warning",text:"To upgrade, please republish."})})),$||Y||Q||X)?(0,r.jsxs)(i.Fragment,{children:[h&&u?(0,r.jsx)(oM,{product:"deployment",suspendedReason:u.suspendedReason,scheduledDeletionTime:g}):null,(0,r.jsxs)(w.Surface,{elevated:!0,css:et?oU.deploymentInfoAnimate:oU.deploymentInfo,style:{paddingTop:u?12:16},children:[u?(0,r.jsxs)(f.View,{css:oU.deploymentInfoTitle,row:!0,gap:8,children:[(0,r.jsx)(j.Text,{variant:"subheadDefault",multiline:!1,children:"Production"}),K,u.rollbackSourceBuildId?(0,r.jsx)(af,{build:u}):null]}):null,(0,r.jsxs)(f.View,{css:oU.deploymentInfoContent,gap:8,children:[(0,r.jsx)(aC,{}),$,M?null:Y,X,ea?(0,r.jsx)(oG,{label:"Expiration",children:(0,r.jsx)(j.Text,{multiline:!1,children:eo})}):null,"claim"===F?(0,r.jsx)(ol,{onClaimAndPublish:z,disabled:V,isPublishing:V,isRepublish:!0}):null,"upsell"===F?(0,r.jsxs)(f.View,{gap:16,children:[(0,r.jsx)(oc,{withBorder:!0}),(0,r.jsx)(ok.default,{context:"free_domain_upsell_republish",colorway:"primary",variant:"default",text:"Upgrade to claim",onPlanCheckoutComplete:H,directCheckout:!0})]}):null,Q]})]}),D&&y.selectedDomain?(0,r.jsx)(a1,{isOpen:D,selectedDomain:y.selectedDomain,onSubmit:q,onClose:function(){_({type:"reset"})},isSubmitting:V}):null]}):null},oq=(0,eU.cssRecord)({timeoutConfig:[eH.rcss.width("100%"),eH.rcss.align.start,eH.rcss.pb(8)],selectedTimeoutUnits:[eH.rcss.textAlign.left,eH.rcss.rowWithGap(8)],button:[eH.rcss.reset.button,eH.rcss.viewStyle,_.interactive.nofill,eH.rcss.align.center,eH.rcss.display.inlineFlex,{borderColor:_.interactive.outlined.borderColor},eH.rcss.minWidth(100)],timeoutUnitsDropdown:[eH.rcss.ml(4)],dropdownItemAndContainer:[eH.rcss.flex.row,eH.rcss.align.center,_.interactive.listItem,eH.rcss.px(8),eH.rcss.py(4)],dropdownItem:[eH.rcss.textAlign.left,eH.rcss.rowWithGap(8)],popover:[eH.rcss.width("max-content"),eH.rcss.overflow("auto"),eH.rcss.p(1),eH.rcss.minWidth(120)],type:[eH.rcss.borderRadius(8),eH.rcss.p(8)]}),oW=(0,eU.cssRecord)({self:[oq.dropdownItemAndContainer,eH.rcss.justify.spaceBetween,{backgroundColor:S.tokens.interactiveBackground}]}),oK=["minutes","hours"];function o$(e,t){var n=parseInt(e,10);if(!isNaN(n))if("hours"===t.toLowerCase())return 3600*n;else return 60*n;return 0}function oY(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function oX(e,t){return oY(e)&&o$(e,t)>86400}function oQ(e){var t=e.title;return(0,r.jsxs)(f.View,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,r.jsx)(f.View,{css:oq.selectedTimeoutUnits,align:"center",children:(0,r.jsx)(j.Text,{variant:"text",color:"dimmer",children:t})}),(0,r.jsx)(D.default,{})]})}function oJ(e){var t=e.item,n=e.selected;return(0,r.jsxs)(f.View,{css:n?oW.self:oq.dropdownItemAndContainer,children:[(0,r.jsx)(f.View,{css:oq.dropdownItem,align:"center",children:(0,r.jsx)(j.Text,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,r.jsx)(f.View,{align:"center",row:!0,children:n?(0,r.jsx)(J.default,{size:16}):null})]})}function oZ(e){var t=e.crontab,n=e.setCrontab,a=e.crontabError,o=e.timezone,s=e.setTimezone,l=e.timezoneError,u=e.loading,c=void 0!==u&&u,d=e.timeoutValue,p=e.setTimeoutValue,m=e.timeoutUnits,h=e.setTimeoutUnits,g=e.setTimeoutValueError,v=r_({initialCrontab:t,initialTimezone:o,externalLoading:c,onCrontabChange:n,onTimezoneChange:s}),x=v.describeSchedule,y=v.crontab,b=v.timezone,S=v.error,_=v.loading,j=v.scheduleToCronExpression,T=v.cronExpressionToSchedule,D=v.setCrontab,k=v.setTimezone,C=v.handleOnInputChanged,E=v.setTranslationType,A=(0,nc.useDeploymentCostDetails)().scheduledDeploymentCostDetails;if((0,i.useEffect)(function(){g(!oY(d)||oX(d,m))},[d,m,g]),S)return(0,r.jsx)(f.View,{children:(0,r.jsx)(rw,{crontab:y,timezone:b,crontabError:a,timezoneError:l,cronLoading:c,error:S,onCronExpressionChange:D,onTimezoneChange:k})});var I="";return oY(d)?oX(d,m)&&(I="Please enter a value less than the maximum of 24 hours"):I="Please enter a positive whole number",(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsx)(na,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",children:(0,r.jsx)(w.Surface,{css:oq.type,elevated:!0,children:(0,r.jsx)(oH,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(A.fixedConfigurationCostPerSec,"/sec")})})}),(0,r.jsx)(f.View,{pb:16,children:(0,r.jsx)(rj,{describeSchedule:x,crontab:y,timezone:b,crontabError:a,timezoneError:l,loading:_,cronLoading:c,scheduleToCronExpression:j,cronExpressionToSchedule:T,onScheduleDescriptionChange:function(e){return C(e,"scheduleToCronExpression")},onCronExpressionChange:function(e){return C(e,"cronExpressionToSchedule")},onTimezoneChange:k,onScheduleDescriptionFocus:function(){return E("scheduleToCronExpression")},onCronExpressionFocus:function(){return E("cronExpressionToSchedule")}})}),(0,r.jsx)(f.View,{css:oq.timeoutConfig,grow:!0,shrink:!0,row:!0,children:(0,r.jsx)(na,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,r.jsxs)(f.View,{row:!0,children:[(0,r.jsx)(n1,{id:"timeoutValue",value:d,placeholder:"",loading:c,disabled:!1,onChange:function(e){return p(null!=e?e:"")},error:I,type:"number"}),(0,r.jsxs)(nV.Select,{css:oq.timeoutUnitsDropdown,defaultSelectedKey:oK[0],selectedKey:m,onSelectionChange:function(e){return h(e.toString())},children:[(0,r.jsx)(nB.Button,{css:oq.button,children:(0,r.jsx)(oQ,{title:m})}),(0,r.jsx)(eE.RawPopover,{css:oq.popover,background:"default",placement:"bottom right",children:(0,r.jsx)(R.ListBox,{children:oK.map(function(e){return(0,r.jsx)(R.ListBoxItem,{id:e,textValue:e,children:(0,r.jsx)(oJ,{item:e,selected:e===m})},e)})})})]})]})})})]})}function o0(){var e=(0,ex._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return o0=function(){return e},e}e.s(["ScheduledMachineConfiguration",()=>oZ,"getTimeoutInSeconds",()=>o$,"validTimeoutUnits",()=>oK],398594);var o1={},o2=(0,ey.gql)(o0());function o4(e){var t,n,r,i=(t={variables:{replId:e}},n=(0,g._)({},o1,t),eb.useQuery(o2,n)),a=i.data,o=i.loading,s=i.error;return o?{loading:o,hasError:!1,orgId:void 0}:{loading:o,hasError:void 0!==s||(null==a?void 0:a.getRepl.__typename)!=="Repl",orgId:(null==a?void 0:a.getRepl.__typename)==="Repl"?null==(r=a.getRepl.org)?void 0:r.id:void 0}}function o8(e){var t=e.replId,n=e.isNewDeployment,r=e.provider,a=e.fs,o=e.secrets,s=e.onOptions,l=e.onError,u=e.dotReplit,c=e.currentBuild,d=(0,b._)((0,i.useState)(!0),2),p=d[0],f=d[1],m=(0,nF.default)(l),h=(0,nF.default)(s),g=(0,nO.useGetSecretsAsDeploymentEntries)({secrets:o,replId:t});return(0,i.useEffect)(function(){var e=!1;try{(0,e5._)(function(){var t,i,o,s,l,d,p,m,v,x;return(0,e9._)(this,function(y){switch(y.label){case 0:return t=tE.DeployHostingBuildAppType.Server,i=null,o=null,s=null,l=null,[4,Promise.all([n?g():Promise.resolve(null!=(d=null==c?void 0:c.envVars)?d:[]),(0,nO.getDotReplitDeploymentConfig)(u)])];case 1:if(m=(p=b._.apply(void 0,[y.sent(),2]))[0],v=p[1],e)return[2];if(n)switch(r){case tE.HostingBuildProvider.AzureVm:case tE.HostingBuildProvider.Gce:t=v.ignorePorts?tE.DeployHostingBuildAppType.Worker:tE.DeployHostingBuildAppType.Server;break;case tE.HostingBuildProvider.AzureContainerApp:case tE.HostingBuildProvider.CloudRun:t=tE.DeployHostingBuildAppType.CloudRun;break;case tE.HostingBuildProvider.Static:t=tE.DeployHostingBuildAppType.Static;break;case tE.HostingBuildProvider.Cron:t=tE.DeployHostingBuildAppType.Cron;break;case tE.HostingBuildProvider.Extension:case void 0:break;default:(0,te.default)(r)}else v.appType&&(t=v.appType);if(o=v.buildCommand,t===tE.DeployHostingBuildAppType.Static)return[3,2];return i=v.runCommand,[3,5];case 2:if(!v.publicDir)return[3,3];return s=v.publicDir,[3,5];case 3:return[4,(0,e5._)(function(){var e,t,n,r,i,o,s,l,u,c,d,p,f,m,h,g,v;return(0,e9._)(this,function(x){switch(x.label){case 0:e=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,n=!1,r=void 0,x.label=1;case 1:x.trys.push([1,6,7,8]),i=e[Symbol.iterator](),x.label=2;case 2:if(t=(o=i.next()).done)return[3,5];return s=o.value,[4,a.stat(s)];case 3:if(!((l=x.sent()).exists&&l.type===nA.FileType.File))return[3,4];return[2,"dist/public"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return u=x.sent(),n=!0,r=u,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:c=["dist","build","public"],d=!0,p=!1,f=void 0,x.label=9;case 9:x.trys.push([9,14,15,16]),m=c[Symbol.iterator](),x.label=10;case 10:if(d=(h=m.next()).done)return[3,13];return g=h.value,[4,a.stat(g)];case 11:if(!((v=x.sent()).exists&&v.type===nA.FileType.Directory))return[3,12];return[2,g];case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return u=x.sent(),p=!0,f=u,[3,16];case 15:try{d||null==m.return||m.return()}finally{if(p)throw f}return[7];case 16:return[2]}})})()];case 4:(x=y.sent())&&(s=x),y.label=5;case 5:return(r===tE.HostingBuildProvider.Gce||r===tE.HostingBuildProvider.AzureVm)&&(l=v.ignorePorts),h.current({appType:t,envVars:m,buildCommand:o,runCommand:i,publicDir:s,ignorePorts:l}),f(!1),[2]}})})()}catch(e){m.current(e.message),f(!1)}return function(){e=!0}},[r,a,u,m,h,n,g,c]),{loading:p}}function o6(e){var t,n,r=e.deploymentId,a=e.replId,o=e.initialSubdomain,s=e.initialProvider,l=e.initialMachineConfig,u=e.secrets,c=e.fs,d=e.dotReplit,p=e.onDeploy,f=e.onError,m=e.hasAgentSession,h=e.selectedFreeDomain,g=void 0===h?null:h,v=(0,nM.useDeploymentMode)(),x=(0,nc.useDeployBuild)().deployBuild,y=(0,nc.useSetDeploymentTriggerSource)(),S=tR(),_=S.hasStripeSandboxConnection,w=S.loading,j=o4(a).orgId,T=(0,b._)((0,i.useState)(tE.DeployHostingBuildAppType.Server),2),D=T[0],k=T[1],C=(0,b._)((0,i.useState)(o),2),E=C[0],A=C[1],I=(0,b._)((0,i.useState)(!1),2),R=I[0],P=I[1],M=(0,i.useRef)(!1),O=(0,b._)((0,i.useState)(null),2),N=O[0],L=O[1],B=(0,b._)((0,i.useState)(null),2),V=B[0],U=B[1],F=(0,b._)((0,i.useState)(void 0),2),H=F[0],G=F[1],z=(0,b._)((0,i.useState)(null),2),q=z[0],W=z[1],K=(0,b._)((0,i.useState)(void 0),2),$=K[0],Y=K[1],X=(0,b._)((0,i.useState)(null),2),Q=X[0],J=X[1],Z=(0,b._)((0,i.useState)(void 0),2),ee=Z[0],et=Z[1],en=(0,b._)((0,i.useState)([]),2),er=en[0],ei=en[1],ea=(0,b._)((0,i.useState)(!1),2),eo=ea[0],es=ea[1],el=(0,b._)((0,i.useState)(null),2),eu=el[0],ec=el[1],ed=(0,b._)((0,i.useState)(void 0),2),ep=ed[0],ef=ed[1],em=(0,b._)((0,i.useState)("10"),2),eh=em[0],eg=em[1],ev=(0,b._)((0,i.useState)(oK[0]),2),ex=ev[0],ey=ev[1],eb=(0,b._)((0,i.useState)(!1),2),eS=eb[0],e_=eb[1],ew=(0,b._)((0,i.useState)(j&&s!==tE.HostingBuildProvider.Cron?tE.DeployHostingBuildPrivacyMode.Private:tE.DeployHostingBuildPrivacyMode.Public),2),ej=ew[0],eT=ew[1],eD=(0,b._)((0,i.useState)(void 0),2),ek=eD[0],eC=eD[1],eE=(0,b._)((0,i.useState)(null),2),eA=eE[0],eI=eE[1],eR=(0,b._)((0,i.useState)(!0),2),eP=eR[0],eM=eR[1],eO=(0,b._)((0,i.useState)(!1),2),eN=eO[0],eL=eO[1],eB=(0,b._)((0,i.useState)(!1),2),eV=eB[0],eU=eB[1],eF=(0,nc.useDeploymentSecurityScanState)(),eH=eF.enabled,eG=eF.setDeploymentSecurityScanEnabled,ez=(0,nc.useAgentInboxState)(),eq=ez.enabled,eW=ez.setAgentInboxEnabled,eK=(0,nc.useReplitBadgeState)(),e$=eK.enabled,eY=eK.setReplitBadgeEnabled,eX=ej!==tE.DeployHostingBuildPrivacyMode.Public,eQ=(0,b._)((0,i.useState)(s),2),eJ=eQ[0],eZ=eQ[1],e0=(0,b._)((0,i.useState)(l),2),e1=e0[0],e2=e0[1],e4=(0,b._)((0,i.useState)(!1),2),e8=e4[0],e6=e4[1],e3=tD({skip:!r,variables:{id:null!=r?r:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t,n=(null==(r=e.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(n){if(n.replitAppSubdomain&&(A(n.replitAppSubdomain),P(!0)),n.currentBuild.machineJob&&(W(n.currentBuild.machineJob.timezone),J(n.currentBuild.machineJob.crontab),n.currentBuild.machineJob.timeoutSeconds)){var r,i,a,o=n.currentBuild.machineJob.timeoutSeconds;o%3600==0?(i=o/3600,a="Hours"):(i=Math.floor(o/60),a="Minutes"),eg(i.toString()),ey(a)}var s=n.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}),l=new Set(s.map(function(e){return e.name})),u=tM.SYNCING_SECRETS_ROLLOUT_DATE>new Date(n.currentBuild.timeCreated)&&tM.SYNCING_SECRETS_ROLLOUT_DATE>new Date(n.timeCreated)?(0,nD._)(l):null!=(t=n.ignoredSecrets)?t:[];ei(s),ta(u),null!=n.currentBuild.isPrivate&&eT((0,nc.getPrivacyMode)({isPrivate:n.currentBuild.isPrivate,hasPrivatePassword:n.currentBuild.hasPrivatePassword})),eG(n.securityScanEnabled)}}}),e7=e3.data,te=e3.loading,tt=tC({variables:{replId:a,provider:eJ},skip:!eJ}).data,tn=(null==e7||null==(t=e7.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?e7.hostingDeployment:null,tr=(0,b._)((0,i.useState)(null!=(n=null==tn?void 0:tn.ignoredSecrets)?n:[]),2),ti=tr[0],ta=tr[1],to=o8({replId:a,provider:eJ,fs:c,secrets:u,dotReplit:d,isNewDeployment:!r,onError:f,currentBuild:null==tn?void 0:tn.currentBuild,onOptions:function(e){e.appType&&k(e.appType),ei(e.envVars),e.ignorePorts&&es(e.ignorePorts),e.buildCommand&&L(e.buildCommand),e.runCommand&&U(e.runCommand),e.publicDir&&ec(e.publicDir)}}).loading,ts=null==tn?void 0:tn.currentBuild,tl=void 0!==ts,tu=!!(null==ts?void 0:ts.hasPrivatePassword),tc=(null==tt?void 0:tt.getRepl.__typename)==="Repl"?tt.getRepl.authorizations:void 0,td=null==tc?void 0:tc.editDeploymentSecrets,tp=null==tc?void 0:tc.editSecrets,tf=null==tc?void 0:tc.editDeploymentSubdomain,tm=(0,nI.useHeliumDevelopmentDatabase)(),th=tm.database,tg=tm.loading,tv=(0,nR.useNeonDevelopmentDatabase)(),tx=tv.database,ty=tv.loading,tb=(0,nR.useNeonProductionDatabase)(),tS=tb.database,t_=tb.loading,tw=t3({neonDevelopmentDatabase:tx,neonProductionDatabase:tS,heliumDevelopmentDatabase:th,isRedeploy:tl,hasStripeSandboxConnection:_}),tj=(0,nN.useDevSecrets)({secrets:u,replId:a}).devSecrets;(0,i.useEffect)(function(){(0,nt.trackDeploymentSectionViewed)({context:"deploy_options"})},[]),(0,i.useEffect)(function(){!o||E||M.current||(A(o),M.current=!0)},[o,E]);var tT=(0,i.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;ei(function(e){return(0,nC.produce)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},[ei]),tk=function(e,t){return(0,e5._)(function(){var n,r,i,a,o,s;return(0,e9._)(this,function(l){switch(l.label){case 0:if(i=(!e||R)&&E.length?E:void 0,o=null!=(a=null==tn||null==(r=tn.currentBuild)||null==(n=r.machineJob)?void 0:n.failureNotifications)&&a,!i)return[2,!1];if(g&&!t)return e6(!0),[2,!1];l.label=1;case 1:return l.trys.push([1,3,,4]),y("deployments_pane_publish_button"),[4,x({ignoredSecrets:ti,envVars:er.filter(function(e){return(0,nE.isValidEnvVar)(e)}).map(function(e){return{name:e.name,value:e.value}}),subdomain:i,machineConfigurationId:(null==e1?void 0:e1.configurationId)||void 0,maxMachineInstances:(null==e1?void 0:e1.maxInstances)||void 0,machineJob:q&&Q?{timezone:q,crontab:Q,timeoutSeconds:o$(eh,ex),failureNotifications:o}:void 0,config:{buildCommand:N,runCommand:V,appType:D,ignorePorts:eo,publicDir:eu},privacyMode:ej,privatePassword:ek,enableSecurityScan:eH,agentInboxEnabled:eq,replitBadgeEnabled:null!=e$?e$:void 0,hasAgentSession:m,createNeonProductionDatabase:tw.value.createDatabase,pushDevelopmentDatabaseObjects:tw.value.pushDevelopmentDatabaseObjects,syncStripe:eP,provider:eJ,purchaseDomain:g&&t?nL(g,t,!0):void 0})];case 2:return l.sent(),p(),[2,!0];case 3:if(s=l.sent(),(0,nT._)(s,nP.RunCommandNotFoundError))return G("Run command cannot be empty."),[2,!1];if((0,nT._)(s,nP.InvalidRunCommandError))return G("Invalid run command."),[2,!1];if((0,nT._)(s,nP.PublicDirNotFoundError))return ef("Public directory cannot be empty."),[2,!1];if((0,nT._)(s,nP.InvalidTimezoneError))return Y(s.message||"Invalid timezone."),[2,!1];if((0,nT._)(s,nP.InvalidCrontabError))return et(s.message||"Invalid crontab."),[2,!1];if((0,nT._)(s,nP.PrivatePasswordError))return eI(s.message||"Invalid password."),[2,!1];return f(s.message),[2,!1];case 4:return[2]}})})()};return{mode:v,deployment:tn,queryLoading:te,optionsLoading:to,currentBuild:ts,isRedeploy:tl,authorizations:tc,editDeploySecretAuthorization:td,editReplSecretsAuthorization:tp,editDeploymentSubdomainAuthorization:tf,appType:D,subdomain:E,validSubdomain:R,buildCommand:N,runCommand:V,runCommandError:H,timezone:q,timezoneError:$,crontab:Q,crontabError:ee,envVars:er,ignorePorts:eo,publicDir:eu,publicDirError:ep,timeoutValue:eh,timeoutUnits:ex,timeoutValueError:eS,isPrivate:eX,privacyMode:ej,privatePassword:ek,privatePasswordError:eA,hasExistingPrivatePassword:tu,agentInboxEnabled:eq,replitBadgeEnabled:e$,syncSandboxWithLive:eP,ignoredSecrets:ti,isOverwritingSecrets:eN,isOverwriteSecretsModalOpen:eV,devSecrets:tj,orgId:j,provider:eJ,canCreateNeonProductionDatabaseStateLoading:tg||ty||t_||w||tw.loading,machineConfig:e1,setAppType:k,setSubdomain:A,setValidSubdomain:P,setBuildCommand:L,setRunCommand:U,setRunCommandError:G,setTimezone:W,setTimezoneError:Y,setCrontab:J,setCrontabError:et,setEnvVars:ei,setIgnorePorts:es,setPublicDir:ec,setPublicDirError:ef,setTimeoutValue:eg,setTimeoutUnits:ey,setTimeoutValueError:e_,setPrivacyMode:eT,setPrivatePassword:eC,setAgentInboxEnabled:eW,setReplitBadgeEnabled:eY,setSyncSandboxWithLive:eM,setIgnoredSecrets:ta,setIsOverwritingSecrets:eL,setIsOverwriteSecretsModalOpen:eU,setProvider:eZ,setMachineConfig:e2,showDomainContactModal:e8,setShowDomainContactModal:e6,createNeonProductionDatabaseState:tw,onAppTypeChanged:function(e){k(e),es((e===tE.DeployHostingBuildAppType.Server||e===tE.DeployHostingBuildAppType.Worker)&&e===tE.DeployHostingBuildAppType.Worker)},onSubdomainBlur:function(){(null==E?void 0:E.trim())||A(o)},addAnEnvVar:tT,updateEnvVarName:function(e,t){ei(function(n){return(0,nC.produce)(n,function(n){n[e].name=t})})},updateEnvVarValue:function(e,t){ei(function(n){return(0,nC.produce)(n,function(n){n[e].value=t})})},removeEnvVar:function(e){ei(function(t){return(0,nC.produce)(t,function(t){t.splice(e,1)})})},handleDeployClick:tk,handleDomainContactSubmit:function(e){return(0,e5._)(function(){return(0,e9._)(this,function(t){switch(t.label){case 0:return e6(!1),[4,tk(!0,e)];case 1:return[2,t.sent()]}})})()},optOut:function(e){ta(function(t){return(0,nD._)(t).concat([e])})},optIn:function(e){tj&&tj.has(e)||ta(function(t){return t.filter(function(t){return t!==e})})},syncToWorkspace:function(e){return(0,e5._)(function(){var t,n;return(0,e9._)(this,function(r){return!((t=er.findIndex(function(t){return t.name===e}))<0)&&tj&&tj.has(e)&&(n=tj.get(e),(0,nk.default)(n),ta(function(t){return t.filter(function(t){return t!==e})}),ei(function(r){return(0,nD._)(r.slice(0,t)).concat([{name:e,value:n}],(0,nD._)(r.slice(t+1)))})),[2]})})()},overwriteSecrets:function(){return(0,e5._)(function(){return(0,e9._)(this,function(e){switch(e.label){case 0:return eL(!0),[4,u.addEntries(er.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),eL(!1),eU(!1),[2]}})})()}}}e.s(["useOrgId",()=>o4],605526),e.s(["useDeployOptionsData",()=>o8,"useDeploymentOptionsState",()=>o6],976191)},970755,e=>{e.v({cannotDeploy:"SuggestDeploy-module__DhkBmq__cannotDeploy",isConfiguredManually:"SuggestDeploy-module__DhkBmq__isConfiguredManually",isStale:"SuggestDeploy-module__DhkBmq__isStale",message:"SuggestDeploy-module__DhkBmq__message",propertiesHeader:"SuggestDeploy-module__DhkBmq__propertiesHeader",status:"SuggestDeploy-module__DhkBmq__status",urlContainer:"SuggestDeploy-module__DhkBmq__urlContainer"})},127704,e=>{e.v({card:"SuggestGeneralBuildMode-module__a0pqrq__card",continueButton:"SuggestGeneralBuildMode-module__a0pqrq__continueButton"})},401211,e=>{e.v({container:"SuggestRollback-module__W2kyQG__container",inlineButton:"SuggestRollback-module__W2kyQG__inlineButton"})},10537,318037,225821,202872,e=>{"use strict";var t,n=e.i(276385),r=e.i(389959),i=e.i(399344),a=e.i(297083),o=e.i(721281),s=e.i(530658),l=e.i(817556),u=e.i(109644),c=e.i(664219),d=e.i(368964),p=e.i(379334),f=e.i(967963),m=e.i(262664),h=e.i(424746),g=e.i(914279),v=e.i(68893),x=e.i(479373),y=e.i(365692),b=e.i(777373),S=e.i(589910),_=e.i(332822),w=e.i(34912),j=e.i(823166),T=e.i(311106),D=e.i(976191),k=e.i(993796),C=e.i(207237),E=e.i(187505),A=e.i(858248),I=e.i(709485),R=e.i(436725),P=e.i(446530),M=e.i(173703),O=e.i(613355),N=e.i(140487),L=e.i(607278),B=e.i(396776),V=e.i(929872),U=e.i(960178),F=e.i(751273),H=e.i(625484),G=e.i(548635),z=e.i(616278),q=e.i(245225),W=e.i(788331),K=e.i(292297),$=e.i(503536),Y=e.i(606867),X=e.i(878420),Q=e.i(64386),J=e.i(853763);function Z(e){return(0,n.jsxs)(J.default,(0,Q._)((0,X._)({},e),{children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_7378_478)",children:[(0,n.jsx)("path",{fill:"#E01E5A",d:"M5.14 15.118a2.492 2.492 0 0 1-2.494 2.495A2.492 2.492 0 0 1 .15 15.118a2.492 2.492 0 0 1 2.495-2.494H5.14v2.494Zm1.247 0a2.492 2.492 0 0 1 2.495-2.494 2.492 2.492 0 0 1 2.494 2.494v6.236a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495v-6.236Z"}),(0,n.jsx)("path",{fill:"#36C5F0",d:"M8.882 5.102a2.492 2.492 0 0 1-2.495-2.494A2.492 2.492 0 0 1 8.882.113a2.492 2.492 0 0 1 2.494 2.495v2.494H8.882Zm0 1.267a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495H2.627A2.492 2.492 0 0 1 .132 8.863a2.492 2.492 0 0 1 2.495-2.494h6.255Z"}),(0,n.jsx)("path",{fill:"#2EB67D",d:"M18.879 8.863a2.492 2.492 0 0 1 2.494-2.494 2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495H18.88V8.863Zm-1.248 0a2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V2.608A2.492 2.492 0 0 1 15.138.113a2.492 2.492 0 0 1 2.494 2.495v6.255Z"}),(0,n.jsx)("path",{fill:"#ECB22E",d:"M15.137 18.86a2.492 2.492 0 0 1 2.494 2.494 2.492 2.492 0 0 1-2.494 2.495 2.492 2.492 0 0 1-2.495-2.495V18.86h2.495Zm0-1.247a2.492 2.492 0 0 1-2.495-2.495 2.492 2.492 0 0 1 2.495-2.494h6.255a2.492 2.492 0 0 1 2.495 2.494 2.492 2.492 0 0 1-2.495 2.495h-6.255Z"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_7378_478",children:(0,n.jsx)("path",{fill:"#fff",d:"M0 0h24v24H0z"})})})]}))}var ee=e.i(367321),et=e.i(292642),en=e.i(940745),er=e.i(115357),ei=e.i(264661),ea=e.i(42458),eo=e.i(970755),es=(0,P.cssRecord)({titleShort:(0,o._)({display:"inline"},O.container.min(411),{display:"none"}),titleLong:(0,o._)({display:"none"},O.container.min(411),{display:"inline"})}),el=(0,P.cssRecord)({root:[O.rcss.my(12),O.rcss.p(8)]});(t={}).READY="READY",t.STALE="STALE",t.NOT_AVAILABLE="NOT_AVAILABLE",t.DEPLOYING="DEPLOYING",t.FINISHED="FINISHED",t.FAILED="FAILED",t.CONFIGURED_MANUALLY="CONFIGURED_MANUALLY";var eu=(0,r.memo)(function(e){var t=e.openDeploymentsPane,r=e.paneType,a=(0,i.useDeploymentCurrentBuild)();return(0,n.jsx)(ed,{openDeploymentsPane:t,currentBuild:a,isRedeploy:!!a,paneType:r})});function ec(e){var t=e.openDeploymentsPane,i=e.isRedeploy,a=e.agentStackPlatformType,o=(0,r.useMemo)(function(){switch(a){case d.AgentStackPlatformType.Slack:return(0,n.jsx)(Z,{});case d.AgentStackPlatformType.Telegram:return(0,n.jsx)(ee.default,{});case d.AgentStackPlatformType.TimeBased:return(0,n.jsx)(G.default,{});default:return null}},[a]),s=(0,r.useMemo)(function(){switch(a){case d.AgentStackPlatformType.Slack:return{title:"Publish to Slack",deploy:"Publish your agent to interact with it on Slack.",redeploy:"Republish your agent to Slack to apply the latest changes."};case d.AgentStackPlatformType.Telegram:return{title:"Publish to Telegram",deploy:"Publish your agent to interact with it on Telegram.",redeploy:"Republish your agent to Telegram to apply the latest changes."};case d.AgentStackPlatformType.TimeBased:return{title:"Publish your Time-based Automation",deploy:"Publish to start running your automation.",redeploy:"Republish your automation to apply the latest changes."};case d.AgentStackPlatformType.ConnectorTrigger:return{title:"Publish your Automation",deploy:"Publish to start Automatically triggering workflows when events occur.",redeploy:"Republish your automation to apply the latest changes."};default:return{title:"Publish",deploy:"Publish your agent to interact with it.",redeploy:"Republish your agent to apply the latest changes."}}},[a]);return(0,n.jsxs)(V.Surface,{elevated:!0,gap:8,p:8,css:el.root,children:[(0,n.jsxs)(H.View,{align:"center",gap:6,row:!0,children:[(0,n.jsx)(Y.IconProvider,{size:16,children:o}),(0,n.jsx)(U.Text,{style:{fontWeight:"500"},children:s.title})]}),(0,n.jsx)(U.Text,{children:i?s.redeploy:s.deploy}),(0,n.jsx)(H.View,{row:!0,justify:"end",children:(0,n.jsx)(N.Button,{iconLeft:(0,n.jsx)($.default,{}),onClick:t,colorway:"primary",text:i?"Republish":"Publish now"})})]})}function ed(e){var t,o=e.currentBuild,u=e.openDeploymentsPane,c=e.isRedeploy,b=e.paneType,_=(0,s._)((0,r.useState)(void 0),2),E=_[0],R=_[1],P=(0,s._)((0,r.useState)(!1),2),M=P[0],O=P[1],N=(0,s._)((0,r.useState)(null),2),L=N[0],B=N[1],V=(0,s._)((0,r.useState)(!0),2),U=V[0],F=V[1],H=(0,r.useCallback)(function(e){(0,T.sendSentryError)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),O(!0)},[]),G=(0,C.default)(),z=(0,i.useDotReplitService)(),q=(0,i.useFsService)(),$=(0,i.useSecretsService)(),Y=(0,i.useDeploymentProvider)({onError:H,dotReplitService:z}),X=Y.recommendedProvider,Q=Y.loading,J=X===d.HostingBuildProvider.AzureContainerApp||X===d.HostingBuildProvider.AzureVm,Z=(0,i.useFreeTierCloudServices)(),ee=(0,(0,i.useDeploymentDeployability)().getDeployabilityByProvider)(X).deploy,et=ee.isAuthorized,en="Loading"===ee.message;(0,r.useEffect)(function(){!en&&(et||R("NOT_AVAILABLE"))},[en,et]);var ei=(0,j.useReservedVmConfigurations)({provider:X,onError:H}).defaultMachineConfiguration,ea=(0,S.useAutoscaleConfigurations)({isAzureDeployment:J,isFreeUser:Z,onError:H}).defaultMachineConfiguration,eo=(0,y.getRecommendedProviderMachineConfiguration)({recommendedProvider:X,defaultAutoscaleConfiguration:ea,defaultRvmMachineConfiguration:ei}),el=(0,s._)((0,r.useState)(d.DeployHostingBuildAppType.Server),2),eu=el[0],ec=el[1],ed=(0,s._)((0,r.useState)(null),2),ef=ed[0],em=ed[1],eh=(0,s._)((0,r.useState)(null),2),eg=eh[0],ev=eh[1],ex=(0,s._)((0,r.useState)(null!=(t=null==o?void 0:o.envVars.map(function(e){return{name:e.name,value:e.value}}))?t:[]),2),ey=ex[0],eb=ex[1],eS=(0,s._)((0,r.useState)(!1),2),e_=eS[0],ew=eS[1],ej=(0,s._)((0,r.useState)(null),2),eT=ej[0],eD=ej[1],ek=(0,D.useDeployOptionsData)({replId:G,provider:X,fs:q,secrets:$,dotReplit:z,isNewDeployment:!c,onError:H,onOptions:function(e){e.appType&&ec(e.appType),e.envVars&&eb(e.envVars),e.ignorePorts&&ew(e.ignorePorts),e.buildCommand&&em(e.buildCommand),e.runCommand&&ev(e.runCommand),e.publicDir&&eD(e.publicDir)}}).loading,eC=(0,s._)((0,r.useState)(void 0),2),eE=eC[0],eA=eC[1],eI=(0,s._)((0,r.useState)(void 0),2),eR=eI[0],eP=eI[1],eM=(0,s._)((0,r.useState)(void 0),2),eO=eM[0],eN=eM[1],eL=(0,s._)((0,r.useState)(void 0),2),eB=eL[0],eV=eL[1],eU=(0,i.useDeploymentSubdomain)(),eF=(0,i.useDeploymentCostDetails)().getMachineConfigurationCostDetailsBySlug;(0,r.useEffect)(function(){if(!ek){if(!X){eA(void 0),eP(void 0),eN(void 0),eV(void 0),R(void 0);return}var e,t,r="".concat(eU).concat((null==(t=window)||null==(e=t.location)?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(p.DEPLOYMENTS_DEFAULT_DOMAIN);switch(X){case d.HostingBuildProvider.AzureVm:case d.HostingBuildProvider.Gce:if(!eo)return;var i=eF(eo.configurationSlug).costPerMonth;eA((0,n.jsx)(K.default,{})),eP("Reserved VM Deployment"),eN("$".concat(i,"/month"));var a={};a["Default URL"]=r,ef&&(a["Build Command"]=ef),a["Run Command"]=eg,eV(a);break;case d.HostingBuildProvider.AzureContainerApp:case d.HostingBuildProvider.CloudRun:if(!eo)return;eA((0,n.jsx)(W.default,{})),eP((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{css:es.titleShort,children:"Autoscale"}),(0,n.jsx)("span",{css:es.titleLong,children:"Autoscale Deployment"})]}));var o={};o["Default URL"]=r,ef&&(o["Build Command"]=ef),o["Run Command"]=eg,eV(o);break;case d.HostingBuildProvider.Static:eA((0,n.jsx)(er.default,{})),eP("Static Deployment"),eN("Free");var s={"Public Directory":eT,"Default URL":r};ef&&(s["Build Command"]=ef),eV(s);break;default:eA(void 0),eP(void 0),eN(void 0),eV(void 0),R(void 0)}}},[ef,eU,ek,X,eg,eo,eT,eF]);var eH=(0,i.useDeployBuild)({openDeploymentsPane:u}),eG=eH.deployBuild,ez=eH.redeployWithNoNewOptions,eq=(0,i.useSetDeploymentTriggerSource)(),eW=(0,m.useHeliumDevelopmentDatabase)(),eK=eW.database,e$=eW.loading,eY=(0,h.useNeonDevelopmentDatabase)(),eX=eY.database,eQ=eY.loading,eJ=(0,h.useNeonProductionDatabase)(),eZ=eJ.database,e0=eJ.loading,e1=(0,x.useStripeConnection)(),e2=e1.hasStripeSandboxConnection,e4=e1.loading,e8=(0,w.useCreateNeonProductionDatabaseState)({heliumDevelopmentDatabase:eK,neonDevelopmentDatabase:eX,neonProductionDatabase:eZ,isRedeploy:c,hasStripeSandboxConnection:e2}),e6=e8.value,e3=e6.createDatabase,e5=e6.pushDevelopmentDatabaseObjects,e9=(0,i.useDeploymentSecurityScanState)().enabled,e7=(0,i.useDeployBuild)({}).kickOffStandbyBuild,te=(0,r.useRef)(!1),tt=(0,k.useFlag)({controlName:"flag-enable-standby-builds",type:"boolean"});(0,r.useEffect)(function(){if(tt&&!te.current&&!c&&!ek){if(!X||!eg||!eu)return void(0,T.sendSentryError)({error:Error("Standby build blocked: "+JSON.stringify({recommendedProvider:X,runCommand:eg,appType:eu})),context:"StandbyBuildBlockedFromSuggestDeploy",isDeploymentsPane:!1});te.current=!0,(0,a._)(function(){var e;return(0,l._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,T.sendSentryError)({error:Error("Standby build triggered "),context:"StandbyBuildTriggeredFromSuggestDeploy",isDeploymentsPane:!1}),[4,e7({provider:X,envVars:ey.filter(function(e){return(0,f.isValidEnvVar)(e)}),subdomain:eU||"",machineConfigurationId:(null==eo?void 0:eo.configurationId)||void 0,maxMachineInstances:(null==eo?void 0:eo.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eg,appType:eu,publicDir:eT,ignorePorts:!1},privacyMode:d.DeployHostingBuildPrivacyMode.Public,hasAgentSession:!0,ignoredSecrets:[],createNeonProductionDatabase:e8.value.createDatabase,pushDevelopmentDatabaseObjects:e8.value.pushDevelopmentDatabaseObjects,enableSecurityScan:e9})];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),(0,T.sendSentryError)({error:Error("Failed to trigger standby build: "+e.message),context:"StandbyBuildTriggerFromSuggestDeploy"}),[3,3];case 3:return[2]}})})()}},[c,ek,eg,eu,ey,eU,null==eo?void 0:eo.configurationId,null==eo?void 0:eo.maxInstances,ef,eT,X,e8,e9,tt,e7]);var tn=(0,r.useCallback)(function(){return(0,a._)(function(){var e,t,n;return(0,l._)(this,function(r){switch(r.label){case 0:if(!et)return[2];if(R("DEPLOYING"),(0,A.track)(I.events.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:c,has_agent_session:!0}),!c)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),eq("agent_suggest_publish_tool"),[4,ez({hasAgentSession:!0})];case 2:return r.sent(),[3,4];case 3:return H(r.sent().message),[3,4];case 4:return[2];case 5:if(e=L&&U,t=(null==eU?void 0:eU.length)?eU:void 0,!(n=e?L:t)||!X)return[2];r.label=6;case 6:return r.trys.push([6,8,,9]),eq("agent_suggest_publish_tool"),[4,eG({ignoredSecrets:[],envVars:ey.filter(function(e){return(0,f.isValidEnvVar)(e)}),subdomain:n,machineConfigurationId:(null==eo?void 0:eo.configurationId)||void 0,maxMachineInstances:(null==eo?void 0:eo.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eg,appType:eu,ignorePorts:e_,publicDir:eT},privacyMode:d.DeployHostingBuildPrivacyMode.Public,hasAgentSession:!0,createNeonProductionDatabase:e3,pushDevelopmentDatabaseObjects:e5,enableSecurityScan:e9,provider:X})];case 7:return r.sent(),u&&u(),[3,9];case 8:return H(r.sent().message),[3,9];case 9:return[2]}})})()},[eu,ef,e3,L,ey,c,e_,et,U,null==eo?void 0:eo.configurationId,null==eo?void 0:eo.maxInstances,eT,e5,eg,eU,eG,H,u,ez,e9,eq,X]),tr=(0,g.useDeploymentMode)();(0,r.useEffect)(function(){if(!M)switch(tr){case v.DeploymentMode.Ready:if("FAILED"===E||"FINISHED"===E)break;R("READY");break;case v.DeploymentMode.Suspended:R("NOT_AVAILABLE");break;case v.DeploymentMode.Preparing:case v.DeploymentMode.Deploying:R("DEPLOYING")}},[M,tr,E]),(0,i.useLatestBuildActionUpdate)(function(e){if(!M&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case d.HostingBuildStatus.Failed:R("FAILED");break;case d.HostingBuildStatus.Success:R("FINISHED")}});var ti=en||ek||e$||eQ||e0||e8.loading||Q||e4,ta=(0,r.useRef)(!1);return((0,r.useEffect)(function(){ta.current||ti||e2||(ta.current=!0,(0,A.track)(I.events.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0}))},[ti,e2]),e2)?null:(0,n.jsx)(ep,{icon:eE,title:eR,cost:eO,properties:eB,status:M?"NOT_AVAILABLE":E,onDeploy:et&&X&&X!==d.HostingBuildProvider.Cron?tn:void 0,defaultSubdomain:eU,recommendedProvider:X,replId:G,onSubdomainEdit:B,onSubdomainValidityChange:F,openDeploymentsPane:u,isRedeploy:c,loading:ti,paneType:b,state:e8})}function ep(e){var t=e.icon,r=e.title,i=e.cost,a=e.properties,o=e.status,s=void 0===o?"READY":o,l=e.defaultSubdomain,u=e.recommendedProvider,c=e.replId,d=e.onDeploy,p=e.openDeploymentsPane,f=e.onSubdomainEdit,m=e.onSubdomainValidityChange,h=e.isRedeploy,g=e.loading,v=e.paneType,x=e.state,y=a&&Object.keys(a).length>0,b=g?(0,n.jsx)(R.LoadingState,{}):(0,n.jsxs)(H.View,{gap:8,"data-event-type":"deploy",children:[(0,n.jsx)(U.Text,{clsx:eo.default.message,color:"STALE"===s?"dimmer":"default",children:h?"Want users to get these changes? Republish this App.":"Ready to share? Publish this App in ".concat(d?"one click":"a few clicks",".")}),u&&(null==a?void 0:a["Default URL"])&&!h?(0,n.jsx)(em,{icon:void 0===t?null:t,title:void 0===r?"Deployment":r,cost:void 0===i?"":i,properties:a,paneType:v,initialSubdomain:l,recommendedProvider:u,replId:c,onSubdomainEdit:f,onSubdomainValidityChange:m}):null,d||p?(0,n.jsx)(H.View,{row:!0,gap:8,align:"center",justify:y?"start":"end",children:(0,n.jsx)(ev,{status:s,isRedeploy:h,loading:g,onDeploy:d,openDeploymentsPane:p?function(){p()}:void 0,state:x})}):null]});return(0,n.jsx)(M.ShadesSurface,{elevate:"2x",br:"container",p:8,children:b})}var ef=function(e){var t,i,a=e.id,o=e.initialSubdomain,l=e.deploymentId,f=e.recommendedProvider,m=e.replId,h=e.onSubdomainEdit,g=e.onSubdomainValidityChange,v=(0,s._)((0,r.useState)(o||""),2),x=v[0],y=v[1],S=(0,b.useProviderInternalDomain)({provider:f}),_=S.internalDomain,w=S.isShowingFallback,j=S.fallbackDomain,T=(0,u.useCheckReplitAppSubdomainAvailabilityQuery)({variables:{subdomain:x,deploymentId:l},skip:0===x.length}),D=T.data,k=T.loading,C=T.error,E=(0,c.useDeploymentsDeployOptionsAuthzQuery)({variables:{replId:m,provider:null!=f?f:d.HostingBuildProvider.CloudRun},skip:!f}),A=E.data,I=E.loading,R=(null==A?void 0:A.getRepl.__typename)==="Repl"?null==(t=A.getRepl.authorizations)?void 0:t.editDeploymentSubdomain:void 0,P=!(null==R?void 0:R.isAuthorized),M=null==R?void 0:R.message,O=(null==D?void 0:D.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&D.replitAppSubdomainAvailability.available,N=(null==D?void 0:D.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?D.replitAppSubdomainAvailability.message:null==D||null==(i=D.replitAppSubdomainAvailability)?void 0:i.errorMessage;return((0,r.useEffect)(function(){g(O)},[O,g]),C)?(0,n.jsx)(B.StatusBanner,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,n.jsxs)(H.View,{clsx:eo.default.urlField,grow:!0,shrink:!0,children:[(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",justify:"space-between",grow:!0,shrink:!0,children:[(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",grow:!0,children:[I?(0,n.jsx)(en.default,{}):(0,n.jsx)(F.Tooltip,{tooltip:M,isDisabled:!P,children:(0,n.jsx)(L.Input,{id:a,value:x,onChange:function(e){y(e.target.value),h(e.target.value)},disabled:P})}),(0,n.jsx)(U.Text,{multiline:!1,children:_})]}),(0,n.jsxs)(H.View,{row:!0,gap:4,pt:4,align:"center",children:[k?(0,n.jsx)(en.default,{}):null,O?(0,n.jsx)(z.default,{color:"green"}):null,O||k?null:(0,n.jsx)(F.Tooltip,{tooltip:N,isDisabled:!N,children:(0,n.jsx)(ea.default,{color:"red"})})]})]}),w?(0,n.jsx)(B.StatusBanner,{colorway:"warning",text:"The ".concat(p.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(j," URL above.")}):null]})};function em(e){var t=e.icon,r=e.title,i=e.cost,a=e.paneType,o=e.initialSubdomain,s=e.recommendedProvider,l=e.replId,u=e.onSubdomainEdit,c=e.onSubdomainValidityChange;return(0,n.jsxs)(M.ShadesSurface,{elevate:"agentChat"===a?"1x":void 0,br:4,border:"regular",children:[(0,n.jsxs)(M.ShadesSurface,{border:{side:"bottom"},px:8,py:4,clsx:eo.default.propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsxs)(H.View,{clsx:eo.default.propertiesTitle,row:!0,gap:8,align:"center",children:[(0,n.jsx)(Y.IconProvider,{size:20,children:t}),(0,n.jsx)(U.Text,{children:(0,n.jsx)("strong",{children:r})})]}),i?(0,n.jsx)(U.Text,{children:i}):null]}),(0,n.jsxs)(H.View,{clsx:eo.default.urlContainer,gap:8,children:[(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(et.default,{}),(0,n.jsx)(U.Text,{children:"Primary URL"})]}),(0,n.jsx)(H.View,{row:!0,gap:8,align:"center",children:(0,n.jsx)(ef,{id:"primaryDomain",initialSubdomain:o,recommendedProvider:s,replId:l,onSubdomainEdit:u,onSubdomainValidityChange:c})})]})]})}function eh(e){var t,r,i,a,s=e.status,l=e.onDeploy,u=e.openDeploymentsPane;if("NOT_AVAILABLE"===s)return(0,n.jsxs)(H.View,{clsx:eo.default.cannotDeploy,gap:8,children:[(0,n.jsx)(B.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(ea.default,{}),title:"Published apps not available",text:"There is an issue preventing you from publishing. You may be able to resolve this using the Publishing pane."}),u?(0,n.jsx)(N.Button,{onClick:u,iconLeft:(0,n.jsx)(ei.default,{}),text:"Open Published apps",alignment:"start",colorway:"primary"}):null]});var c=null;switch(s){case"DEPLOYING":c=(0,n.jsx)(en.default,{}),t="Publishing",r="primary";break;case"FINISHED":c=(0,n.jsx)(z.default,{}),t="Published",r="green",i="Click to republish";break;case"FAILED":c=(0,n.jsx)(ea.default,{}),t="Failed",r="red",i="Click to republish";break;case"CONFIGURED_MANUALLY":c=(0,n.jsx)(q.default,{}),t="Published app configured manually";break;case"STALE":c=(0,n.jsx)(q.default,{}),t="This configuration is for an older version of the app";break;default:return null}var d=(0,n.jsx)(N.Button,{onClick:l,text:t,iconLeft:c,colorway:r,loading:"DEPLOYING"===s});return"DEPLOYING"===s||"FINISHED"===s||"FAILED"===s?(0,n.jsxs)(n.Fragment,{children:[i?(0,n.jsx)(F.Tooltip,{tooltip:i,children:d}):d,u&&"FAILED"===s?(0,n.jsx)(N.Button,{onClick:u,iconLeft:(0,n.jsx)(ei.default,{}),text:"Advanced configuration"}):null]}):(0,n.jsxs)(H.View,{clsx:(a={},(0,o._)(a,eo.default.status,!0),(0,o._)(a,eo.default.isConfiguredManually,"CONFIGURED_MANUALLY"===s),(0,o._)(a,eo.default.isStale,"STALE"===s),a),row:!0,gap:8,align:"center",children:[c,(0,n.jsx)(U.Text,{children:t})]})}var eg=(0,P.cssRecord)({group:[O.rcss.width("100%"),{"> div":{width:"100%"}}]});function ev(e){var t=e.status,r=void 0===t?"READY":t,i=e.onDeploy,a=e.openDeploymentsPane,o=e.isRedeploy,s=e.loading,l=e.state,u=(0,E.useTrackClick)().trackClick;if(!i&&!a)return null;if("READY"===r){if(i)return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(H.View,{css:eg.group,gap:6,justify:"start",align:"end",children:[(0,n.jsx)(_.SuggestDeployCreateNeonProductionDatabaseToggleSection,{state:l}),(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",justify:"end",children:[a?(0,n.jsx)(N.Button,{onClick:function(){u({target:"configure_myself_button",productArea:"publishing"}),a()},iconLeft:(0,n.jsx)(ei.default,{}),text:"Configure myself"}):null,(0,n.jsx)(N.Button,{onClick:i,text:o?"Republish":"Publish now",iconLeft:(0,n.jsx)($.default,{}),colorway:"primary",disabled:s})]})]})});if(a)return(0,n.jsx)(N.Button,{onClick:a,text:"Open Publishing",iconLeft:(0,n.jsx)($.default,{}),colorway:"primary"})}return(0,n.jsx)(eh,{status:r,onDeploy:i,openDeploymentsPane:a})}e.s(["AgentStackOneClickDeploy",()=>ec,"OneClickDeploy",()=>ed,"SuggestDeployCard",()=>eu],318037);var ex=e.i(293265),ey=e.i(782514),eb=(0,r.memo)(function(e){var t=(0,i.useDeploymentCurrentBuild)(),r=!!t,a=(0,ex.useAgentStackPlatformType)().agentStackPlatformType;return a?(0,n.jsx)(ec,{openDeploymentsPane:function(){return e.openPane({type:"deployments"})},isRedeploy:r,agentStackPlatformType:a}):(0,n.jsx)(ey.TrackingHierarchyProvider,{hierarchy:{view:"suggest_deploy_in_chat"},children:(0,n.jsx)(ed,{currentBuild:t,isRedeploy:r,openDeploymentsPane:function(){return e.openPane({type:"deployments"})},paneType:"agentChat"})})});e.s(["SuggestDeploy",()=>eb],10537),e.i(653863);var eS=e.i(973519),e_=e.i(509908),ew=e.i(248011),ej=e.i(608263),eT=e.i(127704);function eD(e){var t=e.message,i=e.suggestedAutonomyLevel,o=e.onSwitchToAutonomousBuildMode,u=(0,s._)((0,r.useState)(!1),2),c=u[0],d=u[1],p=(0,eS.useGlobalModal)().show,f=(0,ew.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,m=(0,k.useFlag)({controlName:"flag-free-plan",default:!1});if(c)return null;var h=m&&f;return(0,n.jsxs)(V.Surface,{elevated:!0,gap:4,px:8,py:6,clsx:eT.default.card,children:[(0,n.jsx)(U.Text,{children:t}),(0,n.jsxs)(H.View,{row:!0,gap:4,align:"center",wrap:"wrap",children:[(0,n.jsx)(N.Button,{text:"Dismiss",onClick:function(){(0,e_.trackAgentAnalyticsEvent)({action:"suggest_general_build_mode_dismissed"}),d(!0)}}),(0,n.jsx)(N.Button,{variant:"default",colorway:"primary",iconRight:(0,n.jsx)(ej.default,{}),text:h?"Upgrade for Autonomous Agent":"Continue with Autonomous Agent",onClick:function(){return(0,a._)(function(){return(0,l._)(this,function(e){switch(e.label){case 0:if((0,e_.trackAgentAnalyticsEvent)({action:"suggest_general_build_mode_accepted",ctaLabel:"Continue with Autonomous Agent"}),!h)return[3,2];return[4,p("UpgradeEducationModal",{context:"agent_workspace_autonomous_mode_upsell",surface:"agent_chat",highlightedFeature:"autonomousBuildMode"})];case 1:return e.sent(),[2];case 2:return null==o||o(i),[2]}})})()},clsx:eT.default.continueButton})]})]})}e.s(["SuggestGeneralBuildMode",()=>eD],225821);var ek=e.i(366492),eC=e.i(961864),eE=e.i(401211),eA=(0,r.memo)(function(e){var t=e.suggestRollbackReason,r=e.onShowCheckpoints;return(0,n.jsxs)(V.Surface,{elevated:!0,clsx:eE.default.container,gap:8,children:[(0,n.jsxs)(H.View,{gap:4,children:[(0,n.jsx)(U.Text,{variant:"subheadDefault",children:"Choose a checkpoint to roll back to"}),(0,n.jsxs)(U.Text,{children:[t," ",(0,n.jsx)(ek.default,{href:"https://docs.replit.com/replitai/checkpoints-and-rollbacks#checkpoints-and-rollbacks",target:"_blank",children:"Learn more about rollbacks"})]})]}),(0,n.jsx)(H.View,{row:!0,gap:8,align:"center",justify:"start",children:(0,n.jsx)(N.Button,{clsx:eE.default.inlineButton,size:"small",variant:"nofill",iconLeft:(0,n.jsx)(eC.default,{}),text:"View checkpoints",onClick:function(){(0,e_.trackAgentAnalyticsEvent)({action:"suggest_rollback_cta_clicked",ctaLabel:"View checkpoints"}),r()}})})]})});e.s(["SuggestRollback",()=>eA],202872)},362053,e=>{e.v({messageContainer:"MessagedBackgroundAgent-module__Worq2W__messageContainer",messageText:"MessagedBackgroundAgent-module__Worq2W__messageText"})},424608,e=>{e.v({bounce:"AnimatedEllipsis-module__5gLtQW__bounce",dot:"AnimatedEllipsis-module__5gLtQW__dot",root:"AnimatedEllipsis-module__5gLtQW__root"})},977591,e=>{e.v({resultContainer:"SubagentReportResult-module__b03XcW__resultContainer",resultText:"SubagentReportResult-module__b03XcW__resultText"})},291046,e=>{e.v({asyncLabel:"GenerateMedia-module__eXNImG__asyncLabel",container:"GenerateMedia-module__eXNImG__container",errorContent:"GenerateMedia-module__eXNImG__errorContent",grid:"GenerateMedia-module__eXNImG__grid",gridItem:"GenerateMedia-module__eXNImG__gridItem",image:"GenerateMedia-module__eXNImG__image",mediaEmptyState:"GenerateMedia-module__eXNImG__mediaEmptyState",promptItem:"GenerateMedia-module__eXNImG__promptItem",promptStatus:"GenerateMedia-module__eXNImG__promptStatus",promptText:"GenerateMedia-module__eXNImG__promptText",promptsContainer:"GenerateMedia-module__eXNImG__promptsContainer",video:"GenerateMedia-module__eXNImG__video"})},364343,e=>{e.v({container:"ImageGeneration-module__OtLLdq__container",error:"ImageGeneration-module__OtLLdq__error",image:"ImageGeneration-module__OtLLdq__image",loading:"ImageGeneration-module__OtLLdq__loading"})},687843,e=>{e.v({parameterKey:"MCPParameterRenderer-module__-cV15W__parameterKey",parameterValue:"MCPParameterRenderer-module__-cV15W__parameterValue",parametersGrid:"MCPParameterRenderer-module__-cV15W__parametersGrid"})},11286,e=>{e.v({expandableSubSection:"MCPToolResult-module__kM_UGq__expandableSubSection",securityErrorAlert:"MCPToolResult-module__kM_UGq__securityErrorAlert",securityErrorAlertTitle:"MCPToolResult-module__kM_UGq__securityErrorAlertTitle",subsectionButton:"MCPToolResult-module__kM_UGq__subsectionButton",wrappedText:"MCPToolResult-module__kM_UGq__wrappedText"})},976926,412887,672320,667059,178815,971372,774787,844225,198820,487638,344424,12219,507091,54073,641654,504186,132183,e=>{"use strict";var t,n,r,i,a=e.i(276385),o=e.i(389959),s=e.i(188507),l=e.i(389503),u=e.i(480028),c=e.i(965153),d=e.i(929872),p=e.i(960178),f=e.i(625484),m=e.i(940745),h=e.i(349556),g=e.i(362053),v=(0,o.memo)(function(e){var t,n=e.data,r=e.state===s.EventState.IN_PROGRESS,i=!!(null==n?void 0:n.message),o=!!(null==n?void 0:n.summary);t=r&&!i?"Generating message for subagent":o?"Generated message for subagent: ".concat(n.summary):"Generated message for subagent";var v=r?(0,a.jsx)(m.default,{}):(0,a.jsx)(h.default,{color:u.tokens.foregroundDimmer});return(0,a.jsx)(c.AccordionItem,{variant:"compact",chevron:i?"end":"none",disabled:!i,headerContent:(0,a.jsxs)(f.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[v,(0,a.jsx)(l.Summary,{summary:t,color:"dimmer"})]}),children:(0,a.jsx)(d.Surface,{clsx:g.default.messageContainer,children:(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",clsx:g.default.messageText,children:n.message})})})});e.s(["MessagedBackgroundAgent",()=>v],976926);var x=e.i(878420),y=e.i(64386),b=e.i(424608),S=function(e){return(0,a.jsxs)("span",(0,y._)((0,x._)({className:b.default.root},e),{children:[(0,a.jsx)("span",(0,y._)((0,x._)({className:b.default.dot},e),{children:"."})),(0,a.jsx)("span",(0,y._)((0,x._)({className:b.default.dot},e),{children:"."})),(0,a.jsx)("span",(0,y._)((0,x._)({className:b.default.dot},e),{children:"."}))]}))},_=e.i(42458),w=(0,o.memo)(function(e){var t=e.state===s.EventState.COMPLETE;return(0,a.jsxs)(f.View,{row:!0,align:"center",gap:6,px:4,children:[(0,a.jsx)(_.default,{color:u.tokens.foregroundDimmer}),(0,a.jsxs)(p.Text,{color:"dimmer",children:[t?"Sent issue report to Replit Team":"Sending issue report to Replit Team",!t&&(0,a.jsx)(S,{})]})]})});e.s(["ReportAgentIssue",()=>w],412887);var j=e.i(977591);function T(e){var t=e.data,n=e.state===s.EventState.IN_PROGRESS,r=!!(null==t?void 0:t.result),i=n?(0,a.jsx)(m.default,{}):(0,a.jsx)(h.default,{color:u.tokens.foregroundDimmer});return(0,a.jsx)(c.AccordionItem,{variant:"compact",chevron:r?"end":"none",disabled:!r,headerContent:(0,a.jsxs)(f.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[i,(0,a.jsx)(l.Summary,{summary:n?"Generating response":"Generated response",color:"dimmer"})]}),children:(0,a.jsx)(d.Surface,{clsx:j.default.resultContainer,children:(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",clsx:j.default.resultText,children:t.result})})})}e.s(["SubagentReportResult",()=>T],672320);var D=e.i(546284),k=(0,o.memo)(function(e){var t=e.data,n=e.state===s.EventState.COMPLETE,r=t.actualWaitTimeSeconds,i=n&&void 0!==r?"Waited for ".concat(function(e){if(e<60)return(0,D.default)("second",e,!0);var t=Math.floor(e/60),n=e%60;return 0===n?(0,D.default)("minute",t,!0):"".concat((0,D.default)("minute",t,!0)," ").concat((0,D.default)("second",n,!0))}(r)," for background jobs to complete"):"Waiting for background jobs to complete";return(0,a.jsx)(f.View,{row:!0,align:"center",px:4,children:(0,a.jsxs)(p.Text,{color:"dimmer",children:[i,!n&&(0,a.jsx)(S,{})]})})});e.s(["WaitingForBackgroundJobs",()=>k],667059),e.i(439725);var C=e.i(886513),E=e.i(442060),A=e.i(14007),I=e.i(399063),R=e.i(658886),P=e.i(559482),M=e.i(245225),O=e.i(368357),N=e.i(292297),L=e.i(982204),B=e.i(503536),V=e.i(841691),U=e.i(761922),F=e.i(419735),H=e.i(452002),G=e.i(243074),z=e.i(622601),q=e.i(987154),W=e.i(658975),K=e.i(406345),$=e.i(883002),Y=e.i(558273),X=e.i(797706),Q=e.i(634669),J=e.i(360877),Z=e.i(559073),ee=e.i(952030),et=e.i(926341),en=e.i(121817),er=e.i(245150),ei=e.i(216431),ea=e.i(793579),eo=e.i(566818),es=e.i(476891),el=e.i(44239),eu=e.i(659666);function ec(e){var t=e.kind,n=(0,C._)(e,["kind"]),r={alertData:(0,a.jsx)(_.default,{}),createPostgresqlDatabaseData:(0,a.jsx)(N.default,{}),createFileData:(0,a.jsx)(F.default,{}),deployData:(0,a.jsx)(B.default,{}),readFileData:(0,a.jsx)(E.default,{}),readDirData:(0,a.jsx)(G.default,{}),fileEditData:(0,a.jsx)(H.default,{}),shellExecutionData:(0,a.jsx)(es.default,{}),packagerInstallData:(0,a.jsx)(Q.default,{}),screenshotData:(0,a.jsx)(I.default,{}),toolchainInstallData:(0,a.jsx)(el.default,{}),searchFilesystemData:(0,a.jsx)(ea.default,{}),searchFileData:(0,a.jsx)(ea.default,{}),planProgressData:(0,a.jsx)(P.default,{}),packagerUninstallData:(0,a.jsx)(Q.default,{}),messageData:(0,a.jsx)(R.default,{}),memoryCompressionData:(0,a.jsx)(A.default,{}),systemDependencyInstallData:(0,a.jsx)(L.default,{}),systemDependencyUninstallData:(0,a.jsx)(L.default,{}),workflowsStartToolData:(0,a.jsx)(Z.default,{}),workflowsRestartToolData:(0,a.jsx)(en.default,{}),workflowsStopToolData:(0,a.jsx)(eo.default,{}),workflowsSetRunConfigToolData:(0,a.jsx)(Z.default,{}),workflowsRemoveRunConfigToolData:(0,a.jsx)(O.default,{}),workflowsGetOutputToolData:(0,a.jsx)(V.default,{}),presentResultsToolData:(0,a.jsx)(et.default,{}),sqlExecutionData:(0,a.jsx)(N.default,{}),summarizeObjectiveData:(0,a.jsx)(E.default,{}),revertData:(0,a.jsx)(er.default,{}),agentPlanStepBegin:(0,a.jsx)(ei.default,{}),deployConfigData:(0,a.jsx)(B.default,{}),acknowledgeUserMessage:(0,a.jsx)(M.default,{}),newSessionNudge:(0,a.jsx)(ee.default,{}),commitData:(0,a.jsx)(M.default,{}),thoughts:(0,a.jsx)(A.default,{}),blueprintsSetup:(0,a.jsx)(K.default,{}),webSearchData:(0,a.jsx)(q.default,{}),webPageVisitData:(0,a.jsx)(ea.default,{}),imageGenerationData:(0,a.jsx)(W.default,{}),createAutomationPreviewData:(0,a.jsx)(z.default,{}),agentStoppedData:(0,a.jsx)(eo.default,{}),videoGenerationData:(0,a.jsx)(W.default,{}),projectImportCompleted:(0,a.jsx)(G.default,{}),taskListData:(0,a.jsx)($.default,{}),suggestRollbackData:(0,a.jsx)(er.default,{}),samplingEvent:(0,a.jsx)(eu.default,{}),setupObjectStorageData:(0,a.jsx)(X.default,{}),endOfRunSummaryData:(0,a.jsx)(M.default,{}),stockImageData:(0,a.jsx)(W.default,{}),searchIntegrationsData:(0,a.jsx)(ea.default,{}),viewIntegrationData:(0,a.jsx)(ea.default,{}),setupModelfarmData:(0,a.jsx)(A.default,{}),viewLogsData:(0,a.jsx)(ei.default,{}),uiTestingSubagentTakeOverData:(0,a.jsx)(A.default,{}),viewSpecialFiles:(0,a.jsx)(U.default,{}),designGuidelinesData:(0,a.jsx)(J.default,{}),mcpToolData:(0,a.jsx)(Y.default,{}),viewEnvVarData:(0,a.jsx)(V.default,{}),setEnvVarData:(0,a.jsx)(O.default,{}),deleteEnvVarData:(0,a.jsx)(O.default,{}),generateMediaData:(0,a.jsx)(W.default,{}),waitingForBackgroundJobsData:(0,a.jsx)(M.default,{}),suggestGeneralBuildModeData:(0,a.jsx)(Q.default,{}),messagedBackgroundAgent:(0,a.jsx)(h.default,{}),subagentReportResultData:(0,a.jsx)(h.default,{}),reportAgentIssueData:(0,a.jsx)(_.default,{})};return t&&r[t]?(0,o.cloneElement)(r[t],n):(0,o.cloneElement)((0,a.jsx)(M.default,{}),n)}function ed(e){var t=e.toolName,n=(0,C._)(e,["toolName"]),r={programming_language_install_tool:(0,a.jsx)(L.default,{}),wait_for_background_jobs:(0,a.jsx)(M.default,{})};return t&&r[t]?(0,o.cloneElement)(r[t],n):(0,o.cloneElement)((0,a.jsx)(M.default,{}),n)}e.s(["ToolDataIcon",()=>ec],178815),e.s(["ToolNameIcon",()=>ed],971372);var ep=e.i(904851),ef=e.i(90659),em=e.i(721281),eh=e.i(530658),eg=e.i(179302),ev=e.i(266159),ex=e.i(221250),ey=e.i(700170);e.i(312917);var eb=e.i(675186),eS=e.i(826771),e_=e.i(441329),ew=e.i(653412),ej=e.i(140487),eT=e.i(630818),eD=e.i(901708),ek="cm-agent-flash-range-element",eC="rgba(100, 0, 255, 0.3)",eE=eg.EditorView.theme((0,em._)({"&":{maxHeight:"max(calc(".concat(eD.scrollSizeTokens.height," - 125px), 125px)")},".cm-gutters":{backgroundColor:u.tokens.backgroundHigher}},".".concat(ek),{display:"inline-block"})),eA=eg.EditorView.theme((0,em._)({"&":{maxHeight:"calc(".concat(eD.scrollSizeTokens.height," - 40px)")},".cm-scroller":{"&::-webkit-scrollbar":{display:"none"}},".cm-gutters":{backgroundColor:u.tokens.backgroundHigher}},".".concat(ek),{display:"inline-block"})),eI=function(){function e(t,n){var r=this;(0,ep._)(this,e),(0,em._)(this,"view",void 0),(0,em._)(this,"target",void 0),(0,em._)(this,"loop",void 0),(0,em._)(this,"previous",void 0),(0,em._)(this,"destroyed",void 0),(0,em._)(this,"dispose",void 0),this.view=t,this.target=null,this.previous="",this.destroyed=!1,this.loop=new eb.AnimationLoop(function(e,n){if(null===r.target)return n();var i=t.lineBlockAt(r.target),a=t.scrollDOM.scrollTop,o=Math.min(Math.max(i.top,0),t.scrollDOM.scrollHeight-t.scrollDOM.clientHeight),s=o-a,l=Math.abs(s);if(l<1)return t.scrollDOM.scrollTop=o,r.target=null,n();var u=3e3*e;l<1500&&(u*=Math.sqrt(l/1500));var c=s>=0?Math.max(Math.min(u,l),.5):Math.min(Math.max(-u,-l),-.5);t.scrollDOM.scrollTop+=c}),Promise.resolve().then(function(){r.destroyed||(r.previous=n.current,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n.current}}),r.target=n.current.length,r.loop.start(),r.dispose=n.subscribe(function(e){if(e.startsWith(r.previous)){var n=r.previous.length,i=e.length,a=e.slice(n),o=ev.addAnimatedRange.of({from:n,to:i,class:ek,animation:{duration:550,fill:"backwards",easing:"ease-out",keyframes:{opacity:[.675,.75,1],filter:["grayscale(0.325)","grayscale(0)","grayscale(0)"],backgroundColor:[eC,eC,"transparent"],offset:[0,.18181818181818182,1]}}});t.dispatch({changes:{from:n,insert:a},effects:o})}else{var s=r.view.state.doc.length;t.dispatch({changes:{from:0,to:s,insert:e}})}r.previous=e,r.target=t.state.doc.length,r.loop.start()}))})}return(0,ef._)(e,[{key:"destroy",value:function(){var e;this.destroyed=!0,this.target=null,this.loop.stop(),null==(e=this.dispose)||e.call(this)}}]),e}(),eR=new ey.ReactCompartment(function(e){return eg.ViewPlugin.define(function(t){return new eI(t,e)})});function eP(e){var t=e.path,n=e.code,r=e.openPane,i=e.showCode,s=(0,e_.useIsInMobileWorkspace)(),l=(0,eh._)((0,o.useState)(function(){return(0,eS.observableValue)(n)}),1)[0];(0,o.useEffect)(function(){l.current!==n&&l.set(n)},[l,n]);var u=eR.use(l),c=(0,o.useCallback)(function(){r&&r({type:"codeEditor",data:{path:t}})},[r,t]);return(0,a.jsx)(ew.EventPane,{left:(0,a.jsx)(eT.default,{path:t,size:16}),title:(0,a.jsx)(eM,{path:t,onClick:c}),onOpenPane:c,openPaneButtonAlt:"Open code file",children:void 0===i||i?(0,a.jsx)(ex.default,{filePath:t,extensions:[s?eA:eE,u],hideGutter:s,fontSize:s?12:void 0,lineWrapping:!1,hideIndentMarker:!0,readOnly:!0}):null})}function eM(e){var t=e.path,n=e.onClick;return n?(0,a.jsx)(ej.Button,{variant:"underlinedOnHover",text:eO(t),onClick:n}):(0,a.jsx)(p.Text,{children:eO(t)})}function eO(e){return e.replace(/^\//,"")}function eN(e){var t=e.data,n=e.openPane;return(0,a.jsx)(eP,{path:t.path,code:t.content,openPane:n})}function eL(e){var t=e.openPane;return(0,a.jsx)(ew.EventPane,{left:(0,a.jsx)(N.default,{size:16}),title:"Created PostgreSQL Database",onOpenPane:function(){return t({type:"neon"})}})}e.s(["CodePath",()=>eM,"default",()=>eP],774787),e.s(["CreateFile",()=>eN],844225),e.s(["CreatePostgreSQLDatabase",()=>eL],198820);var eB=e.i(906368),eV=e.i(167626),eU=e.i(399119),eF=e.i(445789),eH=e.i(463348),eG=((t={}).FILE_HEADER_MISSING="FILE_HEADER_MISSING",t.FILE_HEADER_INVALID="FILE_HEADER_INVALID",t.FILE_HEADER_SAME_SIDE="FILE_HEADER_SAME_SIDE",t.FILE_HEADER_MISSING_LABEL="FILE_HEADER_MISSING_LABEL",t.HUNK_EMPTY="HUNK_EMPTY",t.HUNK_HEADER_INVALID="HUNK_HEADER_INVALID",t.HUNK_LINE_INVALID="HUNK_LINE_INVALID",t.GIT_DIFF_HEADER_MISSING="GIT_DIFF_HEADER_MISSING",t.GIT_DIFF_HEADER_INVALID="GIT_DIFF_HEADER_INVALID",t.GIT_DIFF_HEADER_LINE_INVALID="GIT_DIFF_HEADER_LINE_INVALID",t.NEVER="NEVER",t),ez=(n={},(0,em._)(n,"FILE_HEADER_MISSING","Missing one-of either `---` or `+++` headers"),(0,em._)(n,"FILE_HEADER_INVALID","File header does not match the expected format"),(0,em._)(n,"FILE_HEADER_SAME_SIDE","Both file headers use the same prefix (e.g. `---`)"),(0,em._)(n,"FILE_HEADER_MISSING_LABEL","File header is missing a label"),(0,em._)(n,"HUNK_EMPTY","Hunk is empty"),(0,em._)(n,"HUNK_HEADER_INVALID","Hunk header does not match the expected format"),(0,em._)(n,"HUNK_LINE_INVALID","Hunk line does not match the expected format"),(0,em._)(n,"GIT_DIFF_HEADER_MISSING","Git diff header is missing"),(0,em._)(n,"GIT_DIFF_HEADER_INVALID","Git diff header does not match the expected format"),(0,em._)(n,"GIT_DIFF_HEADER_LINE_INVALID","Incorrectly formatted or unknown git diff header line"),(0,em._)(n,"NEVER","Encountered unreachable code, this should never happen"),n),eq=function(e){function t(e){var n,r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,ep._)(this,t),n=(0,eU._)(this,t,["Exception when parsing diff: ".concat(e," - ").concat(ez[e])]),(0,em._)(n,"reason",void 0),(0,em._)(n,"patch",void 0),(0,em._)(n,"context",void 0),(0,em._)(n,"chunk",void 0),n.name="ParseError",n.reason=e,n.context=null!=(r=o.context)?r:null,n.chunk=null!=(i=o.chunk)?i:null,n.patch=null!=(a=o.patch)?a:null,n}return(0,eF._)(t,e),t}((0,eH._)(Error)),eW=/(?:\\[0-7]{1,3})+/g,eK=/\\([0-7]{1,3})/g,e$=/\\([0btvfrn])/g;function eY(e){return e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replaceAll("\\\\","￼").replaceAll('\\"','"').replace(eW,function(e){null!=r||(r=new TextDecoder);var t=Uint8Array.from(Array.from(e.matchAll(eK)),function(e){return parseInt(e[1],8)});return r.decode(t)}).replace(e$,function(e,t){switch(t){case"0":return"\0";case"b":return"\b";case"t":return"	";case"v":return"\v";case"f":return"\f";case"r":return"\r";case"n":return"\n";default:throw Error("unexpected match")}}).replaceAll("￼","\\"):e}function eX(e,t){var n=e.startsWith("a/"),r=t.startsWith("b/");return e=n&&(r||"/dev/null"===t)?e.slice(2):e,t=r&&(n||"/dev/null"===e)?t.slice(2):t,[e,t]}var eQ=/^(---|\+\+\+)[ \t](.+?)([ \t]\d+-\d+-\d+[ \t]\d+:\d+:\d+(?:\.\d+)?[ \t](?:-|\+)\d+)?$/,eJ=RegExp("^@@[ \\t]+-(\\d+)(?:,(\\d+))?[ \\t]\\+(\\d+)(?:,(\\d+))?[ \\t]@@(?:[ \\t](.*))?$","s"),eZ=RegExp("^([ +-])(.*)$","s"),e0=/(?:^|\n)(?=@@)/;function e1(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.split(/\r?\n/),i=r[0],a=r[1];if(!i||!a)throw new eq(eG.FILE_HEADER_MISSING,{context:e});var o=eQ.exec(i),s=eQ.exec(a);if(!o||!s)throw new eq(eG.FILE_HEADER_INVALID,{context:e,chunk:o?a:i});if(o[1]===s[1])throw new eq(eG.FILE_HEADER_SAME_SIDE,{context:e});var l=null,u=null;if("---"===o[1]?l=o[2]:"+++"===o[1]&&(u=o[2]),"---"===s[1]?l=s[2]:"+++"===s[1]&&(u=s[2]),null===l||null===u)throw new eq(eG.FILE_HEADER_MISSING_LABEL,{context:e});n.git&&(l=eY(l),u=eY(u),l=(t=(0,eh._)(eX(l,u),2))[0],u=t[1],l="/dev/null"===l?null:l,u="/dev/null"===u?null:u);var c=r.slice(2).join("\n").split(e0);return 1===c.length&&""===c[0]?{labelA:l,labelB:u,hunks:[]}:{labelA:l,labelB:u,hunks:c.map(function(t){var n=t.split("\n").filter(function(e){return"\\ No newline at end of file"!==e});if(n.length&&!n[n.length-1]&&n.pop(),!n.length)throw new eq(eG.HUNK_EMPTY,{context:e,chunk:t});var r=eJ.exec(n[0]);if(!r)throw new eq(eG.HUNK_HEADER_INVALID,{context:e,chunk:n[0]});var i=parseInt(r[1],10),a=i+(r[2]?parseInt(r[2],10):1)-1,o=parseInt(r[3],10),s=o+(r[4]?parseInt(r[4],10):1)-1,l=r[5]||null,u=i,c=o;return{fromA:i,toA:a,fromB:o,toB:s,heading:l,lines:n.slice(1).map(function(t){var n,r,i,a=eZ.exec(t);if(!a)throw new eq(eG.HUNK_LINE_INVALID,{context:e,chunk:t});var o=a[2];switch(a[1]){case" ":n="same",r=u,i=c,u++,c++;break;case"+":n="added",r=null,i=c,c++;break;case"-":n="removed",r=u,i=null,u++;break;default:throw new eq(eG.NEVER,{context:e,chunk:t})}return{type:n,content:o,numberA:r,numberB:i}})}})}}var e2={"old mode":/^old mode[ \t](\d{6})$/,"new mode":/^new mode[ \t](\d{6})$/,"deleted file mode":/^deleted file mode[ \t](\d{6})$/,"new file mode":/^new file mode[ \t](\d{6})$/,"copy from":/^copy from[ \t](.+)$/,"copy to":/^copy to[ \t](.+)$/,"rename from":/^rename from[ \t](.+)$/,"rename to":/^rename to[ \t](.+)$/,"similarity index":/^similarity index[ \t](\d+)%$/,"dissimilarity index":/^dissimilarity index[ \t](\d+)%$/,index:/^index (.+?)\.\.(.+?)(?:[ \t]([0-7]{6}))?$/},e4=/^Binary files (.*) and (.*) differ$/,e8=/^diff --git ("a\/.*?"|a\/.*?)[ \t]("b\/.*?"|b\/.*?)$/,e6=/(?:^|\n)(?=diff --git)/;function e3(e){for(var t in e2){var n=e2[t],r=e.match(n);if(r)switch(t){case"old mode":case"new mode":case"deleted file mode":case"new file mode":return{type:t,mode:r[1]};case"copy from":case"copy to":case"rename from":case"rename to":return{type:t,path:eY(r[1])};case"similarity index":case"dissimilarity index":return{type:t,index:parseInt(r[1],10)};case"index":return{type:t,hashA:r[1],hashB:r[2],mode:r[3]?r[3]:null}}}throw new eq(eG.GIT_DIFF_HEADER_LINE_INVALID,{chunk:e})}function e5(e){var t=e.split(/\r?\n/);if(!t[0])throw new eq(eG.GIT_DIFF_HEADER_MISSING,{context:e});if(!e8.test(t[0]))throw new eq(eG.GIT_DIFF_HEADER_INVALID,{context:e,chunk:t[0]});var n=t.findIndex(function(e){return e.startsWith("---")});if(-1===n){var r,i=t[0].match(e8);if(!i)throw new eq(eG.FILE_HEADER_INVALID,{context:e,chunk:t[0]});var a=i[1],o=i[2],s=!1;a=eY(a),o=eY(o),a=(r=(0,eh._)(eX(a,o),2))[0],o=r[1],a="/dev/null"===a?null:a,o="/dev/null"===o?null:o;for(var l=[],u=1;u<t.length;u++)if(t[u].trim()){if(e4.test(t[u])){s=!0;break}l.push(e3(t[u]))}return{pathA:a,pathB:o,headers:l,binary:s,hunks:[]}}for(var c=!1,d=[],p=1;p<n;p++){if(e4.test(t[p])){c=!0;break}d.push(e3(t[p]))}var f=e1(t.slice(n).join("\n"),{git:!0});return{pathA:f.labelA,pathB:f.labelB,headers:d,binary:c,hunks:f.hunks}}var e9=e.i(960933),e7=e9.Type.Union([e9.Type.Object({type:e9.Type.Literal("added"),content:e9.Type.String(),numberA:e9.Type.Null(),numberB:e9.Type.Number()},{title:"HunkLineAdded"}),e9.Type.Object({type:e9.Type.Literal("removed"),content:e9.Type.String(),numberA:e9.Type.Number(),numberB:e9.Type.Null()},{title:"HunkLineRemoved"}),e9.Type.Object({type:e9.Type.Literal("same"),content:e9.Type.String(),numberA:e9.Type.Integer(),numberB:e9.Type.Integer()},{title:"HunkLineSame"})],{title:"HunkLine"}),te=e9.Type.Object({fromA:e9.Type.Integer(),toA:e9.Type.Integer(),fromB:e9.Type.Integer(),toB:e9.Type.Integer(),heading:e9.Type.Union([e9.Type.String(),e9.Type.Null()]),lines:e9.Type.Array(e7)},{title:"Hunk"}),tt=e9.Type.Object({labelA:e9.Type.Union([e9.Type.String(),e9.Type.Null()]),labelB:e9.Type.Union([e9.Type.String(),e9.Type.Null()]),hunks:e9.Type.Array(te)},{title:"UnifiedDiff"}),tn=e9.Type.Union([e9.Type.Object({type:e9.Type.Literal("old mode"),mode:e9.Type.String()},{title:"GitDiffHeaderLineOldMode"}),e9.Type.Object({type:e9.Type.Literal("new mode"),mode:e9.Type.String()},{title:"GitDiffHeaderLineNewMode"}),e9.Type.Object({type:e9.Type.Literal("deleted file mode"),mode:e9.Type.String()},{title:"GitDiffHeaderLineDeletedFileMode"}),e9.Type.Object({type:e9.Type.Literal("new file mode"),mode:e9.Type.String()},{title:"GitDiffHeaderLineNewFileMode"}),e9.Type.Object({type:e9.Type.Literal("copy from"),path:e9.Type.String()},{title:"GitDiffHeaderLineCopyFrom"}),e9.Type.Object({type:e9.Type.Literal("copy to"),path:e9.Type.String()},{title:"GitDiffHeaderLineCopyTo"}),e9.Type.Object({type:e9.Type.Literal("rename from"),path:e9.Type.String()},{title:"GitDiffHeaderLineRenameFrom"}),e9.Type.Object({type:e9.Type.Literal("rename to"),path:e9.Type.String()},{title:"GitDiffHeaderLineRenameTo"}),e9.Type.Object({type:e9.Type.Literal("similarity index"),index:e9.Type.Integer()},{title:"GitDiffHeaderLineSimilarityIndex"}),e9.Type.Object({type:e9.Type.Literal("dissimilarity index"),index:e9.Type.Integer()},{title:"GitDiffHeaderLineDissimilarityIndex"}),e9.Type.Object({type:e9.Type.Literal("index"),hashA:e9.Type.String(),hashB:e9.Type.String(),mode:e9.Type.Union([e9.Type.String(),e9.Type.Null()])},{title:"GitDiffHeaderLineIndex"})],{title:"GitDiffHeaderLine"});e9.Type.Object({pathA:e9.Type.Union([e9.Type.String(),e9.Type.Null()]),pathB:e9.Type.Union([e9.Type.String(),e9.Type.Null()]),headers:e9.Type.Array(tn),binary:e9.Type.Optional(e9.Type.Boolean()),hunks:e9.Type.Array(te)},{title:"GitDiff"}),e.s(["UnifiedDiffSchema",()=>tt],487638),e.s([],344424);var tr=e.i(968323),ti=e.i(446530),ta=e.i(613355),to=e.i(346715),ts=u.tokens.outlineDimmest,tl=(0,o.createContext)({});function tu(){return(0,o.useContext)(tl)}function tc(e){var t=e.diff,n=e.onPathClick,r=e.onViewFullDiff,i=e.children,s=(0,o.useMemo)(function(){var e=!0,n=!1,r=void 0;try{for(var i,a=t.headers[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;if("index"===o.type)return{a:o.hashA,b:o.hashB}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}},[t]),l=(0,o.useMemo)(function(){return{handlePathNavigation:n?function(e,r){var i="a"===e?t.pathA:t.pathB,a="a"===e?null==s?void 0:s.a:null==s?void 0:s.b;i&&n({path:i,revision:a,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=t.pathB||t.pathA,n=(null==s?void 0:s.b)||(null==s?void 0:s.a);e&&r({path:e,revision:n})}:void 0}},[t,n,r,s]);return(0,a.jsx)(tl.Provider,{value:l,children:i})}var td=e.i(297083),tp=e.i(817556),tf=e.i(562713),tm=e.i(348704),th=e.i(731291);e.i(694906);var tg=e.i(446692),tv=e.i(703774),tx=new WeakSet,ty="/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */",tb=e.i(788106),tS=e.i(196353),t_=e.i(264661),tw="--number-width-a",tj="--number-width-b",tT=(0,ti.cssRecord)({content:{marginLeft:u.tokens.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:u.tokens.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:u.tokens.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(u.tokens.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(u.tokens.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(ts)}},"&.is-skipped":{paddingTop:u.tokens.space4,paddingBottom:u.tokens.space4,color:u.tokens.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:u.tokens.accentPositiveStronger},".is-removed &":{color:u.tokens.accentNegativeStronger},".is-same &":{color:u.tokens.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:u.tokens.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(tw,")")},"&.is-side-b":{width:"var(".concat(tj,")")}}});function tD(e){var t=(0,tv.useTheme)().values;return(0,o.useMemo)(function(){if("same"===e)return"";var n="added"===e?t.global.accentPositiveDefault:t.global.accentNegativeDefault;return(0,tb.default)(n).alpha(.2).hex()},[e,t.global.accentPositiveDefault,t.global.accentNegativeDefault])}function tk(e){var t=e.type,n=void 0===t?"same":t,r=e.changes,i=tu().handleViewFullDiffNavigation,o=tD(n);if(r<=0)return null;var s=!1,l=!1;return("removed"===n||"same"===n)&&(s=(0,a.jsx)(tS.default,{size:20})),("added"===n||"same"===n)&&(l=(0,a.jsx)(tS.default,{size:20})),(0,a.jsxs)("div",{className:"is-".concat(n," is-skipped"),css:tT.line,style:{backgroundColor:o},children:[(0,a.jsx)(tE,{side:"a",type:n,number:s}),(0,a.jsx)(tE,{side:"b",type:n,number:l}),(0,a.jsx)("div",{css:tT.content,children:(0,a.jsx)("span",{css:tT.span,children:i?(0,a.jsx)(ej.Button,{text:"view ".concat(r," more ").concat((0,D.default)("change",r)),iconLeft:(0,a.jsx)(t_.default,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,D.default)("change",r)," not shown")})})]})}function tC(e){var t=e.type,n=e.content,r=e.numberA,i=e.numberB,o=tD(t);return(0,a.jsxs)("div",{className:"is-".concat(t),css:tT.line,style:{backgroundColor:o},children:[(0,a.jsx)(tE,{side:"a",type:t,number:void 0===r?null:r}),(0,a.jsx)(tE,{side:"b",type:t,number:void 0===i?null:i}),(0,a.jsx)("div",{className:"is-".concat(t),css:tT.content,children:"string"==typeof n?(0,a.jsx)("span",{css:tT.span,children:n||(0,a.jsx)("span",{css:tT.nbsp,children:" "})}):n.map(function(e,t){var n=e.text,r=e.tags;return(0,a.jsx)("span",{className:r,css:tT.span,children:n||(0,a.jsx)("span",{css:tT.nbsp,children:" "})},t)})})]})}function tE(e){var t=e.side,n=e.type,r=e.number,i=tu().handlePathNavigation;return!1===r?null:null===r?(0,a.jsx)("div",{css:tT.numberContainer,className:"is-side-".concat(t)}):(0,a.jsx)("div",{css:tT.numberContainer,className:"is-side-".concat(t),children:i&&"number"==typeof r?(0,a.jsx)(ej.Button,{text:(0,a.jsx)("span",{css:tT.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===n?"a":"b",r)}}):(0,a.jsx)("span",{css:tT.number,children:r})})}var tA=(0,ti.cssRecord)({hunk:[ta.rcss.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(ts)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[ta.rcss.colorMixBg(u.tokens.interactiveBackground,u.tokens.surfaceBackground),{gap:"1ch",padding:"".concat(u.tokens.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(ts)}}],countAdded:[ta.rcss.textAlign.right,ta.rcss.color.accentPositiveStronger,ta.rcss.width("var(".concat(tj,")"))],countRemoved:[ta.rcss.textAlign.right,ta.rcss.color.accentNegativeStronger,ta.rcss.width("var(".concat(tw,")"))],sectionHeading:[ta.rcss.ml(8),ta.rcss.font.code,ta.rcss.color.foregroundDimmer],hunks:[ta.rcss.flex.column,ta.rcss.font.code,(i={lineHeight:u.tokens.lineHeightSmall},(0,em._)(i,"> div:last-child"+ty,ta.rcss.pb(2)),(0,em._)(i,"> div:first-child"+ty,ta.rcss.pt(4)),i)]});function tI(e){var t=e.hunk,n=e.hideHeader,r=e.maxLines,i=(0,o.useMemo)(function(){var e=0,n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t.lines[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;"added"===l.type?n++:"removed"===l.type&&e++}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{a:e,b:n}},[t]),s=(0,o.useMemo)(function(){return void 0!==r&&t.lines.length>r?t.lines.slice(0,r):t.lines},[t,r]);return(0,a.jsxs)(f.View,{css:tA.hunk,children:[n?null:(0,a.jsxs)(f.View,{css:tA.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,a.jsxs)("span",{css:tA.countRemoved,children:["-",i.a]}),(0,a.jsxs)("span",{css:tA.countAdded,children:["+",i.b]}),t.heading?(0,a.jsx)("span",{css:tA.sectionHeading,children:t.heading}):null]}),(0,a.jsx)(f.View,{css:tA.hunks,children:s.map(function(e,t){return(0,a.jsx)(tC,(0,x._)({},e),t)})})]})}var tR=e.i(369948),tP=(0,ti.cssRecord)({diff:[ta.rcss.flex.column,{"&.is-patch-with-border":ta.rcss.borderRadius(4)}],header:[ta.rcss.rowWithGap(8),ta.rcss.my(8),ta.rcss.align.center,ta.rcss.flex.wrap],headerFile:{lineHeight:1,"&.is-added":ta.rcss.color.accentPositiveStronger,"&.is-removed":ta.rcss.color.accentNegativeStronger},binaryTag:[ta.rcss.color.accentPrimaryStronger],container:[ta.rcss.flex.column,ta.rcss.overflow("hidden"),{".is-patch-with-border &":[ta.rcss.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(ts),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(u.tokens.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(u.tokens.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(u.tokens.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(u.tokens.outlineDimmer)}}],"&.is-no-changes":[ta.rcss.p(8),ta.rcss.center],"&.is-binary":[ta.rcss.p(8),ta.rcss.center]}],file:[ta.rcss.flex.column,ta.rcss.font.code,{lineHeight:u.tokens.lineHeightSmall,"> div:last-child":ta.rcss.pb(2),"> div:first-child":ta.rcss.pt(4)}]});function tM(e){var t,n,r,i,s,l,u=e.diff,c=e.maxLines,d=e.noHeader,p=e.noBorder,m=e.background,h=e.compressed,g=e.onPathClick,v=e.onViewFullDiff,b=(n=(t=(0,eh._)((0,o.useState)(u),2))[0],r=t[1],i=(0,tv.useTheme)(),s=(0,o.useMemo)(function(){return(0,tm.highlightStyleFromSpecs)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,o.useEffect)(function(){!s.module||tx.has(s.module)||(tf.StyleModule.mount(document,s.module),tx.add(s.module))},[s.module]),(0,o.useEffect)(function(){r(u);var e=0,t=!0,n=!1,i=void 0;try{for(var a,o=u.hunks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;if((e+=l.lines.length)>1e3)return}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var c=new AbortController,d=c.signal;return(0,td._)(function(){var e,t,n,r,i,a,o;return(0,tp._)(this,function(l){switch(l.label){case 0:if(0===u.hunks.length)return[2,u];if(e=u.pathA?tg.FileTypeRepository.from(u.pathA):null,t=u.pathB?tg.FileTypeRepository.from(u.pathB):null,n=null,r=null,!(e&&e.codeMirrorLanguage))return[3,4];if(!e.codeMirrorLanguage.support)return[3,1];return i=e.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,e.codeMirrorLanguage.load()];case 2:i=l.sent().language.parser,l.label=3;case 3:n=i,l.label=4;case 4:if(!(t&&t.codeMirrorLanguage))return[3,8];if(!t.codeMirrorLanguage.support)return[3,5];return a=t.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,t.codeMirrorLanguage.load()];case 6:a=l.sent().language.parser,l.label=7;case 7:r=a,l.label=8;case 8:if(d.aborted||!n&&!r)return[2,u];return o=u.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),i=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",i=i?"".concat(e.heading,"\n").concat(i):"");var a=(0,th.renderCodeToHighlightedLines)(t,s,n),o=(0,th.renderCodeToHighlightedLines)(i,s,r);return e.heading&&t&&a.shift(),e.heading&&i&&o.shift(),(0,y._)((0,x._)({},e),{lines:e.lines.map(function(t){if(null!==t.numberB)n="b",r=t.numberB;else if(null!==t.numberA)n="a",r=t.numberA;else throw Error("Invalid line, no number for either side");var n,r,i="a"===n?a[r-e.fromA]:o[r-e.fromB];if(!i)throw Error("Line not found in side ".concat(n));return(0,y._)((0,x._)({},t),{content:i})})})}),[2,(0,y._)((0,x._)({},u),{hunks:o})]}})})().then(function(e){d.aborted||r(e)}),function(){c.abort()}},[u,s]),n),S=(0,o.useMemo)(function(){var e=0,t=0,n=0,r=0,i=!0,a=!1,o=void 0;try{for(var s,l=u.hunks[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=0,p=0,f=!0,m=!1,g=void 0;try{for(var v,x=c.lines[Symbol.iterator]();!(f=(v=x.next()).done);f=!0){var y=v.value;y.numberA&&(n=Math.max(n,y.numberA)),y.numberB&&(r=Math.max(r,y.numberB)),"removed"===y.type&&d++,"added"===y.type&&p++}}catch(e){m=!0,g=e}finally{try{f||null==x.return||x.return()}finally{if(m)throw g}}e=Math.max(e,d),t=Math.max(t,p)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var b=n.toString().length,S=r.toString().length;if((!h||u.hunks.length>1)&&u.pathA&&u.pathB){var _=e.toString().length+1,w=t.toString().length+1;b=Math.max(b,_),S=Math.max(S,w)}return{a:b,b:S}},[u,h]);return(0,a.jsx)(tc,{diff:u,onPathClick:g,onViewFullDiff:v,children:(0,a.jsxs)(f.View,{css:tP.diff,className:p?"":"is-patch-with-border",style:(l={},(0,em._)(l,tw,"".concat(S.a,"ch")),(0,em._)(l,tj,"".concat(S.b,"ch")),l),children:[!d&&(u.pathA||u.pathB)?(0,a.jsx)(tN,{diff:b}):null,(0,a.jsx)(tB,{diff:b,compressed:h,background:m,maxLines:c})]})})}function tO(){return(0,a.jsx)(p.Text,{css:tP.binaryTag,variant:"small",children:"Binary"})}function tN(e){var t=e.diff;if(t.pathA&&t.pathB&&t.pathA===t.pathB)return(0,a.jsxs)(f.View,{css:tP.header,children:[(0,a.jsx)(tL,{diff:t,side:"b"}),t.binary?(0,a.jsx)(tO,{}):null]});if(t.pathA&&t.pathB&&t.pathA!==t.pathB)return(0,a.jsxs)(f.View,{css:tP.header,children:[(0,a.jsx)(tL,{diff:t,side:"a"}),t.binary?(0,a.jsx)(tO,{}):null,(0,a.jsx)(tR.default,{color:u.tokens.foregroundDimmest}),(0,a.jsx)(tL,{diff:t,side:"b"}),t.binary?(0,a.jsx)(tO,{}):null]});var n=t.pathA?"a":"b";return(0,a.jsxs)(f.View,{css:tP.header,children:[(0,a.jsx)(tL,{diff:t,side:n}),t.binary?(0,a.jsx)(tO,{}):null]})}function tL(e){var t=e.diff,n=e.side,r=tu().handlePathNavigation,i="a"===n?t.pathA:t.pathB,o="a"===n?t.pathB:t.pathA;if(!i)return null;var s="";o!==i&&(s="b"===n?"is-added":"is-removed");var l=(0,a.jsx)(p.Text,{className:s,css:tP.headerFile,children:i});return r?(0,a.jsx)(ej.Button,{text:l,iconLeft:(0,a.jsx)(eT.default,{path:i}),onClick:function(){return r(n)},variant:"underlinedOnHover"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eT.default,{path:i}),l]})}function tB(e){var t=e.diff,n=e.background,r=e.compressed,i=e.maxLines,o=null===n?void 0:n||"root";if(t.binary)return(0,a.jsx)(d.Surface,{className:"is-binary",css:tP.container,background:o,children:(0,a.jsx)(p.Text,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!t.hunks.length)return(0,a.jsx)(d.Surface,{className:"is-no-changes",css:tP.container,background:o,children:(0,a.jsx)(p.Text,{color:"dimmer",children:"No additional changes"})});if(t.pathA&&t.pathB){var s=0,l=t.hunks.reduce(function(e,t){return e+t.lines.reduce(function(e,t){return e+ +("same"!==t.type)},0)},0),u=t.hunks.map(function(e){if(void 0!==i&&s>=i)return null;var n=void 0!==i?i-s:void 0;return l-=e.lines.slice(0,n).reduce(function(e,t){return e+ +("same"!==t.type)},0),s+=e.lines.length+1,(0,a.jsx)(tI,{hunk:e,hideHeader:r&&1===t.hunks.length,maxLines:n},s)});return(0,a.jsxs)(d.Surface,{className:"is-modified",css:tP.container,background:o,children:[u,(0,a.jsx)(tk,{changes:l})]})}var c=t.pathB?"b":"a",m="a"===c?"removed":"added",h=t.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===c?"added":"removed")}).map(function(e){return e.content})}),g=void 0!==i?h.slice(0,i):h,v=h.length-g.length;return(0,a.jsx)(d.Surface,{className:"is-".concat(m),css:tP.container,background:o,children:(0,a.jsxs)(f.View,{css:tP.file,children:[g.map(function(e,t){return(0,a.jsx)(tC,{type:m,content:e,numberA:"a"===c&&t+1,numberB:"b"===c&&t+1},t)}),v<=0?null:(0,a.jsx)(tk,{type:m,changes:v})]})})}var tV=(0,ti.cssRecord)({patch:ta.rcss.colWithGap(12),truncatedDiffsMessage:[ta.rcss.color.foregroundDimmest,ta.rcss.align.center,ta.rcss.justify.start]}),tU=/^diff --git /m;function tF(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function tH(e){var t=e.patch,n=e.maxLines,r=e.maxDiffs,i=e.noHeader,s=e.noBorder,l=e.background,u=e.compressed,c=e.onPathClick,d=e.onViewFullDiff,m=(0,o.useMemo)(function(){return function e(t){return Array.isArray(t)?t.flatMap(function(t){return e(t)}):"string"==typeof t?tU.test(t)?function(e){var t=e.split(e6);t.length&&!t[0].startsWith("diff --git")&&t.shift();try{return t.map(function(e){return e.endsWith("\n")?e.slice(0,-1):e}).map(e5)}catch(t){throw(0,eV._)(t,eq)&&(t.patch=e),t}}(t):[tF(e1(t))]:"headers"in t?[t]:[tF(t)]}(t)},[t]),h=(0,o.useMemo)(function(){var e=void 0!==r?Math.min(m.length,r):m.length;if(!u&&e===m.length)return m;for(var t=[],n=0;n<e;n++){var i=m[n];if(!u){t.push(i);continue}t.push((0,y._)((0,x._)({},i),{hunks:i.hunks.map(function(e){return function(e){for(var t,n,r,i,a=(0,to._)(e.lines),o=e.fromA,s=e.fromB,l=e.toA,u=e.toB;(null==(t=a[0])?void 0:t.type)==="same"&&(null==(n=a[1])?void 0:n.type)==="same";)a.shift(),o++,s++;for(;(null==(r=a[a.length-1])?void 0:r.type)==="same"&&(null==(i=a[a.length-2])?void 0:i.type)==="same";)a.pop(),l--,u--;return(0,y._)((0,x._)({},e),{fromA:o,fromB:s,toA:l,toB:u,lines:a})}(e)}).filter(function(e){return e.lines.length>0})}))}return t},[m,r,u]),g=m.length-h.length,v=1===g?"file":"files";return(0,a.jsxs)(f.View,{css:tV.patch,children:[h.map(function(e,t){return(0,a.jsx)(tM,{diff:e,maxLines:n,noHeader:i,noBorder:s,background:l,compressed:u,onPathClick:c,onViewFullDiff:d},t)}),g<=0?null:(0,a.jsx)(f.View,{css:tV.truncatedDiffsMessage,pt:4,row:!0,gap:4,children:d?(0,a.jsx)(ej.Button,{text:"view in full (".concat(g," more changed ").concat(v,")"),iconLeft:(0,a.jsx)(t_.default,{}),onClick:function(){return d({})},variant:"underlinedOnHover",colorway:"primary"}):(0,a.jsxs)(p.Text,{children:[g," other changed ",v," not shown"]})})]})}e.s(["default",()=>tH],12219);var tG=(0,ti.cssRecord)({countRemoved:[ta.rcss.color.accentNegativeStronger],countAdded:[ta.rcss.color.accentPositiveStronger]});function tz(e){var t=e.path,n=e.type,r=e.diff,i=e.openPane,s=(0,o.useMemo)(function(){var e=0,t=0,n=!0,i=!1,a=void 0;try{for(var o,s=r.hunks[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,u=!0,c=!1,d=void 0;try{for(var p,f=l.lines[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;"removed"===m.type?e++:"added"===m.type&&t++}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return{added:t,removed:e}},[r]),l=(0,o.useCallback)(function(){i&&i({type:"codeEditor",data:{path:t}})},[i,t]),u=(0,o.useCallback)(function(){i&&i({type:"diff",data:{type:"patch",diff:r}})},[i,r]);return(0,a.jsx)(ew.EventPane,{left:(0,a.jsx)(eT.default,{path:t,size:16}),title:(0,a.jsx)(tW,{type:n,path:t,onClick:l}),right:(0,a.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,a.jsx)(tq,{type:n,removed:s.removed,added:s.added})}),onOpenPane:u,openPaneButtonAlt:"Open full diff",elevated:!0,children:(0,a.jsx)(tH,{patch:r,maxLines:16,compressed:!1,background:null,noHeader:!0,noBorder:!0})})}function tq(e){var t=e.type,n=e.removed,r=e.added;switch(t){case"modify":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Text,{css:tG.countRemoved,children:["-",n]}),(0,a.jsxs)(p.Text,{css:tG.countAdded,children:["+",r]})]});case"create":return(0,a.jsxs)(p.Text,{css:tG.countAdded,children:["+",r]});case"delete":return(0,a.jsxs)(p.Text,{css:tG.countRemoved,children:["-",n]})}}function tW(e){var t,n=e.type,r=e.path,i=e.onClick;switch(n){case"create":t=u.tokens.accentPositiveStronger;break;case"delete":t=u.tokens.accentNegativeStronger}return i?(0,a.jsx)(ej.Button,{variant:"underlinedOnHover",style:{color:t},text:tK(r),onClick:i}):(0,a.jsx)(p.Text,{style:{color:t},children:tK(r)})}function tK(e){return e.replace(/^\//,"")}var t$=e.i(396776);function tY(e){var t=e.data,n=t.path,r=t.diff,i=t.state,l=e.openPane,u=i===s.EventState.COMPLETE,c=(0,o.useRef)(null),d=(0,o.useMemo)(function(){var e=function(e){var t=e.previous,n=e.path,r=e.diff,i=e.complete;if(!r||"\n"===r)return i?(eB.withScope(function(e){e.setTag("agent",!0),e.setExtras({diff:r}),eB.captureException(Error("No changes in diff"))}),(0,tr.Err)("This diff cannot be displayed")):(0,tr.Ok)(tX(n));if(!i)try{return(0,tr.Ok)(e1(r))}catch(e){if(t&&t.ok)return t;return(0,tr.Ok)(tX(n))}try{return(0,tr.Ok)(e1(r))}catch(e){return eB.withScope(function(t){t.setTag("agent",!0),t.setExtras({diff:r}),eB.captureException(e)}),(0,tr.Err)("This diff cannot be displayed")}}({previous:c.current,path:n,diff:r,complete:u});return c.current=e,e},[n,r,u]),m=(0,eh._)((0,o.useState)(1),2),h=m[0],g=m[1],v=(0,o.useMemo)(function(){return!u&&d.ok&&0===d.value.hunks.length},[u,d]);return((0,o.useEffect)(function(){if(v){var e=setInterval(function(){g(function(e){return e%3+1})},500);return function(){return clearInterval(e)}}},[v]),v)?(0,a.jsx)(f.View,{row:!0,gap:"8px",align:"center",justify:"center",children:(0,a.jsxs)(p.Text,{multiline:!0,children:["Editing ",n,".".repeat(h)]})}):d.ok?(0,a.jsx)(tz,{path:n,type:"modify",diff:d.value,openPane:l}):(0,a.jsx)(t$.StatusBanner,{icon:(0,a.jsx)(_.default,{}),colorway:"warning",text:d.error})}function tX(e){return{labelA:e,labelB:e,hunks:[]}}e.s(["FileEdit",()=>tY],507091);var tQ=e.i(1495),tJ=e.i(205104);function tZ(e,t){var n=(0,eh._)((0,o.useState)(!1),2),r=n[0],i=n[1],a=(0,eh._)((0,o.useState)(!0),2),s=a[0],l=a[1],u=(0,eh._)((0,o.useState)(null),2),c=u[0],d=u[1],p=(0,o.useMemo)(function(){return t?e.readFile(t).then(function(e){if(e.error)return{error:e.error,data:null};try{var n=(0,tJ.getMediaMime)(t),r=e.content.toString("base64"),i="data:".concat(n,";base64,").concat(r);return{error:null,data:i}}catch(e){return{error:"Failed to process file",data:null}}}).catch(function(e){return{error:"Failed to read file",data:null}}):Promise.resolve({error:"No file path provided",data:null})},[e,t]);return(0,o.useEffect)(function(){i(!1),l(!0),d(null),p.then(function(e){var t=e.error,n=e.data;t?i(!0):d(n),l(!1)})},[p]),{isLoading:s,hasError:r,dataSrc:c}}e.s(["useFileAsDataUrl",()=>tZ],54073);var t0=e.i(529810),t1=e.i(616278),t2=e.i(291046);function t4(e){return e.error?"error":e.path?"generated":"generating"}function t8(e){var t=e.path,n=e.description,r=tZ((0,t0.default)().fs,t),i=r.isLoading,o=r.hasError,s=r.dataSrc;return i?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t2.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(m.default,{})}):o||!s?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t2.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:"Failed to load"})}):(0,a.jsx)("div",{className:t2.default.gridItem,children:(0,a.jsx)(tQ.default,{src:s,alt:n||"Generated media",className:t2.default.image,width:400,height:400,unoptimized:!0})})}function t6(e){var t=e.path,n=tZ((0,t0.default)().fs,t),r=n.isLoading,i=n.hasError,o=n.dataSrc;return r?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t2.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(m.default,{})}):i||!o?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t2.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:"Failed to load"})}):(0,a.jsx)("div",{className:t2.default.gridItem,children:(0,a.jsx)("video",{src:o,className:t2.default.video,muted:!0,controls:!0})})}function t3(e){var t=e.item,n=t4(t);return"generating"===n?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t2.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(m.default,{})}):"error"===n?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t2.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsxs)(f.View,{clsx:t2.default.errorContent,children:[(0,a.jsx)(_.default,{}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:t.error||"Failed"})]})}):t.mediaType===s.GeneratedMediaType.MEDIA_TYPE_VIDEO?(0,a.jsx)(t6,{path:t.path}):(0,a.jsx)(t8,{path:t.path,description:t.description})}function t5(e){var t=e.item,n=t4(t);return(0,a.jsxs)(f.View,{className:t2.default.promptItem,children:[(0,a.jsxs)(f.View,{className:t2.default.promptStatus,children:["generating"===n&&(0,a.jsx)(m.default,{}),"generated"===n&&(0,a.jsx)(t1.default,{}),"error"===n&&(0,a.jsx)(_.default,{})]}),(0,a.jsx)(p.Text,{variant:"small",color:"error"===n?"dimmer":"default",clsx:t2.default.promptText,children:t.description})]})}function t9(e){var t=e.data,n=e.state,r=t.media,i=t.asynchronous;if(!r||0===r.length)return(0,a.jsx)(f.View,{className:t2.default.container,children:(0,a.jsx)(p.Text,{color:"dimmer",children:"No media to display"})});var o=r.filter(function(e){return e.path||e.error||n===s.EventState.IN_PROGRESS});return(0,a.jsxs)(f.View,{className:t2.default.container,children:[i?(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",clsx:t2.default.asyncLabel,children:n===s.EventState.IN_PROGRESS?"Generating in background...":"Generated in background"}):null,o.length>0&&(0,a.jsx)(f.View,{className:t2.default.grid,children:o.map(function(e){return(0,a.jsx)(t3,{item:e},e.id)})}),(0,a.jsx)(f.View,{className:t2.default.promptsContainer,children:r.map(function(e){return(0,a.jsx)(t5,{item:e},e.id)})})]})}e.s(["GenerateMedia",()=>t9],641654);var t7=e.i(211397),ne=e.i(364343);function nt(e){var t=e.imagePath,n=e.imageDescription,r=tZ((0,t0.default)().fs,t),i=r.isLoading,o=r.hasError,s=r.dataSrc;return i?(0,a.jsx)(f.View,{className:ne.default.loading,children:(0,a.jsx)(m.default,{})}):o||!s?(0,a.jsx)(f.View,{className:ne.default.error,children:(0,a.jsxs)(p.Text,{color:"dimmer",children:["Failed to load image from ",t]})}):(0,a.jsx)(f.View,{className:ne.default.container,children:(0,a.jsx)(t7.default,{src:s,alt:n||"Generated image",className:ne.default.image,layout:"fill",objectFit:"cover"})})}e.s(["ImageGeneration",()=>nt],504186);var nn=e.i(119468),nr=e.i(862927),ni=e.i(986194),na=e9.Type.Union([e9.Type.Object({type:e9.Type.Optional(e9.Type.String()),fields:e9.Type.Array(e9.Type.Object({key:e9.Type.String(),value:e9.Type.Unknown()}))}),e9.Type.Object({type:e9.Type.Optional(e9.Type.String()),fields:e9.Type.Record(e9.Type.String(),e9.Type.Unknown())}),e9.Type.Record(e9.Type.String(),e9.Type.Unknown())]);function no(e){var t=nr.Value.Cast(na,e),n={};return"fields"in t&&t.fields?Array.isArray(t.fields)?t.fields.forEach(function(e){return"type"!==e.key&&(n[e.key]=e.value)}):Object.entries(t.fields).forEach(function(e){var t=(0,eh._)(e,2),r=t[0],i=t[1];return"type"!==r&&(n[r]=i)}):Object.entries(t).forEach(function(e){var t=(0,eh._)(e,2),r=t[0],i=t[1];return"type"!==r&&(n[r]=i)}),Object.entries(n).map(function(e){var t=(0,eh._)(e,2);return{key:t[0],value:function e(t){if(null==t||void 0===t)return"null";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return String(t);if((void 0===t?"undefined":(0,nn._)(t))==="object"&&null!=t&&"kind"in t&&"object"===(0,nn._)(t.kind)&&null!=t.kind&&"$kind"in t.kind&&"string"==typeof t.kind.$kind){var n=t.kind,r=n.$kind,i=(0,ni.unkind)(n);return"nullValue"===r?"null":"listValue"===r&&(void 0===i?"undefined":(0,nn._)(i))==="object"&&Array.isArray(i.values)?"[".concat(i.values.map(function(t){return e(t)}).join(", "),"]"):"structValue"===r&&(void 0===i?"undefined":(0,nn._)(i))==="object"?JSON.stringify(i):String(i)}try{return JSON.stringify(t)}catch(e){return String(t)}}(t[1])}})}var ns=e.i(687843),nl=(0,o.memo)(function(e){var t=e.parameters;if(!(no(t).length>0))return(0,a.jsx)(f.View,{px:4,children:(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",children:"No parameters"})});var n=no(t);return(0,a.jsx)(f.View,{className:ns.default.parametersGrid,children:n.map(function(e,t){var n=e.key,r=e.value;return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",className:ns.default.parameterKey,children:n}),(0,a.jsx)(p.Text,{variant:"small",className:ns.default.parameterValue,children:r})]},"".concat(n,"-").concat(t))})})}),nu=(0,o.memo)(function(e){var t,n,r,i,o,s=e.content,l=null==s||null==(t=s.resource)?void 0:t.uri,u=null==s||null==(r=s.resource)||null==(n=r.Meta)?void 0:n.meta;if((null==s||null==(i=s.resource)?void 0:i.contents)&&"object"===(0,nn._)(s.resource.contents)){var c=s.resource.contents;"text"===c.$kind&&(o=c.text)}return(0,a.jsxs)(d.Surface,{elevated:!0,p:8,children:[(0,a.jsxs)(p.Text,{color:"dimmer",variant:"small",children:["Embedded Resource: ",l||"Unknown resource"]}),u?(0,a.jsx)(p.Text,{variant:"small",children:u}):null,o?(0,a.jsx)(p.Text,{variant:"small",style:{whiteSpace:"pre-wrap"},children:o}):null]})}),nc=(0,o.memo)(function(e){var t=e.content;if(!t.data)return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"No image data"})});var n="data:".concat(t.mimeType||"image/png",";base64,").concat(t.data);return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(f.View,{align:"center",children:(0,a.jsx)("img",{src:n,alt:"MCP tool result",style:{maxWidth:"100%",maxHeight:"360px",borderRadius:"4px",display:"block"},onError:function(e){e.currentTarget.style.display="none"}})})})}),nd=e.i(462995),np=(0,o.memo)(function(e){var t=e.content;return t.text?(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(nd.MessageMarkdown,{text:t.text})}):null}),nf=(0,o.memo)(function(e){var t=e.contentBlocks;return t.length?(0,a.jsx)(f.View,{gap:8,style:{overflow:"auto",maxHeight:"400px",borderRadius:"8px"},children:t.map(function(e,t){return(0,a.jsx)(nm,{block:e},t)})}):(0,a.jsx)(f.View,{p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"No output content"})})}),nm=(0,o.memo)(function(e){var t=e.block.block;if(!t)return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"Empty content block"})});if((null==t?void 0:t.$kind)==="textContent")return(0,a.jsx)(np,{content:t.textContent});if((null==t?void 0:t.$kind)==="imageContent")return(0,a.jsx)(nc,{content:t.imageContent});if((null==t?void 0:t.$kind)==="audioContent"){var n=t.audioContent;return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsxs)(p.Text,{color:"dimmer",variant:"small",children:["Audio content: ",n.mimeType||"audio/wav"]})})}if((null==t?void 0:t.$kind)==="resourceLink"){var r,i,o=t.resourceLink,s=null==(r=o.Title)?void 0:r.title,l=null==(i=o.Description)?void 0:i.description;return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsxs)(f.View,{gap:2,children:[(0,a.jsx)(p.Text,{variant:"small",children:s||o.name||"Resource"}),l?(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:l}):null,o.uri?(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",children:o.uri}):null]})})}return(null==t?void 0:t.$kind)==="embeddedResource"?(0,a.jsx)(nu,{content:t.embeddedResource}):(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"Unsupported content type"})})}),nh=e.i(254806),ng=e.i(15260),nv=e.i(11286);function nx(e){var t=e.title,n=e.expanded,r=e.onToggle,i=e.children;return(0,a.jsxs)(d.Surface,{elevated:!0,clsx:nv.default.expandableSubSection,children:[(0,a.jsx)(ej.Button,{size:"small",variant:"nofill",alignment:"start",onClick:r,iconLeft:n?(0,a.jsx)(nh.default,{}):(0,a.jsx)(ng.default,{}),text:t,clsx:nv.default.subsectionButton}),n?(0,a.jsx)(f.View,{children:i}):null]})}function ny(e){var t,n=e.result,r=e.progress;return(null==n?void 0:n.contentBlocks)&&n.contentBlocks.length>0?(0,a.jsx)(nf,{contentBlocks:n.contentBlocks}):(null==n?void 0:n.content)?(0,a.jsx)(p.Text,{variant:"small",clsx:nv.default.wrappedText,children:n.content}):(null==n?void 0:n.isError)||(null==r||null==(t=r.Message)?void 0:t.message)?null:(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",children:"No response content"})}function nb(e){var t,n,r,i,s=e.toolName,l=e.parameters,u=e.result,c=e.progress,m=e.insecureError,h=null==u||null==(t=u.contentBlocks)?void 0:t.some(function(e){var t=e.block;return(null==t?void 0:t.$kind)==="imageContent"}),g=(0,eh._)((0,o.useState)(!0),2),v=g[0],x=g[1],y=(0,eh._)((0,o.useState)(null!=h&&h||!!m),2),b=y[0],S=y[1],_=(0,o.useCallback)(function(){x(function(e){return!e})},[]),w=(0,o.useCallback)(function(){S(function(e){return!e})},[]),j=l&&Object.keys(l).length>0,T=u||c||m;return(0,a.jsx)(d.Surface,{elevated:!0,children:(0,a.jsx)(ew.EventPane,{left:(0,a.jsx)(Y.default,{size:16}),title:s||"MCP Tool Use",elevated:!1,bordered:!1,children:(0,a.jsxs)(f.View,{gap:4,p:8,children:[m?(0,a.jsx)(d.Surface,{elevated:!0,clsx:nv.default.securityErrorAlert,children:(0,a.jsx)(f.View,{row:!0,gap:8,p:12,align:"center",children:(0,a.jsxs)(f.View,{gap:4,style:{flex:1},children:[(0,a.jsx)(p.Text,{clsx:nv.default.securityErrorAlertTitle,children:"Security Issue Detected"}),(0,a.jsx)(p.Text,{variant:"small",color:"default",children:m}),(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:"The tool output was flagged for security issues and will not be accessible to the agent."})]})})}):null,j?(0,a.jsx)(nx,{title:"Request",expanded:v,onToggle:_,children:(0,a.jsx)(nl,{parameters:l})}):null,T&&!m?(0,a.jsx)(nx,{title:"Response",expanded:b,onToggle:w,children:(0,a.jsxs)(f.View,{gap:4,p:8,children:[c&&(null==(n=c.Message)?void 0:n.message)?(0,a.jsxs)(p.Text,{variant:"small",color:"dimmer",children:[c.Message.message,void 0!==c.progress&&(null==(r=c.Total)?void 0:r.total)!==void 0?(0,a.jsxs)("span",{children:[" ","(",c.progress,"/",c.Total.total,")"]}):null]}):null,(null==u?void 0:u.isError)?(0,a.jsxs)(p.Text,{variant:"small",color:"default",children:["Error: ",u.content||"Tool execution failed"]}):null,(0,a.jsx)(ny,{result:u,progress:c}),null==u||!u.structuredContent||(null==u||null==(i=u.contentBlocks)?void 0:i.length)||(null==u?void 0:u.content)?null:(0,a.jsxs)(f.View,{gap:2,children:[(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:"Structured Content:"}),(0,a.jsx)(p.Text,{variant:"small",clsx:nv.default.wrappedText,children:JSON.stringify(u.structuredContent,null,2)})]})]})}):null]})})})}e.s(["MCPToolResult",()=>nb],132183)},83773,e=>{e.v({trajectoryItem:"SamplingEvent-module__iPtlaW__trajectoryItem"})},288885,e=>{e.v({container:"SearchIntegrations-module__CRsxhW__container"})},12977,e=>{e.v({container:"StockImageGeneration-module__nQ0zAW__container",image:"StockImageGeneration-module__nQ0zAW__image",imageEmptyState:"StockImageGeneration-module__nQ0zAW__imageEmptyState"})},960008,974770,582752,522530,660622,111328,122757,414018,678741,645143,532717,245702,573201,865026,e=>{"use strict";var t=e.i(276385),n=e.i(188507),r=e.i(653412),i=e.i(762211),a=e.i(818976),o=e.i(394212),s=e.i(297083),l=e.i(530658),u=e.i(817556),c=e.i(389959),d=e.i(299798),p=e.i(446530),f=e.i(613355),m=e.i(625484);function h(){}var g=(0,p.cssRecord)({terminalWrapper:[{"> div":[f.rcss.borderRadius(4)],"& .xterm":[f.rcss.borderRadius(4)]}]});function v(e){var n=e.processId,r=e.openPane,p=e.maxHeight,f=(0,a.useTerminalTheme)(),v=(0,i.useAutoGrowingXTerm)({maxHeight:p,openPane:r}),x=v.visibleHeight,y=v.bufferHeight,b=v.wrapperResizeRef,S=v.xterm,_=v.xtermRef,w=(0,l._)((0,c.useState)(null),2),j=w[0],T=w[1],D=(0,c.useCallback)(function(e){return T(function(){return e}),function(){}},[]);return(0,d.usePid2)(function(e,t){var r=t.signal;return(0,s._)(function(){var t,i,a,s,l,c,d,p;return(0,u._)(this,function(u){switch(u.label){case 0:if(!j)return[2];t=e.agentToolPackager.connectToInstallPackages.subscribe({processId:n},{signal:r}).resReadable,i=!1,a=!1,u.label=1;case 1:u.trys.push([1,6,7,12]),l=(0,o._)(t),u.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=u.sent()).done))return[3,5];if(!(d=c.value).ok){if("UNEXPECTED_DISCONNECT"===d.payload.code||"CANCEL"===d.payload.code||"NO_PROCESS_MATCHING_ID"===d.payload.code)return[3,5];throw Error("[".concat(d.payload.code,"]: ").concat(d.payload.message))}"output"===d.payload.$kind&&j(d.payload.output),u.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=u.sent(),a=!0,s=p,[3,12];case 7:if(u.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(a)throw s;return[7];case 11:return[7];case 12:return[2]}})})()},[j,n]),(0,t.jsx)(m.View,{css:g.terminalWrapper,style:{height:x,background:null==f?void 0:f.background},children:(0,t.jsx)(i.AutoGrowingTerminalWrapper,{onInput:h,xterm:S,wrapperResizeRef:b,bufferHeight:y,setOnMessage:D,onResizeTerminal:h,children:(0,t.jsx)(i.AutoGrowingTerminalInner,{xtermRef:_,visibleHeight:x,maxHeight:p})})})}e.s(["default",()=>v],974770);var x=e.i(960178),y=e.i(982204),b=e.i(634669),S=(0,p.cssRecord)({terminalWrapperBottomRadius:[f.rcss.borderRadius(0,0,4,4),{"> div":[f.rcss.borderRadius(4)],"& .xterm":[f.rcss.borderRadius(4)]}],terminalWrapperFullRadius:[f.rcss.borderRadius(4),{"> div":[f.rcss.borderRadius(4)],"& .xterm":[f.rcss.borderRadius(4)]}]});function _(e){var o,s=e.data,l=e.openPane,u=s.installed,c=s.isExecuting,d=s.processId,p=s.state,f=null==(o=s.output)?void 0:o.trim().replaceAll("\n","\r\n"),h=(0,a.useTerminalTheme)(),g="";g=c?u.length>1?"".concat(u.length," packages are being installed:"):"A package is being installed:":u.length>1?"".concat(u.length," packages were installed:"):"A package was installed:";var _=p===n.EventState.IN_PROGRESS&&c&&!f,w=u.length>0,j=p===n.EventState.IN_PROGRESS||f?(0,t.jsxs)(m.View,{css:w?S.terminalWrapperFullRadius:S.terminalWrapperBottomRadius,style:{backgroundColor:null==h?void 0:h.background},children:[c&&d?(0,t.jsx)(v,{processId:d,openPane:l,maxHeight:300}):null,!c&&f?(0,t.jsx)(i.AutoGrowingTerminalForHistoricalOutput,{output:f,maxHeight:300,openPane:l}):null]}):null,T=w?(0,t.jsxs)(m.View,{gap:4,p:8,children:[(0,t.jsx)(x.Text,{color:"dimmest",children:_?"Installing…":"Command output:"}),j]}):j;return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(y.default,{size:16}),title:"Dependencies",onOpenPane:function(){l({type:"developer",data:{tab:["dependencies","import"]}})},text:g,packageList:u,getPackageIcon:function(){return(0,t.jsx)(b.default,{size:16})},children:T})}function w(e){var n=e.data.uninstalled,i=e.openPane,a=n.length>1?"".concat(n.length," packages were uninstalled:"):"A package was uninstalled:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(y.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","import"]}})},text:a,packageList:n,getPackageIcon:function(){return(0,t.jsx)(b.default,{size:16})}})}e.s(["PackagerInstall",()=>_],960008),e.s(["PackagerUninstall",()=>w],582752);var j=e.i(774787),T=e.i(243074);function D(e){var n=e.data;return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(T.default,{size:16}),title:(0,t.jsx)(j.CodePath,{path:n.data.path}),showOpenPaneButton:!1})}function k(e){var n=e.data,r=e.openPane;return(0,t.jsx)(j.default,{path:n.data.filePath,code:n.data.content,openPane:r,showCode:!1})}e.s(["ReadDir",()=>D],522530),e.s(["ReadFile",()=>k],660622);var C=e.i(624782),E=e.i(616278),A=e.i(993134),I=e.i(940745),R=e.i(431601),P=e.i(42458),M=e.i(659666),O=e.i(83773);function N(e){var n=e.id,r=e.contents,i=e.state,a=function(e){switch(e){case 1:return{icon:(0,t.jsx)(I.default,{}),label:"In Progress",colorway:"default",bgColor:"var(--token-background-higher)"};case 2:return{icon:(0,t.jsx)(E.default,{}),label:"Successful",colorway:"positive",bgColor:"var(--token-background-positive-weak)"};case 3:return{icon:(0,t.jsx)(P.default,{}),label:"Failed",colorway:"negative",bgColor:"var(--token-background-negative-weak)"};case 4:return{icon:(0,t.jsx)(R.default,{}),label:"Chosen",colorway:"accent",bgColor:"var(--token-background-accent-weak)"};default:return{icon:(0,t.jsx)(A.default,{}),label:"Pending",colorway:"default",bgColor:"var(--token-background-higher)"}}}(i);return(0,t.jsxs)(m.View,{clsx:O.default.trajectoryItem,p:8,children:[(0,t.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[a.icon,(0,t.jsxs)(x.Text,{variant:"small",color:"default",children:["Trajectory ",n]}),(0,t.jsx)(C.Pill,{text:a.label,colorway:function(){switch(i){case 2:return"positive";case 3:return"negative";case 4:return"primary";default:return}}(),variant:"muted",compact:!0})]}),r?(0,t.jsx)(m.View,{pt:4,children:(0,t.jsx)(x.Text,{variant:"small",multiline:!0,color:"dimmer",children:r})}):null]})}function L(e){var n,i=(null==(n=e.data.data)?void 0:n.trajectories)||[];return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(M.default,{size:16}),title:"Solution exploration",renderChildrenOnlyWhenInView:!0,children:(0,t.jsx)(m.View,{gap:6,pt:6,children:i.length>0?(0,t.jsx)(m.View,{gap:6,children:i.map(function(e){return(0,t.jsx)(N,{id:e.id||"unknown",contents:e.contents||"",state:e.state||0},e.id||Math.random())})}):(0,t.jsx)(m.View,{color:"dimmer",children:(0,t.jsx)(x.Text,{color:"dimmer",children:"Initializing solution exploration..."})})})})}e.s(["SamplingEvent",()=>L],111328);var B=e.i(480028),V=e.i(211397),U=(0,p.cssRecord)({loading:[f.rcss.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[f.rcss.position.relative,f.rcss.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[f.rcss.coverContainer,{"& > span":[f.rcss.borderRadius(4),f.rcss.border({color:B.tokens.outlineDimmer})]}]});function F(e){var n=e.data.imageUrl;return n?(0,t.jsx)(m.View,{css:U.aspectRatio,children:(0,t.jsx)(m.View,{css:U.image,children:(0,t.jsx)(V.default,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})})}):(0,t.jsx)(m.View,{css:U.loading,children:(0,t.jsx)(I.default,{})})}e.s(["Screenshot",()=>F],122757);var H=e.i(546284),G=e.i(929872),z=e.i(288885),q=function(e){var n=e.query,r=e.numResults;return(0,t.jsx)(G.Surface,{elevated:!0,p:8,clsx:z.default.container,children:(0,t.jsxs)(x.Text,{children:['Searched for "',n,'" and found ',(0,H.default)("result",r,!0),"."]})})};e.s(["SearchIntegrations",()=>q],414018);var W=e.i(538391),K=e.i(47503),$=(0,p.cssRecord)({terminalWrapper:[f.rcss.overflow("hidden"),{"& .xterm":[f.rcss.borderRadius(0,0,4,4)]}]});function Y(e){var n=e.processId,r=e.openPane,p=e.maxHeight,f=e.interactive,h=void 0!==f&&f,g=(0,K.useCurrentUserId)(),v=(0,c.useId)(),x=(0,a.useTerminalTheme)(),y=(0,i.useAutoGrowingXTerm)({maxHeight:p,openPane:r}),b=y.visibleHeight,S=y.bufferHeight,_=y.wrapperResizeRef,w=y.xterm,j=y.xtermRef,T=(0,l._)((0,c.useState)(null),2),D=T[0],k=T[1],C=(0,c.useCallback)(function(e){return k(function(){return e}),function(){}},[]);return(0,d.usePid2)(function(e,t){var r=t.signal;return(0,s._)(function(){var t,i,a,l,c,d,p,f,m,x,y,b,S;return(0,u._)(this,function(_){switch(_.label){case 0:if(!g||!D||!w)return[2];i=(t=e.shellExec.connect.stream({id:n,userId:g,processViewId:v},{signal:r})).resReadable,a=t.reqWritable,l=function(e){h&&a.write({$kind:"stdin",stdin:new Uint8Array(W.Buffer.from(e))})},c=w.onResize(function(t){return(0,s._)(function(){return(0,u._)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.resize.rpc({id:n,userId:g,processViewId:v,size:t})];case 1:return r.sent(),[2]}})})()}),d=w.onData(l),p=!1,f=!1,_.label=1;case 1:_.trys.push([1,6,7,12]),x=(0,o._)(i),_.label=2;case 2:return[4,x.next()];case 3:if(!(p=!(y=_.sent()).done))return[3,5];if(!(b=y.value).ok){if("UNEXPECTED_DISCONNECT"===b.payload.code||"CANCEL"===b.payload.code||"NO_PROCESS_MATCHING_ID"===b.payload.code||"PROCESS_IS_NOT_RUNNING"===b.payload.code)return[3,5];throw Error("[".concat(b.payload.code,"]: ").concat(b.payload.message))}"output"===b.payload.$kind&&D(b.payload.output),_.label=4;case 4:return p=!1,[3,2];case 5:return[3,12];case 6:return S=_.sent(),f=!0,m=S,[3,12];case 7:if(_.trys.push([7,,10,11]),!(p&&null!=x.return))return[3,9];return[4,x.return()];case 8:_.sent(),_.label=9;case 9:return[3,11];case 10:if(f)throw m;return[7];case 11:return[7];case 12:return[2,function(){c.dispose(),d.dispose()}]}})})()},[g,h,D,n,v,w]),(0,t.jsx)(m.View,{css:$.terminalWrapper,style:{height:b,background:null==x?void 0:x.background},children:(0,t.jsx)(i.AutoGrowingTerminalWrapper,{xterm:w,wrapperResizeRef:_,bufferHeight:S,setOnMessage:C,children:(0,t.jsx)(i.AutoGrowingTerminalInner,{xtermRef:j,visibleHeight:b,maxHeight:p})})})}e.s(["default",()=>Y],678741);var X=e.i(751273),Q=e.i(476891),J=(0,p.cssRecord)({wrapper:[f.rcss.height("100%")],terminalWrapper:[f.rcss.overflow("hidden"),{"& .xterm":[f.rcss.borderRadius(0,0,4,4)]}]});function Z(e){var n=e.data.data,i=e.openPane,o=(0,a.useTerminalTheme)(),s=null;n.isExecuting||(s=0===n.exitCode?(0,t.jsx)(E.default,{}):(0,t.jsx)(X.Tooltip,{tooltip:"Command exited with: ".concat(n.exitCode),children:(0,t.jsx)(P.default,{})}));var l=!0===n.isExecuting,u=(0,t.jsx)(m.View,{css:J.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:l?(0,t.jsx)(Y,{processId:n.processId,openPane:i,maxHeight:300,interactive:!1}):(0,t.jsx)(ee,{output:n.output,openPane:i})});return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(Q.default,{size:16}),title:"$ ".concat(n.command),right:s,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:u})}function ee(e){var n=e.output,r=e.openPane;return 0===n.length?null:(0,t.jsx)(m.View,{css:J.terminalWrapper,children:(0,t.jsx)(i.AutoGrowingTerminalForHistoricalOutput,{convertEol:!0,maxHeight:300,output:n,openPane:r})})}e.s(["ShellExecution",()=>Z],645143);var et=e.i(292297),en=(0,p.cssRecord)({wrapper:[f.rcss.height("100%")],terminalWrapper:[f.rcss.overflow("hidden"),{"& .xterm":[f.rcss.borderRadius(0,0,4,4)]}]});function er(e){var n,i,o=e.data.data,s=e.openPane,l=(0,a.useTerminalTheme)(),u=null;(null==(n=o.status)?void 0:n.$kind)==="exitCode"&&(u=0===o.status.exitCode?(0,t.jsx)(E.default,{}):(0,t.jsx)(P.default,{}));var c="\r"+o.command.replaceAll("\n","\r\n")+"\r\n";o.output&&(c+="\r\n"+o.output.replaceAll("\n","\r\n"));var d=(null==(i=o.status)?void 0:i.$kind)==="isExecuting";return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(et.default,{size:16}),title:d?"Executing SQL query":"Executed SQL query",right:u,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,t.jsx)(m.View,{css:en.wrapper,style:{backgroundColor:null==l?void 0:l.background},children:(0,t.jsx)(ei,{output:c,openPane:s})})})}function ei(e){var n=e.output,r=e.openPane;return 0===n.length?null:(0,t.jsx)(m.View,{css:en.terminalWrapper,children:(0,t.jsx)(i.AutoGrowingTerminalForHistoricalOutput,{maxHeight:300,output:n,openPane:r})})}e.s(["SqlExecution",()=>er],532717);var ea=e.i(54073),eo=e.i(529810),es=e.i(12977);function el(e){var n=e.imagePath,r=e.alt,i=e.className,a=(0,eo.default)().fs,o=(0,ea.useFileAsDataUrl)(a,n),s=o.isLoading,l=o.hasError,u=o.dataSrc;return s?(0,t.jsx)(G.Surface,{elevated:!0,clsx:es.default.imageEmptyState,align:"center",justify:"center",children:(0,t.jsx)(I.default,{})}):l||!u?(0,t.jsx)(G.Surface,{elevated:!0,clsx:es.default.imageEmptyState,align:"center",justify:"center",children:(0,t.jsx)(x.Text,{color:"dimmer",children:"Failed to load image"})}):(0,t.jsx)(V.default,{src:u,alt:r,className:i,width:200,height:200})}function eu(e){var n=e.imageDescription,r=e.imageUrls;return(0,t.jsx)(m.View,{className:es.default.container,children:r.length>0?r.map(function(e,r){return(0,t.jsx)(el,{imagePath:e,alt:"".concat(n," - ").concat(r+1),className:es.default.image},r)}):(0,t.jsx)(x.Text,{color:"dimmer",children:"No images found"})})}function ec(e){var n=e.data.deps,i=e.openPane,a=n.length>1?"".concat(n.length," system dependencies were installed:"):"A system dependency was installed:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(y.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","nix"]}})},text:a,packageList:n,getPackageIcon:function(){return(0,t.jsx)(y.default,{size:16})}})}function ed(e){var n=e.data.deps,i=e.openPane,a=n.length>1?"".concat(n.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(y.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","nix"]}})},text:a,packageList:n,getPackageIcon:function(){return(0,t.jsx)(y.default,{size:16})}})}e.s(["StockImageGeneration",()=>eu],245702),e.s(["SystemDependencyInstall",()=>ec],573201),e.s(["SystemDependencyUninstall",()=>ed],865026)},833694,e=>{e.v({container:"ViewIntegrations-module__LQDTyW__container"})},411582,e=>{e.v({divider:"WebPageVisit-module__dp1tdq__divider",markdown:"WebPageVisit-module__dp1tdq__markdown",root:"WebPageVisit-module__dp1tdq__root",visitContent:"WebPageVisit-module__dp1tdq__visitContent"})},70877,e=>{e.v({showMoreLessButton:"ShowMoreLessBlock-module__DD7eCq__showMoreLessButton"})},36926,e=>{e.v({divider:"WebSearch-module__jv759a__divider",root:"WebSearch-module__jv759a__root",sourceLink:"WebSearch-module__jv759a__sourceLink",sourceLinkText:"WebSearch-module__jv759a__sourceLinkText"})},776324,e=>{e.v({files:"SearchFilesystem-module__zrfULG__files"})},14689,e=>{e.v({surface:"Thoughts-module__9doZTq__surface"})},293198,252788,959406,e=>{"use strict";var t=e.i(878420),n=e.i(276385),r=e.i(188507),i=e.i(844225),a=e.i(198820),o=e.i(507091),s=e.i(641654),l=e.i(504186),u=e.i(132183),c=e.i(960008),d=e.i(582752),p=e.i(522530),f=e.i(660622),m=e.i(111328),h=e.i(122757),g=e.i(414018),v=e.i(645143),x=e.i(532717),y=e.i(245702),b=e.i(573201),S=e.i(865026),_=e.i(653412),w=e.i(646982),j=e.i(982204);function T(e){var t=e.data.modules,r=e.openPane,i=t.length>1?"".concat(t.length," system modules were installed:"):"A system module was installed:";return(0,n.jsx)(_.EventPaneWithPackages,{left:(0,n.jsx)(j.default,{size:16}),title:"Dependencies",onOpenPane:function(){r({type:"developer",data:{tab:["dependencies","nix"]}})},text:i,packageList:t,getPackageIcon:function(e){return(0,n.jsx)(w.default,{module:{name:e}})}})}var D=e.i(929872),k=e.i(960178),C=e.i(833694),E=function(e){var t=e.name;return(0,n.jsx)(D.Surface,{elevated:!0,p:8,clsx:C.default.container,children:(0,n.jsxs)(k.Text,{children:["Viewed integrations data for ",t,"."]})})},A=e.i(988676),I=e.i(625484),R=e.i(211397),P=e.i(916271),M=e.i(411582);function O(e){var t,r=e.url,i=e.favicon,a=e.title,o=e.snippet,s=!!a,l=!(!(t=i).startsWith("https://")&&!t.startsWith("http://")||t.includes("vertexaisearch.cloud.google.com"));return(0,n.jsxs)(D.Surface,{elevated:!0,clsx:M.default.root,children:[s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.View,{row:!0,gap:8,p:8,children:[l?(0,n.jsx)(R.default,{src:i,alt:"Favicon",width:16,height:16}):null,(0,n.jsx)(k.Text,{multiline:!1,children:(0,n.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:a})})]}),(0,n.jsx)(A.DividerH,{clsx:M.default.divider})]}):null,(0,n.jsx)(D.Surface,{p:8,clsx:M.default.visitContent,gap:2,children:(0,n.jsx)(P.default,{className:M.default.markdown,useRemarkGfm:!0,lineBreaks:!0,themed:!0,children:o})})]})}var N=e.i(530658),L=e.i(389959),B=e.i(546284),V=e.i(140487),U=e.i(70877);function F(e){var t=e.title,r=e.children,i=e.isShowingMore,a=e.setIsShowingMore,o=e.showMoreDisabled;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.View,{row:!0,align:"center",justify:"space-between",gap:8,children:["string"==typeof t?(0,n.jsx)(k.Text,{variant:"small",color:"dimmer",children:t}):t,o?null:(0,n.jsx)(H,{isExpanded:i,setIsExpanded:a})]}),r]})}function H(e){var t=e.isExpanded,r=e.setIsExpanded;return(0,n.jsx)(V.Button,{text:t?"Show less":"Show more",variant:"underlinedOnHover",size:"small",clsx:U.default.showMoreLessButton,onClick:function(){return r(function(e){return!e})}})}var G=e.i(462995),z=e.i(480028),q=e.i(987154),W=e.i(36926);function K(e){var t=e.query,i=e.response,a=e.pageResults,o=(0,N._)((0,L.useState)(!1),2),s=o[0],l=o[1],u=i.length>400&&!s?i.slice(0,400)+" …":i;return(0,n.jsxs)(D.Surface,{elevated:!0,clsx:W.default.root,children:[(0,n.jsx)(D.Surface,{p:8,clsx:W.default.heading,children:(0,n.jsx)(I.View,{shrink:!0,children:(0,n.jsx)(k.Text,{multiline:!1,children:t})})}),(0,n.jsx)(A.DividerH,{clsx:W.default.divider}),(0,n.jsxs)(D.Surface,{py:8,px:12,gap:8,children:[(0,n.jsx)(F,{title:e.searchType===r.WebSearchType.WEB_SEARCH_TYPE_REPLIT_DOCUMENTATION?"Replit documentation search results":"Web search results",isShowingMore:s,setIsShowingMore:l,children:(0,n.jsx)(I.View,{clsx:W.default.resultText,gap:8,children:(0,n.jsx)(G.MessageMarkdown,{text:u})})}),a.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.DividerH,{clsx:W.default.divider}),(0,n.jsx)($,{pageResults:a})]}):null]})]})}function $(e){var t=e.pageResults,r=(0,N._)((0,L.useState)(!1),2),i=r[0],a=r[1],o=t.length>5&&!i?t.slice(0,5):t;return(0,n.jsx)(F,{title:(0,n.jsxs)(I.View,{row:!0,align:"center",gap:8,children:[(0,n.jsx)(q.default,{color:z.tokens.foregroundDimmer}),(0,n.jsxs)(k.Text,{variant:"small",color:"dimmer",children:[t.length," ",(0,B.default)("source",t.length)]})]}),isShowingMore:i,setIsShowingMore:a,children:(0,n.jsx)(I.View,{gap:4,children:o.map(function(e){return(0,n.jsxs)(I.View,{row:!0,align:"center",gap:8,children:[(0,n.jsx)(I.View,{shrink:!0,children:(0,n.jsx)("a",{className:W.default.sourceLink,href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(k.Text,{multiline:!1,clsx:W.default.sourceLinkText,children:e.title})})}),(0,n.jsx)(k.Text,{variant:"small",color:"dimmer",multiline:!1,children:new URL(e.url).hostname.replace("www.","")})]},e.url)})})})}var Y=e.i(47503),X=e.i(394212),Q=e.i(297083),J=e.i(817556),Z=e.i(299798),ee=e.i(762211),et=e.i(818976),en=e.i(446530),er=e.i(613355);function ei(){}var ea=(0,en.cssRecord)({terminalWrapper:[er.rcss.overflow("hidden"),{"& .xterm":[er.rcss.borderRadius(0,0,4,4)]}]});function eo(e){var t=e.workflowRunState,r=e.currentUserId,i=e.openPane,a=e.maxHeight,o=void 0===a?300:a,s=(0,L.useId)(),l=(0,et.useTerminalTheme)(),u=t.runId,c=t.tasks.findIndex(function(e){var t;return(null==(t=e.metadata)?void 0:t.task)==="shell.exec"}),d=(0,ee.useAutoGrowingXTerm)({maxHeight:o,openPane:i}),p=d.visibleHeight,f=d.bufferHeight,m=d.wrapperResizeRef,h=d.xterm,g=d.xtermRef,v=(0,N._)((0,L.useState)(null),2),x=v[0],y=v[1],b=(0,L.useCallback)(function(e){return y(function(){return e}),function(){}},[]),S=(0,L.useRef)(!1);return(0,Z.usePid2)(function(e,t){var n=t.signal;return(0,Q._)(function(){var t,i,a,o,l,d,p,f,m,g;return(0,J._)(this,function(v){switch(v.label){case 0:if(S.current||!h||!x)return[2];i=(t=e.workflows.connectToTask.stream({runId:u,taskIdx:c,userId:r,processViewId:s},{signal:n})).resReadable,a=t.reqWritable,S.current=!0,a.write({$kind:"resize",size:h.getSize()}),o=!1,l=!1,v.label=1;case 1:v.trys.push([1,6,7,12]),p=(0,X._)(i),v.label=2;case 2:return[4,p.next()];case 3:if(!(o=!(f=v.sent()).done))return[3,5];if(!(m=f.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&x(m.payload.chunk),v.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return g=v.sent(),l=!0,d=g,[3,12];case 7:if(v.trys.push([7,,10,11]),!(o&&null!=p.return))return[3,9];return[4,p.return()];case 8:v.sent(),v.label=9;case 9:return[3,11];case 10:if(l)throw d;return[7];case 11:return[7];case 12:return a.close(),[2]}})})()},[u,c,x,h,r,s]),(0,n.jsx)(I.View,{css:ea.terminalWrapper,style:{height:p,background:null==l?void 0:l.background},children:(0,n.jsx)(ee.AutoGrowingTerminalWrapper,{onInput:ei,xterm:h,wrapperResizeRef:m,bufferHeight:f,setOnMessage:b,onResizeTerminal:ei,children:(0,n.jsx)(ee.AutoGrowingTerminalInner,{xtermRef:g,visibleHeight:p,maxHeight:o})})})}e.s(["default",()=>eo],252788);var es=e.i(729122),el=e.i(940745),eu=e.i(559073),ec=e.i(121817),ed=(0,en.cssRecord)({body:[er.rcss.height("100%"),er.rcss.minHeight("100%")]});function ep(e){var t=e.data,i=e.openPane,a=t.workflowName,o=t.state,s=(0,es.useWorkflowsRunState)(),l=(0,Y.useCurrentUserId)(),u=(0,et.useTerminalTheme)(),c=(0,L.useMemo)(function(){if(!s)return null;var e=Object.values(s).filter(function(e){return e.workflow.name===a});return 0===e.length?null:e.sort(function(e,t){return t.startTime-e.startTime})[0]},[a,s]);if(o===r.EventState.IN_PROGRESS)return(0,n.jsx)(I.View,{p:8,align:"center",children:(0,n.jsx)(el.default,{})});var d=(0,n.jsx)(I.View,{css:ed.body,style:{backgroundColor:null==u?void 0:u.background},children:c&&l?(0,n.jsx)(eo,{workflowRunState:c,currentUserId:l,openPane:i}):null});return(0,n.jsx)(_.EventPane,{left:t.restart?(0,n.jsx)(ec.default,{size:16}):(0,n.jsx)(eu.default,{size:16}),title:a,onOpenPane:function(){return i({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,children:d})}e.i(282890);var ef=e.i(66718);function em(e){return{type:(0,ef.getPaneTypeForFile)({path:e}),data:{path:e}}}e.s(["getPaneForFile",()=>em],959406);var eh=e.i(630818),eg=e.i(264661),ev=e.i(776324);function ex(e){return 0===e.resultFileNames.length?(0,n.jsx)(k.Text,{variant:"small",color:"dimmer",children:"No files found"}):(0,n.jsxs)(I.View,{gap:4,px:4,children:[(0,n.jsxs)(k.Text,{variant:"small",color:"dimmer",children:["Found ",(0,B.default)("file",e.resultFileNames.length,!0)]}),(0,n.jsx)(I.View,{row:!0,gap:6,align:"start",clsx:ev.default.files,children:e.resultFileNames.map(function(t){return(0,n.jsx)(V.Button,{size:"small",onClick:function(){return e.openPane(em(t))},iconLeft:(0,n.jsx)(eh.default,{size:12,path:t}),text:t,iconRight:(0,n.jsx)(eg.default,{})},t)})})]})}var ey=e.i(14689),eb=(0,L.memo)(function(e){return(0,n.jsx)(I.View,{pb:8,children:(0,n.jsx)(D.Surface,{elevated:!0,clsx:ey.default.surface,p:8,children:(0,n.jsx)(G.MessageMarkdown,{text:e.thoughts})})})});function eS(e){var _=e.data,w=e.openPane;switch(null==_?void 0:_.$kind){case"fileEditData":return(0,n.jsx)(o.FileEdit,{data:_,openPane:w});case"createFileData":return(0,n.jsx)(i.CreateFile,{data:_,openPane:w});case"readFileData":return(0,n.jsx)(f.ReadFile,{data:_,openPane:w});case"readDirData":return(0,n.jsx)(p.ReadDir,{data:_});case"shellExecutionData":return(0,n.jsx)(v.ShellExecution,{data:_,openPane:w});case"packagerInstallData":return(0,n.jsx)(c.PackagerInstall,{data:_,openPane:w});case"packagerUninstallData":return(0,n.jsx)(d.PackagerUninstall,{data:_,openPane:w});case"systemDependencyInstallData":return(0,n.jsx)(b.SystemDependencyInstall,{data:_,openPane:w});case"systemDependencyUninstallData":return(0,n.jsx)(S.SystemDependencyUninstall,{data:_,openPane:w});case"toolchainInstallData":return(0,n.jsx)(T,{data:_,openPane:w});case"screenshotData":return(0,n.jsx)(h.Screenshot,{data:_});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,n.jsx)(ep,{data:_,openPane:w});case"createPostgresqlDatabaseData":return(0,n.jsx)(a.CreatePostgreSQLDatabase,{openPane:w});case"sqlExecutionData":return(0,n.jsx)(x.SqlExecution,{data:_,openPane:w});case"webSearchData":return(0,n.jsx)(K,(0,t._)({},_.data));case"webPageVisitData":return(0,n.jsx)(O,(0,t._)({},_.data));case"imageGenerationData":return(0,n.jsx)(l.ImageGeneration,(0,t._)({},_.data));case"generateMediaData":return(0,n.jsx)(s.GenerateMedia,(0,t._)({},_));case"stockImageData":return(0,n.jsx)(y.StockImageGeneration,(0,t._)({},_.data));case"searchFilesystemData":return(0,n.jsx)(ex,{resultFileNames:_.resultFileNames,openPane:w});case"samplingEvent":return(0,n.jsx)(m.SamplingEvent,{data:_});case"thoughts":return(0,n.jsx)(eb,(0,t._)({},_));case"searchIntegrationsData":return(0,n.jsx)(g.SearchIntegrations,(0,t._)({},_.data));case"viewIntegrationData":return(0,n.jsx)(E,(0,t._)({},_.data));case"mcpToolData":return(0,n.jsx)(u.MCPToolResult,(0,t._)({},_.data));default:if((null==_?void 0:_.state)===r.EventState.IN_PROGRESS)return(0,n.jsx)(ew,{});return null}}var e_=(0,en.cssRecord)({loading:[er.rcss.center]});function ew(){return(0,n.jsx)(I.View,{css:e_.loading,px:16,py:48,children:(0,n.jsx)(el.default,{})})}e.s(["ProgressRenderer",()=>eS],293198)},296038,e=>{e.v({button:"ToolUse-module__GDLg6G__button",chevron:"ToolUse-module__GDLg6G__chevron",expandableButton:"ToolUse-module__GDLg6G__expandableButton",label:"ToolUse-module__GDLg6G__label",openIcon:"ToolUse-module__GDLg6G__openIcon",toolUse:"ToolUse-module__GDLg6G__toolUse"})},250479,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(976926),s=e.i(412887),l=e.i(672320),u=e.i(667059),c=e.i(178815),d=e.i(971372),p=e.i(293198),f=e.i(389503),m=e.i(509908),h=e.i(64868),g=e.i(959406),v=e.i(480028),x=e.i(907371),y=e.i(960178),b=e.i(625484),S=e.i(576073),_=e.i(862615),w=e.i(264661),j=e.i(296038);function T(e){var t=e.toolDataKind,n=e.summary,r=e.icon;return(0,i.jsxs)(b.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[null!=r?r:(0,i.jsx)(c.ToolDataIcon,{color:v.tokens.foregroundDimmest,kind:t}),(0,i.jsx)(b.View,{align:"start",grow:!0,shrink:!0,children:(0,i.jsx)(f.Summary,{summary:n,color:"dimmer"})})]})}var D=(0,a.memo)(function(e){if(!e.toolDataKind)return(0,i.jsx)(A,{toolName:e.toolName,summary:e.summary});switch(null==(r=e.data)?void 0:r.$kind){case void 0:return(0,i.jsx)(A,{toolName:e.toolName,summary:e.summary});case"readDirData":case"memoryCompressionData":case"blueprintsSetup":case"setupModelfarmData":case"viewLogsData":case"viewSpecialFiles":case"designGuidelinesData":case"videoGenerationData":return(0,i.jsx)(E,{toolDataKind:e.data.$kind,summary:e.summary});case"waitingForBackgroundJobsData":return(0,i.jsx)(u.WaitingForBackgroundJobs,{data:e.data.data,state:e.data.state});case"messagedBackgroundAgent":return(0,i.jsx)(o.MessagedBackgroundAgent,{data:e.data.data,state:e.data.state});case"subagentReportResultData":return(0,i.jsx)(l.SubagentReportResult,{data:e.data.data,state:e.data.state});case"reportAgentIssueData":return(0,i.jsx)(s.ReportAgentIssue,{state:e.data.state});case"readFileData":var r,a,c=e.data.data.filePath;return(0,i.jsx)(C,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open file",onClick:function(){e.openPane((0,g.getPaneForFile)(c))}});case"setupObjectStorageData":return(0,i.jsx)(C,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open Object Storage",onClick:function(){e.openPane({type:"objectStorage"})}});case"createPostgresqlDatabaseData":return(0,i.jsx)(C,{toolDataKind:e.toolDataKind,summary:e.summary,label:"View Database",onClick:function(){e.openPane({type:"neon"})}});case"mcpToolData":if((0,h.isFigmaMCPTool)(null==(a=e.data.data)?void 0:a.serverName))return(0,i.jsx)(k,(0,n._)((0,t._)({},e),{icon:(0,i.jsx)(_.default,{color:v.tokens.foregroundDefault})}));return(0,i.jsx)(k,(0,t._)({},e));default:return(0,i.jsx)(k,(0,t._)({},e))}}),k=(0,a.memo)(function(e){var t="imageGenerationData"===e.toolDataKind||"generateMediaData"===e.toolDataKind,n=(0,r._)((0,a.useState)(t),2),o=n[0],s=n[1],l=e.id,u=e.sessionId,c=e.toolDataKind,d=(0,a.useCallback)(function(){s(function(e){return!e}),o||(0,m.trackAgentAnalyticsEvent)({action:"event_item_expanded",eventId:l,sessionId:u,toolDataKind:c})},[u,l,c,o]);return(0,i.jsxs)(b.View,{gap:6,children:[(0,i.jsxs)(x.Interactive,{variant:"nofill",px:4,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:d,clsx:[j.default.expandableButton,j.default.toolUse],children:[(0,i.jsx)(T,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon}),(0,i.jsx)(S.default,{color:v.tokens.foregroundDimmer,rotate:180*!!o,clsx:j.default.chevron})]}),o?(0,i.jsx)(p.ProgressRenderer,{data:e.data,openPane:e.openPane}):null]})});function C(e){return(0,i.jsxs)(x.Interactive,{variant:"nofill",px:4,clsx:[j.default.button,j.default.toolUse],tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:e.onClick,children:[(0,i.jsx)(T,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon}),(0,i.jsxs)(b.View,{row:!0,gap:6,align:"center",children:[(0,i.jsx)(y.Text,{variant:"small",color:"dimmer",clsx:j.default.label,children:e.label}),(0,i.jsx)(w.default,{clsx:j.default.openIcon})]})]})}function E(e){return(0,i.jsx)(b.View,{px:4,row:!0,gap:6,align:"center",justify:"space-between",clsx:j.default.toolUse,children:(0,i.jsx)(T,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon})})}function A(e){return(0,i.jsx)(b.View,{px:4,row:!0,gap:6,align:"center",justify:"space-between",clsx:j.default.toolUse,children:(0,i.jsxs)(b.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,i.jsx)(d.ToolNameIcon,{toolName:e.toolName}),(0,i.jsx)(b.View,{align:"start",grow:!0,shrink:!0,children:(0,i.jsx)(f.Summary,{summary:e.summary,color:"dimmer"})})]})})}e.s(["OpenableToolUse",()=>C,"StaticToolUse",()=>E,"ToolUse",()=>D])},694665,e=>{e.v({button:"TaskListCost-module__fVnFyG__button",loadingPlaceholder:"TaskListCost-module__fVnFyG__loadingPlaceholder","skeleton-data-loading":"TaskListCost-module__fVnFyG__skeleton-data-loading"})},562123,359699,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(509908),i=e.i(136540),a=e.i(960178),o=e.i(751273),s=e.i(625484),l=e.i(651499),u=e.i(694665);function c(e){var c=e.cents,d=e.isExpanded,p=e.setIsExpanded,f=(0,n.useCallback)(function(){p(!d),d||(0,r.trackAgentAnalyticsEvent)({action:"viewed_task_list_usage_cost"})},[d,p]);return(0,t.jsxs)(s.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(i.IconButton,{alt:"Agent Usage",onClick:f,clsx:u.default.button,children:(0,t.jsx)(l.default,{})}),d?null==c?(0,t.jsx)(o.Tooltip,{tooltip:"Loading usage information…",children:(0,t.jsx)(s.View,{clsx:u.default.loadingPlaceholder})}):(0,t.jsxs)(a.Text,{color:"dimmer",variant:"small",children:["$",(c/100).toFixed(2)]}):null]})}e.s(["TaskListCost",()=>c],562123);var d=e.i(374106);e.i(877212);var p=e.i(924908);e.i(925218);var f=e.i(267103),m=e.i(641555);function h(e){var t,n=(0,p.useChatter)(),r=(0,f.useObservable)(n.sessions.agent.current),i=(0,m.useObservableMemo)(function(){return null==r?void 0:r.reduce(g,"global")},[r],{default:void 0}),a=null==i||null==(t=i.event)?void 0:t.created;return(0,m.useObservableMemo)(function(){return e&&a?null==r?void 0:r.agent.usage(a):void 0},[r,a,e])}var g={direction:"reverse",state:{event:void 0},reducer:function(e,t){if((0,d.isEventAgentToolDataKind)(e,"endOfRunSummaryData")||(0,d.isEventContentsKind)(e,"sessionCreationEventContents"))return t.event=e,!1}};e.s(["useAgentUsageSinceLastBillingEvent",()=>h],359699)},197761,e=>{e.v({rotate:"TaskStatusIcon-module__rEH1rq__rotate",rotatingIcon:"TaskStatusIcon-module__rEH1rq__rotatingIcon"})},638274,e=>{e.v({chevron:"TaskListDrawer-module__WGwI0G__chevron",chevronIconContainer:"TaskListDrawer-module__WGwI0G__chevronIconContainer",drawerItems:"TaskListDrawer-module__WGwI0G__drawerItems",drawerSurface:"TaskListDrawer-module__WGwI0G__drawerSurface",drawerSurfaceProposed:"TaskListDrawer-module__WGwI0G__drawerSurfaceProposed",emptyIconContainer:"TaskListDrawer-module__WGwI0G__emptyIconContainer",expandableTaskItem:"TaskListDrawer-module__WGwI0G__expandableTaskItem",expandedContent:"TaskListDrawer-module__WGwI0G__expandedContent",showMoreButton:"TaskListDrawer-module__WGwI0G__showMoreButton",statusIconContainer:"TaskListDrawer-module__WGwI0G__statusIconContainer",taskContent:"TaskListDrawer-module__WGwI0G__taskContent",titleContainer:"TaskListDrawer-module__WGwI0G__titleContainer",truncatedSection:"TaskListDrawer-module__WGwI0G__truncatedSection"})},976944,e=>{e.v({changesButton:"TaskList-module__XwSK2W__changesButton",chevron:"TaskList-module__XwSK2W__chevron",expandableButton:"TaskList-module__XwSK2W__expandableButton",expandedContainer:"TaskList-module__XwSK2W__expandedContainer"})},474429,e=>{e.v({agentAction:"EventRenderer-module__RTGgnG__agentAction",eventContainer:"EventRenderer-module__RTGgnG__eventContainer",userMessage:"EventRenderer-module__RTGgnG__userMessage"})},117328,690767,e=>{"use strict";e.s(["EventContainer",()=>eT,"EventRenderer",()=>ej],117328);var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(817556),o=e.i(276385),s=e.i(389959),l=e.i(992785);e.i(925218);var u=e.i(641555),c=e.i(569910),d=e.i(597865),p=e.i(418689),f=e.i(831147),m=e.i(287999),h=e.i(526962),g=e.i(316799),v=e.i(68612),x=e.i(191654),y=e.i(840732),b=e.i(314535),S=e.i(202975),_=e.i(774671),w=e.i(422145),j=e.i(66373),T=e.i(682872),D=e.i(489172),k=e.i(956002),C=e.i(71834),E=e.i(10537),A=e.i(225821),I=e.i(202872),R=e.i(530658),P=e.i(188507),M=e.i(250479),O=e.i(178815),N=e.i(509908),L=e.i(166876),B=e.i(346715),V=e.i(562123),U=e.i(359699),F=e.i(374106);e.i(877212);var H=e.i(924908),G=e.i(267103),z=e.i(149448),q=e.i(480028),W=e.i(751273),K=e.i(625484),$=e.i(616278),Y=e.i(167690),X=e.i(245225),Q=e.i(993134),J=e.i(281594),Z=e.i(197761);function ee(e){var t=e.status,n=e.oldStatus,r=e.tooltipContent;switch(t){case P.TaskStatus.TASK_STATUS_COMPLETED:if(n===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW)return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task completed & reviewed",children:(0,o.jsx)(J.default,{color:q.tokens.foregroundDimmer,size:16})});return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task completed",children:(0,o.jsx)($.default,{color:q.tokens.foregroundDimmer,size:16})});case P.TaskStatus.TASK_STATUS_IN_PROGRESS:return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task in progress",children:(0,o.jsx)(K.View,{clsx:Z.default.rotatingIcon,align:"center",justify:"center",children:(0,o.jsx)(X.default,{color:q.tokens.foregroundDimmer,size:16})})});case P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW:return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task completed, pending review",children:(0,o.jsx)(Q.default,{color:q.tokens.foregroundDimmer,size:16})});case P.TaskStatus.TASK_STATUS_PENDING:default:return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task pending",children:(0,o.jsx)(Y.default,{color:q.tokens.foregroundDimmest,size:16})})}}var et=e.i(719976),en=e.i(929872),er=e.i(960178),ei=e.i(916271),ea=e.i(576073),eo=e.i(462783),es=e.i(638274);function el(e){var t=e.task,r=e.approvalStatus,i=(0,R._)((0,s.useState)(!1),2),a=i[0],l=i[1],u="proposed"!==r;return(0,o.jsxs)(K.View,{gap:2,children:[(0,o.jsxs)(K.View,{clsx:[es.default.taskItem,es.default.expandableTaskItem],row:!0,justify:"space-between",align:"center",gap:8,px:8,py:4,role:"button",children:[(0,o.jsx)(K.View,{grow:!0,shrink:!0,row:!0,align:"center",gap:4,onClick:function(){return l(!a)},children:(0,o.jsxs)(er.Text,{clsx:es.default.taskContent,color:ec(t.status,r),shrink:!0,children:[(0,L.getTaskSummary)(t)," ",(0,o.jsx)(ea.default,{rotate:180*!!a,clsx:es.default.chevron,color:q.tokens.foregroundDimmest})]})}),u?(0,o.jsx)(K.View,{clsx:es.default.statusIconContainer,p:4,align:"center",justify:"center",children:(0,o.jsx)(ee,(0,n._)({},t))}):null]}),a?(0,o.jsx)(K.View,{clsx:es.default.expandedContent,pr:16,pt:4,pl:24,pb:8,children:t.extraDetails?(0,o.jsx)(ei.default,{children:t.extraDetails}):(0,o.jsx)(er.Text,{color:"dimmer",children:t.content})}):null]})}function eu(e){var t=e.task,r=e.approvalStatus,i="proposed"!==r;return(0,o.jsxs)(K.View,{clsx:es.default.taskItem,row:!0,justify:"space-between",align:"center",gap:8,px:8,py:4,children:[(0,o.jsx)(K.View,{grow:!0,shrink:!0,children:(0,o.jsx)(er.Text,{clsx:es.default.taskContent,color:ec(t.status,r),children:(0,L.getTaskSummary)(t)})}),i?(0,o.jsx)(K.View,{clsx:es.default.statusIconContainer,p:4,align:"center",justify:"center",children:(0,o.jsx)(ee,(0,n._)({},t))}):null]})}function ec(e,t){return"proposed"===t?"default":e===P.TaskStatus.TASK_STATUS_COMPLETED||e===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW?"dimmest":e===P.TaskStatus.TASK_STATUS_PENDING?"dimmer":"default"}function ed(e){var t=e.tasks,n=e.approvalStatus,r=e.areTaskDetailsExpandable,i=void 0!==r&&r;return(0,o.jsx)(o.Fragment,{children:t.map(function(e){return i&&(0,L.hasExpandableTaskDetails)(e)?(0,o.jsx)(el,{task:e,approvalStatus:n},e.id):(0,o.jsx)(eu,{task:e,approvalStatus:n},e.id)})})}function ep(e){var t=e.innerRef,r=e.approvalStatus,a=e.placement,l=e.isCollapsed,u=e.setIsCollapsed,c=e.areTaskDetailsExpandable,d=e.agentUsage,p=e.isCostInfoExpanded,f=e.setIsCostInfoExpanded,m=e.isCostInfoHidden,h=(0,i._)(e,["innerRef","approvalStatus","placement","isCollapsed","setIsCollapsed","areTaskDetailsExpandable","agentUsage","isCostInfoExpanded","setIsCostInfoExpanded","isCostInfoHidden"]),g=null!=a?a:"proposed"===r?"bottom":"top",v=h.tasks,x=(0,R._)((0,s.useState)(!1),2),y=x[0],b=x[1],S=(0,s.useRef)(null),_=v.filter(function(e){return e.status===P.TaskStatus.TASK_STATUS_COMPLETED||e.status===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW}).length,w=(0,L.isFullyCompletedTaskList)(v),j=(0,s.useMemo)(function(){var e=[],t=[],n=[],r=[];return v.forEach(function(i){switch(i.status){case P.TaskStatus.TASK_STATUS_COMPLETED:e.push(i);break;case P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW:r.push(i);break;case P.TaskStatus.TASK_STATUS_IN_PROGRESS:t.push(i);break;case P.TaskStatus.TASK_STATUS_PENDING:default:n.push(i)}}),{completed:e,completedPendingReview:r,inProgress:t,pending:n}},[v]),T=!w&&j.completed.length>3,D=T&&!y?j.completed.length-3:0,k=T&&!y?j.completed.slice(D):j.completed,C=(0,s.useMemo)(function(){return j.inProgress[0]},[j.inProgress]),E=(0,s.useMemo)(function(){return"proposed"===r?"Proposed tasks":w?"Completed tasks":l&&C?(0,L.getTaskSummary)(C):"In progress tasks"},[r,l,C,w]);return(0,o.jsxs)(en.Surface,{elevated:!0,clsx:[es.default.drawerSurface,"proposed"===r?es.default.drawerSurfaceProposed:void 0],gap:4,grow:1,shrink:1,innerRef:t,children:[(0,o.jsxs)(K.View,{clsx:es.default.titleContainer,row:!0,gap:4,align:"center",justify:"space-between",py:8,pl:4,pr:12,onClick:function(){return u(function(e){return!e})},children:[(0,o.jsxs)(K.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,o.jsx)(W.Tooltip,{tooltip:l?"Expand":"Collapse",children:(0,o.jsx)(K.View,{clsx:es.default.chevronIconContainer,align:"center",justify:"center",children:"bottom"===g?l?(0,o.jsx)(eo.default,{}):(0,o.jsx)(ea.default,{}):l?(0,o.jsx)(ea.default,{}):(0,o.jsx)(eo.default,{})})}),(0,o.jsx)(er.Text,{color:"dimmer",ref:S,shrink:!0,multiline:!1,showTooltipOnTruncate:!0,children:E})]}),"proposed"!==r?(0,o.jsxs)(K.View,{row:!0,gap:8,align:"center",children:[(0,o.jsxs)(er.Text,{color:"dimmer",variant:"small",children:[_," / ",v.length]}),C&&l?(0,o.jsx)(K.View,{pr:2,children:(0,o.jsx)(ee,(0,n._)({},C))}):null,void 0!==m&&m||l?null:(0,o.jsx)(V.TaskListCost,{cents:null==d?void 0:d.cents,isExpanded:p,setIsExpanded:f})]}):null]}),l?null:(0,o.jsxs)(K.View,{clsx:es.default.drawerItems,shrink:!0,px:2,pb:8,children:[T&&!y?(0,o.jsx)(K.View,{clsx:es.default.truncatedSection,children:(0,o.jsx)(K.View,{row:!0,justify:"center",align:"center",p:2,children:(0,o.jsx)(et.PillButton,{clsx:es.default.showMoreButton,onClick:function(){return b(!0)},text:"Show ".concat(D," more completed task").concat(1===D?"":"s")})})}):null,(0,o.jsx)(ed,{tasks:(0,B._)(k).concat((0,B._)(j.completedPendingReview),(0,B._)(j.inProgress),(0,B._)(j.pending)),approvalStatus:r,areTaskDetailsExpandable:void 0!==c&&c}),0===v.length?(0,o.jsxs)(K.View,{row:!0,px:2,align:"center",gap:4,children:[(0,o.jsx)(K.View,{clsx:es.default.emptyIconContainer}),(0,o.jsx)(er.Text,{color:"dimmest",children:"No tasks to show"})]}):null]})]})}function ef(e){var t,a,l,u=e.approvalStatus,c=(0,i._)(e,["approvalStatus"]),d="approved"===u,p=(0,R._)((0,s.useState)(null!=d?d:"approved"===u),2),f=p[0],m=p[1],h=(0,R._)((0,s.useState)(!1),2),g=h[0],v=h[1],x=(t=(0,H.useChatter)(),a=(0,G.useObservable)(t.sessions.agent.current),!!(null==(l=(0,z.useLastEvent)(a))?void 0:l.event)&&(0,F.isEventAgentToolDataKind)(l.event,"endOfRunSummaryData")),y=(0,U.useAgentUsageSinceLastBillingEvent)(!x&&g);return(0,o.jsx)(ep,(0,r._)((0,n._)({},c),{approvalStatus:u,isCollapsed:f,setIsCollapsed:m,isCostInfoExpanded:g,setIsCostInfoExpanded:v,agentUsage:y,isCostInfoHidden:x}))}e.s(["TaskListDrawer",()=>ef,"TaskListItems",()=>ed],690767);var em=e.i(907371),eh=e.i(718610),eg=e.i(976944);function ev(e){var t=e.isAwaitingTaskListApproval,n=(0,i._)(e,["isAwaitingTaskListApproval"]).eventState;return void 0!==t&&t?null:(0,o.jsx)(M.StaticToolUse,{toolDataKind:"taskListData",summary:n===P.EventState.IN_PROGRESS?"Creating task list…":"Created task list"})}function ex(e){var t=e.onOpenCommit,n=e.tasks,r=e.commitData,i=e.id,a=e.sessionId,l=(0,R._)((0,s.useState)(!1),2),u=l[0],c=l[1],d=(0,s.useCallback)(function(){c(function(e){return!e}),u||(0,N.trackAgentAnalyticsEvent)({action:"event_item_expanded",eventId:i,sessionId:a,toolDataKind:"taskListData"})},[i,a,u]),p=(0,s.useCallback)(function(e){e.stopPropagation(),(null==r?void 0:r.commitId)&&t(r.commitId)},[r,t]);return(0,o.jsxs)(K.View,{gap:6,pt:4,children:[(0,o.jsxs)(em.Interactive,{variant:"nofill",px:4,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:d,clsx:eg.default.expandableButton,children:[(0,o.jsxs)(K.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,o.jsx)(O.ToolDataIcon,{kind:"taskListData",color:q.tokens.foregroundDimmest}),(0,o.jsx)(er.Text,{color:"dimmer",children:"Completed tasks"})]}),(0,o.jsx)(ea.default,{color:q.tokens.foregroundDimmer,rotate:180*!!u,clsx:eg.default.chevron})]}),u?(0,o.jsxs)(en.Surface,{elevated:!0,clsx:eg.default.expandedContainer,p:2,children:[(0,o.jsx)(ed,{tasks:n,approvalStatus:"approved"}),(null==r?void 0:r.commitId)?(0,o.jsxs)(em.Interactive,{variant:"nofill",tag:"button",row:!0,gap:4,align:"center",px:8,py:4,onClick:p,clsx:eg.default.changesButton,children:[(0,o.jsx)(eh.default,{size:16,color:q.tokens.foregroundDimmer}),(0,o.jsx)(er.Text,{variant:"small",color:"dimmer",children:"Changes"})]}):null]}):null]})}function ey(e){var t=e.completedTasks,r=e.tasks,i=e.commitData,a=e.onOpenCommit;return(0,L.isFullyCompletedTaskList)(r)&&r.length>1?(0,o.jsx)(ex,(0,n._)({},e)):(0,o.jsx)(K.View,{gap:8,py:4,children:t.map(function(e){return i&&i.commitId?(0,o.jsx)(M.OpenableToolUse,{toolDataKind:"taskListData",icon:(0,o.jsx)(ee,(0,n._)({},e)),summary:(0,L.getTaskSummary)(e),label:"View changes",onClick:function(){a(i.commitId)}},e.id):(0,o.jsx)(M.StaticToolUse,{toolDataKind:"taskListData",icon:(0,o.jsx)(ee,(0,n._)({},e)),summary:(0,L.getTaskSummary)(e)},e.id)})})}var eb=e.i(798790),eS=e.i(484921);function e_(e){var t=e.created,n=e.agentConfig;return(0,o.jsx)(eb.UserMessageContainer,{created:t,agentConfig:n,children:(0,o.jsx)(eb.UserMessageSurface,{agentMode:P.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,o.jsx)(er.Text,{children:eS.TASK_LIST_START_BUILDING_MESSAGE})})})}var ew=e.i(474429),ej=(0,s.memo)(function(e){var R=e.data,P=e.subagentRenderer,O=(0,i._)(e,["data","subagentRenderer"]),N=O.openPane,L=(0,u.useObservableMemo)(function(){return R.select(function(e){return e},l.default)},[R]),B=(0,s.useCallback)(function(e){return N({type:"git",data:{mode:{type:h.GitPaneModeType.COMMIT,hash:e}}})},[N]),V=(0,g.useLinkUnlinkSecrets)(O.secrets.replaceAllExternalSecrets),U=V.linkSecrets,F=V.unlinkSecrets,H=(0,m.useCheckpoints)(),G=H.renameCommit,z=H.findCommit,q=(0,d.default)(function(e){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return[2,t.sent()]}})})()},[]);if(!L)return(0,o.jsx)(K.View,{children:"No data found for event"});switch(L.type){case"planProposal":return(0,o.jsx)(eT,{children:(0,o.jsx)(T.PlanProposal,(0,n._)({},L))});case"userMessage":return(0,o.jsx)(eT,{clsx:ew.default.userMessage,children:(0,o.jsx)(eb.UserMessage,{message:L.message,attachments:L.uploadedFiles,acknowledged:L.acknowledged,created:L.created,readFile:O.readFile,targetedElement:L.targetedElement,openPane:O.openPane,agentConfig:L.agentConfig})});case"agentMessage":return(0,o.jsx)(eT,{children:(0,o.jsx)(v.AgentMessage,{eventId:L.id,state:L.state,message:L.message,requestedSecrets:L.requestedSecrets,requestedEnvVars:L.requestedEnvVars,waitingOnUser:L.waitingOnUser,sessionId:L.sessionId,openPane:O.openPane,secrets:O.secrets,sendAskUserForActionResponse:O.sendAskUserForActionResponse,linkSecrets:U,unlinkSecrets:F})});case"setupImport":return(0,o.jsx)(eT,{children:(0,o.jsx)(C.SetupImport,{sessionId:L.sessionId,importSource:L.importSource,state:L.state})});case"agentToolUse":return(0,o.jsx)(eT,{clsx:ew.default.agentAction,children:(0,o.jsx)(M.ToolUse,{toolName:L.toolName,toolDataKind:L.toolDataKind,summary:L.summary,data:L.data,sessionId:L.sessionId,id:L.id,openPane:O.openPane})});case"checkpoint":var W,$,Y,X=(null==q?void 0:q.error)===null&&q.commit===L.commitId,Q=!!((null==q?void 0:q.error)===null&&q.changes&&q.changes.length>0),J=z(L.commitId);return(0,o.jsx)(eT,{children:(0,o.jsx)(b.Checkpoint,{eventState:L.state,openPane:N,onOpenCommit:B,onSessionChange:O.onSessionChange,checkpoint:(0,r._)((0,n._)({},L),{title:null!=(W=null==J?void 0:J.customSubject)?W:L.title,isLatest:X,isDirty:Q,missingAgentState:null!=($=null==J?void 0:J.missingAgentState)&&$,beforeReplCreation:null!=(Y=null==J?void 0:J.beforeReplCreation)&&Y}),onRenameTitle:G})});case"endOfRunSummary":return(0,o.jsx)(eT,{children:(0,o.jsx)(S.EndOfRunSummary,{summary:L})});case"suggestDeploy":return(0,o.jsx)(eT,{children:(0,o.jsx)(E.SuggestDeploy,{openPane:N})});case"suggestRollback":return(0,o.jsx)(eT,{children:(0,o.jsx)(I.SuggestRollback,{suggestRollbackReason:L.suggestRollbackReason,onShowCheckpoints:O.onShowCheckpoints})});case"suggestGeneralBuildMode":return(0,o.jsx)(eT,{children:(0,o.jsx)(A.SuggestGeneralBuildMode,{message:L.message,suggestedAutonomyLevel:L.suggestedAutonomyLevel,onSwitchToAutonomousBuildMode:O.onSwitchToAutonomousBuildMode})});case"askUserForAction":return(0,o.jsx)(eT,{children:(0,o.jsx)(y.AskUserForAction,(0,r._)((0,n._)({},L),{eventId:L.id,sendAskUserForActionResponse:O.sendAskUserForActionResponse,secrets:O.secrets,openPane:O.openPane,linkSecrets:U,unlinkSecrets:F}))});case"taskListApproval":return(0,o.jsx)(eT,{children:(0,o.jsx)(e_,{created:L.created,agentConfig:L.agentConfig})});case"revert":return(0,o.jsx)(eT,{children:(0,o.jsx)(k.RollbackStatus,{event:L,onSessionChange:O.onSessionChange})});case"taskList":if("itemsCompleted"===L.subType)return(0,o.jsx)(eT,{children:(0,o.jsx)(ey,(0,r._)((0,n._)({},L),{onOpenCommit:B,tasks:L.tasks,commitData:L.commitData,estimatedUsageCents:L.estimatedUsageCents}))});if("creation"===L.subType)return(0,o.jsx)(eT,{children:(0,o.jsx)(ev,(0,r._)((0,n._)({},L),{isAwaitingTaskListApproval:O.isAwaitingTaskListApproval}))});return null;case"error":return(0,o.jsx)(eT,{children:(0,o.jsx)(_.ErrorMessage,{message:L.message,shortMessage:L.shortMessage})});case"tipRecommendation":return O.tipData?(0,o.jsx)(eT,{children:(0,o.jsx)(x.TipRecommendation,{event:L,tipData:O.tipData,bonsaiTourTipInfo:O.bonsaiTourTipInfo,openPane:N,onNewSession:O.onNewSession})}):null;case"subagent":if(!P)return null;return(0,o.jsx)(eT,{children:(0,o.jsx)(P,(0,n._)({data:L},O))});case"planApproval":return(0,o.jsx)(eT,{children:(0,o.jsx)(j.PlanApproval,{created:L.created,initialBuildMode:L.initialBuildMode,agentConfig:L.agentConfig})});case"convertMockupToAppRequest":return(0,o.jsx)(p.ConvertMockupToAppRequest,{message:L.message,id:L.id,created:L.created});case"convertMockupToAppResponse":return(0,o.jsx)(f.ConvertMockupToAppResponse,{created:L.created,additionalComments:L.additionalComments});case"initialBuildPhaseApproval":return(0,o.jsx)(eT,{children:(0,o.jsx)(w.InitialBuildPhaseApproval,{created:L.created,agentConfig:L.agentConfig,initialBuildPhase:L.initialBuildPhase})});case"queryRequest":return(0,o.jsx)(eT,{children:(0,o.jsx)(D.QueryRequest,{id:L.id,created:L.created,queries:L.queries,responses:L.responses})});default:(0,c.default)(L)}});function eT(e){var t=e.children,a=(0,i._)(e,["children"]);return(0,o.jsx)(K.View,(0,r._)((0,n._)({clsx:ew.default.eventContainer},a),{children:t}))}}]);

//# debugId=cf605d43-f9a1-7e3c-e9cc-dfcfa89ace79
//# sourceMappingURL=354dac5638268492.js.map