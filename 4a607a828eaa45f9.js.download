;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="baf150f0-a7f6-5436-0478-8f212da52887")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,634707,(e,n,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e,n){return -1!==e.indexOf(n)},n.exports=t.default,n.exports.default=t.default},319122,(e,n,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,n){if((0,r.default)(e),!e||/[\s<>]/.test(e)||0===e.indexOf("mailto:")||(n=(0,a.default)(n,d)).validate_length&&e.length>n.max_allowed_length||!n.allow_fragments&&(0,o.default)(e,"#")||!n.allow_query_components&&((0,o.default)(e,"?")||(0,o.default)(e,"&")))return!1;var t,u,p,h,m,y,x,g,v=(e=(x=(e=(x=e.split("#")).shift()).split("?")).shift()).match(/^([a-z][a-z0-9+\-.]*):/i),E=!1,b=function(r){return E=!0,t=r.toLowerCase(),(!n.require_valid_protocol||-1!==n.protocols.indexOf(t))&&e.substring(v[0].length)};if(v){var _=v[1],I=e.substring(v[0].length);if("//"===I.slice(0,2)){if(!1===(e=b(_)))return!1}else{var w=I.indexOf("/"),T=-1===w?I:I.substring(0,w),S=T.indexOf("@");if(-1!==S){var O=T.substring(0,S);if(/^[a-zA-Z0-9\-_.%:]*$/.test(O)){if(n.require_protocol)return!1}else if(!1===(e=b(_)))return!1}else if(/^[0-9]/.test(I)){if(n.require_protocol)return!1}else if(!1===(e=b(_)))return!1}}else if(n.require_protocol)return!1;if("//"===e.slice(0,2)){if(!E&&!n.allow_protocol_relative_urls)return!1;e=e.slice(2)}if(""===e)return!1;if(""===(e=(x=e.split("/")).shift())&&!n.require_host)return!0;if((x=e.split("@")).length>1){if(n.disallow_auth||""===x[0]||(u=x.shift()).indexOf(":")>=0&&u.split(":").length>2)return!1;var L,C=function(e){if(Array.isArray(e))return e}(L=u.split(":"))||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,l,s=[],a=!0,u=!1;try{o=(t=t.call(e)).next,!1;for(;!(a=(r=o.call(t)).done)&&(s.push(r.value),2!==s.length);a=!0);}catch(e){u=!0,i=e}finally{try{if(!a&&null!=t.return&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw i}}return s}}(L,2)||function(e,n){if(e){if("string"==typeof e)return f(e,2);var t=({}).toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?f(e,2):void 0}}(L,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),U=C[0],A=C[1];if(""===U&&""===A)return!1}h=x.join("@"),y=null,g=null;var j=h.match(c);if(j?(p="",g=j[1],y=j[2]||null):(p=(x=h.split(":")).shift(),x.length&&(y=x.join(":"))),null!==y&&y.length>0){if(m=parseInt(y,10),!/^[0-9]+$/.test(y)||m<=0||m>65535)return!1}else if(n.require_port)return!1;return n.host_whitelist?(0,i.default)(p,n.host_whitelist):""===p&&!n.require_host||(!!(0,s.default)(p)||!!(0,l.default)(p,n)||!!g&&!!(0,s.default)(g,6))&&(p=p||g,!(n.host_blacklist&&(0,i.default)(p,n.host_blacklist)))};var r=u(e.r(669996)),i=u(e.r(35073)),o=u(e.r(634707)),l=u(e.r(919872)),s=u(e.r(97982)),a=u(e.r(718435));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var d={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0,max_allowed_length:2084},c=/^\[([^\]]+)\](?::([0-9]+))?$/;n.exports=t.default,n.exports.default=t.default},257888,(e,n,t)=>{n.exports=function(e){var n;if("string"!=typeof e||""===e)return!1;for(;n=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(n[2])return!0;e=e.slice(n.index+n[0].length)}return!1}},884244,(e,n,t)=>{var r=e.r(257888),i={"{":"}","(":")","[":"]"},o=function(e){if("!"===e[0])return!0;for(var n=0,t=-2,r=-2,o=-2,l=-2,s=-2;n<e.length;){if("*"===e[n]||"?"===e[n+1]&&/[\].+)]/.test(e[n])||-1!==r&&"["===e[n]&&"]"!==e[n+1]&&(r<n&&(r=e.indexOf("]",n)),r>n)&&(-1===s||s>r||-1===(s=e.indexOf("\\",n))||s>r)||-1!==o&&"{"===e[n]&&"}"!==e[n+1]&&(o=e.indexOf("}",n))>n&&(-1===(s=e.indexOf("\\",n))||s>o)||-1!==l&&"("===e[n]&&"?"===e[n+1]&&/[:!=]/.test(e[n+2])&&")"!==e[n+3]&&(l=e.indexOf(")",n))>n&&(-1===(s=e.indexOf("\\",n))||s>l)||-1!==t&&"("===e[n]&&"|"!==e[n+1]&&(t<n&&(t=e.indexOf("|",n)),-1!==t&&")"!==e[t+1]&&(l=e.indexOf(")",t))>t)&&(-1===(s=e.indexOf("\\",t))||s>l))return!0;if("\\"===e[n]){var a=e[n+1];n+=2;var u=i[a];if(u){var f=e.indexOf(u,n);-1!==f&&(n=f+1)}if("!"===e[n])return!0}else n++}return!1},l=function(e){if("!"===e[0])return!0;for(var n=0;n<e.length;){if(/[*?{}()[\]]/.test(e[n]))return!0;if("\\"===e[n]){var t=e[n+1];n+=2;var r=i[t];if(r){var o=e.indexOf(r,n);-1!==o&&(n=o+1)}if("!"===e[n])return!0}else n++}return!1};n.exports=function(e,n){if("string"!=typeof e||""===e)return!1;if(r(e))return!0;var t=o;return n&&!1===n.strict&&(t=l),t(e)}},9293,198769,316953,e=>{"use strict";var n=e.i(530658),t=e.i(960933),r=e.i(862927),i=e.i(686040),o=e.i(884244),l=e.i(84466),s=e.i(319122),a=[{key:"read",friendlyName:"Read files",description:"Read any file in your App"},{key:"write-exec",friendlyName:"Write & Execute",description:"Write to any file in your App and execute any code"},{key:"repldb:read",friendlyName:"ReplDB Read",description:"Read any key, or list all keys under any prefix in the repldb belonging to your App"},{key:"repldb:write",friendlyName:"ReplDB Write",description:"Write or delete any key in the repldb belonging to your App"},{key:"experimental-api",friendlyName:"Experimental APIs",description:"Use experimental APIs that may be unstable, change in behavior, or be removed entirely"}],u=a.map(function(e){return e.key});e.s(["scopeNames",()=>u,"scopes",()=>a],198769);var f=e.i(837399),d=t.Type.String({minLength:1,maxLength:64}),c=t.Type.Object({path:t.Type.String({minLength:1}),label:t.Type.String({minLength:1})}),p=t.Type.Object({image:(0,f.Nullish)(t.Type.String({minLength:1})),title:t.Type.String({minLength:1,maxLength:60}),body:t.Type.String({minLength:1,maxLength:512})}),h=t.Type.Object({glob:t.Type.String({minLength:1}),handler:t.Type.String({minLength:1}),name:(0,f.Nullish)(t.Type.String({minLength:1})),icon:(0,f.Nullish)(t.Type.String({minLength:1}))}),m=t.Type.Object({handler:t.Type.String({minLength:1}),name:(0,f.Nullish)(t.Type.String({minLength:1})),icon:(0,f.Nullish)(t.Type.String({minLength:1}))}),y=t.Type.Union(u.map(function(e){return t.Type.Literal(e)})),x=t.Type.Object({name:y,reason:t.Type.String()}),g=t.Type.Object({page:t.Type.String()}),v=t.Type.Object({name:t.Type.String({minLength:1,maxLength:60}),description:t.Type.String({minLength:1,maxLength:255}),scopes:(0,f.Nullish)(t.Type.Array(x)),longDescription:(0,f.Nullish)(t.Type.String({minLength:1})),icon:(0,f.Nullish)(t.Type.String({minLength:1})),tags:(0,f.Nullish)(t.Type.Array(d,{maxItems:16})),coverImages:(0,f.Nullish)(t.Type.Array(c,{maxItems:16})),fileHandlers:(0,f.Nullish)(t.Type.Array(h,{maxItems:4})),tools:(0,f.Nullish)(t.Type.Array(m,{maxItems:4})),website:(0,f.Nullish)(t.Type.String()),authorEmail:(0,f.Nullish)(t.Type.String()),background:(0,f.Nullish)(g),features:(0,f.Nullish)(t.Type.Array(p,{minItems:1,maxItems:10}))});function E(e){var t=function(n,t,r){return{manifest:null,error:new f.TypeboxError([{type:t,schema:v,path:n,value:e,message:r,errors:[]}])}};if(r.Value.Check(v,e)){if(e.website&&!(0,s.default)(e.website))return t("website",i.ValueErrorType.StringFormat,"website must be a valid url");if(e.authorEmail&&!(0,l.default)(e.authorEmail))return t("authorEmail",i.ValueErrorType.StringFormat,"authorEmail must be a valid email");var a=null!=(p=e.fileHandlers)?p:[],u=!0,d=!1,c=void 0;try{for(var p,h,m=a.entries()[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var y=(0,n._)(h.value,2),x=y[0],g=y[1];if(!(0,o.default)(g.glob))return t("fileHandlers[".concat(x,"].glob"),i.ValueErrorType.StringFormat,"glob must be a valid glob pattern")}}catch(e){d=!0,c=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw c}}if(a&&a.length>1){var E=!0,b=!1,_=void 0;try{for(var I,w=a.entries()[Symbol.iterator]();!(E=(I=w.next()).done);E=!0){var T=(0,n._)(I.value,2),S=T[0],O=T[1];if(!(O.icon&&O.name))return t("fileHandlers[".concat(S,"]"),i.ValueErrorType.ObjectRequiredProperty,"When at least two fileHandlers are provided, they must all specify a name and icon")}}catch(e){b=!0,_=e}finally{try{E||null==w.return||w.return()}finally{if(b)throw _}}}var L=null!=(j=e.tools)?j:[];if(L&&L.length>1){var C=!0,U=!1,A=void 0;try{for(var j,q,N=L.entries()[Symbol.iterator]();!(C=(q=N.next()).done);C=!0){var k=(0,n._)(q.value,2),R=k[0],M=k[1];if(!(M.icon&&M.name))return t("tool[".concat(R,"]"),i.ValueErrorType.ObjectRequiredProperty,"When at least two tools are provided, they must all specify a name and icon")}}catch(e){U=!0,A=e}finally{try{C||null==N.return||N.return()}finally{if(U)throw A}}}return{manifest:e,error:null}}return{manifest:null,error:(0,f.validationErrors)(v,e)}}function b(e){var n=E(e);if(n.manifest)return n.manifest;throw n.error}function _(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:null!=(e=t.name)?e:"Unnamed Extension",description:null!=(n=t.description)?n:"(no description)"}}function I(e,n){return!!e.scopes&&void 0!==e.scopes.find(function(e){return e.name===n})}function w(e){var n;if(!e)throw Error("Expected baseUrl");try{n=new URL(e)}catch(e){throw Error("baseUrl failed to parse as URL")}if("https:"!==n.protocol)throw Error("baseUrl must use https");return n.href.replace(/\/$/,"")}function T(e){return S(e,"extension.json")}function S(e,n){return new URL(n,w(e)).href}e.s(["asManifest",()=>b,"createDefaultManifest",()=>_,"hasScope",()=>I,"parseManifestOrError",()=>E],316953),e.s(["getAssetUrl",()=>S,"getManifestUrl",()=>T,"getValidBaseUrlOrThrow",()=>w],9293)},253344,e=>{"use strict";var n=e.i(960933);function t(e){return e}function r(e){return e}function i(e){return e}Symbol("extensionId"),Symbol("installationId"),Symbol("extensionCommandId"),n.Type.Record(n.Type.String(),n.Type.Object({extensionId:n.Type.String(),fileHandlerId:n.Type.String()})),e.s(["asExtensionCommandId",()=>i,"asExtensionId",()=>t,"asInstallationId",()=>r])},692043,e=>{"use strict";e.i(878420);var n=e.i(569384),t=e.i(973245);function r(){var e=(0,n._)(["\n  fragment TopLevelExtensionUser on User {\n    __typename\n    id\n    username\n    displayName\n    image\n    url\n  }\n"]);return r=function(){return e},e}function i(){var e=(0,n._)(["\n  fragment TopLevelExtensionManifest on ExtensionManifest {\n    __typename\n    name\n    description\n    scopes {\n      name\n      reason\n    }\n    icon\n    tags\n    fileHandlers {\n      glob\n      handler\n      name\n      icon\n    }\n    tools {\n      handler\n      name\n      icon\n    }\n    background {\n      page\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=(0,n._)(["\n  fragment TopLevelExtension on Extension {\n    __typename\n    id\n    url\n    name\n    description\n    user {\n      id\n      ...TopLevelExtensionUser\n    }\n    manifest {\n      ... on ExtensionManifest {\n        ...TopLevelExtensionManifest\n      }\n      ... on ExtensionManifestError {\n        message\n      }\n    }\n    installCount\n    isBlessed\n    isListed\n    isFeatured\n    isDisabled\n    enableInternalApi\n  }\n  ","\n  ","\n"]);return o=function(){return e},e}function l(){var e=(0,n._)(["\n  fragment TopLevelExtensionInstallation on ExtensionInstallation {\n    __typename\n    id\n    repl {\n      id\n    }\n    user {\n      id\n    }\n    extension {\n      id\n      ...TopLevelExtension\n    }\n    installer {\n      id\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function s(){var e=(0,n._)(["\n  query ExtensionSystemUserContext {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return s=function(){return e},e}function a(){var e=(0,n._)(["\n  query ExtensionInstallationById($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}function u(){var e=(0,n._)(["\n  query ExtensionInstallationsInRepl($replId: String!) {\n    extensionInstallations(replId: $replId) {\n      __typename\n      ... on ExtensionInstallationList {\n        installations {\n          ...TopLevelExtensionInstallation\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function f(){var e=(0,n._)(["\n  mutation InstallExtension($extensionId: String!, $replId: String) {\n    installExtension(extensionId: $extensionId, replId: $replId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function d(){var e=(0,n._)(["\n  mutation UninstallExtension($installationId: String!, $replId: String) {\n    uninstallExtension(installationId: $installationId) {\n      __typename\n      ... on ExtensionInstallation {\n        ...TopLevelExtensionInstallation\n        extension {\n          id\n          installation(replId: $replId) {\n            ...TopLevelExtensionInstallation\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}e.i(304277),e.i(566901),e.i(951262);var c=(0,t.gql)(r()),p=(0,t.gql)(i()),h=(0,t.gql)(o(),c,p),m=(0,t.gql)(l(),h),y=(0,t.gql)(s()),x=(0,t.gql)(a(),m),g=(0,t.gql)(u(),m),v=(0,t.gql)(f(),m),E=(0,t.gql)(d(),m);e.s(["ExtensionInstallationByIdDocument",()=>x,"ExtensionInstallationsInReplDocument",()=>g,"ExtensionSystemUserContextDocument",()=>y,"InstallExtensionDocument",()=>v,"TopLevelExtensionFragmentDoc",()=>h,"TopLevelExtensionInstallationFragmentDoc",()=>m,"UninstallExtensionDocument",()=>E])},567807,915793,e=>{"use strict";e.i(439725);var n=e.i(297083),t=e.i(817556),r=e.i(119468),i=/\s/,o=/[a-zA-Z_$][a-zA-Z0-9_$]*/,l=RegExp("^"+o.source+"$"),s=/^NaN|(?:[-+]?(?:(?:Infinity)|(?:0[xX][a-fA-F0-9]+)|(?:0[bB][01]+)|(?:0[oO][0-7]+)|(?:(?:(?:[1-9]\d*|0)?\.\d+|(?:[1-9]\d*|0)\.\d*|(?:[1-9]\d*|0))(?:[E|e][+|-]?\d+)?)))/;function a(e,n){return new p(e,n).value}function u(){}var f=function(e){for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);function t(){this.constructor=r}function r(n,t,r){var i=e.call(this,n)||this;return i.pos=t,i.loc=r,i}return r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t),r}(Error),d={b:"\b",n:"\n",f:"\f",r:"\r",t:"	",v:"\v",0:"\0"},c=/^[a-fA-F0-9]+$/,p=function(){function e(e,n){if(this.str=e,this.index=0,this.onComment=n&&n.onComment||u,this.onValue=n&&n.onValue||u,this.value=this.readValue(),this.allowWhitespaceOrComment(),this.index<this.str.length)throw Error("Unexpected character '"+this.peek()+"'")}return e.prototype.allowWhitespaceOrComment=function(){for(;this.index<this.str.length&&i.test(this.str[this.index]);)this.index++;var e=this.index;if(this.eat("/")){if(this.eat("/")){var n=this.readUntil(/(?:\r\n|\n|\r)/);this.onComment({start:e,end:this.index,type:"Comment",text:n,block:!1}),this.eat("\n")}else if(this.eat("*")){var n=this.readUntil(/\*\//);this.onComment({start:e,end:this.index,type:"Comment",text:n,block:!0}),this.eat("*/",!0)}this.allowWhitespaceOrComment()}},e.prototype.error=function(e,n){void 0===n&&(n=this.index);var t=function(e,n,t){var r,i,o,l,s,a,u;if("number"==typeof t)throw Error("locate takes a { startIndex, offsetLine, offsetColumn } object as the third argument");return(void 0===(r=t)&&(r={}),i=r.offsetLine||0,o=r.offsetColumn||0,l=e.split("\n"),s=0,a=l.map(function(e,n){var t=s+e.length+1,r={start:s,end:t,line:n};return s=t,r}),u=0,function(n,t){"string"==typeof n&&(n=e.indexOf(n,t||0));for(var r,l,s,f,d=a[u],c=n>=d.end?1:-1;d;){if(r=d,l=n,r.start<=l&&l<r.end)return s=d,f=n,{line:i+s.line,column:o+f-s.start,character:f};u+=c,d=a[u]}})(n,t&&t.startIndex)}(this.str,n,{offsetLine:1});throw new f(e,n,t)},e.prototype.eat=function(e,n){return this.str.slice(this.index,this.index+e.length)===e?(this.index+=e.length,e):(n&&this.error("Expected '"+e+"' instead of '"+this.str[this.index]+"'"),null)},e.prototype.peek=function(){return this.str[this.index]},e.prototype.read=function(e){var n=e.exec(this.str.slice(this.index));return n&&0===n.index?(this.index+=n[0].length,n[0]):null},e.prototype.readUntil=function(e){this.index>=this.str.length&&this.error("Unexpected end of input");var n=this.index,t=e.exec(this.str.slice(n));if(t){var r=this.index;return this.index=r+t.index,this.str.slice(r,this.index)}return this.index=this.str.length,this.str.slice(n)},e.prototype.readArray=function(){var e=this.index;if(!this.eat("["))return null;var n={start:e,end:null,type:"ArrayExpression",elements:[]};for(this.allowWhitespaceOrComment();"]"!==this.peek()&&(n.elements.push(this.readValue()),this.allowWhitespaceOrComment(),this.eat(","));)this.allowWhitespaceOrComment();return this.eat("]")||this.error("Expected ']' instead of '"+this.str[this.index]+"'"),n.end=this.index,n},e.prototype.readBoolean=function(){var e=this.index,n=this.read(/^(true|false)/);if(n)return{start:e,end:this.index,type:"Literal",raw:n,value:"true"===n}},e.prototype.readNull=function(){var e=this.index;if(this.eat("null"))return{start:e,end:this.index,type:"Literal",raw:"null",value:null}},e.prototype.readLiteral=function(){return this.readBoolean()||this.readNumber()||this.readString()||this.readNull()},e.prototype.readNumber=function(){var e=this.index,n=this.read(s);if(n){var t=n[0],r=+("-"===t||"+"===t?n.slice(1):n);return"-"===t&&(r=-r),{start:e,end:this.index,type:"Literal",raw:n,value:r}}},e.prototype.readObject=function(){var e=this.index;if(this.eat("{")){var n={start:e,end:null,type:"ObjectExpression",properties:[]};for(this.allowWhitespaceOrComment();"}"!==this.peek()&&(n.properties.push(this.readProperty()),this.allowWhitespaceOrComment(),this.eat(","));)this.allowWhitespaceOrComment();return this.eat("}",!0),n.end=this.index,n}},e.prototype.readProperty=function(){this.allowWhitespaceOrComment();var e={start:this.index,end:null,type:"Property",key:this.readPropertyKey(),value:this.readValue()};return e.end=this.index,e},e.prototype.readIdentifier=function(){var e=this.index,n=this.read(o);if(n)return{start:e,end:this.index,type:"Identifier",name:n}},e.prototype.readPropertyKey=function(){var e=this.readString()||this.readIdentifier();return e||this.error("Bad identifier as unquoted key"),"Literal"===e.type&&(e.name=String(e.value)),this.allowWhitespaceOrComment(),this.eat(":",!0),e},e.prototype.readString=function(){var e=this.index,n=this.eat("'")||this.eat('"');if(n){for(var t=!1,r="";this.index<this.str.length;){var i=this.str[this.index++];if(t){if(t=!1,"\n"===i)continue;if("\r"===i){"\n"===this.str[this.index]&&(this.index+=1);continue}if("x"===i||"u"===i){var o=this.index,l=this.index+="x"===i?2:4,s=this.str.slice(o,l);c.test(s)||this.error("Invalid "+("x"===i?"hexadecimal":"Unicode")+" escape sequence",o),r+=String.fromCharCode(parseInt(s,16))}else r+=d[i]||i}else if("\\"===i)t=!0;else if(i===n){var l=this.index;return{start:e,end:l,type:"Literal",raw:this.str.slice(e,l),value:r}}else"\n"===i&&this.error("Bad string",this.index-1),r+=i}this.error("Unexpected end of input")}},e.prototype.readValue=function(){this.allowWhitespaceOrComment();var e=this.readArray()||this.readObject()||this.readLiteral();if(e)return this.onValue(e),e;this.error("Unexpected EOF")},e}();function h(e){return function e(n){if("Literal"===n.type)return n.value;if("ArrayExpression"===n.type)return n.elements.map(e);if("ObjectExpression"===n.type){var t={};return n.properties.forEach(function(n){t[n.key.name]=e(n.value)}),t}}(a(e))}var m={"'":"'",'"':'"',"\\":"\\","\b":"b","\f":"f","\n":"n","\r":"r","	":"t","\v":"v","\0":"0","\u2028":"u2028","\u2029":"u2029"},y=/['"\\\b\f\n\r\t\v\0\u2028\u2029]/g;function x(e,n){var t='"'===n?"'":'"';return n+e.replace(y,function(e){return e===t?e:"\\"+m[e]})+n}function g(e,n,t,r,i,o){return(l.test(e)?e:x(e,t))+": "+v(n,t,r,i,o)}function v(e,n,t,i,o){var l=void 0===e?"undefined":(0,r._)(e);if("string"===l)return x(e,n);if("number"===l||"boolean"===l||null===e)return String(e);if(Array.isArray(e)){var s=e.map(function(e){return v(e,n,t+i,i,!0)});return o?"[\n"+(t+i)+s.join(",\n"+(t+i))+"\n"+t+"]":"[ "+s.join(", ")+" ]"}if("object"===l){var a=Object.keys(e).map(function(r){return g(r,e[r],n,t+i,i,o)});return o?"{"+(t+i)+a.join(","+(t+i))+t+"}":"{ "+a.join(", ")+" }"}throw Error("Cannot stringify "+l)}function E(e,n){var t={};t["'"]=0,t['"']=0;var o=function(e){var n=e.split("\n"),t=0,r=0,i=8;if(n.forEach(function(e){var n=/^(?: +|\t+)/.exec(e);if(n){var o=n[0];o.length!==e.length&&("	"===o[0]?t+=1:(r+=1,o.length>1&&o.length<i&&(i=o.length)))}}),!(r>t))return"	";for(var o="";i--;)o+=" ";return o}(e),l=a(e,{onValue:function(e){"Literal"===e.type&&"string"==typeof e.value&&(t[e.raw[0]]+=1)}}),s=t["'"]>t['"']?"'":'"',u=/\n/.test(e.slice(l.start,l.end))||"ArrayExpression"===l.type&&0===l.elements.length||"ObjectExpression"===l.type&&0===l.properties.length;return e.slice(0,l.start)+function e(n,t,o,l,s,a,u){var f=void 0===t?"undefined":(0,r._)(t);if("string"===f)return"Literal"===n.type&&"string"==typeof n.value?x(t,n.raw[0]):x(t,a);if("number"===f){var d=n.raw,c=t,p=/^([-+])?0([boxBOX])/.exec(d);if(p&&c%1==0)return("+"===p[1]&&c>=0?"+":c<0?"-":"")+"0"+p[2]+Math.abs(c).toString("b"===p[2]||"B"===p[2]?2:"o"===p[2]||"O"===p[2]?8:"x"===p[2]||"X"===p[2]?16:null);var h=/^([-+])?(\.)?/.exec(d);return h&&h[0].length>0?("+"===h[1]&&c>=0?"+":c<0?"-":"")+(h[2]?String(Math.abs(c)).replace(/^0/,""):String(Math.abs(c))):String(c)}if("boolean"===f||null===t)return String(t);if(Array.isArray(t))return"ArrayExpression"===n.type?function(n,t,r,i,o,l,s){if(0===t.length)return 0===n.elements.length?r.slice(n.start,n.end):"[]";var a=b(r,n.start),u=""===a||/\n/.test(a);if(0===n.elements.length)return v(t,l,i,o,u);for(var f=0,d=n.start,c="",p=r.slice(n.start,n.end).split("\n").length>1;f<t.length;f+=1){var h=n.elements[f];h?(c+=r.slice(d,h.start)+e(h,t[f],r,i,o,l,p),d=h.end):p?c+=",\n"+(i+o)+v(t[f],l,i,o,!0):c+=", "+v(t[f],l,i,o,!1)}return f<n.elements.length&&(d=n.elements[n.elements.length-1].end),c+=r.slice(d,n.end)}(n,t,o,l,s,a,0):v(t,a,l,s,u);if("object"===f)return"ObjectExpression"===n.type?function(n,t,r,o,l,s,a){var u=Object.keys(t);if(0===u.length)return 0===n.properties.length?r.slice(n.start,n.end):"{}";var f={};n.properties.forEach(function(e){f[e.key.name]=e});var d=b(r,n.start),c=""===d||/\n/.test(d);if(0===n.properties.length)return v(t,s,o,l,c);for(var p=0,h=n.start,m="",y=/\n/.test(r.slice(n.start,n.end)),x=!1,E=r.slice(n.start,n.properties[0].start);p<n.properties.length;p+=1){var _=n.properties[p],I=t[_.key.name];o=function(e,n){for(;n>0&&!i.test(e[n-1]);)n-=1;for(var t=n;n>0&&i.test(e[n-1]);)n-=1;return e.slice(n,t)}(r,_.start),void 0!==I&&(m+=x?r.slice(h,_.value.start):E+r.slice(_.key.start,_.value.start),m+=e(_.value,I,r,o,l,s,y),x=!0),h=_.end}return u.forEach(function(e){if(!(e in f)){var n=t[e];m+=(x?","+(y?o:" "):E)+g(e,n,s,o,l,y),x=!0}}),m+=r.slice(h,n.end)}(n,t,o,l,s,a,0):v(t,a,l,s,u);throw Error("Cannot stringify "+f+"s")}(l,n,e,"",o,s,u)+e.slice(l.end)}function b(e,n){for(var t=n;n>0&&i.test(e[n]);)n-=1;return e.slice(n,t)}e.s(["evaluate",()=>h,"patch",()=>E],915793);var _=e.i(692043),I=e.i(9293),w=e.i(316953),T=e.i(173738);function S(e){return(0,n._)(function(e){var n,r,i,o,l;return(0,t._)(this,function(t){switch(t.label){case 0:if(n=e.extensionId,r=e.replId,!T.apolloClient)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,T.apolloClient.mutate({mutation:_.InstallExtensionDocument,variables:{extensionId:n,replId:r}})];case 1:if((o=t.sent()).errors&&o.errors.length>0)return[2,{error:Error("Error when installing extension: "+o.errors.map(function(e){return e.message}).join(", ")),result:null}];if(!(l=null==(i=o.data)?void 0:i.installExtension))return[2,{error:Error("Error when installing extension: expected result"),result:null}];if((null==l?void 0:l.__typename)==="UnauthorizedError"||(null==l?void 0:l.__typename)==="UserError")return[2,{error:Error("Error when installing extension: "+l.message),result:null}];if(!l.extension)return[2,{error:Error("Error when installing extension: expected extension to be set"),result:null}];if(!l.extension.url)return[2,{error:Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}];return[2,{result:l,error:null}]}})}).apply(this,arguments)}function O(e){return(0,n._)(function(e){var n,r,i,o,l;return(0,t._)(this,function(t){switch(t.label){case 0:if(n=e.installationId,r=e.replId,!T.apolloClient)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,T.apolloClient.mutate({mutation:_.UninstallExtensionDocument,variables:{installationId:n,replId:r}})];case 1:if((o=t.sent()).errors&&o.errors.length>0)return[2,{error:Error("Error when uninstalling extension: "+o.errors.map(function(e){return e.message}).join(", ")),result:null}];if(!(l=null==(i=o.data)?void 0:i.uninstallExtension))return[2,{error:Error("Error when uninstalling extension: expected result"),result:null}];if((null==l?void 0:l.__typename)==="NotFoundError"||(null==l?void 0:l.__typename)==="UserError")return[2,{error:Error("Error when uninstalling extension: "+l.message),result:null}];return[2,{result:l,error:null}]}})}).apply(this,arguments)}function L(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n._)(function(){var n;return(0,t._)(this,function(t){switch(t.label){case 0:if(!T.apolloClient)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,T.apolloClient.query({query:_.ExtensionInstallationByIdDocument,variables:{installationId:e},fetchPolicy:r?"network-only":"cache-first"})];case 1:if("ExtensionInstallation"!==(n=t.sent().data.extensionInstallationById).__typename)return[2,{error:Error("Expected to find extension installation"),result:null}];if(!n.extension)return[2,{error:Error("Expected installation.extension"),result:null}];return[2,{result:n,error:null}]}})})()}function C(e){return(0,n._)(function(){var n;return(0,t._)(this,function(t){switch(t.label){case 0:if(!T.apolloClient)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,T.apolloClient.query({query:_.ExtensionInstallationsInReplDocument,variables:{replId:e}})];case 1:if("ExtensionInstallationList"!==(n=t.sent().data.extensionInstallations).__typename)return[2,{error:Error("Expected to find ExtensionInstallationList"),result:null}];return[2,{result:n.installations,error:null}]}})})()}function U(e){return(0,n._)(function(){var n,r,i,o;return(0,t._)(this,function(t){switch(t.label){case 0:n=(0,I.getManifestUrl)(e),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,fetch(n)];case 2:return[4,t.sent().text()];case 3:if(r=h(t.sent()),(i=(0,w.parseManifestOrError)(r)).error)return[2,{error:i.error,result:null}];return[2,{result:i.manifest,error:null}];case 4:if("SyntaxError"===(o=t.sent()).name)return[2,{error:Error("Error when fetching manifest: invalid JSON"),result:null}];return[2,{error:Error("Error when fetching manifest: "+o.message),result:null}];case 5:return[2]}})})()}function A(){return(0,n._)(function(){var e;return(0,t._)(this,function(n){switch(n.label){case 0:if(!T.apolloClient)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,T.apolloClient.query({query:_.ExtensionSystemUserContextDocument,fetchPolicy:"cache-first"})];case 1:if(!(e=n.sent().data.currentUser)||"CurrentUser"!==e.__typename)return[2,{error:Error("Expected to find CurrentUser"),result:null}];return[2,{result:{userHasInternalApiEnabled:e.isAdmin||e.isStaff},error:null}]}})})()}e.s(["getExtensionInstallation",()=>L,"getExtensionInstallationsInRepl",()=>C,"getExtensionManifest",()=>U,"getExtensionUserContext",()=>A,"installExtensionMutation",()=>S,"uninstallExtensionMutation",()=>O],567807)}]);

//# debugId=baf150f0-a7f6-5436-0478-8f212da52887
//# sourceMappingURL=1a9925731fcbad3b.js.map