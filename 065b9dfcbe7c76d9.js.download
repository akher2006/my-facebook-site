;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="b769a155-b42c-7a9a-008e-e18547735afd")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,487824,e=>{"use strict";var t=e.i(193060);e.i(240913);var r=e.i(968069);function n(e){return".breakpoints"===e.toString()||".cache"===e.toString()||(0,t.isDescendantOf)((0,t.toRelativeFsPath)(".cache"),e)||".local"===e.toString()||(0,t.isDescendantOf)((0,t.toRelativeFsPath)(".local"),e)}function i(e){return r.configFiles.includes(e.toString())}function o(e,r){if(!r)return!1;var n=(0,t.splitFsPaths)(e).slice(1),i=!0,o=!1,a=void 0;try{for(var l,u=r[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=l.value,c=!0,f=!1,d=void 0;try{for(var p,h=n[Symbol.iterator]();!(c=(p=h.next()).done);c=!0)if(p.value.toString().match(s))return!0}catch(e){f=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(f)throw d}}}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return!1}e.s(["isConfigFile",()=>i,"isPathBreakpointsOrNixCache",()=>n,"isPathHiddenByDotReplit",()=>o])},1736,406393,e=>{"use strict";var t=e.i(389959);e.i(694906);var r=e.i(55449),n=e.i(487824),i=e.i(530658),o=e.i(960933),a=e.i(862927);e.i(312917);var l=e.i(619319),u=e.i(641326),s=e.i(207237),c=e.i(125674),f=e.i(282453),d=o.Type.Array(o.Type.String()),p=function(e){return"repl:hiddenFiles:"+e},h=function(e){var t=f.default.get(p(e));return a.Value.Check(d,t)?t:null},v=function(e,t){f.default.set(p(e),t)},m=function(e){var r=(0,s.default)(),n=(0,i._)((0,t.useState)(function(){return h(r)}),2),o=n[0],a=n[1];return(0,t.useEffect)(function(){return e.watch(function(e){var t=function(e){v(r,e),a(e)};if(e.error){e.error===u.DotReplitErrors.NotFound&&t([]);return}t(e.config.hidden?e.config.hidden:[])})},[e,r]),o},y=function(e){var t=m(e);return(0,c.default)(function(){return null===t?null:t.map(function(e){return(0,l.globToRegExp)(e)||e})},[t])};e.s(["useHiddenFiles",()=>y,"useHiddenFilesGlobPatterns",()=>m],406393);var g=e.i(529810);e.i(545082);var w=e.i(423111),x=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=y((0,g.default)().dotReplit),o=(0,w.useAreHiddenFilesVisible)();return(0,t.useCallback)(function(t){return!!(0,n.isPathBreakpointsOrNixCache)(t)||!!e&&!o&&((0,n.isConfigFile)(t)||(0,r.isHiddenFile)(t)||(0,r.isDotFile)(t)||(0,n.isPathHiddenByDotReplit)(t,i))},[o,i,e])};e.s(["useShouldHideFileInWorkspace",()=>x],1736)},759130,214007,e=>{"use strict";var t=e.i(530658),r=e.i(119468),n=e.i(399119),i=e.i(904851),o=e.i(721281),a=e.i(445789),l=e.i(463348),u=function(e){function r(e,a){(0,i._)(this,r);var l,u,s,c,f=(0,t._)((l=a.toml,u=a.ptr,[(s=l.slice(0,u).split(/\r\n|\n|\r/g)).length,s.pop().length+1]),2),d=f[0],p=f[1],h=function(e,t,r){for(var n=e.split(/\r\n|\n|\r/g),i="",o=(0|Math.log10(t+1))+1,a=t-1;a<=t+1;a++){var l=n[a-1];l&&(i+=a.toString().padEnd(o," "),i+=":  ",i+=l,i+="\n",a===t&&(i+=" ".repeat(o+r+2),i+="^\n"))}return i}(a.toml,d,p);return c=(0,n._)(this,r,["Invalid TOML document: ".concat(e,"\n\n").concat(h),a]),(0,o._)(c,"line",void 0),(0,o._)(c,"column",void 0),(0,o._)(c,"codeblock",void 0),c.line=d,c.column=p,c.codeblock=h,c}return(0,a._)(r,e),r}((0,l._)(Error));function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=e.indexOf("\n",t);return"\r"===e[n-1]&&n--,n<=r?n:-1}function c(e,t){for(var r=t;r<e.length;r++){var n=e[r];if("\n"===n)return r;if("\r"===n&&"\n"===e[r+1])return r+1;if(n<" "&&"	"!==n||""===n)throw new u("control characters are not allowed in comments",{toml:e,ptr:t})}return e.length}function f(e,t,r,n){for(var i;" "===(i=e[t])||"	"===i||!r&&("\n"===i||"\r"===i&&"\n"===e[t+1]);)t++;return n||"#"!==i?t:f(e,c(e,t),r)}function d(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!n)return(t=s(e,t))<0?e.length:t;for(var o=t;o<e.length;o++){var a=e[o];if("#"===a)o=s(e,o);else if(a===r)return o+1;else if(a===n)return o;else if(i&&("\n"===a||"\r"===a&&"\n"===e[o+1]))return o}throw new u("cannot find end of structure",{toml:e,ptr:t})}function p(e,t){var r=e[t],n=r===e[t+1]&&e[t+1]===e[t+2]?e.slice(t,t+3):r;t+=n.length-1;do t=e.indexOf(n,++t);while(t>-1&&"'"!==r&&"\\"===e[t-1]&&"\\"!==e[t-2])return t>-1&&(t+=n.length,n.length>1&&(e[t]===r&&t++,e[t]===r&&t++)),t}var h=e.i(711300),v=e.i(634203),m=e.i(35877),y=e.i(90659),g=e.i(663355),w=e.i(862470),x=/^(\d{4}-\d{2}-\d{2})?[T ]?(?:(\d{2}):\d{2}:\d{2}(?:\.\d+)?)?(Z|[-+]\d{2}:\d{2})?$/i,b=new WeakMap,S=new WeakMap,T=new WeakMap,A=function(e){function t(e){(0,i._)(this,t);var r,o=!0,a=!0,l="Z";if("string"==typeof e){var u=e.match(x);u?(u[1]||(o=!1,e="0000-01-01T".concat(e)),a=!!u[2],u[2]&&+u[2]>23?e="":(l=u[3]||null,e=e.toUpperCase(),!l&&a&&(e+="Z"))):e=""}return r=(0,n._)(this,t,[e]),(0,v._)(r,b,{writable:!0,value:!1}),(0,v._)(r,S,{writable:!0,value:!1}),(0,v._)(r,T,{writable:!0,value:null}),isNaN(r.getTime())||((0,m._)(r,b,o),(0,m._)(r,S,a),(0,m._)(r,T,l)),r}return(0,a._)(t,e),(0,y._)(t,[{key:"isDateTime",value:function(){return(0,h._)(this,b)&&(0,h._)(this,S)}},{key:"isLocal",value:function(){return!(0,h._)(this,b)||!(0,h._)(this,S)||!(0,h._)(this,T)}},{key:"isDate",value:function(){return(0,h._)(this,b)&&!(0,h._)(this,S)}},{key:"isTime",value:function(){return(0,h._)(this,S)&&!(0,h._)(this,b)}},{key:"isValid",value:function(){return(0,h._)(this,b)||(0,h._)(this,S)}},{key:"toISOString",value:function(){var e=(0,g._)((0,w._)(t.prototype),"toISOString",this).call(this);if(this.isDate())return e.slice(0,10);if(this.isTime())return e.slice(11,23);if(null===(0,h._)(this,T))return e.slice(0,-1);if("Z"===(0,h._)(this,T))return e;var r=60*(0,h._)(this,T).slice(1,3)+ +(0,h._)(this,T).slice(4,6);return r="-"===(0,h._)(this,T)[0]?r:-r,new Date(this.getTime()-6e4*r).toISOString().slice(0,-1)+(0,h._)(this,T)}}],[{key:"wrapAsOffsetDateTime",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Z",n=new t(e);return(0,m._)(n,T,r),n}},{key:"wrapAsLocalDateTime",value:function(e){var r=new t(e);return(0,m._)(r,T,null),r}},{key:"wrapAsLocalDate",value:function(e){var r=new t(e);return(0,m._)(r,S,!1),(0,m._)(r,T,null),r}},{key:"wrapAsLocalTime",value:function(e){var r=new t(e);return(0,m._)(r,b,!1),(0,m._)(r,T,null),r}}]),t}((0,l._)(Date)),D=/^((0x[0-9a-fA-F](_?[0-9a-fA-F])*)|(([+-]|0[ob])?\d(_?\d)*))$/,_=/^[+-]?\d(_?\d)*(\.\d(_?\d)*)?([eE][+-]?\d(_?\d)*)?$/,R=/^[+-]?0[0-9_]/,F=/^[0-9a-f]{4,8}$/i,P={b:"\b",t:"	",n:"\n",f:"\f",r:"\r",'"':'"',"\\":"\\"};function C(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i="'"===e[r],o=e[r++]===e[r]&&e[r]===e[r+1];o&&(n-=2,"\r"===e[r+=2]&&r++,"\n"===e[r]&&r++);for(var a=0,l="",s=r;r<n-1;){var c=e[r++];if("\n"===c||"\r"===c&&"\n"===e[r]){if(!o)throw new u("newlines are not allowed in strings",{toml:e,ptr:r-1})}else if(c<" "&&"	"!==c||""===c)throw new u("control characters are not allowed in strings",{toml:e,ptr:r-1});if(t){if(t=!1,"u"===c||"U"===c){var d=e.slice(r,r+="u"===c?4:8);if(!F.test(d))throw new u("invalid unicode escape",{toml:e,ptr:a});try{l+=String.fromCodePoint(parseInt(d,16))}catch(t){throw new u("invalid unicode escape",{toml:e,ptr:a})}}else if(o&&("\n"===c||" "===c||"	"===c||"\r"===c)){if(r=f(e,r-1,!0),"\n"!==e[r]&&"\r"!==e[r])throw new u("invalid escape: only line-ending whitespace may be escaped",{toml:e,ptr:a});r=f(e,r)}else if(c in P)l+=P[c];else throw new u("unrecognized escape sequence",{toml:e,ptr:a});s=r}else i||"\\"!==c||(a=r-1,t=!0,l+=e.slice(s,a))}return l+e.slice(s,n-1)}var k=/^[a-zA-Z0-9-_]+[ \t]*$/;function O(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=",n=t-1,i=[],o=e.indexOf(r,t);if(o<0)throw new u("incomplete key-value: cannot find end of key",{toml:e,ptr:t});do{var a=e[t=++n];if(" "!==a&&"	"!==a)if('"'===a||"'"===a){if(a===e[t+1]&&a===e[t+2])throw new u("multiline strings are not allowed in keys",{toml:e,ptr:t});var l=p(e,t);if(l<0)throw new u("unfinished string encountered",{toml:e,ptr:t});n=e.indexOf(".",l);var c=e.slice(l,n<0||n>o?o:n),d=s(c);if(d>-1)throw new u("newlines are not allowed in keys",{toml:e,ptr:t+n+d});if(c.trimStart())throw new u("found extra tokens after the string part",{toml:e,ptr:l});if(o<l&&(o=e.indexOf(r,l))<0)throw new u("incomplete key-value: cannot find end of key",{toml:e,ptr:t});i.push(C(e,t,l))}else{n=e.indexOf(".",t);var h=e.slice(t,n<0||n>o?o:n);if(!k.test(h))throw new u("only letter, numbers, dashes and underscores are allowed in keys",{toml:e,ptr:t});i.push(h.trimEnd())}}while(n+1&&n<o)return[i,f(e,o+1,!0,!0)]}function j(e,t,r,n){for(var i,o,a,l,u=t,s=r,c=!1,f=0;f<e.length;f++){if(f){if(u=c?u[i]:u[i]={},s=(o=s[i]).c,0===n&&(1===o.t||2===o.t))return null;if(2===o.t){var d=u.length-1;u=u[d],s=s[d].c}}if((c=Object.hasOwn(u,i=e[f]))&&(null==(a=s[i])?void 0:a.t)===0&&(null==(l=s[i])?void 0:l.d))return null;c||("__proto__"===i&&(Object.defineProperty(u,i,{enumerable:!0,configurable:!0,writable:!0}),Object.defineProperty(s,i,{enumerable:!0,configurable:!0,writable:!0})),s[i]={t:f<e.length-1&&2===n?3:n,d:!1,i:0,c:{}})}if((o=s[i]).t!==n&&(1!==n||3!==o.t)||(2===n&&(o.d||(o.d=!0,u[i]=[]),u[i].push(u={}),o.c[o.i++]=o={t:1,d:!1,i:0,c:{}}),o.d))return null;if(o.d=!0,1===n)u=c?u[i]:u[i]={};else if(0===n&&c)return null;return[i,u,o.c]}function I(e,n){for(var i,o=null!=(i=null==n?void 0:n.maxDepth)?i:1e3,a={},l={},h=a,v=l,m=f(e,0);m<e.length;){if("["===e[m]){var y="["===e[++m],g=O(e,m+=+y,"]");if(y){if("]"!==e[g[1]-1])throw new u("expected end of table declaration",{toml:e,ptr:g[1]-1});g[1]++}var w=j(g[0],a,l,y?2:1);if(!w)throw new u("trying to redefine an already defined table or value",{toml:e,ptr:m});v=w[2],h=w[1],m=g[1]}else{var x=O(e,m),b=j(x[0],h,v,0);if(!b)throw new u("trying to redefine an already defined table or value",{toml:e,ptr:m});var S=function e(n,i,o,a){if(0===a)throw new u("document contains excessively nested structures. aborting.",{toml:n,ptr:i});var l,h=n[i];if("["===h||"{"===h){var v=(0,t._)("["===h?function(t,r,n){var i,o=[];for(r++;"]"!==(i=t[r++])&&i;)if(","===i)throw new u("expected value, found comma",{toml:t,ptr:r-1});else if("#"===i)r=c(t,r);else if(" "!==i&&"	"!==i&&"\n"!==i&&"\r"!==i){var a=e(t,r-1,"]",n-1);o.push(a[0]),r=a[1]}if(!i)throw new u("unfinished array encountered",{toml:t,ptr:r});return[o,r]}(n,i,a):function(n,i,o){var a,l={},s=new Set,c=0;for(i++;"}"!==(a=n[i++])&&a;)if("\n"===a)throw new u("newlines are not allowed in inline tables",{toml:n,ptr:i-1});else if("#"===a)throw new u("inline tables cannot contain comments",{toml:n,ptr:i-1});else if(","===a)throw new u("expected key-value, found comma",{toml:n,ptr:i-1});else if(" "!==a&&"	"!==a){for(var f=void 0,d=l,p=!1,h=(0,t._)(O(n,i-1),2),v=h[0],m=h[1],y=0;y<v.length;y++){if(y&&(d=p?d[f]:d[f]={}),(p=Object.hasOwn(d,f=v[y]))&&("object"!==(0,r._)(d[f])||s.has(d[f])))throw new u("trying to redefine an already defined value",{toml:n,ptr:i});p||"__proto__"!==f||Object.defineProperty(d,f,{enumerable:!0,configurable:!0,writable:!0})}if(p)throw new u("trying to redefine an already defined value",{toml:n,ptr:i});var g=(0,t._)(e(n,m,"}",o-1),2),w=g[0],x=g[1];s.add(w),d[f]=w,c=","===n[(i=x)-1]?i-1:0}if(c)throw new u("trailing commas are not allowed in inline tables",{toml:n,ptr:c});if(!a)throw new u("unfinished table encountered",{toml:n,ptr:i});return[l,i]}(n,i,a),2),m=v[0],y=v[1],g=d(n,y,",",o);if("}"===o){var w=s(n,y,g);if(w>-1)throw new u("newlines are not allowed in inline tables",{toml:n,ptr:w})}return[m,g]}if('"'===h||"'"===h){l=p(n,i);var x=C(n,i,l);if(o){if(l=f(n,l,"]"!==o),n[l]&&","!==n[l]&&n[l]!==o&&"\n"!==n[l]&&"\r"!==n[l])throw new u("unexpected character encountered",{toml:n,ptr:l});l+=+(","===n[l])}return[x,l]}l=d(n,i,",",o);var b=function(e,t,r,n){var i=e.slice(t,r),o=i.indexOf("#");o>-1&&(c(e,o),i=i.slice(0,o));var a=i.trimEnd();if(!n){var l=i.indexOf("\n",a.length);if(l>-1)throw new u("newlines are not allowed in inline tables",{toml:e,ptr:t+l})}return[a,o]}(n,i,l-(","===n[l-1]),"]"===o);if(!b[0])throw new u("incomplete key-value declaration: no value specified",{toml:n,ptr:i});return o&&b[1]>-1&&(l=f(n,i+b[1]),l+=+(","===n[l])),[function(e,t,r){if("true"===e)return!0;if("false"===e)return!1;if("-inf"===e)return-1/0;if("inf"===e||"+inf"===e)return 1/0;if("nan"===e||"+nan"===e||"-nan"===e)return NaN;if("-0"===e)return 0;if((n=D.test(e))||_.test(e)){if(R.test(e))throw new u("leading zeroes are not allowed",{toml:t,ptr:r});var n,i=+e.replace(/_/g,"");if(isNaN(i))throw new u("invalid number",{toml:t,ptr:r});if(n&&!Number.isSafeInteger(i))throw new u("integer value cannot be represented losslessly",{toml:t,ptr:r});return i}var o=new A(e);if(!o.isValid())throw new u("invalid value",{toml:t,ptr:r});return o}(b[0],n,i),l]}(e,x[1],void 0,o);b[1][b[0]]=S[0],m=S[1]}if(m=f(e,m,!0),e[m]&&"\n"!==e[m]&&"\r"!==e[m])throw new u("each key-value declaration must be followed by an end-of-line",{toml:e,ptr:m});m=f(e,m)}return a}e.s(["parse",()=>I],214007),e.i(167626),e.s([],759130)},641365,e=>{"use strict";var t,r=e.i(389959);function n(e){(0,r.useEffect)(function(){e((t||((t=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),t),{captureDraggingState:!0})},[e])}e.s(["useDisableNativeDragPreview",()=>n],641365)},498596,e=>{"use strict";var t=e.i(530658),r=e.i(389959),n=e.i(606389),i=e.i(687382);function o(e){var o=(0,i.useDragDropManager)().getMonitor(),a=(0,t._)((0,n.useCollector)(o,e),2),l=a[0],u=a[1];return(0,r.useEffect)(function(){return o.subscribeToOffsetChange(u)}),(0,r.useEffect)(function(){return o.subscribeToStateChange(u)}),l}e.s(["useDragLayer",()=>o])},62695,e=>{e.v({surface:"InlineCode-module__mAcefG__surface"})},746382,e=>{"use strict";var t=e.i(276385),r=e.i(929872),n=e.i(62695);function i(e){var i=e.className,o=e.children;return(0,t.jsx)(r.Surface,{elevated:!0,tag:"span",px:4,clsx:[n.default.surface,i],children:o})}e.s(["InlineCode",()=>i])},717639,e=>{"use strict";function t(e){return Math.log(e)*Math.LOG10E+1|0}function r(e,t,r){return Math.floor(Math.min(t,Math.max(e,r)))}e.s(["clampToRange",()=>r,"getDigits",()=>t])},411928,e=>{"use strict";var t=e.i(878420),r=e.i(276385),n=e.i(389959),i=e.i(162914),o=e.i(125674),a=e.i(668967),l=e.i(828224),u=e.i(916271),s=(0,n.memo)(u.default);function c(e){var n=e.source,u=e.sourcePos,c=e.fs,f=e.path,d=e.onCodeInsert,p=(0,a.useContainerImageRenderer)(c,f),h=(0,i.default)(n,100),v=(0,o.default)(function(){return{img:p,a:function(e){return(0,r.jsx)(l.default,(0,t._)({filePath:f},e))}}},[p,f]);return(0,r.jsx)(s,{onCodeInsert:d,components:v,sourcePos:u,children:h})}e.s(["default",()=>c])},210975,e=>{"use strict";var t=e.i(276385),r=e.i(610357),n=e.i(703774),i=e.i(446530),o=e.i(613355),a=e.i(140487),l=e.i(91720),u=e.i(136540),s=e.i(746382),c=e.i(960178),f=e.i(751273),d=e.i(625484),p=e.i(369948),h=e.i(107413),v=e.i(878420),m=e.i(64386),y=e.i(606867),g=function(e){return(0,t.jsx)(y.default,(0,m._)((0,v._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,t.jsx)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},w=e.i(925001),x=(0,i.cssRecord)({styles0:[{alignItems:"center"}],styles1:[o.rcss.align.center]});function b(e){var i=e.replId,o=e.showFlag,v=e.buttonsOnly,m=(0,n.useTheme)().isDarkColorScheme;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.ButtonLink,{href:"https://us5.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(i)}).toString(),iconLeft:(0,t.jsx)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,t.jsx)(p.default,{}),target:"_blank",text:"View Datadog Logs by Repl ID"}),(0,t.jsx)(l.ButtonLink,{href:"https://us5.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(i),agg_q:"@containerid",agg_q_source:"base",cols:"host,service",messageDisplay:"inline",stream_sort:"desc",top_n:"30",top_o:"top",viz:"transaction",x_missing:"true",live:"true"}).toString(),iconLeft:(0,t.jsx)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,t.jsx)(p.default,{}),target:"_blank",text:"View Datadog Logs by Container ID"}),void 0!==v&&v?(0,t.jsx)(f.Tooltip,{maxWidth:300,tooltip:(0,t.jsx)(c.Text,{multiline:!1,children:i}),children:(0,t.jsx)(a.Button,{iconLeft:(0,t.jsx)(h.default,{}),text:"Copy Repl ID",onClick:function(){return(0,r.default)(i)}})}):(0,t.jsxs)(d.View,{css:x.styles0,row:!0,gap:2,children:[void 0!==o&&o?(0,t.jsxs)(f.Tooltip,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,t.jsx)(w.default,{})," "]}):null,(0,t.jsxs)(c.Text,{css:x.styles1,multiline:!1,children:["Repl ID: ",(0,t.jsx)(s.InlineCode,{children:i})]}),(0,t.jsx)(u.IconButton,{alt:"Copy to clipboard",onClick:function(){return(0,r.default)(i)},children:(0,t.jsx)(h.default,{})})]})]})}e.s(["default",()=>b],210975)},722441,27304,274445,624525,820170,e=>{"use strict";var t=e.i(297083),r=e.i(530658),n=e.i(817556),i=e.i(389959),o=e.i(541793),a=e.i(205104),l=e.i(903381),u=e.i(346715),s=e.i(131141),c=e.i(814563);e.i(694906);var f=e.i(515672),d=e.i(240913),p=e.i(703631),h=e.i(487824),v=e.i(799581),m="No files",y="Loading...";function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=0,o=!0,l=!1,s=void 0;try{for(var c,f=(0,u._)(e.values()).sort(function(e,t){return e.index-t.index})[Symbol.iterator]();!(o=(c=f.next()).done);o=!0){var d=c.value,p={height:d.height,y:d.y,cols:[]};if(n.push(p),0!==d.depth){var h=d.depth+t;h>i&&(i=h);for(var v="divider"===d.row.type||"error"===d.row.type||"create"===d.row.type||"emptyDir"===d.row.type?d.row.dir:(0,a.getParentPath)(d.row.path),m=v.split("/"),y=0;y<(0,a.getPathDepth)(v);y++){var g=m.slice(0,Number(y+1)).join("/");p.cols.push(g)}}}}catch(e){l=!0,s=e}finally{try{o||null==f.return||f.return()}finally{if(l)throw s}}for(var w=new Map,x=t;x<i;x++){var b=[];w.set(x,b);var S=!0,T=!1,A=void 0;try{for(var D,_=n[Symbol.iterator]();!(S=(D=_.next()).done);S=!0){var R=D.value,F=R.cols[x],P=R.y;if(F){var C=b[b.length-1];C&&C.y+C.height===P?C.height+=R.height:b.push({y:P,height:R.height,dir:F,depth:x-t})}}}catch(e){T=!0,A=e}finally{try{S||null==_.return||_.return()}finally{if(T)throw A}}}var k=[],O=!0,j=!1,I=void 0;try{for(var E,V=w[Symbol.iterator]();!(O=(E=V.next()).done);O=!0){var N=(0,r._)(E.value,2),z=(N[0],N[1]);k.push.apply(k,(0,u._)(z))}}catch(e){j=!0,I=e}finally{try{O||null==V.return||V.return()}finally{if(j)throw I}}return k}function w(e,t){var r=t.fromIndex;if("next"===t.dir){for(var n=r+1;n<e.length;n++){var i=e[n];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=r-1;o>=0;o--){var a=e[o];if(a&&("dir"===a.type||"file"===a.type))return a}return null}function x(e,t,r){if(r){var n=f.configFiles.includes(t.filename),i=f.configFiles.includes(e.filename);if(n&&!i)return -1;if(!n&&i)return 1;var o=f.packagerFiles.includes(t.filename),u=f.packagerFiles.includes(e.filename);if(o&&!u)return -1;if(!o&&u)return 1}return t.type===l.FileType.Directory&&e.type!==l.FileType.Directory?1:e.type===l.FileType.Directory&&t.type!==l.FileType.Directory?-1:(0,a.compareFilePaths)(e.filename,t.filename)}function b(e){var t=e.row,r=e.baseDepth;return"dir"===t.type||"file"===t.type||"uploadFile"===t.type?t.path===d.ROOT_PATH?0:(0,a.getPathDepth)(t.path)-1-r:t.dir===d.ROOT_PATH?0:(0,a.getPathDepth)(t.dir)-r}function S(e){var t=e.rows,n=e.baseDepth,i=[],o=new Map,l=!0,u=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value,p=function(e){var t=e.row,r=b({row:t,baseDepth:e.baseDepth});switch(t.type){case"file":case"dir":case"uploadFile":return{text:(0,a.getFileName)(t.path),depth:r};case"error":return{text:t.message,depth:r};case"divider":return{text:t.label,depth:r};case"create":case"emptyDir":return{text:m,depth:r}}}({row:d,baseDepth:n}),h=p.depth,v=p.text,y=o.get(h);if(!y){o.set(h,new Map([[d.type,v]]));continue}var g=y.get(d.type);g&&(null==g?void 0:g.length)>v.length||y.set(d.type,v)}}catch(e){u=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw s}}var w=!0,x=!1,S=void 0;try{for(var T,A=o[Symbol.iterator]();!(w=(T=A.next()).done);w=!0){var D=(0,r._)(T.value,2),_=D[0],R=D[1],F=!0,P=!1,C=void 0;try{for(var k,O=R[Symbol.iterator]();!(F=(k=O.next()).done);F=!0){var j=(0,r._)(k.value,2),I=j[0],E=j[1];i.push({depth:_,type:I,text:E})}}catch(e){P=!0,C=e}finally{try{F||null==O.return||O.return()}finally{if(P)throw C}}}}catch(e){x=!0,S=e}finally{try{w||null==A.return||A.return()}finally{if(x)throw S}}return i}e.s(["LOADING",()=>y,"NO_FILES",()=>m],27304);var T=function(e,t){return e===d.ROOT_PATH?t:e+"/"+t},A=function(e,t){return e===d.ROOT_PATH&&1===(0,a.getPathDepth)(t)||(0,p.childOf)(e,t)};function D(e){var t=e.root,n=void 0===t?d.ROOT_PATH:t,i=e.dirInfo,o=e.filter,s=e.sort,c=e.getSection,f=e.readOnly,p=e.pendingUploads,m=e.pendingMoves,y=e.pathBeingRenamed,g=e.alwaysShowCreateRow,w=[],x=(null==p?void 0:p.length)?function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var u=o.value,s=(0,a.getParentPath)(u.targetPath)||d.ROOT_PATH,c=t.get(s),f={filename:(0,a.getFileName)(u.targetPath),progress:u.progress};c?c.push(f):t.set(s,[f])}}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return t}(p):null,b=new Map,S=new Map;if(null==m?void 0:m.length){var D=!0,_=!1,R=void 0;try{for(var F,P=m[Symbol.iterator]();!(D=(F=P.next()).done);D=!0){var C=F.value,k=C.from,O=C.to;b.set(k.path,k.type),S.set(O,k.type)}}catch(e){_=!0,R=e}finally{try{D||null==P.return||P.return()}finally{if(_)throw R}}}return!function e(t){var p=i.get(t);if(!(!p||b.has(t))&&p.expanded){if(t===n&&p.loading&&!p.children)return void w.push({type:"dir",path:t});if(p.error)return void w.push({type:"error",message:p.error.message,dir:t});var m=p.children?(0,u._)(p.children):void 0;(m=null==m?void 0:m.filter(function(e){return!(0,h.isPathBreakpointsOrNixCache)(e.filename)}))&&b.size>0&&(m=m.filter(function(e){return!b.has(T(t,e.filename))}));var D=!0,_=!1,R=void 0;try{for(var F,P=S[Symbol.iterator]();!(D=(F=P.next()).done);D=!0)!function(){var e=(0,r._)(F.value,2),n=e[0],i=e[1];if(A(t,n)){var o=(0,a.getFileName)(n);(null==m?void 0:m.some(function(e){return e.filename===o}))||(m||(m=[]),m.push({filename:o,type:i}))}}()}catch(e){_=!0,R=e}finally{try{D||null==P.return||P.return()}finally{if(_)throw R}}var C=null==x?void 0:x.get(t);if(C){m||(m=[]);var k=!0,O=!1,j=void 0;try{for(var I,E=C[Symbol.iterator]();!(k=(I=E.next()).done);k=!0){var V=I.value,N=V.filename,z=V.progress;m.push({filename:N,type:l.FileType.File,progress:z})}}catch(e){O=!0,j=e}finally{try{k||null==E.return||E.return()}finally{if(O)throw j}}}if(m){if(!p.create&&!C&&m&&0===m.length)return void w.push({type:f?"emptyDir":"create",dir:t});var M=function(e,t){var n=t.getSection,i=[],o=new Map,a=!0,u=!1,s=void 0;try{for(var c,f=e[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var d=c.value,p=n(d),h=d.progress?{type:"upload",progress:d.progress,filename:d.filename}:{type:d.type===l.FileType.File?"file":"dir",filename:d.filename};if(!p){i.push(h);continue}var m=o.get(p);if(m){m.push(h);continue}o.set(p,[h])}}catch(e){u=!0,s=e}finally{try{a||null==f.return||f.return()}finally{if(u)throw s}}var y=!0,g=!1,w=void 0;try{for(var x,b=o[Symbol.iterator]();!(y=(x=b.next()).done);y=!0){var S=(0,r._)(x.value,2),T=S[0],A=S[1];i.push({type:"divider",label:T}),(0,v.pushInChunks)(i,A)}}catch(e){g=!0,w=e}finally{try{y||null==b.return||b.return()}finally{if(g)throw w}}return i}(m.filter(o).sort(function(e,r){return s(e,r,t===n)}),{getSection:t===d.ROOT_PATH?c:function(){return null}}),L=-1,H=!0,G=!1,B=void 0;try{for(var W,U=M[Symbol.iterator]();!(H=(W=U.next()).done);H=!0)!function(){var r=W.value;if("error"===r.type||"emptyDir"===r.type)throw Error("Expected dir, file, or divider row");if("divider"===r.type)return -1===L&&(L=w.length),w.push({type:"divider",dir:t,label:r.label});var n=T(t,r.filename);if("dir"===r.type){var o={type:"dir",path:n};y===n&&(o.rename=!0),S.has(n)&&(o.pending=!0);var a=null==x?void 0:x.get(n);if(a&&(o.uploadProgress=a.map(function(e){return e.progress})),w.push(o),!i.get(n))return;e(n)}else if("upload"===r.type)w.push({type:"uploadFile",path:n,progress:r.progress});else if(!C||!C.some(function(e){return e.filename===r.filename})){var l={type:"file",path:n};y===n&&(l.rename=!0),S.has(n)&&(l.pending=!0),w.push(l)}}()}catch(e){G=!0,B=e}finally{try{H||null==U.return||U.return()}finally{if(G)throw B}}if(p.create||g){var K={type:"create",dir:t,fileType:p.create?p.create:void 0};-1===L?w.push(K):w.splice(L,0,K)}}}}(n),w}function _(e,t){var r=e.get(t);if(!r)return null;var n=0,i=r.height,o="dir"===r.row.type?r.depth+1:r.depth;if("dir"===r.row.type)o=r.depth+1,n=r.y;else{o=r.depth;for(var a=t-1;a>=0;a--){var l=e.get(a);if(!l)break;if("dir"===l.row.type&&("file"===r.row.type||"uploadFile"===r.row.type?A(l.row.path,r.row.path):l.row.path===r.row.dir)){i+=l.height,n=l.y;break}l.depth>=r.depth&&(i+=l.height)}}for(var u=t+1;u<e.size;u++){var s=e.get(u);if(!s||s.depth<=("dir"===r.row.type?r.depth:r.depth-1))break;i+=s.height}return{y:n,height:i,depth:o}}function R(e,t){var r=t.node,n=t.rows,i=t.mode,o=t.anchor;if(!i){e.clear(),e.set(r.path,r.type);return}if("multi"===i&&e.has(r.path))return void e.delete(r.path);if("multi"===i)return void e.set(r.path,r.type);var a=r.type===l.FileType.Directory?"dir":"file",u=n.findIndex(function(e){return e.type===a&&e.path===r.path});if(-1!==u){var s=(null==o?void 0:o.type)===l.FileType.Directory?"dir":"file",c=o?n.findIndex(function(e){return e.type===s&&e.path===o.path}):-1;if(-1!==c){var f=c<u?n.slice(c,u+1):n.slice(u,c+1),d=!0,p=!1,h=void 0;try{for(var v,m=n[Symbol.iterator]();!(d=(v=m.next()).done);d=!0){var y=v.value;("file"===y.type||"dir"===y.type)&&(f.includes(y)?e.set(y.path,"file"===y.type?l.FileType.File:l.FileType.Directory):e.delete(y.path))}}catch(e){p=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(p)throw h}}}}}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.ROOT_PATH,n=new Set,i=!0,o=!1,a=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=(0,r._)(l.value,2),c=s[0],f=s[1];c!==t&&f.expanded&&(t===d.ROOT_PATH||(0,p.descendantOf)(t,c))&&n.add(c)}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return 0===n.size?null:n}e.s(["dirInfoToRows",()=>D,"findAdjacentNode",()=>w,"getDropPreview",()=>_,"getExpandedDirs",()=>F,"getGutters",()=>g,"getLongestRows",()=>S,"getRowDepth",()=>b,"sortChildren",()=>x,"toggleSelectNode",()=>R],274445);var P=(0,o.atom)(new Map),C=(0,o.atom)({width:0,height:0}),k=(0,o.atom)(0),O=(0,o.atom)(null),j=(0,o.atom)(new Map),I=(0,o.atom)(function(e){var t;return null!=(t=e(B).root)?t:d.ROOT_PATH}),E=(0,o.atom)(null),V=(0,o.atom)(void 0),N=(0,o.atom)(null),z=(0,o.atom)(null,function(e,t,r){e(U)||t(N,r)}),M=(0,o.atom)(function(e){var t=e(B).root,r=void 0===t?d.ROOT_PATH:t;return r===d.ROOT_PATH?0:(0,a.getPathDepth)(r)}),L=(0,o.atom)(function(e){return g(e(j),e(M))}),H=(0,o.atom)(!1),G=(0,o.atom)(null,function(e,t,r){var n=new Map,i=e(ec),o=e(M),a=!0,l=!1,u=void 0;try{for(var s,c=r.rows[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value,d=f.key.toString(),p=i[f.index];if(p){var h=Math.max(0,b({row:p,baseDepth:o}));n.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:h,row:p})}}}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}t(j,n),t(k,r.scrollHeight+16)}),B=(0,o.atom)({}),W=(0,c.selectAtom)(B,function(e){var t;return null!=(t=e.onContextMenu)?t:null}),U=(0,o.atom)(function(e){return!!e(B).readOnly||!e(H)}),K=(0,o.atom)(function(e){var t;return null!=(t=e(B).fontSize)?t:14}),Y=function(e,t){if("divider"===t)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},q=(0,o.atom)(function(e){return Y(e(K),"file")}),X=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},Z=(0,o.atom)(function(e){return X(e(K))}),$=(0,o.atom)(function(e){return 14>e(K)?4:8}),Q=(0,o.atom)(function(e){return 14>=e(K)?4:8}),J=(0,o.atom)(function(e){return 13===e(K)?6:16>e(K)?4:8}),ee=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},et=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},er=(0,o.atom)(function(e){return et(e(K))}),en=(0,o.atom)(function(e){return ee(e(K))}),ei=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},eo=(0,o.atom)(function(e){return ei(e(K))}),ea=(0,o.atom)(new Map);function el(e){var t=e.filename;return f.configFiles.includes(t)?"Config files":f.packagerFiles.includes(t)?"Packager files":null}var eu=(0,o.atom)([]),es=(0,o.atom)([]),ec=(0,o.atom)(function(e){var t,r,n=e(B),i=n.filter,o=n.alwaysShowCreateRow,a=n.root,l=void 0===a?d.ROOT_PATH:a,u=n.sort,s=n.readOnly;return D({root:l,dirInfo:e(ea),filter:i,sort:void 0===u?x:u,readOnly:void 0!==s&&s,getSection:el,pendingUploads:e(eu),pathBeingRenamed:null!=(t=e(N))?t:void 0,pendingMoves:null!=(r=e(es))?r:void 0,alwaysShowCreateRow:o})}),ef=(0,o.atom)(function(e){var t=e(O);if(!t)return null;var r=e(ec).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===t});return -1!==r?r:null}),ed=(0,o.atom)(null,function(e,t,r){var n,i=e(ef),o=e(O);if((null==(n=document.activeElement)?void 0:n.tagName)!=="INPUT"&&null!==i&&null!==o){var a=e(ec);switch(r.key){case"ArrowDown":r.preventDefault();var l=w(a,{dir:"next",fromIndex:i});((null==l?void 0:l.type)==="dir"||(null==l?void 0:l.type)==="file")&&t(O,l.path);return;case"ArrowUp":r.preventDefault();var u=w(a,{dir:"previous",fromIndex:i});((null==u?void 0:u.type)==="dir"||(null==u?void 0:u.type)==="file")&&t(O,u.path);return;case"ArrowLeft":case"ArrowRight":r.preventDefault();var s=e(ea).get(o);if(!s)return;"ArrowLeft"===r.key&&s.expanded?t(ev,o):"ArrowRight"!==r.key||s.expanded||t(ey,o);return;case"Enter":case" ":if("Enter"===r.key&&!e(U))return;if(e(ea).has(o))return void t(eg,o);e(B).onFileSelect({event:r,path:o,type:"keydown"});return}}}),ep=(0,o.atom)(null,function(e,t,r){var n;r.path===(null!=(n=e(B).root)?n:d.ROOT_PATH)&&t(H,!0),t(ea,function(e){return(0,s.produce)(e,function(e){var t=r.path===d.ROOT_PATH?null:r.path+"/",n=!0,i=!1,o=void 0;try{for(var a,u=r.children[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var s,c=a.value,f=t?t+c.filename:c.filename,p=e.get(f);if(c.type!==l.FileType.Directory){p&&(null==(s=p.disposeWatcher)||s.call(p),e.delete(f));continue}p||e.set(f,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}var h=e.get(r.path);h&&(h.children=r.children,h.loading=!1,h.error=void 0)})})}),eh=(0,o.atom)(null,function(e,t,r){var n;r.path===(null!=(n=e(B).root)?n:d.ROOT_PATH)&&t(H,!0),t(ea,function(e){return(0,s.produce)(e,function(e){var t,n=e.get(r.path);n&&(n.loading=!1,n.error=r.error,null==(t=n.disposeWatcher)||t.call(n),n.disposeWatcher=null)})})}),ev=(0,o.atom)(null,function(e,t,r){var n=Array.isArray(r)?r:[r];t(ea,function(e){return(0,s.produce)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,u=e.get(l);u&&(u.expanded=!1,u.loading=!1,u.disposeWatcher&&(u.disposeWatcher(),u.disposeWatcher=null))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),em=(0,o.atom)(null,function(e,t,r){t(ea,function(e){return(0,s.produce)(e,function(e){var t,n=e.get(r);n&&(null==(t=n.disposeWatcher)||t.call(n),e.delete(r))})})}),ey=(0,o.atom)(null,function(e,t,r){var n=Array.isArray(r)?r:[r],i=e(B).fs;t(ea,function(e){return(0,s.produce)(e,function(e){var r=!0,o=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)!function(){var r,n=l.value,o=null!=(r=e.get(n))?r:{expanded:!0};e.has(n)?o.expanded=!0:e.set(n,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(n,{onError:function(e){return t(eh,{path:n,error:e})},onChange:function(e){return t(ep,{path:n,children:e})},onMoveOrDelete:function(){return t(em,n)}})}()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}})})}),eg=(0,o.atom)(null,function(e,t,r){var n=e(ea).get(r);if(!n){t(ea,function(e){return(0,s.produce)(e,function(e){e.set(r,{expanded:!1})})}),t(ey,r);return}n.expanded?t(ev,r):t(ey,r)}),ew=(0,o.atom)(function(e){return e(B).manageWidth?e(H)?S({rows:e(ec),baseDepth:e(M)}):[{type:"dir",text:y,depth:1}]:null}),ex=(0,o.atom)(null,function(e,t,r){var n=e(B).onCreateStart;n?n({parentPath:r.parentPath,fileType:r.fileType}):(t(ey,r.parentPath),t(ea,function(e){return(0,s.produce)(e,function(e){var t=e.get(r.parentPath);t&&(t.create=r.fileType)})}),t(O,null))}),eb=(0,o.atom)(null,function(e,t,r){t(ea,function(e){return(0,s.produce)(e,function(e){var t=e.get(r);t&&(t.create=void 0)})})}),eS=(0,o.atom)(null,function(e,t,r){var n={path:r.path,type:r.fileType};t(O,n.path),t(eR,{node:n}),t(ea,function(e){return(0,s.produce)(e,function(e){var t=e.get(r.parentPath);t&&(t.create=void 0)})}),n.type===l.FileType.Directory&&t(ey,n.path)}),eT=(0,o.atom)(new Map),eA=(0,o.atom)(null),eD=(0,o.atom)(function(e){var t,r;return null!=(r=null==(t=e(eA))?void 0:t.path)?r:null}),e_=(0,o.atom)(!0),eR=(0,o.atom)(null,function(e,t,n){var i=n.node,o=n.mode,a=e(ec),l=e(eA);t(e_,!o),t(eT,function(e){return(0,s.produce)(e,function(e){R(e,{node:i,rows:a,mode:o,anchor:l})})});var u=e(eT);if(!(u.size>1)){var c=!0,f=!1,d=void 0;try{for(var p,h=u[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var v=(0,r._)(p.value,2),m=v[0],y=v[1];t(eA,{path:m,type:y})}}catch(e){f=!0,d=e}finally{try{c||null==h.return||h.return()}finally{if(f)throw d}}}}),eF=(0,o.atom)(null,function(e,t){t(eT,new Map),t(e_,!0),t(eA,null)}),eP=(0,o.atom)(null,function(e,r,i){return(0,t._)(function(){var o,a,l;return(0,n._)(this,function(u){switch(u.label){case 0:return o=e(B).fs,[4,Promise.all(i.map(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(r){switch(r.label){case 0:return[4,o.readDir(e)];case 1:return[2,(t=r.sent()).error?t:{path:e,children:t.children,error:null}]}})})()}))];case 1:if((l=(a=u.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:l}];return r(ea,function(e){return(0,s.produce)(e,function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=a[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value;if(l.error)throw Error("Unexpected error");var u=e.get(l.path);if(!u){e.set(l.path,{loading:!1,expanded:!0,children:l.children,error:void 0});continue}u.loading=!1,u.expanded=!0,u.children=l.children,u.error=void 0}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}})}),[2,{errors:null}]}})})()}),eC=(0,o.atom)(null,function(e,r,i){return(0,t._)(function(){var t,o,a,l,s,c,f,p,h;return(0,n._)(this,function(n){switch(n.label){case 0:t=e(ea),o=[],a=!0,l=!1,s=void 0;try{var v;for(c=((v=i.path.split("/")).pop(),[d.ROOT_PATH].concat((0,u._)(v.map(function(e,t){return v.slice(0,t+1).join("/")}))))[Symbol.iterator]();!(a=(f=c.next()).done);a=!0)p=f.value,null!=(h=t.get(p))&&h.expanded||o.push(p)}catch(e){l=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw s}}if(!o.length)return[3,2];return[4,r(eP,o)];case 1:n.sent(),n.label=2;case 2:return r(eR,{node:i}),[2]}})})()}),ek=(0,o.atom)(null),eO=(0,o.atom)(null,function(e,t,r){var n=e(ek);if(n)for(var i=e(ec),o=0;o<i.length;o++){var a=i[o];if(("file"===a.type||"dir"===a.type)&&a.path===r&&!(o>n.options.count-1)){n.scrollToIndex(o);break}}});e.s(["avatarSizeAtom",()=>er,"borderRadiusAtom",()=>Q,"cancelCreateFileAtom",()=>eb,"clearNodeSelectionAtom",()=>eF,"collapseAtom",()=>ev,"completeCreateFileAtom",()=>eS,"configAtom",()=>B,"containerSizeAtom",()=>C,"didLoadRootAtom",()=>H,"dirInfoAtom",()=>ea,"expandAtom",()=>ey,"fileStatusAtom",()=>E,"filteredRowsAtom",()=>ec,"focusedIndexAtom",()=>ef,"focusedPathAtom",()=>O,"fontSizeAtom",()=>K,"fontSizeSmallAtom",()=>en,"getRowHeight",()=>Y,"gutterWidthAtom",()=>eo,"guttersAtom",()=>L,"horizontalPaddingAtom",()=>$,"iconTextGapAtom",()=>J,"iconsSizeAtom",()=>Z,"initialOffsetAtom",()=>V,"lastSelectWasSingleAtom",()=>e_,"loadAndSelectNodeAtom",()=>eC,"minHeightAtom",()=>q,"onContextMenuAtom",()=>W,"onKeyDownAtom",()=>ed,"pathToBeRenamedAtom",()=>N,"pendingMovesAtom",()=>es,"pendingUploadsAtom",()=>eu,"presenceStateAtom",()=>P,"readOnlyAtom",()=>U,"renameAtom",()=>z,"renderedRowsAtom",()=>j,"rootPathAtom",()=>I,"scrollHeightAtom",()=>k,"scrollToPathAtom",()=>eO,"selectNodeAtom",()=>eR,"selectedNodeAnchorAtom",()=>eA,"selectedNodesAtom",()=>eT,"selectedPathAnchorAtom",()=>eD,"setRenderedRowAtom",()=>G,"startCreateFileAtom",()=>ex,"toggleExpandedAtom",()=>eg,"virtualizerAtom",()=>ek,"widestRowsAtom",()=>ew],624525);var ej=e.i(276385),eI=e.i(161322),eE=e.i(719518),eV=e.i(824359),eN=(0,i.createContext)(null);function ez(e){return(0,ej.jsx)(eN.Provider,{value:e.store,children:e.children})}function eM(){var e=(0,i.useContext)(eN);if(!e)throw Error("Expected store in context");return e}function eL(e){return(0,eI.useAtomValue)(e,{store:eM()})}function eH(e){return(0,eV.useObservableAtom)(e,eM())}var eG=function(e){return(0,eI.useSetAtom)(e,{store:eM()})};function eB(e){return(0,eE.useAtomCallback)((0,i.useCallback)(function(t){return t(e)},[e]),{store:eM()})}e.s(["StoreProvider",()=>ez,"useGet",()=>eB,"useObservableValue",()=>eH,"useSet",()=>eG,"useValue",()=>eL],820170);var eW=(0,o.atom)(null),eU=(0,o.atom)(null,function(e,t,n){var i=[n];if(!e(e_)){var o=!0,l=!1,u=void 0;try{for(var s,c=e(eT)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var f=(0,r._)(s.value,2),d=f[0],p=f[1];n.path!==d&&i.push({path:d,type:p})}}catch(e){l=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw u}}}t(eW,(0,a.coalesceFsNodes)(i))});function eK(){var e=eH(eW),r=eB(B);(0,i.useEffect)(function(){return e.subscribe(function(e){if(e){var i=r(),o=i.readOnly,a=i.onDeleteNodes,u=i.fs;!o&&a&&a({nodes:e,confirm:function(){return(0,t._)(function(){return(0,n._)(this,function(t){switch(t.label){case 0:return[4,Promise.all(e.map(function(e){return e.type===l.FileType.Directory?u.deleteDir(e.path):u.deleteFile(e.path)}))];case 1:return[2,{error:t.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})()}})}})},[r,e])}e.s(["requestDeleteNodesAtom",()=>eU,"useConfirmDeleteNodes",()=>eK],722441)},460365,(e,t,r)=>{var n=e.r(365738),i=1/0,o=0/0,a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,f=Object.prototype.toString,d=Math.max,p=Math.min;function h(e){var t=void 0===e?"undefined":n._(e);return!!e&&("object"==t||"function"==t)}function v(e){return e?(e=m(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function m(e){if("number"==typeof e)return e;if((void 0===(t=e)?"undefined":n._(t))=="symbol"||t&&(void 0===t?"undefined":n._(t))=="object"&&"[object Symbol]"==f.call(t))return o;if(h(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=h(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var i=u.test(e);return i||s.test(e)?c(e.slice(2),i?2:8):l.test(e)?o:+e}t.exports=function(e,t,r){var n,i,o;return t=v(t),void 0===r?(r=t,t=0):r=v(r),(n=e=m(e))>=p(i=t,o=r)&&n<d(i,o)}},369685,874311,666729,10261,525544,453955,916866,189739,518093,942527,788123,e=>{"use strict";var t=e.i(721281),r=e.i(530658),n=e.i(276385),i=e.i(389959),o=e.i(822243),a=e.i(498596),l=e.i(848415),u=e.i(288148),s=e.i(971131),c=e.i(960933),f=e.i(862927),d=e.i(131141),p=e.i(541793),h=e.i(316699),v=e.i(205104),m=e.i(240913),y=e.i(903381),g=e.i(641365),w=e.i(222342),x=e.i(736451),b=e.i(460365),S=e.i(717639),T=e.i(869226),A=e.i(399978),D=e.i(274445),_=e.i(297083),R=e.i(346715),F=e.i(817556),P=e.i(143003),C=e.i(790486),k=e.i(992785),O=e.i(814563),j=e.i(995683),I=e.i(703631),E=e.i(125674),V=e.i(670413);e.i(694906);var N=e.i(55449);function z(e){var t=e.siblingNames,r=e.fileName,n=e.initialValue,i=e.parentPath;if(r.includes("/"))return"File names cannot include forward slashes";if("."===r||".."===r)return'File names cannot be "'.concat(r,'"');if(r.match(/^\s/)||r.match(/\s$/))return"File names cannot start or end with whitespace";if(n!==r&&t.includes(r))return"A file or folder with that name already exists";if(r.length>100)return"File names cannot be longer than 100 characters";var o=i===m.ROOT_PATH?r:i+"/"+r;return(0,N.isHiddenFile)(o)?'"'.concat(o,'" is reserved'):null}function M(e){var t=e.fileName,r=e.parentPath,n=r===m.ROOT_PATH?"":r+"/",i=n+t,o=i.split("/");return{pathPrefix:n,newFilePath:i,segments:o}}function L(e){return(0,_._)(function(e){var t,n,i,o,a,l,u,s,c,f,d,p,h,m,y,g,w,x,b;return(0,F._)(this,function(S){switch(S.label){case 0:if(t=e.fileName,n=e.parentPath,i=e.fs,t.startsWith("/"))return[2,"File names cannot include forward slashes"];a=(o=M({fileName:t,parentPath:n})).pathPrefix,l=o.newFilePath,u=o.segments,s=!0,c=!1,f=void 0,S.label=1;case 1:S.trys.push([1,7,8,9]),d=Object.entries(u)[Symbol.iterator](),S.label=2;case 2:if(s=(p=d.next()).done)return[3,6];if(m=(h=(0,r._)(p.value,2))[0],y=h[1],g=Number(m),w=[],g!==u.length-1)return[3,4];return[4,i.stat(l)];case 3:S.sent().exists&&w.push((0,v.getFileName)(l)),S.label=4;case 4:if(!(x=z({fileName:y,siblingNames:w,parentPath:a+u.slice(0,g).join("/")})))return[3,5];return[2,x];case 5:return s=!0,[3,2];case 6:return[3,9];case 7:return b=S.sent(),c=!0,f=b,[3,9];case 8:try{s||null==d.return||d.return()}finally{if(c)throw f}return[7];case 9:return[2,null]}})}).apply(this,arguments)}function H(e){var t=M({fileName:e.fileName,parentPath:e.parentPath}),n=t.pathPrefix,i=t.segments,o=!0,a=!1,l=void 0;try{for(var u,s=Object.entries(i)[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=(0,r._)(u.value,2),f=c[0],d=c[1],p=Number(f),h=z({fileName:d,siblingNames:[],parentPath:n+i.slice(0,p).join("/")});if(h)return h}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return null}e.s(["validateFileName",()=>z],874311);var G=e.i(624525),B=e.i(820170),W=e.i(123850),U=e.i(613355),K=(0,W.createCssVarTokens)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay","hasUnsavedChangesDisplay"]),Y=K.cssVars,q=K.styleTokens,X={paddingLeft:q.horizontalPadding,paddingRight:q.horizontalPadding},Z={"&& svg":{minWidth:q.iconSize+" !important",minHeight:q.iconSize+" !important",width:q.iconSize+" !important",height:q.iconSize+" !important"}},$=[U.rcss.truncate,{fontSize:q.fontSize}];function Q(e,t){return e.shiftKey?"bulk":"altKey"===t&&e.altKey||"cmdOrCtrlKey"===t&&(0,V.getCmdOrCtrl)(e)?"multi":void 0}function J(e){var t=(0,B.useGet)(G.configAtom),r=(0,B.useSet)(G.selectNodeAtom),n=(0,B.useSet)(G.focusedPathAtom);return(0,E.default)(function(){return{onClick:function(i){var o=t(),a=o.onFileSelect,l=o.multiselectModifierKey,u=l?Q(i,l):void 0;r({node:{path:e,type:y.FileType.File},mode:u}),n(e),u||null==a||a({path:e,event:i,type:"click"})},onDoubleClick:function(r){var n=t().onFileDoubleClick;null==n||n(r,e)}}},[e,t,n,r])}e.s(["cssVars",()=>Y,"iconSize",()=>Z,"rowPadding",()=>X,"styleTokens",()=>q,"textCss",()=>$],666729);var ee=(0,p.atom)(null,function(e,t,r){var n=r.event,i=r.path;t(G.focusedPathAtom,i);var o=e(G.configAtom).multiselectModifierKey;t(G.selectNodeAtom,{node:{path:i,type:y.FileType.Directory},mode:o?Q(n,o):void 0}),t(G.focusedPathAtom,i),n.shiftKey||n.altKey||(0,V.getCmdOrCtrl)(n)||t(G.toggleExpandedAtom,i)});function et(e){var t=(0,B.useSet)(ee);return(0,E.default)(function(){return function(r){t({event:r,path:e})}},[t,e])}function er(){return(0,B.useValue)(G.widestRowsAtom)}function en(){return(0,B.useValue)(G.guttersAtom)}function ei(){return(0,B.useValue)(G.renderedRowsAtom)}function eo(e){return(0,B.useValue)((0,E.default)(function(){return(0,p.atom)(function(t){var r,n;return null!=(n=null==(r=t(G.renderedRowsAtom).get(e))?void 0:r.row)?n:null})},[e]))}function ea(){return{fontSize:(0,B.useObservableValue)(G.fontSizeAtom),fontSizeSmall:(0,B.useObservableValue)(G.fontSizeSmallAtom),iconSize:(0,B.useObservableValue)(G.iconsSizeAtom),scrollHeight:(0,B.useObservableValue)(G.scrollHeightAtom),horizontalPadding:(0,B.useObservableValue)(G.horizontalPaddingAtom),borderRadius:(0,B.useObservableValue)(G.borderRadiusAtom),gutterWidth:(0,B.useObservableValue)(G.gutterWidthAtom),minHeight:(0,B.useObservableValue)(G.minHeightAtom),iconTextGap:(0,B.useObservableValue)(G.iconTextGapAtom)}}function el(e){return(0,B.useValue)((0,E.default)(function(){return(0,O.selectAtom)(G.dirInfoAtom,function(t){var r;return!!(null==(r=t.get(e))?void 0:r.loading)})},[e]))}function eu(e){return(0,B.useValue)((0,E.default)(function(){return(0,O.selectAtom)(G.dirInfoAtom,function(t){var r;return!!(null==(r=t.get(e))?void 0:r.expanded)})},[e]))}function es(e){var t=(0,E.default)(function(){return(0,O.selectAtom)(G.focusedPathAtom,function(t){return t===e?0:-1})},[e]);return(0,B.useValue)(t)}function ec(){return(0,B.useSet)(G.collapseAtom)}function ef(){return(0,B.useSet)(G.expandAtom)}function ed(){return(0,B.useSet)(G.onKeyDownAtom)}function ep(){var e,t,r,n=(0,i.useRef)(null),o=(0,B.useValue)(G.filteredRowsAtom),a=(e=(0,B.useGet)(G.filteredRowsAtom),t=(0,B.useGet)(G.fontSizeAtom),(0,E.default)(function(){return function(r){var n=e()[r];return n?(0,G.getRowHeight)(t(),n.type):0}},[e,t])),l=(0,B.useGet)(G.configAtom),u=(0,B.useObservableValue)(G.focusedIndexAtom),s=(0,i.useRef)((0,B.useValue)(G.initialOffsetAtom)),c=(0,C.useVirtualizer)({count:o.length,overscan:null!=(r=l().overscan)?r:100,getScrollElement:function(){return n.current},getItemKey:function(e){var t=o[e];return t?"error"===t.type?"error:"+t.dir+t.message:"divider"===t.type?"divider:"+t.dir+t.label:"emptyDir"===t.type?"emptyDir:"+t.dir:"create"===t.type?"create:"+t.dir:t.type+":"+t.path:""},estimateSize:a,rangeExtractor:function(e){var t=(0,P.defaultRangeExtractor)(e);return null===u.current||t.includes(u.current)||void 0===o[u.current]?t:(0,R._)(t).concat([u.current])}});(0,i.useEffect)(function(){s.current&&c.scrollToOffset(s.current)},[c,s]);var f=(0,B.useSet)(G.setRenderedRowAtom),d=c.getVirtualItems(),p=c.getTotalSize();(0,i.useEffect)(function(){f({rows:d,scrollHeight:p})},[f,d,p]);var h=(0,B.useValue)(G.didLoadRootAtom);(0,i.useEffect)(function(){if(h){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(u.current)}),u.subscribe(e)}},[c,u,h]);var v=(0,B.useSet)(G.virtualizerAtom);return(0,i.useEffect)(function(){v(c)},[v,c]),{scrollRef:n,virtualizer:c}}function eh(e){var r=(0,E.default)(function(){return(0,O.selectAtom)(G.renderedRowsAtom,function(r){var n,i=r.get(e);return i?{style:(n={},(0,t._)(n,Y.rowHeight,i.height+"px"),(0,t._)(n,Y.rowY,i.y+"px"),(0,t._)(n,Y.rowLeftIndent,"calc(".concat(i.depth," * ").concat(q.gutterWidth,")")),n),depth:i.depth}:void 0},k.default)},[e]);return(0,B.useValue)(r)}function ev(e){var t=e.index,r=e.path,n=(0,i.useRef)(null),o=(0,B.useObservableValue)(G.focusedPathAtom);return(0,i.useEffect)(function(){var e=function(e){var t;null==(t=n.current)||t.setAttribute("tabIndex",e.toString())},i=function(n){n?e(n===r?0:-1):e(0===t?0:-1)};return i(o.current),o.subscribe(i)},[o,r,t]),(0,i.useEffect)(function(){var e=function(e){null!==t&&clearTimeout(t),e!==r||document.activeElement!==n.current&&(t=setTimeout(function(){var e;null==(e=n.current)||e.focus()},50))},t=null;e(o.current);var i=o.subscribe(e);return function(){null!==t&&clearTimeout(t),i()}},[o,r]),[n,(0,B.useSet)(G.focusedPathAtom)]}function em(e){var t,n=(0,B.useSet)(G.startCreateFileAtom),o=(0,B.useSet)(G.cancelCreateFileAtom),a=(0,B.useSet)(G.completeCreateFileAtom),l=(0,r._)((0,i.useState)(""),2),u=l[0],s=l[1],c=(0,B.useGet)(G.configAtom),f=(0,r._)((0,i.useState)(!1),2),d=f[0],p=f[1],h=(0,r._)((0,i.useState)(null),2),v=h[0],g=h[1],w=(0,E.default)(function(){return(0,O.selectAtom)(G.dirInfoAtom,function(t){return t.get(e)})},[e]),x=(0,E.default)(function(){return(0,O.selectAtom)(w,function(e){var t;return null!=(t=null==e?void 0:e.create)?t:null})},[w]),b=(0,E.default)(function(){return(0,O.selectAtom)(w,function(e){var t;return null!=(t=null==e?void 0:e.children)?t:null})},[w]),S=(0,B.useValue)(b),T=(0,B.useValue)(x),A=v;return!A&&u.includes("/")?A=H({fileName:u,parentPath:e}):A||(A=z({fileName:u,siblingNames:null!=(t=null==S?void 0:S.map(function(e){return e.filename}))?t:[],parentPath:e})),{value:u,setValue:s,fileType:T,create:function(t){return(0,_._)(function(){var r,n,i,o,l,u,f,d,h,v;return(0,F._)(this,function(w){switch(w.label){case 0:if(!T||(o=(i=c()).readOnly,l=i.fs,o))return[2];if(u=null,0!==t.length)return[3,1];return u="File names cannot be empty",[3,4];case 1:if(!t.includes("/"))return[3,3];return[4,L({fileName:t,parentPath:e,fs:l})];case 2:return u=w.sent(),[3,4];case 3:u=z({fileName:t,siblingNames:null!=(f=null==S?void 0:S.map(function(e){return e.filename}))?f:[],parentPath:e}),w.label=4;case 4:if(u)return g(u),[2];if((h=(d=e===m.ROOT_PATH?null:e+"/")?d+t:t).includes("//")&&(h=h.split("/").filter(function(e){return e.length>0}).join("/")),p(!0),T!==y.FileType.Directory)return[3,6];return[4,l.createDir(h)];case 5:return v=w.sent(),[3,8];case 6:return[4,l.writeFile(h,new j.default(""))];case 7:v=w.sent(),w.label=8;case 8:if(v.error)return g("Something went wrong"),[2];return p(!1),s(""),a({parentPath:e,path:h,fileType:T}),null==(r=(n=c()).onCreate)||r.call(n,{path:h,type:T}),[2]}})})()},creating:d,error:A,clearError:function(){return g(null)},cancel:(0,E.default)(function(){return function(){return o(e)}},[e,o]),start:(0,E.default)(function(){return function(t){return n({parentPath:e,fileType:t})}},[e,n]),siblings:S}}function ey(e){var t=(0,E.default)(function(){return(0,p.atom)(function(t){var n=[],i=!0,o=!1,a=void 0;try{for(var l,u=t(G.presenceStateAtom)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=(0,r._)(l.value,2),c=s[0],f=s[1];if(!(0,I.descendantOf)(e,c))return;n.push.apply(n,(0,R._)(f))}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return n.length?n:null})},[e]);return(0,B.useValue)(t)}function eg(e){var t=(0,E.default)(function(){return(0,p.atom)(function(t){var r;return null!=(r=t(G.presenceStateAtom).get(e))?r:null})},[e]);return(0,B.useValue)(t)}function ew(){return(0,B.useSet)(G.renameAtom)}function ex(e){var t=(0,E.default)(function(){return(0,O.selectAtom)(G.selectedNodesAtom,function(t){return t.has(e)})},[e]);return(0,B.useObservableValue)(t)}function eb(e,t){if(t===e.path)return!1;var r=t+"/"+(0,v.getFileName)(e.path);return!(r===e.path||(0,I.descendantOf)(e.path,t)||(0,I.descendantOf)(r,e.path))}e.s(["useCollapse",()=>ec,"useContentContainer",()=>ea,"useCreateFile",()=>em,"useDirPresence",()=>ey,"useExpand",()=>ef,"useFilePresence",()=>eg,"useGutters",()=>en,"useIsExpanded",()=>eu,"useIsLoading",()=>el,"useIsSelected",()=>ex,"useItemNode",()=>eo,"useLayoutRow",()=>eh,"useOnDirOnClick",()=>et,"useOnFileClick",()=>J,"useOnFocus",()=>ev,"useOnKeyDown",()=>ed,"useRename",()=>ew,"useRenderedRows",()=>ei,"useTabIndex",()=>es,"useVirtualizeRows",()=>ep,"useWidestRows",()=>er],10261);var eS=(0,p.atom)(null,function(e,t,r){return(0,_._)(function(){var n,i,o,a,l,u,s,c,f,d;return(0,F._)(this,function(p){switch(p.label){case 0:if(i=null==(n=e(G.dirInfoAtom).get(r.to))?void 0:n.children)return[3,2];return[4,e(G.configAtom).fs.readDir(r.to)];case 1:if((o=p.sent()).error)return[2];i=o.children,p.label=2;case 2:var h,g,w,x,b,S;if(!i)throw Error("Expected children");if(h=r.nodes,g=r.to,w=i,a=h.reduce(function(e,t){var r=(0,v.getFileName)(t.path),n=(0,v.getParentPath)(t.path),i=null==w?void 0:w.find(function(e){return e.filename===r});return i&&(""===n?m.ROOT_PATH:n)!==g&&e.push({type:i.type,path:g===m.ROOT_PATH?i.filename:g+"/"+i.filename}),e},[]),x=r.nodes,b=r.to,!(l=(S=(0,v.coalesceFsNodes)(x)).every(function(e){return eb(e,b)})?S.map(function(e){var t=(0,v.getFileName)(e.path);return{from:e,to:b===m.ROOT_PATH?t:b+"/"+t}}):null)||(s=(u=e(G.configAtom)).readOnly,c=u.fs,s))return[2];if(!a.length)return[3,4];if(a.some(function(e){return l.some(function(t){var r=t.from;return(0,I.descendantOf)(e.path,r.path)})}))return[2];if(!r.overwrite)return null==(f=e(G.configAtom).onConflicts)||f({type:"move",nodes:r.nodes,to:r.to,conflicts:a}),[2];return[4,Promise.all(a.map(function(e){return(0,_._)(function(){var t;return(0,F._)(this,function(r){switch(r.label){case 0:return[4,e.type===y.FileType.Directory?c.deleteDir(e.path):c.deleteFile(e.path)];case 1:return[2,(t=r.sent()).error?{error:t.error,node:e}:null]}})})()}))];case 3:if(p.sent().filter(Boolean).length)return[2];p.label=4;case 4:return t(G.pendingMovesAtom,l),[4,Promise.all(l.map(function(e){var t=e.from,r=e.to;return(0,_._)(function(){var e;return(0,F._)(this,function(n){switch(n.label){case 0:return[4,t.type===y.FileType.Directory?c.moveDir(t.path,r):c.moveFile(t.path,r)];case 1:return[2,(e=n.sent()).error?{error:e.error,from:t,to:r}:null]}})})()}))];case 5:if(d=p.sent(),t(G.pendingMovesAtom,[]),d.filter(Boolean).length)return[2];return t(G.selectedNodesAtom,new Map(l.map(function(e){return[e.to,e.from.type]}))),[2]}})})()});e.s(["canMove",()=>eb,"moveFilesAtom",()=>eS],525544);var eT=e.i(664152),eA=(0,p.atom)(null,function(e,t,r){return(0,_._)(function(){var n,i,o,a,l,u,s,c,f,p,h;return(0,F._)(this,function(v){switch(v.label){case 0:if(i=(n=e(G.configAtom)).readOnly,o=n.fs,i)return[2];if(a=r.parentPath||m.ROOT_PATH,u=null==(l=e(G.dirInfoAtom).get(a))?void 0:l.children,r.files.length>A.MAX_NUM_FILES_UPLOAD_LIMIT)return r.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(r.files.reduce(function(e,t){return t.size+e},0)>A.MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES)return r.onError("Total file upload size exceeds maximum limit. Please try again with smaller files."),[2];if(u)return[3,2];return[4,o.readDir(a)];case 1:if((s=v.sent()).error)return[2];u=s.children,v.label=2;case 2:if(!u)throw Error("Expected children");if(c=(0,R._)(new Set(r.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(p=(f=u.filter(function(e){return c.some(function(t){return t===e.filename})})).length?f.map(function(e){return{path:a===m.ROOT_PATH?e.filename:a+"/"+e.filename,type:e.type}}):null)&&!r.overwrite)return null==(h=e(G.configAtom).onConflicts)||h({type:"upload",files:r.files,to:a,conflicts:f.map(function(e){return{path:a===m.ROOT_PATH?e.filename:a+"/"+e.filename,type:e.type}})}),[2];if(!p)return[3,4];return[4,Promise.all(p.map(function(e){return(0,_._)(function(){var t;return(0,F._)(this,function(r){switch(r.label){case 0:return[4,e.type===y.FileType.Directory?o.deleteDir(e.path):o.deleteFile(e.path)];case 1:return[2,(t=r.sent()).error?{error:t.error,node:e}:null]}})})()}))];case 3:if(v.sent().filter(Boolean).length)return[2];v.label=4;case 4:return(0,A.uploadFiles)({parentPath:r.parentPath,files:r.files,fs:o,onStart:function(e){t(G.pendingUploadsAtom,function(t){return(0,d.produce)(t,function(t){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;t.push(l)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}})})},onUpload:function(e){t(G.pendingUploadsAtom,function(t){return(0,d.produce)(t,function(t){var r=t.findIndex(function(t){return t.targetPath===e.path});-1!==r&&t.splice(r,1)})})},onError:function(e){e.error===A.UploadErrors.FileRead&&r.onError("Error reading file. Try uploading again."),t(G.pendingUploadsAtom,function(t){return(0,d.produce)(t,function(t){var r=t.findIndex(function(t){return t.targetPath===e.path});-1!==r&&t.splice(r,1)})})},onDone:function(e){var t=e.errors,r=e.parentPath;if(!t.length)return void eT.logger.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:r})}}),[2]}})})()});e.s(["uploadFilesAtom",()=>eA],453955);var eD=e.i(480028),e_=e.i(446530),eR=e.i(630818),eF=e.i(625484),eP=e.i(243074),eC=(0,p.atom)(0),ek=(0,p.atom)(null),eO=(0,p.atom)(function(e){var t=e(ek);if(null===t)return null;var r=e(G.renderedRowsAtom),n=-1!==t?r.get(t):null;return n&&n.depth>0||(null==n?void 0:n.row.type)==="dir"?(0,D.getDropPreview)(r,t):{y:e(eC),depth:1,height:e(G.containerSizeAtom).height-8}}),ej="(".concat(q.dropPreviewDepth," - 1) * ").concat(q.gutterWidth),eI=(0,e_.cssRecord)({root:[U.rcss.position.absolute,U.rcss.top(0),U.rcss.left(0),U.rcss.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(ej,"), ").concat(q.dropPreviewY,")"),width:"calc(100% - ".concat(ej,")"),height:q.dropPreviewHeight,opacity:q.dropPreviewOpacity,outline:"1px dashed ".concat(q.statusColor),outlineOffset:-1}]}),eE=(0,i.memo)(function(){var e=(0,B.useObservableValue)(eO),r=(0,B.useObservableValue)(eU),o=(0,B.useObservableValue)(eW),a=(0,i.useRef)(null);(0,T.useStyleSet)(a,e,function(e){var r,n,i,o;return o={},(0,t._)(o,Y.dropPreviewY,(null!=(r=null==e?void 0:e.y)?r:0)+"px"),(0,t._)(o,Y.dropPreviewHeight,(null!=(n=null==e?void 0:e.height)?n:0)+"px"),(0,t._)(o,Y.dropPreviewDepth,null!=(i=null==e?void 0:e.depth.toString())?i:"0"),o}),(0,T.useStyleSet)(a,o,function(e){return(0,t._)({},Y.dropPreviewOpacity,e?"1":"0")}),(0,T.useStyleSet)(a,r,function(e){return(0,t._)({},Y.statusColor,e?eD.tokens.accentPrimaryDefault:eD.tokens.accentNegativeDefault)});var l=(0,x.usePrefersReducedMotion)();return(0,n.jsx)(eF.View,{style:{transition:l?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:a,css:eI.root})}),eV=(0,p.atom)(null,function(e,t,n){if(null!==n){var i=!0,o=!1,a=void 0;try{for(var l,u=e(G.renderedRowsAtom)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=(0,r._)(l.value,2),c=s[0],f=s[1];if(!(n.y<f.y)&&!(n.y>f.y+f.height))return t(ek,c),f}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}t(ek,-1)}}),eN=c.Type.Object({type:c.Type.Literal("nodes"),width:c.Type.Number(),height:c.Type.Number(),nodes:c.Type.Array(c.Type.Object({path:c.Type.String(),type:c.Type.Enum(y.FileType)}))});function ez(){var e=(0,B.useSet)(eV),t=(0,B.useSet)(ek),n=(0,i.useRef)(null),o=(0,i.useRef)(null),a=(0,i.useRef)(null),s=(0,w.default)().showError,c=(0,B.useGet)(eC),f=(0,B.useSet)(eA),d=(0,B.useSet)(eS),p=(0,B.useSet)(eU),g=(0,i.useRef)(null),x=(0,B.useGet)(G.dirInfoAtom),T=(0,B.useGet)(G.rootPathAtom),D=(0,B.useSet)(G.containerSizeAtom),_=ef(),R=(0,B.useValue)(G.readOnlyAtom),F=(0,r._)((0,l.useDrop)(function(){return{accept:[y.FileType.File,y.FileType.Directory,u.NativeTypes.FILE],canDrop:function(){return!0},hover:function(t,i){var l=a.current;if(l){o.current&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},i=n.scrollZoneSize,o=n.scrollVelocity,a=n.scrollUpdateThrottle,l=(0,h.default)(function(){var n=t.getClientOffset();if(!n)return[0,0];var a=n.x,l=n.y,u=e.getBoundingClientRect(),s=u.x,c=u.y,f=u.width,d=u.height,p=Math.min(f/2,i.w),h=Math.min(d/2,i.h),v=function(e,t){var n=(0,r._)(t,2),i=n[0],o=n[1];return(0,b.default)(e,i[0],i[1])?(e-i[1])/(i[1]-i[0]):(0,b.default)(e,o[0],o[1])?(e-o[0])/(o[1]-o[0]):0};return[v(a,[[s,s+p],[s+f-p,s+f]])*o.x,v(l,[[c,c+h],[c+d-h,c+d]])*o.y]},a,{trailing:!1})();if(l){var u=(0,r._)(l,2),s=u[0],c=u[1];if(0!==s||0!==c){var f=e.scrollLeft,d=e.scrollTop,p=e.scrollWidth,v=e.scrollHeight,m=e.clientWidth,y=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=(0,S.clampToRange)(0,p-m,f+s),e.scrollTop=(0,S.clampToRange)(0,v-y,d+c)})}}}(o.current,i);var u=i.getClientOffset();if(u){var s=e({x:u.x-l.x,y:u.y-l.y+c()});s?"file"===s.row.type||"uploadFile"===s.row.type?n.current=(0,v.getParentPath)(s.row.path)||m.ROOT_PATH:"dir"===s.row.type?n.current=s.row.path:n.current=s.row.dir:n.current=T();var f="nodes"!==t.type||(0,v.coalesceFsNodes)(t.nodes).every(function(e){var t;return eb(e,null!=(t=n.current)?t:T())});if(p(f),(null==s?void 0:s.row.type)!=="dir"){g.current&&(clearTimeout(g.current.timer),g.current=null);return}var d=s.row.path;if(g.current){if(g.current.dir===d)return;clearTimeout(g.current.timer),g.current=null}if(f){var y=setTimeout(function(){var e;null!=(e=x().get(d))&&e.expanded||_(d)},400);g.current={dir:d,timer:y}}}}},drop:function(e,t){var r,i=null!=(r=n.current)?r:T();if("nodes"===e.type){d({to:i,nodes:e.nodes}),n.current=null;return}e.dirContent.then(function(e){var t=e.reduce(function(e,t){return t.size+e},0);e.length>A.MAX_NUM_FILES_UPLOAD_LIMIT?s("Trying to upload too many files at once. Please try again with fewer files."):t>A.MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES?s("Total file upload size exceeds maximum limit. Please try again with smaller files."):f({parentPath:i===m.ROOT_PATH?void 0:i,files:e.filter(Boolean),onError:s})}),n.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2),P=F[0].isOver,C=F[1],k=(0,B.useSet)(eW);(0,i.useEffect)(function(){if(k(P),P){var e,r=null==(e=o.current)?void 0:e.getBoundingClientRect();a.current=r?{x:r.x,y:r.y}:null,r&&D({width:r.width,height:r.height});return}g.current&&(clearTimeout(g.current.timer),g.current=null),n.current=null,t(null)},[k,P,t,D]);var O=(0,B.useSet)(eC);return(0,i.useEffect)(function(){var e=o.current;if(e){var t=(0,h.default)(function(){O(e.scrollTop)},200);return e.addEventListener("scroll",t),function(){t.cancel(),e.removeEventListener("scroll",t)}}},[O]),{dropRef:R?void 0:C,containerRef:o}}var eM=(0,p.atom)(null,function(e,t,n){t(G.selectedNodesAtom,function(e){return(0,d.produce)(e,function(e){e.set(n.path,n.type)})});var i=[n];if(e(G.lastSelectWasSingleAtom))return i;var o=!0,a=!1,l=void 0;try{for(var u,s=e(G.selectedNodesAtom)[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var c=(0,r._)(u.value,2),f=c[0],p=c[1];f!==n.path&&i.push({path:f,type:p})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i});function eL(e){var t=(0,B.useSet)(ek),n=(0,B.useSet)(eM),a=(0,B.useValue)(G.readOnlyAtom),l=(0,i.useRef)(null),u=(0,r._)((0,o.useDrag)({type:e.type,item:function(){var t,r,i=n(e),o=null!=(r=null==(t=l.current)?void 0:t.getBoundingClientRect())?r:{width:160,height:32};return{nodes:i,type:"nodes",width:o.width,height:o.height}},collect:function(t){var r=t.getItem();return{isDragging:!!((null==r?void 0:r.type)==="nodes"&&r.nodes.some(function(t){return t.path===e.path}))}},end:function(){t(null)}}),3),s=u[0],c=u[1],f=u[2],d=s.isDragging;return(0,g.useDisableNativeDragPreview)(f),{isDragging:d,dragRef:a?void 0:c,sizeRef:l}}var eH=(0,e_.cssRecord)({root:[U.rcss.position.absolute,{left:0,top:0,transform:"translate(".concat(q.dragPreviewX,", ").concat(q.dragPreviewY,")"),pointerEvents:"none"}],item:[U.rcss.backgroundColor.backgroundHighest,U.rcss.flex.row,U.rcss.align.center,U.rcss.shadow(3),X,{height:q.rowHeight,borderRadius:q.borderRadius}],icon:[Z,{marginRight:q.iconTextGap}],text:[$,U.rcss.flex.growAndShrink(1),{color:q.statusColor}],count:[$,U.rcss.backgroundColor.accentPrimaryDimmest,U.rcss.color.accentPrimaryStrongest,U.rcss.fontWeight.medium,U.rcss.position.absolute,U.rcss.left("calc(50% - 4px)"),U.rcss.top("calc(100% - 4px)"),U.rcss.borderRadius("full"),U.rcss.px(4),U.rcss.center,{fontSize:q.fontSizeSmall}]}),eG=(0,i.memo)(function(e){var r=(0,i.useRef)(null),o=ea(),a=(0,B.useObservableValue)(eB);return(0,T.useStyleSet)(r,a,function(e){var r;return r={},(0,t._)(r,Y.dragPreviewX,(e?e.x:0)+"px"),(0,t._)(r,Y.dragPreviewY,(e?e.y:0)+"px"),r}),(0,T.useStyleSet)(r,o.horizontalPadding,function(e){return(0,t._)({},Y.horizontalPadding,e+"px")}),(0,T.useStyleSet)(r,o.fontSize,function(e){return(0,t._)({},Y.fontSize,e+"px")}),(0,T.useStyleSet)(r,o.fontSizeSmall,function(e){return(0,t._)({},Y.fontSizeSmall,e+"px")}),(0,T.useStyleSet)(r,o.iconSize,function(e){return(0,t._)({},Y.iconSize,e+"px")}),(0,T.useStyleSet)(r,o.iconTextGap,function(e){return(0,t._)({},Y.iconTextGap,e+"px")}),(0,T.useStyleSet)(r,o.borderRadius,function(e){return(0,t._)({},Y.borderRadius,e+"px")}),(0,T.useStyleSet)(r,o.gutterWidth,function(e){return(0,t._)({},Y.gutterWidth,e+"px")}),(0,n.jsx)(eF.View,{innerRef:r,css:eH.root,children:(0,n.jsxs)(eF.View,{css:eH.item,style:{width:e.width,height:e.height},children:[(0,n.jsx)(eF.View,{css:eH.icon,children:e.type===y.FileType.File?(0,n.jsx)(eR.default,{path:e.path}):(0,n.jsx)(eP.default,{})}),(0,n.jsx)(eF.View,{css:eH.text,children:(0,v.getFileName)(e.path)}),e.count>1?(0,n.jsx)(eF.View,{css:eH.count,children:e.count}):null]})})}),eB=(0,p.atom)(null);(0,p.atom)(function(e){return null!==e(eB)});var eW=(0,p.atom)(!1),eU=(0,p.atom)(!1);function eK(){var e=(0,a.useDragLayer)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),t=e.isDragging,o=e.item,l=e.currentOffset,u=(0,B.useSet)(eB);if((0,i.useEffect)(function(){u(l?{x:l.x,y:l.y}:null)},[u,l]),!t||!f.Value.Check(eN,o))return null;var c=o.nodes,d=o.width,p=o.height,h=(0,r._)(c,1)[0];return h?(0,s.createPortal)((0,n.jsx)(eG,{type:h.type,path:h.path,count:c.length,width:d,height:p}),document.body):null}e.s(["DragLayer",()=>eK,"DropPreview",()=>eE,"useDragFile",()=>eL,"useDropFile",()=>ez],369685);var eY=e.i(223808),eq=e.i(282453),eX=c.Type.Enum(y.FileType),eZ=c.Type.Object({filename:c.Type.String({minLength:1}),type:eX}),e$=c.Type.Object({scrollOffset:c.Type.Number({minimum:0}),dirInfo:c.Type.Record(c.Type.String(),c.Type.Object({expanded:c.Type.Boolean(),children:c.Type.Array(eZ)}))});function eQ(e){var t;return t=eq.default.get(eJ(e)),f.Value.Check(e$,t)?{dirInfo:new Map(Object.entries(t.dirInfo)),scrollOffset:t.scrollOffset}:null}function eJ(e){return"repl:workspace:filetree:"+e}var e0=c.Type.Array(c.Type.String()),e1="repl:workspace:filetree:savedKeys",e2=(0,O.selectAtom)(G.configAtom,function(e){return e.localCacheKey?eJ(e.localCacheKey):null}),e3=(0,p.atom)(null,function(e){var t=e(G.configAtom),n=t.localCacheKey,i=t.filter;if(n){var o=null!=(p=null==(d=e(G.virtualizerAtom))?void 0:d.scrollOffset)?p:0,a=e(G.dirInfoAtom),l=!1,u=!0,s=!1,c=void 0;try{for(var d,p,h,v=a[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var m=(0,r._)(h.value,2)[1].children;if(l=!!(null==m?void 0:m.length))break}}catch(e){s=!0,c=e}finally{try{u||null==v.return||v.return()}finally{if(s)throw c}}if(l){var y=function(e,t){var n={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},i=!0,o=!1,a=void 0;try{for(var l,u=e.dirInfo[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var s=(0,r._)(l.value,2),c=s[0],f=s[1],d=f.expanded,p=f.children;if(p){var h=p.filter(t);h.length&&(n.dirInfo[c]={expanded:d,children:h})}}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return n}({dirInfo:a,scrollOffset:o},i),g=eJ(n),w=(D=eq.default.get(e1),f.Value.Check(e0,D)?D:null);if(w){var x=w.filter(function(e){return e!==g});x.unshift(g);var b=x.splice(20),S=!0,T=!1,A=void 0;try{for(var D,_,R=b[Symbol.iterator]();!(S=(_=R.next()).done);S=!0){var F=_.value;eq.default.remove(F)}}catch(e){T=!0,A=e}finally{try{S||null==R.return||R.return()}finally{if(T)throw A}}eq.default.set(e1,x)}else eq.default.set(e1,[g]);return eq.default.set(eJ(n),y)}}});function e4(){var e=(0,B.useValue)(e2),t=(0,B.useObservableValue)(G.dirInfoAtom),r=(0,B.useSet)(e3);(0,i.useEffect)(function(){if(e){var n,i,o=null,a=null!=(n=window.requestIdleCallback)?n:window.requestAnimationFrame,l=null!=(i=window.cancelIdleCallback)?i:window.cancelAnimationFrame,u=(0,eY.default)(function(){o&&l(o),o=a(r)},1e3),s=t.subscribe(u);return document.addEventListener("visibilitychange",r),document.addEventListener("beforeunload",r),function(){u.cancel(),o&&l(o),document.removeEventListener("visibilitychange",r),document.removeEventListener("beforeunload",r),s(),r()}}},[e,t,r])}e.s(["getLocalCache",()=>eQ,"useLocalCache",()=>e4],916866);var e6=e.i(878420),e5=e.i(64386),e8=e.i(32988),e7=e.i(672963),e9=e.i(315801),te=e.i(343252),tt=e.i(167626),tr={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;(0,tt._)(t.elements.reference,HTMLElement)&&(t.elements.popper.style.width="".concat(t.elements.reference.offsetWidth,"px"))}},tn=e.i(98816),ti=e.i(754873),to=e.i(290446),ta=(0,O.selectAtom)(G.configAtom,function(e){return e.autocomplete}),tl=(0,e_.cssRecord)({icon:[Z,{marginRight:q.iconTextGap}],item:[X,U.rcss.flex.row,U.rcss.align.center,ti.interactive.listItem,{height:q.rowHeight}],text:[$,U.rcss.flex.growAndShrink(1)]});function tu(e){var t=e.id,r=e.items,i=e.activeIndex,o=e.onSuggestion,a=e.fileType,l=e.innerRef;return(0,n.jsx)(eF.View,{tag:"ul",id:t,"aria-label":"Suggestions",innerRef:l,children:r.map(function(e,t){var r=t===i;return(0,n.jsxs)(eF.View,{id:e.value,tag:"li",role:"option","aria-selected":r,style:{backgroundColor:r?eD.tokens.interactiveBackground:void 0,color:r?eD.tokens.foregroundDefault:eD.tokens.foregroundDimmer},onClick:function(){return o(e.value)},css:tl.item,children:[(0,n.jsx)(eF.View,{css:tl.icon,children:a===y.FileType.Directory?(0,n.jsx)(eP.default,{}):(0,n.jsx)(eR.default,{path:e.value})}),(0,n.jsx)(to.HighlightMatches,{css:tl.text,text:e.value,highlight:e.highlight,dimmed:!r})]},e.value)})})}var ts=e.i(6338),tc=e.i(399144),tf=e.i(929872),td=e.i(42458),tp=[q.horizontalPadding,q.iconSize,q.iconTextGap].join(" + "),th=[ti.interactive.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(tp,")"),paddingRight:q.horizontalPadding,fontSize:q.fontSize}],tv=(0,e_.cssRecord)({root:[X,{padding:q.horizontalPadding}],icon:[Z,U.rcss.color.accentNegativeDefault,{marginRight:q.iconTextGap}],text:[{fontSize:q.fontSize},U.rcss.color.foregroundDimmer,U.rcss.flex.growAndShrink(1)]});function tm(e){return(0,n.jsxs)(eF.View,{css:tv.root,row:!0,children:[(0,n.jsx)(eF.View,{css:tv.icon,children:(0,n.jsx)(td.default,{})}),(0,n.jsx)(eF.View,{css:tv.text,children:e.message})]})}var ty=(0,e_.cssRecord)({root:[U.rcss.position.relative,U.rcss.flex.growAndShrink(1),{height:"100%"}],icon:[Z,U.rcss.position.absolute,U.rcss.left(q.horizontalPadding),U.rcss.top("50%"),{transform:"translateY(-50%)"}],input:th,inputLoading:[th,ts.loadingStyle.backgroundPulse()],menu:[U.rcss.overflow("hidden"),{borderRadius:q.borderRadius,border:"1px solid",borderColor:eD.tokens.outlineDefault}],label:[U.rcss.visuallyHidden]});function tg(e){var o,a,l,u,s,c,f,p,h,v,m,g=(0,i.useId)(),w=(0,i.useId)(),x=(o=(0,i.useRef)(null),a=ea(),(0,T.useStyleSet)(o,a.fontSize,function(e){return(0,t._)({},Y.fontSize,e+"px")}),(0,T.useStyleSet)(o,a.iconTextGap,function(e){return(0,t._)({},Y.iconTextGap,e+"px")}),(0,T.useStyleSet)(o,a.borderRadius,function(e){return(0,t._)({},Y.borderRadius,e+"px")}),(0,T.useStyleSet)(o,a.horizontalPadding,function(e){return(0,t._)({},Y.horizontalPadding,e+"px")}),(0,T.useStyleSet)(o,a.iconSize,function(e){return(0,t._)({},Y.iconSize,e+"px")}),(0,T.useStyleSet)(o,a.fontSize,function(e){return(0,t._)({},Y.rowHeight,(0,G.getRowHeight)(e,"file")+"px")}),(0,T.useStyleSet)(o,a.iconTextGap,function(e){return(0,t._)({},Y.iconTextGap,e+"px")}),u=(l=(0,r._)((0,i.useState)(null),2))[0],s=l[1],f=(c=(0,r._)((0,i.useState)(null),2))[0],p=c[1],v=(h=(0,e8.usePopper)(u,f,{modifiers:[{name:"offset",options:{offset:[0,4]}},tr],placement:"bottom-start"})).styles,m=h.attributes,{menuRef:(0,te.useMergeRefs)([o,p],{breadcrumb:"client/workspace/components/Filetree/FileNodeInput.tsx:100"}),menuAnchorRef:s,styles:v.popper,attributes:m.popper}),b=function(e){var t=e.onSuggestion,n=e.siblings,o=e.value,a=(0,B.useValue)(ta),l=(0,r._)((0,i.useState)({items:[],activeIndex:null}),2),u=l[0],s=l[1],c=(0,tn.default)(n),f=(0,tn.default)(o),p=(0,r._)((0,i.useTransition)(),2)[1],h=a?function(e){p(function(){var t=a(e);s(function(e){return(0,d.produce)(e,function(e){e.items=t.filter(function(e){return e.value!==f.current&&!c.current.some(function(t){return t.filename===e.value})})})})})}:null;function v(){s({items:[],activeIndex:null})}return{items:u.items.length?u.items:null,activeIndex:u.activeIndex,query:h,onKeyDown:function(e){if("Enter"===e.key){var r=null!==u.activeIndex?u.items[u.activeIndex]:null;if(!r)return;return e.preventDefault(),t(r.value),v(),!0}return"ArrowDown"===e.key?(e.preventDefault(),s(function(e){return(0,d.produce)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),s(function(e){return(0,d.produce)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:v}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),S=(0,B.useGet)(G.virtualizerAtom),A=(0,r._)((0,i.useState)(!0),2),D=A[0],_=A[1],R=(0,i.useRef)(null);(0,i.useEffect)(function(){if(R.current){var e,t=null==(e=S())?void 0:e.scrollElement;if(t)return(0,e9.inView)(R.current,function(){return _(!0),function(){return _(!1)}},{root:t})}},[S]);var F=D&&!!(e.error||b.items),P=b.items&&b.activeIndex?b.items[b.activeIndex]:void 0,C=!e.error&&b.items?b.items:null,k=(0,i.useRef)(null),O=b.clear,j=(0,e7.default)(function(e){var t;null!=(t=k.current)&&t.contains(e.target)||O()},[O]),I=(0,e7.default)(function(t){var r,n,i=e.inputRef.current;!i||(null==(r=k.current)?void 0:r.contains(t.target))||(null==(n=j.current)?void 0:n.contains(t.target))||e.onClickOutside({inputValue:i.value})},[]),E=x.menuAnchorRef,V=(0,te.useMergeRefs)([k,E],{breadcrumb:"client/workspace/components/Filetree/FileNodeInput.tsx:250"});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{css:ty.label,htmlFor:g,children:"file name"}),(0,n.jsxs)(eF.View,{css:ty.root,innerRef:V,children:[(0,n.jsx)(eF.View,{css:ty.icon,children:e.fileType===y.FileType.Directory?(0,n.jsx)(eP.default,{}):(0,n.jsx)(eR.default,{path:e.value})}),(0,n.jsx)("input",{spellCheck:!1,"aria-controls":b.query?w:void 0,"aria-expanded":b.items?"true":"false","aria-activedescendant":null==P?void 0:P.value,role:b.query?"combobox":void 0,id:g,ref:(0,te.useMergeRefs)([e.inputRef,R,I],{breadcrumb:"client/workspace/components/Filetree/FileNodeInput.tsx:274"}),css:e.loading?ty.inputLoading:ty.input,value:e.value,onChange:e.loading?void 0:function(t){var r;e.onChange(t),null==(r=b.query)||r.call(b,{input:t.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(t){b.onKeyDown(t)||e.onKeyDown(t)}})]}),(0,n.jsx)(tc.Portal,{children:(0,n.jsxs)(tf.Surface,(0,e5._)((0,e6._)({css:ty.menu,elevated:!0,innerRef:x.menuRef,style:(0,e5._)((0,e6._)({},x.styles),{display:F?"block":"none"})},x.attributes),{children:[e.error?(0,n.jsx)(tm,{message:e.error}):null,C?(0,n.jsx)(tu,{id:w,innerRef:j,items:C,activeIndex:b.activeIndex,onSuggestion:function(t){e.onSuggestion(t),O()},fileType:e.fileType}):null]}))})]})}var tw=(0,e_.cssRecord)({createFilePicker:[{fontSize:q.fontSize,paddingRight:q.horizontalPadding,paddingLeft:q.horizontalPadding}],button:[U.rcss.reset.button,U.rcss.p(2),ti.interactive.filled,U.rcss.color.foregroundDimmer,{fontSize:"inherit"}],text:[$,U.rcss.color.foregroundDimmest]});function tx(e){var t=em(e.dir),r=(0,i.useRef)(null);return((0,i.useEffect)(function(){var e;t.fileType&&(null==(e=r.current)||e.focus())},[t.fileType]),t.fileType)?(0,n.jsx)(tg,{siblings:t.siblings||[],type:"create",inputRef:r,loading:t.creating,error:t.error,value:t.value,fileType:t.fileType,onClickOutside:function(e){var r=e.inputValue;""===r?t.cancel():t.create(r)},onChange:function(e){t.error&&t.clearError(),t.setValue(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key?t.cancel():"Enter"===e.key&&t.create(e.currentTarget.value)},onSuggestion:function(e){t.setValue(e),t.create(e)}}):(0,n.jsx)(tb,{create:t.start})}function tb(e){return(0,n.jsxs)(eF.View,{css:tw.createFilePicker,align:"center",row:!0,gap:4,children:[(0,n.jsx)(eF.View,{css:tw.text,children:"Add a"}),(0,n.jsx)(eF.View,{tag:"button",css:tw.button,onClick:function(){return e.create(y.FileType.File)},children:"file"}),(0,n.jsx)(eF.View,{css:tw.text,children:"or "}),(0,n.jsx)(eF.View,{tag:"button",css:tw.button,onClick:function(){return e.create(y.FileType.Directory)},children:"folder"})]})}e.s(["CreateFileNode",()=>tx,"CreateFilePicker",()=>tb],189739);var tS=e.i(403675),tT=e.i(504940),tA={custom_instruction:{expanded:function(e){return(0,n.jsx)(tT.default,(0,e6._)({},e))},collapsed:function(e){return(0,n.jsx)(tT.default,(0,e6._)({},e))}}},tD=function(e){var t=e.isExpanded,r=void 0!==t&&t,i=e.path,o=e.size,a=void 0===o?16:o,l=Object.hasOwn(tA,i)?tA[i]:null;return l?l[r?"expanded":"collapsed"]({size:a}):r?(0,n.jsx)(tS.default,{color:eD.tokens.foregroundDimmer,size:a}):(0,n.jsx)(eP.default,{color:eD.tokens.foregroundDimmer,size:a})};e.s(["FolderIconComponent",()=>tD],518093);var t_=(0,e_.cssRecord)({root:[{marginLeft:"auto",paddingLeft:q.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:q.strokeDashoffset}}]});function tR(e){var r=(0,B.useValue)(G.fontSizeAtom)/2,o=r/2,a=2*o*Math.PI,l=(0,i.useRef)(null);return(0,T.useStyleSet)(l,e.progress,function(e){return(0,t._)({},Y.strokeDashoffset,(a-e*a).toString())}),(0,n.jsx)(eF.View,{innerRef:l,css:t_.root,children:(0,n.jsxs)("svg",{css:t_.svg,height:2*r,width:2*r,children:[(0,n.jsx)("circle",{fill:eD.tokens.backgroundHigher,r:r,cx:r,cy:r}),(0,n.jsx)("circle",{className:"inner-circle",stroke:eD.tokens.foregroundDimmest,fill:"transparent",strokeWidth:r,strokeDasharray:a+" "+a,r:o,cx:r,cy:r})]})})}var tF=function(e){return e.reduce(function(e,t){return e+t.current},0)/e.length};function tP(e){var o,a,l,u,s=(0,B.useValue)(G.fontSizeAtom)/2,c=s/2,f=2*c*Math.PI,d=(o=e.uploadProgress,l=(a=(0,r._)((0,i.useState)(tF(o)),2))[0],u=a[1],(0,i.useEffect)(function(){var e=[],t=!0,r=!1,n=void 0;try{for(var i,a=o[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=i.value;e.push(l.subscribe(function(){u(tF(o))}))}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}return function(){e.map(function(e){return e()})}},[o]),l),p=(0,i.useRef)(null);return(0,n.jsx)(eF.View,{innerRef:p,css:t_.root,children:(0,n.jsxs)("svg",{css:t_.svg,height:2*s,width:2*s,children:[(0,n.jsx)("circle",{fill:eD.tokens.backgroundHigher,r:s,cx:s,cy:s}),(0,n.jsx)("circle",{className:"inner-circle",style:(0,t._)({},Y.strokeDashoffset,(f-d*f).toString()),stroke:eD.tokens.foregroundDimmest,fill:"transparent",strokeWidth:s,strokeDasharray:f+" "+f,r:c,cx:s,cy:s})]})})}function tC(e){var t,o,a,l,u,s,c,f,d,p,h,g,w,x,b,S,T,A,D,R,P=(0,r._)((t={path:e.path,type:e.fileType},a=(0,B.useGet)(G.configAtom),u=(l=(0,r._)((0,i.useState)(null),2))[0],s=l[1],c=(0,v.getParentPath)(t.path)||m.ROOT_PATH,f=(0,v.getFileName)(t.path),d=(0,B.useSet)(G.pathToBeRenamedAtom),p=(0,B.useSet)(G.focusedPathAtom),g=(h=(0,r._)((0,i.useState)(f),2))[0],w=h[1],b=(x=(0,r._)((0,i.useState)(!1),2))[0],S=x[1],T=(0,E.default)(function(){return(0,O.selectAtom)(G.dirInfoAtom,function(e){var t;return null==(t=e.get(c))?void 0:t.children})},[c]),A=g!==f,D=(0,B.useValue)(T),R=null,A&&g.includes("/")?R=H({fileName:g,parentPath:c}):A&&(R=z({fileName:g,siblingNames:null!=(o=null==D?void 0:D.map(function(e){return e.filename}))?o:[],parentPath:c})),[{canRename:!!g&&A&&!R,value:g,renaming:b,error:u||R,siblings:D},{setValue:w,rename:function(e){return(0,_._)(function(){var r,n,i,o,l,u,h,g,w,x,b;return(0,F._)(this,function(T){switch(T.label){case 0:if(R||!e||e===f||(n=(r=a()).readOnly,i=r.fs,o=r.onFileRenameStart,l=r.onFileRenameEnd,n))return[2];if(u=null,!e.includes("/"))return[3,2];return[4,L({fileName:e,parentPath:c,fs:i})];case 1:return u=T.sent(),[3,3];case 2:u=z({fileName:e,siblingNames:null!=(h=null==D?void 0:D.map(function(e){return e.filename}))?h:[],parentPath:c}),T.label=3;case 3:if(u)return s(u),[2];if(w=(g=c===m.ROOT_PATH?null:c+"/")?g+e:e,x=(0,v.getParentPath)(w)||m.ROOT_PATH,S(!0),null==o||o({from:t.path,to:w}),x===m.ROOT_PATH)return[3,6];return[4,i.stat(x)];case 4:if(T.sent().exists)return[3,6];return[4,i.createDir(x)];case 5:T.sent(),T.label=6;case 6:if(t.type!==y.FileType.Directory)return[3,8];return[4,i.moveDir(t.path,w)];case 7:return b=T.sent(),[3,10];case 8:return[4,i.moveFile(t.path,w)];case 9:b=T.sent(),T.label=10;case 10:if(b.error)return s("Something went wrong"),S(!1),null==l||l(),[2];return d(null),null==l||l(),p(w),[2]}})})()},cancel:function(){var e=a().onFileRenameEnd;d(null),null==e||e(),p(t.path)}}]),2),C=P[0],k=P[1],j=k.setValue,I=k.rename,V=k.cancel,N=(0,i.useRef)(null),M=(0,i.useRef)(C.value);return(0,i.useEffect)(function(){if(N.current){var e=M.current;if(e){var t=e.lastIndexOf(".");t<=1&&(t=e.length);var r=+!!e.startsWith(".");N.current.focus(),N.current.setSelectionRange(r,t)}}},[]),(0,n.jsx)(tg,{siblings:C.siblings?C.siblings.filter(function(t){return t.filename!==(0,v.getFileName)(e.path)}):[],type:"rename",inputRef:N,loading:C.renaming,error:C.error,value:C.value,fileType:e.fileType,onClickOutside:function(e){var t=e.inputValue;C.canRename?I(t):C.error||V()},onChange:function(e){j(e.currentTarget.value)},onKeyDown:function(e){"Escape"===e.key?V():"Enter"===e.key&&(C.canRename?I(e.currentTarget.value):C.error||V())},onSuggestion:function(e){j(e),I(e)}})}e.s(["CumulativeProgressCircle",()=>tP,"ProgressCircle",()=>tR],942527),e.s(["RenameFileNode",()=>tC],788123)},234961,e=>{"use strict";var t,r=e.i(960933),n=((t={}).UNTRACKED="UNTRACKED",t.UNMODIFIED="UNMODIFIED",t.MODIFIED="MODIFIED",t.TYPE_CHANGED="TYPE_CHANGED",t.ADDED="ADDED",t.DELETED="DELETED",t.RENAMED="RENAMED",t.COPIED="COPIED",t.UNMERGED="UNMERGED",t),i=r.Type.Enum(n),o=r.Type.Object({type:r.Type.Object({index:i,worktree:i}),path:r.Type.String(),staged:r.Type.Boolean(),unmerged:r.Type.Boolean(),source:r.Type.Optional(r.Type.Object({type:r.Type.Union([r.Type.Literal("RENAMED"),r.Type.Literal("COPIED")]),score:r.Type.Number(),path:r.Type.String()}))});r.Type.Object({commit:r.Type.Union([r.Type.String(),r.Type.Null()]),branch:r.Type.Union([r.Type.String(),r.Type.Null()]),upstream:r.Type.Union([r.Type.Null(),r.Type.Object({branch:r.Type.String(),ahead:r.Type.Number(),behind:r.Type.Number()})]),stashes:r.Type.Number(),changes:r.Type.Array(o)}),e.s(["GitStatusChangedFileType",()=>n])},160290,e=>{"use strict";var t,r,n,i,o,a=e.i(721281),l=e.i(346715),u=e.i(276385),s=e.i(389959),c=e.i(903381),f=e.i(343252),d=e.i(869226),p=e.i(722441),h=e.i(369685),v=e.i(10261),m=e.i(916866),y=e.i(878420),g=e.i(64386),w=e.i(530658),x=e.i(205104),b=e.i(189739),S=e.i(518093),T=e.i(27304),A=e.i(942527),D=e.i(788123),_=e.i(624525),R=e.i(992785),F=e.i(814563),P=e.i(234961),C=e.i(703631),k=e.i(125674),O=e.i(820170),j=e.i(666729),I=e.i(480028),E=e.i(446530),V=e.i(613355),N=e.i(625484),z=(t={},(0,a._)(t,P.GitStatusChangedFileType.ADDED,"A"),(0,a._)(t,P.GitStatusChangedFileType.UNTRACKED,"A"),(0,a._)(t,P.GitStatusChangedFileType.MODIFIED,"M"),(0,a._)(t,P.GitStatusChangedFileType.DELETED,"D"),(0,a._)(t,P.GitStatusChangedFileType.RENAMED,"R"),(0,a._)(t,P.GitStatusChangedFileType.COPIED,"C"),t),M=(r={},(0,a._)(r,P.GitStatusChangedFileType.ADDED,I.tokens.greenDimmest),(0,a._)(r,P.GitStatusChangedFileType.UNTRACKED,I.tokens.greenDimmest),(0,a._)(r,P.GitStatusChangedFileType.MODIFIED,I.tokens.yellowDimmest),(0,a._)(r,P.GitStatusChangedFileType.DELETED,I.tokens.redDimmest),(0,a._)(r,P.GitStatusChangedFileType.RENAMED,I.tokens.tealDimmest),(0,a._)(r,P.GitStatusChangedFileType.COPIED,I.tokens.limeDimmest),r),L=(n={},(0,a._)(n,P.GitStatusChangedFileType.ADDED,I.tokens.greenStrongest),(0,a._)(n,P.GitStatusChangedFileType.UNTRACKED,I.tokens.greenStrongest),(0,a._)(n,P.GitStatusChangedFileType.MODIFIED,I.tokens.yellowStrongest),(0,a._)(n,P.GitStatusChangedFileType.DELETED,I.tokens.redStrongest),(0,a._)(n,P.GitStatusChangedFileType.RENAMED,I.tokens.tealStrongest),(0,a._)(n,P.GitStatusChangedFileType.COPIED,I.tokens.limeStrongest),n);function H(e){return e===P.GitStatusChangedFileType.ADDED||e===P.GitStatusChangedFileType.UNTRACKED||e===P.GitStatusChangedFileType.MODIFIED||e===P.GitStatusChangedFileType.DELETED||e===P.GitStatusChangedFileType.RENAMED||e===P.GitStatusChangedFileType.COPIED}var G={color:j.styleTokens.statusColor,fontSize:j.styleTokens.fontSizeSmall,minWidth:j.styleTokens.dirStatusIconSize,height:j.styleTokens.dirStatusIconSize},B=(0,E.cssRecord)({fileIcon:[V.rcss.fontWeight.bold,V.rcss.px(2),V.rcss.center,G],directoryCountIcon:[V.rcss.fontWeight.medium,V.rcss.borderRadius(4),V.rcss.px(2),V.rcss.center,G,{backgroundColor:j.styleTokens.statusBackgroundColor}],directoryDraftBufferIndicator:[V.rcss.width(8),V.rcss.height(8),V.rcss.ml(8),V.rcss.border({color:I.tokens.foregroundDimmer,width:1}),{borderRadius:"50%"}],fileDraftBufferIndicator:[V.rcss.width(8),V.rcss.height(8),V.rcss.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]});function W(e){return(0,u.jsx)(N.View,{css:B.fileIcon,children:(0,u.jsx)(N.View,{children:e.text})})}function U(e){return(0,u.jsx)(N.View,{css:B.directoryCountIcon,children:(0,u.jsx)(N.View,{children:e.count})})}var K=e.i(754873),Y=e.i(630818),q=e.i(818138),X=e.i(960178),Z=e.i(940745),$=e.i(196353),Q=e.i(42458),J=[V.rcss.position.absolute,V.rcss.top(0),V.rcss.left(0),{width:"calc(100% - ".concat(j.styleTokens.rowLeftIndent,")"),height:j.styleTokens.rowHeight,transform:"translateY(".concat(j.styleTokens.rowY,")"),marginLeft:j.styleTokens.rowLeftIndent}],ee=(0,E.cssRecord)({divider:(0,l._)(J).concat([j.rowPadding,V.rcss.flex.growAndShrink(1),V.rcss.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:I.tokens.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[V.rcss.truncate,V.rcss.color.foregroundDimmer,{fontSize:j.styleTokens.fontSizeSmall}],error:(0,l._)(J).concat([V.rcss.rowWithGap(4),V.rcss.align.center,j.rowPadding]),emptyDir:(0,l._)(J).concat([j.rowPadding,V.rcss.color.foregroundDimmest,V.rcss.justify.center,{paddingLeft:j.styleTokens.iconSize,paddingRight:j.styleTokens.horizontalPadding}]),row:(0,l._)(J).concat([V.rcss.flex.growAndShrink(1),V.rcss.flex.row,V.rcss.align.center,K.interactive.nofill,(o={backgroundColor:j.styleTokens.nodeBackgroundColor,borderRadius:j.styleTokens.borderRadius,cursor:"pointer","&:focus":{outline:"none !important",boxShadow:"0 0 0 1px "+I.tokens.accentPrimaryDefault,zIndex:1}},(0,a._)(o,j.cssVars.hasUnsavedChangesDisplay,"flex"),(0,a._)(o,"@media (hover: hover)",(0,a._)({},j.cssVars.contextMenuButtonDisplay,"none")),(0,a._)(o,"&:hover, &:active, &:focus",(i={},(0,a._)(i,j.cssVars.contextMenuButtonDisplay,"flex"),(0,a._)(i,j.cssVars.hasUnsavedChangesDisplay,"none"),i)),(0,a._)(o,"transitionDuration","0ms"),o)]),rowContent:[V.rcss.flex.row,V.rcss.align.center,V.rcss.flex.growAndShrink(1),j.rowPadding],uploadRow:(0,l._)(J).concat([V.rcss.flex.growAndShrink(1),V.rcss.align.center,V.rcss.flex.row,V.rcss.align.center,j.rowPadding,V.rcss.border({color:"transparent"}),(0,a._)({backgroundColor:j.styleTokens.nodeBackgroundColor,borderRadius:j.styleTokens.borderRadius},j.cssVars.statusColor,I.tokens.foregroundDimmer)]),createRow:(0,l._)(J).concat([V.rcss.justify.center]),icon:[j.iconSize,{marginRight:j.styleTokens.iconTextGap}],text:[j.textCss,V.rcss.flex.growAndShrink(1),{color:j.styleTokens.statusColor}],emptyDirText:[j.textCss,V.rcss.display.flex,V.rcss.justify.center,V.rcss.flex.growAndShrink(1),{color:j.styleTokens.statusColor}],contextMenuButton:[V.rcss.reset.button,V.rcss.height("100%"),V.rcss.center,V.rcss.cursor.pointer,K.interactive.filled,j.iconSize,{display:j.styleTokens.contextMenuButtonDisplay,borderRadius:"0 ".concat(j.styleTokens.borderRadius," ").concat(j.styleTokens.borderRadius," 0"),transitionDuration:"0ms",backgroundColor:"transparent"}],draftBufferContainer:[{display:j.styleTokens.hasUnsavedChangesDisplay}]});function et(e){var t=(0,v.useFilePresence)(e.path),r=(0,O.useValue)(_.avatarSizeAtom);return(null==t?void 0:t.length)?(0,u.jsx)(q.default,{size:r,activeUsers:t}):null}function er(e){var t=(0,v.useDirPresence)(e.path);return(null==t?void 0:t.length)?(0,u.jsx)(q.default,{activeUsers:t}):null}function en(e){return(0,u.jsx)(N.View,{title:"menu",tag:"button",css:ee.contextMenuButton,onClick:e.onClick,children:(0,u.jsx)($.default,{})})}function ei(e,t){var r=(0,v.useIsSelected)(t);(0,d.useStyleSet)(e,r,function(e){return(0,a._)({},j.cssVars.nodeBackgroundColor,e?I.tokens.backgroundHigher:"transparent")}),(0,s.useEffect)(function(){var t=function(t){e.current&&e.current.setAttribute("aria-selected",t?"true":"false")};return t(r.current),r.subscribe(t)},[e,r,t])}var eo=(0,s.memo)(function(e){var t,r,n,i,o,l,d,p,m=(0,s.useRef)(null),b=(0,v.useLayoutRow)(e.index),D=(0,v.useIsExpanded)(e.path),E=(0,v.useIsLoading)(e.path),V=(r=(t=(0,w._)((0,s.useState)(E),2))[0],n=t[1],(0,s.useEffect)(function(){if(!E)return void n(!1);var e=setTimeout(function(){return n(!0)},500);return function(){clearTimeout(e)}},[E]),r),z=(0,v.useRename)(),G=(0,O.useValue)(_.rootPathAtom),B=(0,v.useTabIndex)(e.path),W=(0,v.useOnDirOnClick)(e.path),K=(0,w._)((0,v.useOnFocus)({path:e.path,index:e.index}),2),Y=K[0],q=K[1],X=e.path===G&&E,$=X?T.LOADING:(0,x.getFileName)(e.path),Q=(0,h.useDragFile)({path:e.path,type:c.FileType.Directory}),J=Q.dragRef,et=Q.sizeRef,eo=Q.isDragging;ei(m,e.path);var ea=(i=e.path,o=(0,k.default)(function(){return(0,F.selectAtom)(_.fileStatusAtom,function(e){return e?function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,w._)(a.value,2),s=u[0],c=u[1],f=c.index,d=c.worktree;(0,C.descendantOf)(t,s)&&r.push({path:s,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}if(0===r.length)return null;var p=r.every(function(e){return e.index===P.GitStatusChangedFileType.ADDED||e.worktree===P.GitStatusChangedFileType.UNTRACKED})?P.GitStatusChangedFileType.ADDED:P.GitStatusChangedFileType.MODIFIED;if(!H(p))return null;var h=r.length;return{color:L[p],backgroundColor:M[p],count:h}}(e,i):null},R.default)},[i]),(0,O.useValue)(o)),el=(0,O.useValue)(_.onContextMenuAtom);return(0,u.jsxs)(N.View,{style:(0,g._)((0,y._)({},null==b?void 0:b.style),(p={},(0,a._)(p,j.cssVars.statusColor,null!=(l=null==ea?void 0:ea.color)?l:I.tokens.foregroundDimmer),(0,a._)(p,j.cssVars.statusBackgroundColor,null==ea?void 0:ea.backgroundColor),(0,a._)(p,"opacity",eo?.1:void 0),p)),tabIndex:B,role:"treeitem","aria-label":$,"aria-expanded":D,"aria-level":(null!=(d=null==b?void 0:b.depth)?d:0)+1,css:ee.row,onFocus:function(){return q(e.path)},innerRef:(0,f.useMergeRefs)([m,Y,et,e.pending?void 0:J],{breadcrumb:"client/workspace/components/Filetree/Row.tsx:345"}),onContextMenu:el?function(t){el(t,{path:e.path,type:c.FileType.Directory})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&z(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&W(e)},children:[(0,u.jsxs)(N.View,{title:e.path,css:ee.rowContent,onClick:e.pending?void 0:W,children:[(0,u.jsx)(N.View,{css:ee.icon,children:X||V&&!D?(0,u.jsx)(Z.default,{}):(0,u.jsx)(S.FolderIconComponent,{path:e.path,isExpanded:D})}),(0,u.jsx)(N.View,{css:ee.text,children:$}),e.uploadProgress?(0,u.jsx)(A.CumulativeProgressCircle,{uploadProgress:e.uploadProgress}):null,ea?(0,u.jsx)(U,{count:ea.count}):null,D?null:(0,u.jsx)(er,{path:e.path}),null]}),el?(0,u.jsx)(en,{onClick:function(t){el(t,{path:e.path,type:c.FileType.Directory})}}):null]})}),ea=(0,s.memo)(function(e){var t,r,n,i,o,l=(0,s.useRef)(null),d=(0,v.useLayoutRow)(e.index),p=(0,v.useOnFileClick)(e.path),m=p.onClick,b=p.onDoubleClick,S=(0,v.useTabIndex)(e.path),T=(0,v.useRename)(),A=(0,w._)((0,v.useOnFocus)({path:e.path,index:e.index}),2),D=A[0],C=A[1],E=(0,x.getFileName)(e.path),V=(0,h.useDragFile)({path:e.path,type:c.FileType.File}),M=V.dragRef,G=V.sizeRef,B=V.isDragging;ei(l,e.path);var U=(t=e.path,r=(0,k.default)(function(){return(0,F.selectAtom)(_.fileStatusAtom,function(e){return e?function(e,t){var r=null==e?void 0:e.get(t);if(!r)return null;var n=null;return r.worktree!==P.GitStatusChangedFileType.UNMODIFIED?n=r.worktree:r.index!==P.GitStatusChangedFileType.UNMODIFIED&&(n=r.index),n&&H(n)?{color:L[n],text:z[n]}:null}(e,t):null},R.default)},[t]),(0,O.useValue)(r)),K=(0,O.useValue)(_.onContextMenuAtom);return(0,u.jsxs)(N.View,{style:(0,g._)((0,y._)({},null==d?void 0:d.style),(o={},(0,a._)(o,j.cssVars.statusColor,null!=(n=null==U?void 0:U.color)?n:I.tokens.foregroundDimmer),(0,a._)(o,"opacity",B?.1:void 0),o)),tabIndex:S,dataCy:"filetree-file",css:ee.row,onFocus:function(){return C(e.path)},innerRef:(0,f.useMergeRefs)([l,D,G,e.pending?void 0:M],{breadcrumb:"client/workspace/components/Filetree/Row.tsx:464"}),role:"treeitem","aria-label":E,"aria-level":(null!=(i=null==d?void 0:d.depth)?i:0)+1,onDoubleClick:e.pending?void 0:b,onContextMenu:K?function(t){K(t,{path:e.path,type:c.FileType.File})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&T(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&m(e)},children:[(0,u.jsxs)(N.View,{title:e.path,css:ee.rowContent,onClick:e.pending?void 0:m,children:[(0,u.jsx)(N.View,{css:ee.icon,children:(0,u.jsx)(Y.default,{path:e.path})}),(0,u.jsx)(N.View,{css:ee.text,children:E}),U?(0,u.jsx)(W,{text:U.text}):null,(0,u.jsx)(et,{path:e.path}),null]}),K?(0,u.jsx)(en,{onClick:function(t){K(t,{path:e.path,type:c.FileType.File})}}):null]})}),el=(0,s.memo)(function(e){var t=(0,v.useLayoutRow)(e.index);return(0,u.jsx)(N.View,{css:ee.divider,style:null==t?void 0:t.style,role:"treeitem",children:(0,u.jsx)(N.View,{css:ee.dividerInner,children:(0,u.jsx)(N.View,{css:ee.dividerText,children:e.label})})})}),eu=(0,s.memo)(function(e){var t=(0,v.useLayoutRow)(e.index);return(0,u.jsxs)(N.View,{css:ee.error,style:null==t?void 0:t.style,role:"treeitem",children:[(0,u.jsx)(Q.default,{}),(0,u.jsx)(X.Text,{multiline:!1,children:e.message})]})}),es=(0,s.memo)(function(e){var t=(0,v.useLayoutRow)(e.index);return(0,u.jsx)(N.View,{css:ee.emptyDir,style:null==t?void 0:t.style,role:"treeitem",children:(0,u.jsx)(N.View,{css:ee.emptyDirText,children:T.NO_FILES})})}),ec=(0,s.memo)(function(e){var t=(0,v.useLayoutRow)(e.index);return(0,u.jsx)(N.View,{css:ee.createRow,style:null==t?void 0:t.style,role:"treeitem",children:(0,u.jsx)(b.CreateFileNode,{dir:e.dir})})}),ef=(0,s.memo)(function(e){var t=(0,v.useLayoutRow)(e.index),r=(0,x.getFileName)(e.path);return(0,u.jsx)(N.View,{style:null==t?void 0:t.style,css:ee.createRow,role:"treeitem","aria-label":r,children:(0,u.jsx)(D.RenameFileNode,{path:e.path,fileType:e.fileType})})}),ed=(0,s.memo)(function(e){var t=(0,v.useLayoutRow)(e.index),r=(0,x.getFileName)(e.path);return(0,u.jsxs)(N.View,{style:null==t?void 0:t.style,css:ee.uploadRow,role:"treeitem","aria-label":r,children:[(0,u.jsx)(N.View,{css:ee.icon,children:(0,u.jsx)(Y.default,{path:e.path})}),(0,u.jsx)(N.View,{css:ee.text,children:r}),(0,u.jsx)(A.ProgressCircle,{progress:e.progress})]})}),ep=(0,s.memo)(function(e){var t=(0,v.useItemNode)(e.index);return t?"error"===t.type?(0,u.jsx)(eu,{index:e.index,message:t.message}):"divider"===t.type?(0,u.jsx)(el,{index:e.index,label:t.label}):"emptyDir"===t.type?(0,u.jsx)(es,{index:e.index}):"create"===t.type?(0,u.jsx)(ec,{index:e.index,dir:t.dir}):"uploadFile"===t.type?(0,u.jsx)(ed,{index:e.index,path:t.path,progress:t.progress}):t.rename?(0,u.jsx)(ef,{index:e.index,path:t.path,fileType:"file"===t.type?c.FileType.File:c.FileType.Directory}):"file"===t.type?(0,u.jsx)(ea,{index:e.index,path:t.path,pending:!!t.pending}):(0,u.jsx)(eo,{index:e.index,path:t.path,pending:!!t.pending,uploadProgress:t.uploadProgress}):null}),eh=[j.styleTokens.horizontalPadding,j.styleTokens.rowLeftIndent,j.styleTokens.iconSize,j.styleTokens.iconTextGap].join(" + "),ev=(0,E.cssRecord)({root:[V.rcss.overflow("hidden"),V.rcss.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(eh,")"),paddingRight:j.styleTokens.horizontalPadding}]}),em=(0,s.memo)(function(){var e=(0,v.useWidestRows)();return e?(0,u.jsx)(N.View,{css:ev.root,children:e.map(function(e){var t=e.type,r=e.text,n=e.depth,i=(0,a._)({},j.cssVars.rowLeftIndent,"calc(".concat(n," * ").concat(j.styleTokens.gutterWidth,")")),o=t+n;return"divider"===t?(0,u.jsx)(N.View,{style:i,css:ee.dividerInner,children:(0,u.jsx)(X.Text,{css:ee.dividerInner,multiline:!1,children:r.toUpperCase()})},o):(0,u.jsx)(N.View,{css:ev.file,style:i,children:"create"===t?(0,u.jsx)(b.CreateFilePicker,{create:function(){}}):(0,u.jsx)(N.View,{css:ee.text,children:r.toUpperCase()})},o)})}):null}),ey=e.i(541793),eg=e.i(193060),ew=e.i(240913),ex=e.i(98816),eb=e.i(222342),eS=e.i(274445),eT=e.i(525544),eA=e.i(453955),eD=(0,E.cssRecord)({content:[V.rcss.position.relative,{overflowY:"auto",height:"100%",minHeight:j.styleTokens.minHeight}],scroll:[{position:"relative",height:j.styleTokens.scrollHeight}],gutter:[V.rcss.position.absolute,V.rcss.top(0),V.rcss.left(0),V.rcss.reset.button,V.rcss.align.end,V.rcss.cursor.pointer,{width:j.styleTokens.gutterWidth,"& > div":[V.rcss.height("100%"),V.rcss.highRes({borderLeftWidth:.5}),{borderLeft:"1px solid",marginRight:"25%",opacity:0,borderLeftColor:"transparent",transitionProperty:"border-color",transitionDuration:"0",transitionDelay:"0"}],"&:hover > div":{borderColor:I.tokens.outlineDimmest,transitionDuration:"200ms",transitionDelay:"100ms",opacity:1}}]}),e_=(0,s.memo)(function(e){var t,r,n=(0,v.useRenderedRows)(),i=(0,v.useContentContainer)();(0,d.useStyleSet)(e.scrollRef,i.fontSize,function(e){var t;return t={},(0,a._)(t,j.cssVars.fontSize,e+"px"),(0,a._)(t,j.cssVars.dirStatusIconSize,e+"px"),t}),(0,d.useStyleSet)(e.scrollRef,i.fontSizeSmall,function(e){return(0,a._)({},j.cssVars.fontSizeSmall,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.iconSize,function(e){return(0,a._)({},j.cssVars.iconSize,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.iconTextGap,function(e){return(0,a._)({},j.cssVars.iconTextGap,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.horizontalPadding,function(e){return(0,a._)({},j.cssVars.horizontalPadding,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.borderRadius,function(e){return(0,a._)({},j.cssVars.borderRadius,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.scrollHeight,function(e){return(0,a._)({},j.cssVars.scrollHeight,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.gutterWidth,function(e){return(0,a._)({},j.cssVars.gutterWidth,e+"px")}),(0,d.useStyleSet)(e.scrollRef,i.minHeight,function(e){return(0,a._)({},j.cssVars.minHeight,e+"px")});var o=(0,v.useOnKeyDown)(),p=(0,h.useDropFile)(),m=p.dropRef,y=p.containerRef,g=(0,O.useSet)(_.clearNodeSelectionAtom),w=(0,O.useValue)(_.onContextMenuAtom),x=(0,O.useValue)(_.rootPathAtom);t=(0,O.useSet)(_.scrollToPathAtom),r=(0,O.useObservableValue)(_.selectedPathAnchorAtom),(0,s.useEffect)(function(){var e=function(){r.current&&t(r.current)};return e(),r.subscribe(e)},[r,t]);var b=(0,f.useMergeRefs)([e.scrollRef,m,y],{breadcrumb:"client/workspace/components/Filetree/index.tsx:163"});return(0,u.jsxs)(N.View,{css:eD.content,px:2,innerRef:b,translate:"no",onKeyDown:o,onContextMenu:w?function(e){e.target===e.currentTarget&&w(e,{type:c.FileType.Directory,path:x})}:void 0,onClick:function(e){e.target===e.currentTarget&&g()},children:[(0,u.jsx)(em,{}),(0,u.jsxs)(N.View,{css:eD.scroll,role:"tree",children:[(0,l._)(n.values()).map(function(e){var t=e.key,r=e.index;return(0,u.jsx)(ep,{index:r},t)}),(0,u.jsx)(eF,{}),(0,u.jsx)(h.DropPreview,{}),(0,u.jsx)(h.DragLayer,{})]})]})}),eR=(0,s.memo)(function(){var e=(0,v.useVirtualizeRows)().scrollRef;return(0,p.useConfirmDeleteNodes)(),(0,m.useLocalCache)(),(0,u.jsx)(e_,{scrollRef:e})}),eF=(0,s.memo)(function(){var e=(0,v.useGutters)(),t=(0,v.useCollapse)();return(0,u.jsx)(u.Fragment,{children:e.map(function(e){return(0,u.jsx)(N.View,{tag:"button",onClick:function(){return t(e.dir)},css:eD.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(j.styleTokens.gutterWidth,"), ").concat(e.y,"px)")},children:(0,u.jsx)(N.View,{})},"gutter"+e.dir+e.depth+e.y)})})});function eP(e){var t,r,n;return t=(0,eb.default)().showError,r=(0,w._)((0,s.useState)(function(){var r,n,i=(0,ey.createStore)();i.set(_.configAtom,e);var o=null!=(r=e.root)?r:ew.ROOT_PATH,a=e.localCacheKey?(0,m.getLocalCache)(e.localCacheKey):null;a&&i.set(_.initialOffsetAtom,a.scrollOffset);var l=null!=(n=null==a?void 0:a.dirInfo)?n:new Map;return l.has(o)||l.set(o,{expanded:!0}),i.set(_.dirInfoAtom,l),e.focusedPath&&i.set(_.focusedPathAtom,e.focusedPath),{store:i,create:function(e,t){if(t)return void i.set(_.startCreateFileAtom,{parentPath:t,fileType:e});var r=o,n=i.get(_.selectedNodeAnchorAtom);(null==n?void 0:n.type)===c.FileType.File?r=(0,x.getParentPath)(n.path)||ew.ROOT_PATH:(null==n?void 0:n.type)===c.FileType.Directory&&(r=n.path),i.set(_.startCreateFileAtom,{parentPath:r,fileType:e})},setPresenceState:function(e){i.set(_.presenceStateAtom,e)},setFileStatus:function(e){i.set(_.fileStatusAtom,e)},rename:function(e){i.set(_.renameAtom,e)},move:function(e){i.set(eT.moveFilesAtom,e)},upload:function(e){i.set(eA.uploadFilesAtom,(0,g._)((0,y._)({},e),{onError:t}))},onLoad:function(t){var r=e.fs.watchDir(o,{onChange:function(){t({error:null}),r()},onError:function(e){t({error:e}),r()}});return r},select:function(e){return null===e?i.set(_.clearNodeSelectionAtom):i.set(_.loadAndSelectNodeAtom,e)},scrollToPath:function(e){return i.set(_.scrollToPathAtom,e)},hasLocalCache:!!a,getChildren:function(e){var t,r;return null!=(r=null==(t=i.get(_.dirInfoAtom).get(e))?void 0:t.children)?r:null},getSelectedNode:function(){return i.get(_.selectedNodeAnchorAtom)},getSelectedNodes:function(){return i.get(_.selectedNodesAtom)},deleteNodes:function(e){i.set(p.requestDeleteNodesAtom,e)},collapse:function(e){return i.set(_.collapseAtom,e)},getExpandedDirs:function(e){return(0,eS.getExpandedDirs)(i.get(_.dirInfoAtom),e)},expandParentDirsToPath:function(e){var t=(0,eg.splitFsPaths)(e).slice(0,-1),r=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;i.set(_.expandAtom,u)}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}}}}),1)[0],(0,s.useEffect)(function(){r.store.set(_.configAtom,e)},[r.store,e]),(0,s.useEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var i,o=r.store.get(_.dirInfoAtom)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=(0,w._)(i.value,2),l=a[0];a[1].expanded&&r.store.set(_.expandAtom,l)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return function(){var e=!0,t=!1,n=void 0;try{for(var i,o=r.store.get(_.dirInfoAtom)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a,l=(0,w._)(i.value,2),u=(l[0],l[1]);null==(a=u.disposeWatcher)||a.call(u)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},[r.store]),n=(0,ex.default)(e.onLoad),(0,s.useEffect)(function(){return r.onLoad(function(e){var t;return null==(t=n.current)?void 0:t.call(n,e)})},[r,n]),r}function eC(e){return(0,u.jsx)(O.StoreProvider,{store:e.store,children:(0,u.jsx)(eR,{})})}e.s(["Filetree",()=>eC,"useFiletree",()=>eP],160290)},144619,e=>{"use strict";var t=e.i(721281),r=e.i(167626),n=e.i(530658),i=e.i(276385),o=e.i(389959),a=e.i(205104),l=e.i(240913),u=e.i(903381),s=e.i(672963),c=e.i(529810),f=e.i(160290),d=e.i(518093),p=e.i(1736),h=e.i(967629),v=e.i(480028),m=e.i(446530),y=e.i(754873),g=e.i(123850),w=e.i(613355),x=e.i(630818),b=e.i(399144),S=e.i(929872),T=e.i(625484),A=e.i(782096);function D(e){var t=e.node;return t.type===u.FileType.Directory?(0,i.jsx)(d.FolderIconComponent,{path:t.path,size:12}):(0,i.jsx)(x.default,{size:12,path:t.path})}var _=(0,g.createCssVarTokens)(["menuY","menuX"]),R=_.cssVars,F=_.styleTokens,P=(0,m.cssRecord)({root:[w.rcss.maxHeight(400),w.rcss.position.absolute,w.rcss.borderRadius(8),w.rcss.shadow(3),{border:"1px solid",borderColor:v.tokens.outlineDefault,top:F.menuY,left:F.menuX,"& > div":[w.rcss.maxHeight(400)]}]}),C=(0,h.css)([y.interactive.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),k={button:(0,h.css)([w.rcss.reset.button,w.rcss.p(2),w.rcss.rowWithGap(4),w.rcss.align.center,C]),text:(0,h.css)({fontSize:v.tokens.fontSizeSmall})},O={opacity:1};function j(e){var u,c=e.node,f=e.openFile,d=e.expandable,p=void 0===d||d,h=(0,n._)((0,o.useState)(!1),2),v=h[0],m=h[1],y=(0,o.useRef)(null),g=(0,s.default)(function(e){var t;!v||(0,r._)(e.target,HTMLElement)&&(null==(t=y.current)?void 0:t.contains(e.target))||m(!1)},[v]),w=(0,o.useId)(),x=(0,o.useId)(),A=(0,a.getParentPath)(c.path)||l.ROOT_PATH,_=(0,a.getFileName)(c.path);function F(){var e,t=null==(e=y.current)?void 0:e.getBoundingClientRect();t&&p&&m({x:t.x+"px",y:t.y+t.height+4+"px"})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(T.View,{innerRef:y,tag:"button",id:w,style:v?O:void 0,"aria-haspopup":"true","aria-expanded":!!v,"aria-controls":x,css:k.button,onClick:function(){p&&(v?m(!1):F())},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":if(!p)return;F()}},children:[(0,i.jsx)(D,{node:c}),(0,i.jsx)(T.View,{css:k.text,children:_})]}),v&&p?(0,i.jsx)(b.Portal,{children:(0,i.jsx)(S.Surface,{id:x,css:P.root,innerRef:g,style:(u={},(0,t._)(u,R.menuX,v.x),(0,t._)(u,R.menuY,v.y),u),onKeyDown:function(e){if("Escape"===e.key){var t;m(!1),null==(t=y.current)||t.focus()}},children:(0,i.jsx)(I,{openFile:f,parentPath:A,currentPath:c.path,readOnly:e.readOnly})})}):null]})}function I(e){var t=(0,c.default)().fs,r=(0,p.useShouldHideFileInWorkspace)(!0),n=(0,o.useCallback)(function(e){return!r(e.filename)},[r]),a=(0,f.useFiletree)({fs:t,filter:n,focusedPath:e.currentPath,fontSize:13,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var r=t.path;e.openFile(r)},alwaysShowCreateRow:!0,readOnly:e.readOnly});return(0,i.jsx)(f.Filetree,{store:a.store})}var E=(0,h.css)([w.rcss.flex.row,w.rcss.align.center,w.rcss.height("100%"),w.rcss.px(2)]),V=(0,o.memo)(function(e){var t,r,n=e.path,a=e.onFileClick,l=e.expandable,s=void 0===l||l,c=e.readOnly,f=e.children,d=(r=(t=n.split("/")).length,t.map(function(e,n){return{type:n===r-1?u.FileType.File:u.FileType.Directory,path:t.slice(0,n+1).join("/")}}));return(0,i.jsxs)(T.View,{css:E,children:[d.map(function(e){return(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)(j,{node:e,openFile:a,expandable:s,readOnly:c}),e.type===u.FileType.Directory?(0,i.jsx)(A.default,{size:12}):null]},CSS.escape(e.path))}),f||null]})});e.s(["FileBreadcrumbs",()=>V])},603237,e=>{"use strict";var t,r=e.i(205104),n=((t={}).Media="Media",t.Binary="Binary",t.Code="Code",t.Markdown="Markdown",t.Draw="Draw",t);function i(e){return(0,r.isMarkdownFile)(e)?"Markdown":(0,r.isDrawFile)(e)?"Draw":(0,r.isMedia)(e)?"Media":(0,r.isBinary)(e)?"Binary":"Code"}e.s(["FileViewerType",()=>n,"getFileViewerType",()=>i])},722313,e=>{"use strict";var t=e.i(276385),r=e.i(607824);function n(e){var n=e.replPath;return(0,t.jsx)(r.default,{children:(0,t.jsx)("link",{rel:"alternate",type:"application/json+oembed",href:"https://replit.com/data/oembed?url=".concat(encodeURIComponent("https://replit.com".concat(n))),title:"Replit - select language"})})}e.s(["OEmbedHead",()=>n])}]);

//# debugId=b769a155-b42c-7a9a-008e-e18547735afd
//# sourceMappingURL=fc2b509ad6e4632e.js.map