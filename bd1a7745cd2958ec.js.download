;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="9a2eb9fe-fbb4-7c72-2bf7-ee24400fe3e0")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,191249,e=>{"use strict";var t,n,r,i=e.i(439725),s=e.i(394212),a=e.i(297083),o=e.i(399119),u=e.i(904851),l=e.i(90659),c=e.i(721281),h=e.i(445789),f=e.i(167626),v=e.i(878420),d=e.i(64386),_=e.i(530658),g=e.i(346715),y=e.i(119468),p=e.i(463348),m=e.i(817556),k=e.i(903673),b=new(function(){function e(){(0,u._)(this,e),this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(function(){throw e.stack?L.isErrorNoTelemetry(e)?new L(e.message+"\n\n"+e.stack):Error(e.message+"\n\n"+e.stack):e},0)}}return(0,l._)(e,[{key:"addListener",value:function(e){var t=this;return this.listeners.push(e),function(){t._removeListener(e)}}},{key:"emit",value:function(e){this.listeners.forEach(function(t){t(e)})}},{key:"_removeListener",value:function(e){this.listeners.splice(this.listeners.indexOf(e),1)}},{key:"setUnexpectedErrorHandler",value:function(e){this.unexpectedErrorHandler=e}},{key:"getUnexpectedErrorHandler",value:function(){return this.unexpectedErrorHandler}},{key:"onUnexpectedError",value:function(e){this.unexpectedErrorHandler(e),this.emit(e)}},{key:"onUnexpectedExternalError",value:function(e){this.unexpectedErrorHandler(e)}}]),e}());function w(e){var t;t=e,(0,f._)(t,C)||(0,f._)(t,Error)&&t.name===S&&t.message===S||b.onUnexpectedError(e)}var S="Canceled",C=function(e){function t(){var e;return(0,u._)(this,t),(e=(0,o._)(this,t,[S])).name=e.message,e}return(0,h._)(t,e),t}((0,p._)(Error)),L=function(e){function t(e){var n;return(0,u._)(this,t),(n=(0,o._)(this,t,[e])).name="CodeExpectedError",n}return(0,h._)(t,e),(0,l._)(t,null,[{key:"fromError",value:function(e){if((0,f._)(e,t))return e;var n=new t;return n.message=e.message,n.stack=e.stack,n}},{key:"isErrorNoTelemetry",value:function(e){return"CodeExpectedError"===e.name}}]),t}((0,p._)(Error));(function(){function e(t){(0,u._)(this,e),this._array=t,this._findLastMonotonousLastIdx=0}return(0,l._)(e,[{key:"findLastMonotonous",value:function(t){if(e.assertInvariants){if(this._prevFindLastPredicate){var n=!0,r=!1,i=void 0;try{for(var s,a=this._array[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;if(this._prevFindLastPredicate(o)&&!t(o))throw Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this._prevFindLastPredicate=t}var u=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=n,s=r;i<s;){var a=Math.floor((i+s)/2);t(e[a])?i=a+1:s=a}return i-1}(this._array,t,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=u+1,-1===u?void 0:this._array[u]}}]),e})().assertInvariants=!1,(H=Y||(Y={})).isLessThan=function(e){return e<0},H.isLessThanOrEqual=function(e){return e<=0},H.isGreaterThan=function(e){return e>0},H.isNeitherLessOrGreaterThan=function(e){return 0===e},H.greaterThan=1,H.lessThan=-1,H.neitherLessOrGreaterThan=0;var D=function(e,t){return e-t},x=function(){function e(t){(0,u._)(this,e),this.iterate=t}return(0,l._)(e,[{key:"forEach",value:function(e){this.iterate(function(t){return e(t),!0})}},{key:"toArray",value:function(){var e=[];return this.iterate(function(t){return e.push(t),!0}),e}},{key:"filter",value:function(t){var n=this;return new e(function(e){return n.iterate(function(n){return!t(n)||e(n)})})}},{key:"map",value:function(t){var n=this;return new e(function(e){return n.iterate(function(n){return e(t(n))})})}},{key:"some",value:function(e){var t=!1;return this.iterate(function(n){return!(t=e(n))}),t}},{key:"findFirst",value:function(e){var t;return this.iterate(function(n){return!e(n)||(t=n,!1)}),t}},{key:"findLast",value:function(e){var t;return this.iterate(function(n){return e(n)&&(t=n),!0}),t}},{key:"findLastMaxBy",value:function(e){var t,n=!0;return this.iterate(function(r){return(n||Y.isGreaterThan(e(r,t)))&&(n=!1,t=r),!0}),t}}]),e}();x.empty=new x(function(e){});var T=function(){function e(){(0,u._)(this,e),this.map=new Map}return(0,l._)(e,[{key:"add",value:function(e,t){var n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}},{key:"delete",value:function(e,t){var n=this.map.get(e);n&&(n.delete(t),0===n.size&&this.map.delete(e))}},{key:"forEach",value:function(e,t){var n=this.map.get(e);n&&n.forEach(t)}},{key:"get",value:function(e){return this.map.get(e)||new Set}}]),e}();function R(e){}function E(e,t){}function O(e){if(J.is(e)){var t=[],n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;if(o)try{o.dispose()}catch(e){t.push(e)}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}if(1===t.length)throw t[0];if(t.length>1)throw AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function M(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=A(function(){return O(t)});return r}function A(e){var t={dispose:function(e,t){var n,r=this,i=!1;return function(){if(i)return n;if(i=!0,t)try{n=e.apply(r,arguments)}finally{t()}else n=e.apply(r,arguments);return n}}(function(){R(t),e()})};return t}G=J||(J={}),V=function(e){return e&&(void 0===e?"undefined":(0,y._)(e))=="object"&&"function"==typeof e[Symbol.iterator]},K=function(e){return(0,m._)(this,function(t){switch(t.label){case 0:return[4,e];case 1:return t.sent(),[2]}})},G.is=V,$=Object.freeze([]),G.empty=function(){return $},G.single=K,G.wrap=function(e){return V(e)?e:K(e)},G.from=function(e){return e||$},G.reverse=function(e){var t;return(0,m._)(this,function(n){switch(n.label){case 0:t=e.length-1,n.label=1;case 1:if(!(t>=0))return[3,4];return[4,e[t]];case 2:n.sent(),n.label=3;case 3:return t--,[3,1];case 4:return[2]}})},G.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},G.first=function(e){return e[Symbol.iterator]().next().value},G.some=function(e,t){var n=0,r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var u=a.value;if(t(u,n++))return!0}}catch(e){i=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return!1},G.find=function(e,t){var n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value;if(t(o))return o}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},G.filter=function(e,t){var n,r,i,s,a,o,u;return(0,m._)(this,function(l){switch(l.label){case 0:n=!0,r=!1,i=void 0,l.label=1;case 1:l.trys.push([1,7,8,9]),s=e[Symbol.iterator](),l.label=2;case 2:if(n=(a=s.next()).done)return[3,6];if(!t(o=a.value))return[3,4];return[4,o];case 3:l.sent(),l.label=4;case 4:l.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return u=l.sent(),r=!0,i=u,[3,9];case 8:try{n||null==s.return||s.return()}finally{if(r)throw i}return[7];case 9:return[2]}})},G.map=function(e,t){var n,r,i,s,a,o,u;return(0,m._)(this,function(l){switch(l.label){case 0:n=0,r=!0,i=!1,s=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),a=e[Symbol.iterator](),l.label=2;case 2:if(r=(o=a.next()).done)return[3,5];return[4,t(o.value,n++)];case 3:l.sent(),l.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return u=l.sent(),i=!0,s=u,[3,8];case 7:try{r||null==a.return||a.return()}finally{if(i)throw s}return[7];case 8:return[2]}})},G.flatMap=function(e,t){var n,r,i,s,a,o,u,l;return(0,m._)(this,function(c){switch(c.label){case 0:n=0,r=!0,i=!1,s=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),a=e[Symbol.iterator](),c.label=2;case 2:if(r=(o=a.next()).done)return[3,5];return u=o.value,[5,(0,k._)(t(u,n++))];case 3:c.sent(),c.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return l=c.sent(),i=!0,s=l,[3,8];case 7:try{r||null==a.return||a.return()}finally{if(i)throw s}return[7];case 8:return[2]}})},G.concat=function(){var e,t,n,r,i,s,a,o,u,l,c=arguments;return(0,m._)(this,function(h){switch(h.label){case 0:for(t=Array(e=c.length),n=0;n<e;n++)t[n]=c[n];r=!0,i=!1,s=void 0,h.label=1;case 1:h.trys.push([1,6,7,8]),a=t[Symbol.iterator](),h.label=2;case 2:if(r=(o=a.next()).done)return[3,5];return u=o.value,[5,(0,k._)(u)];case 3:h.sent(),h.label=4;case 4:return r=!0,[3,2];case 5:return[3,8];case 6:return l=h.sent(),i=!0,s=l,[3,8];case 7:try{r||null==a.return||a.return()}finally{if(i)throw s}return[7];case 8:return[2]}})},G.reduce=function(e,t,n){var r=n,i=!0,s=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var l=o.value;r=t(r,l)}}catch(e){s=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw a}}return r},G.slice=function(e,t){var n,r=arguments;return(0,m._)(this,function(i){switch(i.label){case 0:n=r.length>2&&void 0!==r[2]?r[2]:e.length,t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length),i.label=1;case 1:if(!(t<n))return[3,4];return[4,e[t]];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}})},G.consume=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=[];if(0===t)return[n,e];for(var r=e[Symbol.iterator](),i=0;i<t;i++){var s=r.next();if(s.done)return[n,G.empty()];n.push(s.value)}return[n,(0,c._)({},Symbol.iterator,function(){return r})]},G.asyncToArray=function(e){return(0,a._)(function(){var t,n,r,i,a,o,u,l;return(0,m._)(this,function(c){switch(c.label){case 0:t=[],n=!1,r=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),a=(0,s._)(e),c.label=2;case 2:return[4,a.next()];case 3:if(!(n=!(o=c.sent()).done))return[3,5];u=o.value,t.push(u),c.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return l=c.sent(),r=!0,i=l,[3,12];case 7:if(c.trys.push([7,,10,11]),!(n&&null!=a.return))return[3,9];return[4,a.return()];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2,Promise.resolve(t)]}})})()},function(){function e(){(0,u._)(this,e),this.livingDisposables=new Map}return(0,l._)(e,[{key:"getDisposableData",value:function(t){var n=this.livingDisposables.get(t);return n||(n={parent:null,source:null,isSingleton:!1,value:t,idx:e.idx++},this.livingDisposables.set(t,n)),n}},{key:"trackDisposable",value:function(e){var t=this.getDisposableData(e);t.source||(t.source=Error().stack)}},{key:"setParent",value:function(e,t){this.getDisposableData(e).parent=t}},{key:"markAsDisposed",value:function(e){this.livingDisposables.delete(e)}},{key:"markAsSingleton",value:function(e){this.getDisposableData(e).isSingleton=!0}},{key:"getRootParent",value:function(e,t){var n=t.get(e);if(n)return n;var r=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,r),r}},{key:"getTrackedDisposables",value:function(){var e=this,t=new Map;return(0,g._)(this.livingDisposables.entries()).filter(function(n){var r=(0,_._)(n,2)[1];return null!==r.source&&!e.getRootParent(r,t).isSingleton}).flatMap(function(e){return(0,_._)(e,1)[0]})}},{key:"computeLeakingDisposables",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1?arguments[1]:void 0;if(n)c=n;else{var r=new Map,i=(0,g._)(this.livingDisposables.values()).filter(function(t){return null!==t.source&&!e.getRootParent(t,r).isSingleton});if(0===i.length)return;var s=new Set(i.map(function(e){return e.value}));if(0===(c=i.filter(function(e){return!(e.parent&&s.has(e.parent))})).length)throw Error("There are cyclic diposable chains!")}if(c){var a=new T,o=!0,u=!1,l=void 0;try{for(var c,h,f=c[Symbol.iterator]();!(o=(h=f.next()).done);o=!0)for(var v=h.value,d=A(v),y=0;y<=d.length;y++)a.add(d.slice(0,y).join("\n"),v)}catch(e){u=!0,l=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw l}}c.sort((S=function(e){return e.idx},function(e,t){return D(S(e),S(t))}));var p="",m=0,k=!0,b=!1,w=void 0;try{for(var S,C,L=c.slice(0,t)[Symbol.iterator]();!(k=(C=L.next()).done);k=!0){var x=function(e){var t=E[e];t="(shared with ".concat(a.get(E.slice(0,e+1).join("\n")).size,"/").concat(c.length," leaks) at ").concat(t);var n=a.get(E.slice(0,e).join("\n")),r=function(e,t){var n=Object.create(null),r=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var u=a.value,l=t(u),c=n[l];c||(c=n[l]=[]),c.push(u)}}catch(e){i=!0,s=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw s}}return n}((0,g._)(n).map(function(t){return A(t)[e]}),function(e){return e});delete r[E[e]];var i=!0,s=!1,o=void 0;try{for(var u,l=Object.entries(r)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var h=(0,_._)(u.value,2),f=h[0],v=h[1];O.unshift("    - stacktraces of ".concat(v.length," other leaks continue with ").concat(f))}}catch(e){s=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}O.unshift(t)},R=C.value;m++;for(var E=A(R),O=[],M=0;M<E.length;M++)x(M);p+="\n\n\n==================== Leaking disposable ".concat(m,"/").concat(c.length,": ").concat(R.value.constructor.name," ====================\n").concat(O.join("\n"),"\n============================================================\n\n")}}catch(e){b=!0,w=e}finally{try{k||null==L.return||L.return()}finally{if(b)throw w}}return c.length>t&&(p+="\n\n\n... and ".concat(c.length-t," more leaking disposables\n\n")),{leaks:c,details:p}}function A(e){var t=e.source.split("\n").map(function(e){return e.trim().replace("at ","")}).filter(function(e){return""!==e});return function(e,t){for(;e.length>0&&t.some(function(t){return"string"==typeof t?t===e[0]:e[0].match(t)});)e.shift()}(t,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),t.reverse()}}}]),e}().idx=0;var P=function(){function e(){(0,u._)(this,e),this._toDispose=new Set,this._isDisposed=!1}return(0,l._)(e,[{key:"dispose",value:function(){this._isDisposed||(R(this),this._isDisposed=!0,this.clear())}},{key:"isDisposed",get:function(){return this._isDisposed}},{key:"clear",value:function(){if(0!==this._toDispose.size)try{O(this._toDispose)}finally{this._toDispose.clear()}}},{key:"add",value:function(t){if(!t)return t;if(t===this)throw Error("Cannot register a disposable on itself!");return E(t,this),this._isDisposed?e.DISABLE_DISPOSED_WARNING||console.warn(Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(t),t}},{key:"delete",value:function(e){if(e){if(e===this)throw Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}},{key:"deleteAndLeak",value:function(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),E(e,null))}}]),e}();P.DISABLE_DISPOSED_WARNING=!1;var W=function(){function e(){(0,u._)(this,e),this._store=new P,E(this._store,this)}return(0,l._)(e,[{key:"dispose",value:function(){R(this),this._store.dispose()}},{key:"_register",value:function(e){if(e===this)throw Error("Cannot register a disposable on itself!");return this._store.add(e)}}]),e}();W.None=Object.freeze({dispose:function(){}});var I=function(){function e(){(0,u._)(this,e),this._isDisposed=!1}return(0,l._)(e,[{key:"value",get:function(){return this._isDisposed?void 0:this._value},set:function(e){var t;this._isDisposed||e===this._value||(null==(t=this._value)||t.dispose(),e&&E(e,this),this._value=e)}},{key:"clear",value:function(){this.value=void 0}},{key:"dispose",value:function(){var e;this._isDisposed=!0,R(this),null==(e=this._value)||e.dispose(),this._value=void 0}},{key:"clearAndLeak",value:function(){var e=this._value;return this._value=void 0,e&&E(e,null),e}}]),e}(),N=function e(t){(0,u._)(this,e),this.element=t,this.next=e.Undefined,this.prev=e.Undefined};N.Undefined=new N(void 0);var z=globalThis.performance&&"function"==typeof globalThis.performance.now,j=function(){function e(t){(0,u._)(this,e),this._now=z&&!1===t?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}return(0,l._)(e,[{key:"stop",value:function(){this._stopTime=this._now()}},{key:"reset",value:function(){this._startTime=this._now(),this._stopTime=-1}},{key:"elapsed",value:function(){return -1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}],[{key:"create",value:function(t){return new e(t)}}]),e}();Z=X||(X={}),ee=function(e){},et=function(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0,s=!1;return n=e(function(e){if(!s)return n?n.dispose():s=!0,t.call(r,e)},null,i),s&&n.dispose(),n}},en=function(e,t,n){return ei(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;return e(function(e){return n.call(r,t(e))},null,i)},n)},er=function(e,t,n){return ei(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;return e(function(e){return t(e)&&n.call(r,e)},null,i)},n)},ei=function(e,t){var n,r={onWillAddFirstListener:function(){n=e(i.fire,i)},onDidRemoveLastListener:function(){null==n||n.dispose()}};t||ee(r);var i=new eg(r);return null==t||t.add(i),i.event},es=function(e,t){var n,r,i,s,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,h=0,f={leakWarningThreshold:l,onWillAddFirstListener:function(){n=e(function(e){h++,r=t(r,e),o&&!i&&(v.fire(r),r=void 0),s=function(){var e=r;r=void 0,i=void 0,(!o||h>1)&&v.fire(e),h=0},"number"==typeof a?(clearTimeout(i),i=setTimeout(s,a)):void 0===i&&(i=0,queueMicrotask(s))})},onWillRemoveListener:function(){u&&h>0&&(null==s||s())},onDidRemoveLastListener:function(){s=void 0,n.dispose()}};c||ee(f);var v=new eg(f);return null==c||c.add(v),v.event},Z.None=function(){return W.None},Z.defer=function(e,t){return es(e,function(){},0,void 0,!0,void 0,t)},Z.once=et,Z.map=en,Z.forEach=function(e,t,n){return ei(function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;return e(function(e){t(e),n.call(r,e)},null,i)},n)},Z.filter=er,Z.signal=function(e){return e},Z.any=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;return function(e,t){return(0,f._)(t,Array)?t.push(e):t&&t.add(e),e}(M.apply(void 0,(0,g._)(t.map(function(t){return t(function(t){return e.call(n,t)})}))),r)}},Z.reduce=function(e,t,n,r){var i=n;return en(e,function(e){return i=t(i,e)},r)},Z.debounce=es,Z.accumulate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return Z.debounce(e,function(e,t){return e?(e.push(t),e):[t]},t,void 0,!0,void 0,n)},Z.latch=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t},r=arguments.length>2?arguments[2]:void 0,i=!0;return er(e,function(e){var r=i||!n(e,t);return i=!1,t=e,r},r)},Z.split=function(e,t,n){return[Z.filter(e,t,n),Z.filter(e,function(e){return!t(e)},n)]},Z.buffer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=n.slice(),s=e(function(e){i?i.push(e):o.fire(e)});r&&r.add(s);var a=function(){null==i||i.forEach(function(e){return o.fire(e)}),i=null},o=new eg({onWillAddFirstListener:function(){s||(s=e(function(e){return o.fire(e)}),r&&r.add(s))},onDidAddFirstListener:function(){i&&(t?setTimeout(a):a())},onDidRemoveLastListener:function(){s&&s.dispose(),s=null}});return r&&r.add(o),o.event},Z.chain=function(e,t){return function(n,r,i){var s=t(new eo);return e(function(e){var t=s.evaluate(e);t!==ea&&n.call(r,t)},void 0,i)}},ea=Symbol("HaltChainable"),eo=function(){function e(){(0,u._)(this,e),this.steps=[]}return(0,l._)(e,[{key:"map",value:function(e){return this.steps.push(e),this}},{key:"forEach",value:function(e){return this.steps.push(function(t){return e(t),t}),this}},{key:"filter",value:function(e){return this.steps.push(function(t){return e(t)?t:ea}),this}},{key:"reduce",value:function(e,t){var n=t;return this.steps.push(function(t){return n=e(n,t)}),this}},{key:"latch",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e===t},n=!0;return this.steps.push(function(r){var i=n||!t(r,e);return n=!1,e=r,i?r:ea}),this}},{key:"evaluate",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,s=this.steps[Symbol.iterator]();!(t=(i=s.next()).done)&&(e=(0,i.value)(e))!==ea;t=!0);}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e}}]),e}(),Z.fromNodeEventEmitter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.fire(n.apply(void 0,(0,g._)(t)))},i=new eg({onWillAddFirstListener:function(){return e.on(t,r)},onDidRemoveLastListener:function(){return e.removeListener(t,r)}});return i.event},Z.fromDOMEventEmitter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return i.fire(n.apply(void 0,(0,g._)(t)))},i=new eg({onWillAddFirstListener:function(){return e.addEventListener(t,r)},onDidRemoveLastListener:function(){return e.removeEventListener(t,r)}});return i.event},Z.toPromise=function(e){return new Promise(function(t){return et(e)(t)})},Z.fromPromise=function(e){var t=new eg;return e.then(function(e){t.fire(e)},function(){t.fire(void 0)}).finally(function(){t.dispose()}),t.event},Z.forward=function(e,t){return e(function(e){return t.fire(e)})},Z.runAndSubscribe=function(e,t,n){return t(n),e(function(e){return t(e)})},eu=function(){function e(t,n){var r=this;(0,u._)(this,e),this._observable=t,this._counter=0,this._hasChanged=!1;var i={onWillAddFirstListener:function(){t.addObserver(r)},onDidRemoveLastListener:function(){t.removeObserver(r)}};n||ee(i),this.emitter=new eg(i),n&&n.add(this.emitter)}return(0,l._)(e,[{key:"beginUpdate",value:function(e){this._counter++}},{key:"handlePossibleChange",value:function(e){}},{key:"handleChange",value:function(e,t){this._hasChanged=!0}},{key:"endUpdate",value:function(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}]),e}(),Z.fromObservable=function(e,t){return new eu(e,t).emitter.event},Z.fromObservableLight=function(e){return function(t,n,r){var i=0,s=!1,a={beginUpdate:function(){i++},endUpdate:function(){0==--i&&(e.reportChanges(),s&&(s=!1,t.call(n)))},handlePossibleChange:function(){},handleChange:function(){s=!0}};e.addObserver(a),e.reportChanges();var o={dispose:function(){e.removeObserver(a)}};return(0,f._)(r,P)?r.add(o):Array.isArray(r)&&r.push(o),o}};var F=function(){function e(t){(0,u._)(this,e),this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name="".concat(t,"_").concat(e._idPool++),e.all.add(this)}return(0,l._)(e,[{key:"start",value:function(e){this._stopWatch=new j,this.listenerCount=e}},{key:"stop",value:function(){if(this._stopWatch){var e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}]),e}();F.all=new Set,F._idPool=0;var U=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e._idPool++).toString(16).padStart(3,"0");(0,u._)(this,e),this._errorHandler=t,this.threshold=n,this.name=r,this._warnCountdown=0}return(0,l._)(e,[{key:"dispose",value:function(){var e;null==(e=this._stacks)||e.clear()}},{key:"check",value:function(e,t){var n=this,r=this.threshold;if(!(r<=0)&&!(t<r)){this._stacks||(this._stacks=new Map);var i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=.5*r;var s=(0,_._)(this.getMostFrequentStack(),2),a=s[0],o=s[1],u="[".concat(this.name,"] potential listener LEAK detected, having ").concat(t," listeners already. MOST frequent listener (").concat(o,"):");console.warn(u),console.warn(a);var l=new ef(u,a);this._errorHandler(l)}return function(){var t=n._stacks.get(e.value)||0;n._stacks.set(e.value,t-1)}}}},{key:"getMostFrequentStack",value:function(){if(this._stacks){var e,t=0,n=!0,r=!1,i=void 0;try{for(var s,a=this._stacks[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=(0,_._)(s.value,2),u=o[0],l=o[1];(!e||t<l)&&(e=[u,l],t=l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}}]),e}();U._idPool=1;var H,q,B,Q,Y,G,V,K,$,J,X,Z,ee,et,en,er,ei,es,ea,eo,eu,el,ec,eh=function(){function e(t){(0,u._)(this,e),this.value=t}return(0,l._)(e,[{key:"print",value:function(){console.warn(this.value.split("\n").slice(2).join("\n"))}}],[{key:"create",value:function(){var t;return new e(null!=(t=Error().stack)?t:"")}}]),e}(),ef=function(e){function t(e,n){var r;return(0,u._)(this,t),(r=(0,o._)(this,t,[e])).name="ListenerLeakError",r.stack=n,r}return(0,h._)(t,e),t}((0,p._)(Error)),ev=function(e){function t(e,n){var r;return(0,u._)(this,t),(r=(0,o._)(this,t,[e])).name="ListenerRefusalError",r.stack=n,r}return(0,h._)(t,e),t}((0,p._)(Error)),ed=0,e_=function e(t){(0,u._)(this,e),this.value=t,this.id=ed++},eg=function(){function e(t){var n,r,i,s,a,o;(0,u._)(this,e),this._size=0,this._options=t,this._leakageMon=(null==(n=this._options)?void 0:n.leakWarningThreshold)?new U(null!=(a=null==t?void 0:t.onListenerError)?a:w,null!=(o=null==(r=this._options)?void 0:r.leakWarningThreshold)?o:-1):void 0,this._perfMon=(null==(i=this._options)?void 0:i._profName)?new F(this._options._profName):void 0,this._deliveryQueue=null==(s=this._options)?void 0:s.deliveryQueue}return(0,l._)(e,[{key:"dispose",value:function(){if(!this._disposed){var e,t,n,r;this._disposed=!0,(null==(e=this._deliveryQueue)?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null==(n=this._options)||null==(t=n.onDidRemoveLastListener)||t.call(n),null==(r=this._leakageMon)||r.dispose()}}},{key:"event",get:function(){var e=this;return null!=this._event||(this._event=function(t,n,r){if(e._leakageMon&&e._size>Math.pow(e._leakageMon.threshold,2)){var i,s,a,o,u,l,c="[".concat(e._leakageMon.name,"] REFUSES to accept new listeners because it exceeded its threshold by far (").concat(e._size," vs ").concat(e._leakageMon.threshold,")");console.warn(c);var h=null!=(l=e._leakageMon.getMostFrequentStack())?l:["UNKNOWN stack",-1],v=new ev("".concat(c,". HINT: Stack shows most frequent listener (").concat(h[1],"-times)"),h[0]);return((null==(u=e._options)?void 0:u.onListenerError)||w)(v),W.None}if(e._disposed)return W.None;n&&(t=t.bind(n));var d,_=new e_(t);e._leakageMon&&e._size>=Math.ceil(.2*e._leakageMon.threshold)&&(_.stack=eh.create(),d=e._leakageMon.check(_.stack,e._size+1)),e._listeners?(0,f._)(e._listeners,e_)?(null!=e._deliveryQueue||(e._deliveryQueue=new ey),e._listeners=[e._listeners,_]):e._listeners.push(_):(null==(s=e._options)||null==(i=s.onWillAddFirstListener)||i.call(s,e),e._listeners=_,null==(o=e._options)||null==(a=o.onDidAddFirstListener)||a.call(o,e)),e._size++;var g=A(function(){null==el||el.unregister(g),null==d||d(),e._removeListener(_)});if((0,f._)(r,P)?r.add(g):Array.isArray(r)&&r.push(g),el){var y,p=Error().stack.split("\n").slice(2,3).join("\n").trim(),m=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(p);el.register(g,null!=(y=null==m?void 0:m[2])?y:p,g)}return g}),this._event}},{key:"_removeListener",value:function(e){if(null==(n=this._options)||null==(t=n.onWillRemoveListener)||t.call(n,this),this._listeners){if(1===this._size){this._listeners=void 0,null==(i=this._options)||null==(r=i.onDidRemoveLastListener)||r.call(i,this),this._size=0;return}var t,n,r,i,s=this._listeners,a=s.indexOf(e);if(-1===a)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),Error("Attempted to dispose unknown listener");this._size--,s[a]=void 0;var o=this._deliveryQueue.current===this;if(2*this._size<=s.length){for(var u=0,l=0;l<s.length;l++)s[l]?s[u++]=s[l]:o&&(this._deliveryQueue.end--,u<this._deliveryQueue.i&&this._deliveryQueue.i--);s.length=u}}}},{key:"_deliver",value:function(e,t){if(e){var n,r=(null==(n=this._options)?void 0:n.onListenerError)||w;try{e.value(t)}catch(e){r(e)}}}},{key:"_deliverQueue",value:function(e){for(var t=e.current._listeners;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}},{key:"fire",value:function(e){var t,n,r,i;if((null==(t=this._deliveryQueue)?void 0:t.current)&&(this._deliverQueue(this._deliveryQueue),null==(n=this._perfMon)||n.stop()),null==(r=this._perfMon)||r.start(this._size),this._listeners)if((0,f._)(this._listeners,e_))this._deliver(this._listeners,e);else{var s=this._deliveryQueue;s.enqueue(this,e,this._listeners.length),this._deliverQueue(s)}null==(i=this._perfMon)||i.stop()}},{key:"hasListeners",value:function(){return this._size>0}}]),e}(),ey=function(){function e(){(0,u._)(this,e),this.i=-1,this.end=0}return(0,l._)(e,[{key:"enqueue",value:function(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}},{key:"reset",value:function(){this.i=this.end,this.current=void 0,this.value=void 0}}]),e}(),ep=Object.freeze(function(e,t){var n=setTimeout(e.bind(t),0);return{dispose:function(){clearTimeout(n)}}});(em=ec||(ec={})).isCancellationToken=function(e){return!!(e===em.None||e===em.Cancelled||(0,f._)(e,ew))||!!e&&(void 0===e?"undefined":(0,y._)(e))=="object"&&"boolean"==typeof e.isCancellationRequested&&"function"==typeof e.onCancellationRequested},em.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:X.None}),em.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ep});var em,ek,eb,ew=function(){function e(){(0,u._)(this,e),this._isCancelled=!1,this._emitter=null}return(0,l._)(e,[{key:"cancel",value:function(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}},{key:"isCancellationRequested",get:function(){return this._isCancelled}},{key:"onCancellationRequested",get:function(){return this._isCancelled?ep:(this._emitter||(this._emitter=new eg),this._emitter.event)}},{key:"dispose",value:function(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}]),e}(),eS=!1,eC="en",eL=globalThis;"u">(0,y._)(eL.vscode)&&"u">(0,y._)(eL.vscode.process)?eb=eL.vscode.process:(void 0===i.default?"undefined":(0,y._)(i.default))<"u"&&"string"==typeof(null==(B=i.default)||null==(q=B.versions)?void 0:q.node)&&(eb=i.default);var eD="string"==typeof(null==eb||null==(Q=eb.versions)?void 0:Q.electron)&&(null==eb?void 0:eb.type)==="renderer";if((void 0===eb?"undefined":(0,y._)(eb))=="object"){eb.platform,eb.platform,"linux"===eb.platform&&eb.env.SNAP&&eb.env.SNAP_REVISION,eb.env.CI||eb.env.BUILD_ARTIFACTSTAGINGDIRECTORY,eC="en";var ex=eb.env.VSCODE_NLS_CONFIG;if(ex)try{var eT,eR=JSON.parse(ex);eR.userLocale,eR.osLocale,eC=eR.resolvedLanguage||"en",null==(eT=eR.languagePack)||eT.translationsConfigFile}catch(e){}}else("undefined"==typeof navigator?"undefined":(0,y._)(navigator))!="object"||eD?console.error("Unable to resolve platform."):((ek=navigator.userAgent).indexOf("Windows"),ek.indexOf("Macintosh"),(ek.indexOf("Macintosh")>=0||ek.indexOf("iPad")>=0||ek.indexOf("iPhone")>=0)&&navigator.maxTouchPoints&&navigator.maxTouchPoints,ek.indexOf("Linux"),null==ek||ek.indexOf("Mobi"),eS=!0,eC=globalThis._VSCODE_NLS_LANGUAGE||"en",navigator.language.toLowerCase());eS&&"function"==typeof eL.importScripts&&eL.origin;var eE,eO=ek,eM=eC;(t=eE||(eE={})).value=function(){return eM},t.isDefaultVariant=function(){return 2===eM.length?"en"===eM:eM.length>=3&&"e"===eM[0]&&"n"===eM[1]&&"-"===eM[2]},t.isDefault=function(){return"en"===eM};var eA="function"==typeof eL.postMessage&&!eL.importScripts,eP=function(){if(eA){var e=[];eL.addEventListener("message",function(t){if(t.data&&t.data.vscodeScheduleAsyncWork)for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork){e.splice(n,1),i.callback();return}}});var t=0;return function(n){var r=++t;e.push({id:r,callback:n}),eL.postMessage({vscodeScheduleAsyncWork:r},"*")}}return function(e){return setTimeout(e)}}(),eW=!!(eO&&eO.indexOf("Chrome")>=0);function eI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=setTimeout(function(){e(),n&&i.dispose()},t),i=A(function(){clearTimeout(r),null==n||n.deleteAndLeak(i)});return null==n||n.add(i),i}eO&&eO.indexOf("Firefox"),!eW&&eO&&eO.indexOf("Safari"),eO&&eO.indexOf("Edg/"),eO&&eO.indexOf("Android"),Symbol("MicrotaskDelay"),(n=r||(r={})).settled=function(e){return(0,a._)(function(){var t,n;return(0,m._)(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(e){return e.then(function(e){return e},function(e){t||(t=e)})}))];case 1:if(n=r.sent(),(void 0===t?"undefined":(0,y._)(t))<"u")throw t;return[2,n]}})})()},n.withAsyncBody=function(e){return new Promise(function(t,n){return(0,a._)(function(){return(0,m._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e(t,n)];case 1:return r.sent(),[3,3];case 2:return n(r.sent()),[3,3];case 3:return[2]}})})()})};var eN=function(){function e(t,n){var r=this;(0,u._)(this,e),this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new eg,queueMicrotask(function(){return(0,a._)(function(){var e,n,r;return(0,m._)(this,function(i){switch(i.label){case 0:e=this,n={emitOne:function(t){return e.emitOne(t)},emitMany:function(t){return e.emitMany(t)},reject:function(t){return e.reject(t)}},i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,Promise.resolve(t(n))];case 2:return i.sent(),this.resolve(),[3,5];case 3:return r=i.sent(),this.reject(r),[3,5];case 4:return n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0,[7];case 5:return[2]}})}).call(r)})}return(0,l._)(e,[{key:Symbol.asyncIterator,value:function(){var e=this,t=0;return{next:function(){return(0,a._)(function(){return(0,m._)(this,function(e){switch(e.label){case 0:if(2===this._state)throw this._error;if(t<this._results.length)return[2,{done:!1,value:this._results[t++]}];if(1===this._state)return[2,{done:!0,value:void 0}];return[4,X.toPromise(this._onStateChanged.event)];case 1:e.sent(),e.label=2;case 2:return[3,0];case 3:return[2]}})}).call(e)},return:function(){return(0,a._)(function(){var e,t;return(0,m._)(this,function(n){return[2,(null==(e=(t=this)._onReturn)||e.call(t),{done:!0,value:void 0})]})}).call(e)}}}},{key:"map",value:function(t){return e.map(this,t)}},{key:"filter",value:function(t){return e.filter(this,t)}},{key:"coalesce",value:function(){return e.coalesce(this)}},{key:"toPromise",value:function(){return e.toPromise(this)}},{key:"emitOne",value:function(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}},{key:"emitMany",value:function(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}},{key:"resolve",value:function(){0===this._state&&(this._state=1,this._onStateChanged.fire())}},{key:"reject",value:function(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}],[{key:"fromArray",value:function(t){return new e(function(e){e.emitMany(t)})}},{key:"fromPromise",value:function(t){return new e(function(e){return(0,a._)(function(){var n;return(0,m._)(this,function(r){switch(r.label){case 0:return n=e.emitMany,[4,t];case 1:return n.apply(e,[r.sent()]),[2]}})})()})}},{key:"fromPromises",value:function(t){return new e(function(e){return(0,a._)(function(){return(0,m._)(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(t){return(0,a._)(function(){var n;return(0,m._)(this,function(r){switch(r.label){case 0:return n=e.emitOne,[4,t];case 1:return[2,n.apply(e,[r.sent()])]}})})()}))];case 1:return n.sent(),[2]}})})()})}},{key:"merge",value:function(t){return new e(function(e){return(0,a._)(function(){return(0,m._)(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(t){return(0,a._)(function(){var n,r,i,a,o,u,l;return(0,m._)(this,function(c){switch(c.label){case 0:n=!1,r=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),a=(0,s._)(t),c.label=2;case 2:return[4,a.next()];case 3:if(!(n=!(o=c.sent()).done))return[3,5];u=o.value,e.emitOne(u),c.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return l=c.sent(),r=!0,i=l,[3,12];case 7:if(c.trys.push([7,,10,11]),!(n&&null!=a.return))return[3,9];return[4,a.return()];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2]}})})()}))];case 1:return n.sent(),[2]}})})()})}},{key:"map",value:function(t,n){return new e(function(e){return(0,a._)(function(){var r,i,a,o,u,l,c;return(0,m._)(this,function(h){switch(h.label){case 0:r=!1,i=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),o=(0,s._)(t),h.label=2;case 2:return[4,o.next()];case 3:if(!(r=!(u=h.sent()).done))return[3,5];l=u.value,e.emitOne(n(l)),h.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return c=h.sent(),i=!0,a=c,[3,12];case 7:if(h.trys.push([7,,10,11]),!(r&&null!=o.return))return[3,9];return[4,o.return()];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(i)throw a;return[7];case 11:return[7];case 12:return[2]}})})()})}},{key:"filter",value:function(t,n){return new e(function(e){return(0,a._)(function(){var r,i,a,o,u,l,c;return(0,m._)(this,function(h){switch(h.label){case 0:r=!1,i=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),o=(0,s._)(t),h.label=2;case 2:return[4,o.next()];case 3:if(!(r=!(u=h.sent()).done))return[3,5];n(l=u.value)&&e.emitOne(l),h.label=4;case 4:return r=!1,[3,2];case 5:return[3,12];case 6:return c=h.sent(),i=!0,a=c,[3,12];case 7:if(h.trys.push([7,,10,11]),!(r&&null!=o.return))return[3,9];return[4,o.return()];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(i)throw a;return[7];case 11:return[7];case 12:return[2]}})})()})}},{key:"coalesce",value:function(t){return e.filter(t,function(e){return!!e})}},{key:"toPromise",value:function(e){return(0,a._)(function(){var t,n,r,i,a,o,u,l;return(0,m._)(this,function(c){switch(c.label){case 0:t=[],n=!1,r=!1,c.label=1;case 1:c.trys.push([1,6,7,12]),a=(0,s._)(e),c.label=2;case 2:return[4,a.next()];case 3:if(!(n=!(o=c.sent()).done))return[3,5];u=o.value,t.push(u),c.label=4;case 4:return n=!1,[3,2];case 5:return[3,12];case 6:return l=c.sent(),r=!0,i=l,[3,12];case 7:if(c.trys.push([7,,10,11]),!(n&&null!=a.return))return[3,9];return[4,a.return()];case 8:c.sent(),c.label=9;case 9:return[3,11];case 10:if(r)throw i;return[7];case 11:return[7];case 12:return[2,t]}})})()}}]),e}();eN.EMPTY=eN.fromArray([]);var ez=function(e){function t(e){var n;return(0,u._)(this,t),(n=(0,o._)(this,t))._terminal=e,n._linesCacheTimeout=n._register(new I),n._linesCacheDisposables=n._register(new I),n._register(A(function(){return n._destroyLinesCache()})),n}return(0,h._)(t,e),(0,l._)(t,[{key:"initLinesCache",value:function(){var e=this;this._linesCache||(this._linesCache=Array(this._terminal.buffer.active.length),this._linesCacheDisposables.value=M(this._terminal.onLineFeed(function(){return e._destroyLinesCache()}),this._terminal.onCursorMove(function(){return e._destroyLinesCache()}),this._terminal.onResize(function(){return e._destroyLinesCache()}))),this._linesCacheTimeout.value=eI(function(){return e._destroyLinesCache()},15e3)}},{key:"_destroyLinesCache",value:function(){this._linesCache=void 0,this._linesCacheDisposables.clear(),this._linesCacheTimeout.clear()}},{key:"getLineFromCache",value:function(e){var t;return null==(t=this._linesCache)?void 0:t[e]}},{key:"setLineInCache",value:function(e,t){this._linesCache&&(this._linesCache[e]=t)}},{key:"translateBufferLineToStringWithWrap",value:function(e,t){for(var n=[],r=[0],i=this._terminal.buffer.active.getLine(e);i;){var s=this._terminal.buffer.active.getLine(e+1),a=!!s&&s.isWrapped,o=i.translateToString(!a&&t);if(a&&s){var u,l=i.getCell(i.length-1);l&&0===l.getCode()&&1===l.getWidth()&&(null==(u=s.getCell(0))?void 0:u.getWidth())===2&&(o=o.slice(0,-1))}if(n.push(o),a)r.push(r[r.length-1]+o.length);else break;e++,i=s}return[n.join(""),r]}}]),t}(W),ej=function(){function e(){(0,u._)(this,e)}return(0,l._)(e,[{key:"cachedSearchTerm",get:function(){return this._cachedSearchTerm},set:function(e){this._cachedSearchTerm=e}},{key:"lastSearchOptions",get:function(){return this._lastSearchOptions},set:function(e){this._lastSearchOptions=e}},{key:"isValidSearchTerm",value:function(e){return!!(e&&e.length>0)}},{key:"didOptionsChange",value:function(e){return!this._lastSearchOptions||!!e&&(this._lastSearchOptions.caseSensitive!==e.caseSensitive||this._lastSearchOptions.regex!==e.regex||this._lastSearchOptions.wholeWord!==e.wholeWord)}},{key:"shouldUpdateHighlighting",value:function(e,t){return null!=t&&!!t.decorations&&(void 0===this._cachedSearchTerm||e!==this._cachedSearchTerm||this.didOptionsChange(t))}},{key:"clearCachedTerm",value:function(){this._cachedSearchTerm=void 0}},{key:"reset",value:function(){this._cachedSearchTerm=void 0,this._lastSearchOptions=void 0}}]),e}(),eF=function(){function e(t,n){(0,u._)(this,e),this._terminal=t,this._lineCache=n}return(0,l._)(e,[{key:"find",value:function(e,t,n,r){if(!e||0===e.length)return void this._terminal.clearSelection();if(n>this._terminal.cols)throw Error("Invalid col: ".concat(n," to search in terminal of ").concat(this._terminal.cols," cols"));this._lineCache.initLinesCache();var i={startRow:t,startCol:n},s=this._findInLine(e,i,r);if(!s)for(var a=t+1;a<this._terminal.buffer.active.baseY+this._terminal.rows&&(i.startRow=a,i.startCol=0,!(s=this._findInLine(e,i,r)));a++);return s}},{key:"findNextWithSelection",value:function(e,t,n){if(!e||0===e.length)return void this._terminal.clearSelection();var r=this._terminal.getSelectionPosition();this._terminal.clearSelection();var i=0,s=0;r&&(n===e?(i=r.end.x,s=r.end.y):(i=r.start.x,s=r.start.y)),this._lineCache.initLinesCache();var a={startRow:s,startCol:i},o=this._findInLine(e,a,t);if(!o)for(var u=s+1;u<this._terminal.buffer.active.baseY+this._terminal.rows&&(a.startRow=u,a.startCol=0,!(o=this._findInLine(e,a,t)));u++);if(!o&&0!==s)for(var l=0;l<s&&(a.startRow=l,a.startCol=0,!(o=this._findInLine(e,a,t)));l++);return!o&&r&&(a.startRow=r.start.y,a.startCol=0,o=this._findInLine(e,a,t)),o}},{key:"findPreviousWithSelection",value:function(e,t,n){if(!e||0===e.length)return void this._terminal.clearSelection();var r=this._terminal.getSelectionPosition();this._terminal.clearSelection();var i=this._terminal.buffer.active.baseY+this._terminal.rows-1,s=this._terminal.cols;this._lineCache.initLinesCache();var a,o={startRow:i,startCol:s};if(r&&(o.startRow=i=r.start.y,o.startCol=s=r.start.x,n!==e&&((a=this._findInLine(e,o,t,!1))||(o.startRow=i=r.end.y,o.startCol=s=r.end.x))),a||(a=this._findInLine(e,o,t,!0)),!a){o.startCol=Math.max(o.startCol,this._terminal.cols);for(var u=i-1;u>=0&&(o.startRow=u,!(a=this._findInLine(e,o,t,!0)));u--);}if(!a&&i!==this._terminal.buffer.active.baseY+this._terminal.rows-1)for(var l=this._terminal.buffer.active.baseY+this._terminal.rows-1;l>=i&&(o.startRow=l,!(a=this._findInLine(e,o,t,!0)));l--);return a}},{key:"_isWholeWord",value:function(e,t,n){return(0===e||" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?".includes(t[e-1]))&&(e+n.length===t.length||" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?".includes(t[e+n.length]))}},{key:"_findInLine",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.startRow,s=t.startCol;if(null==(d=this._terminal.buffer.active.getLine(i))?void 0:d.isWrapped){if(r){t.startCol+=this._terminal.cols;return}return t.startRow--,t.startCol+=this._terminal.cols,this._findInLine(e,t,n)}var a=this._lineCache.getLineFromCache(i);a||(a=this._lineCache.translateBufferLineToStringWithWrap(i,!0),this._lineCache.setLineInCache(i,a));var o=(0,_._)(a,2),u=o[0],l=o[1],c=this._bufferColsToStringOffset(i,s),h=e,f=u;n.regex||(h=n.caseSensitive?e:e.toLowerCase(),f=n.caseSensitive?u:u.toLowerCase());var v=-1;if(n.regex){var d,g,y=RegExp(h,n.caseSensitive?"g":"gi");if(r)for(;g=y.exec(f.slice(0,c));)v=y.lastIndex-g[0].length,e=g[0],y.lastIndex-=e.length-1;else(g=y.exec(f.slice(c)))&&g[0].length>0&&(v=c+(y.lastIndex-g[0].length),e=g[0])}else r?c-h.length>=0&&(v=f.lastIndexOf(h,c-h.length)):v=f.indexOf(h,c);if(v>=0){if(n.wholeWord&&!this._isWholeWord(v,f,e))return;for(var p=0;p<l.length-1&&v>=l[p+1];)p++;for(var m=p;m<l.length-1&&v+e.length>=l[m+1];)m++;var k=v-l[p],b=v+e.length-l[m],w=this._stringLengthToBufferSize(i+p,k),S=this._stringLengthToBufferSize(i+m,b)-w+this._terminal.cols*(m-p);return{term:e,col:w,row:i+p,size:S}}}},{key:"_stringLengthToBufferSize",value:function(e,t){var n=this._terminal.buffer.active.getLine(e);if(!n)return 0;for(var r=0;r<t;r++){var i=n.getCell(r);if(!i)break;var s=i.getChars();s.length>1&&(t-=s.length-1);var a=n.getCell(r+1);a&&0===a.getWidth()&&t++}return t}},{key:"_bufferColsToStringOffset",value:function(e,t){for(var n=e,r=0,i=this._terminal.buffer.active.getLine(n);t>0&&i;){for(var s=0;s<t&&s<this._terminal.cols;s++){var a=i.getCell(s);if(!a)break;a.getWidth()&&(r+=0===a.getCode()?1:a.getChars().length)}if(n++,(i=this._terminal.buffer.active.getLine(n))&&!i.isWrapped)break;t-=this._terminal.cols}return r}}]),e}(),eU=function(e){function t(e){var n;return(0,u._)(this,t),(n=(0,o._)(this,t))._terminal=e,n._highlightDecorations=[],n._highlightedLines=new Set,n._register(A(function(){return n.clearHighlightDecorations()})),n}return(0,h._)(t,e),(0,l._)(t,[{key:"createHighlightDecorations",value:function(e,t){this.clearHighlightDecorations();var n=!0,r=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var o=s.value,u=this._createResultDecorations(o,t,!1),l=!0,c=!1,h=void 0;if(u)try{for(var f,v=u[Symbol.iterator]();!(l=(f=v.next()).done);l=!0){var d=f.value;this._storeDecoration(d,o)}}catch(e){c=!0,h=e}finally{try{l||null==v.return||v.return()}finally{if(c)throw h}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}},{key:"createActiveDecoration",value:function(e,t){var n=this._createResultDecorations(e,t,!0);if(n)return{decorations:n,match:e,dispose:function(){O(n)}}}},{key:"clearHighlightDecorations",value:function(){O(this._highlightDecorations),this._highlightDecorations=[],this._highlightedLines.clear()}},{key:"_storeDecoration",value:function(e,t){this._highlightedLines.add(e.marker.line),this._highlightDecorations.push({decoration:e,match:t,dispose:function(){e.dispose()}})}},{key:"_applyStyles",value:function(e,t,n){e.classList.contains("xterm-find-result-decoration")||(e.classList.add("xterm-find-result-decoration"),t&&(e.style.outline="1px solid ".concat(t))),n&&e.classList.add("xterm-find-active-result-decoration")}},{key:"_createResultDecorations",value:function(e,t,n){for(var r=this,i=[],s=e.col,a=e.size,o=-this._terminal.buffer.active.baseY-this._terminal.buffer.active.cursorY+e.row;a>0;){var u=Math.min(this._terminal.cols-s,a);i.push([o,s,u]),s=0,a-=u,o++}var l=[],c=!0,h=!1,f=void 0;try{for(var v,d,_=i[Symbol.iterator]();!(c=(d=_.next()).done);c=!0)v=this,function(){var e=d.value,i=v._terminal.registerMarker(e[0]),s=v._terminal.registerDecoration({marker:i,x:e[1],width:e[2],backgroundColor:n?t.activeMatchBackground:t.matchBackground,overviewRulerOptions:v._highlightedLines.has(i.line)?void 0:{color:n?t.activeMatchColorOverviewRuler:t.matchOverviewRuler,position:"center"}});if(s){var a=[];a.push(i),a.push(s.onRender(function(e){return r._applyStyles(e,n?t.activeMatchBorder:t.matchBorder,!1)})),a.push(s.onDispose(function(){return O(a)})),l.push(s)}}()}catch(e){h=!0,f=e}finally{try{c||null==_.return||_.return()}finally{if(h)throw f}}return 0===l.length?void 0:l}}]),t}(W),eH=function(e){function t(){var e;return(0,u._)(this,t),e=(0,o._)(this,t,arguments),e._searchResults=[],e._onDidChangeResults=e._register(new eg),e}return(0,h._)(t,e),(0,l._)(t,[{key:"onDidChangeResults",get:function(){return this._onDidChangeResults.event}},{key:"searchResults",get:function(){return this._searchResults}},{key:"selectedDecoration",get:function(){return this._selectedDecoration},set:function(e){this._selectedDecoration=e}},{key:"updateResults",value:function(e,t){this._searchResults=e.slice(0,t)}},{key:"clearResults",value:function(){this._searchResults=[]}},{key:"clearSelectedDecoration",value:function(){this._selectedDecoration&&(this._selectedDecoration.dispose(),this._selectedDecoration=void 0)}},{key:"findResultIndex",value:function(e){for(var t=0;t<this._searchResults.length;t++){var n=this._searchResults[t];if(n.row===e.row&&n.col===e.col&&n.size===e.size)return t}return -1}},{key:"fireResultsChanged",value:function(e){if(e){var t=-1;this._selectedDecoration&&(t=this.findResultIndex(this._selectedDecoration.match)),this._onDidChangeResults.fire({resultIndex:t,resultCount:this._searchResults.length})}}},{key:"reset",value:function(){this.clearSelectedDecoration(),this.clearResults()}}]),t}(W),eq=function(e){function t(e){var n,r;return(0,u._)(this,t),(n=(0,o._)(this,t))._highlightTimeout=n._register(new I),n._lineCache=n._register(new I),n._state=new ej,n._resultTracker=n._register(new eH),n._highlightLimit=null!=(r=null==e?void 0:e.highlightLimit)?r:1e3,n}return(0,h._)(t,e),(0,l._)(t,[{key:"onDidChangeResults",get:function(){return this._resultTracker.onDidChangeResults}},{key:"activate",value:function(e){var t=this;this._terminal=e,this._lineCache.value=new ez(e),this._engine=new eF(e,this._lineCache.value),this._decorationManager=new eU(e),this._register(this._terminal.onWriteParsed(function(){return t._updateMatches()})),this._register(this._terminal.onResize(function(){return t._updateMatches()})),this._register(A(function(){return t.clearDecorations()}))}},{key:"_updateMatches",value:function(){var e,t=this;this._highlightTimeout.clear(),this._state.cachedSearchTerm&&(null==(e=this._state.lastSearchOptions)?void 0:e.decorations)&&(this._highlightTimeout.value=eI(function(){var e=t._state.cachedSearchTerm;t._state.clearCachedTerm(),t.findPrevious(e,(0,d._)((0,v._)({},t._state.lastSearchOptions),{incremental:!0}),{noScroll:!0})},200))}},{key:"clearDecorations",value:function(e){var t;this._resultTracker.clearSelectedDecoration(),null==(t=this._decorationManager)||t.clearHighlightDecorations(),this._resultTracker.clearResults(),e||this._state.clearCachedTerm()}},{key:"clearActiveDecoration",value:function(){this._resultTracker.clearSelectedDecoration()}},{key:"findNext",value:function(e,t,n){if(!this._terminal||!this._engine)throw Error("Cannot use addon until it has been loaded");this._state.lastSearchOptions=t,this._state.shouldUpdateHighlighting(e,t)&&this._highlightAllMatches(e,t);var r=this._findNextAndSelect(e,t,n);return this._fireResults(t),this._state.cachedSearchTerm=e,r}},{key:"_highlightAllMatches",value:function(e,t){if(!this._terminal||!this._engine||!this._decorationManager)throw Error("Cannot use addon until it has been loaded");if(!this._state.isValidSearchTerm(e))return void this.clearDecorations();this.clearDecorations(!0);for(var n,r=[],i=this._engine.find(e,0,0,t);i&&((null==n?void 0:n.row)!==i.row||(null==n?void 0:n.col)!==i.col)&&!(r.length>=this._highlightLimit);)n=i,r.push(n),i=this._engine.find(e,n.col+n.term.length>=this._terminal.cols?n.row+1:n.row,n.col+n.term.length>=this._terminal.cols?0:n.col+1,t);this._resultTracker.updateResults(r,this._highlightLimit),t.decorations&&this._decorationManager.createHighlightDecorations(r,t.decorations)}},{key:"_findNextAndSelect",value:function(e,t,n){if(!this._terminal||!this._engine)return!1;if(!this._state.isValidSearchTerm(e))return this._terminal.clearSelection(),this.clearDecorations(),!1;var r=this._engine.findNextWithSelection(e,t,this._state.cachedSearchTerm);return this._selectResult(r,null==t?void 0:t.decorations,null==n?void 0:n.noScroll)}},{key:"findPrevious",value:function(e,t,n){if(!this._terminal||!this._engine)throw Error("Cannot use addon until it has been loaded");this._state.lastSearchOptions=t,this._state.shouldUpdateHighlighting(e,t)&&this._highlightAllMatches(e,t);var r=this._findPreviousAndSelect(e,t,n);return this._fireResults(t),this._state.cachedSearchTerm=e,r}},{key:"_fireResults",value:function(e){this._resultTracker.fireResultsChanged(!!(null==e?void 0:e.decorations))}},{key:"_findPreviousAndSelect",value:function(e,t,n){if(!this._terminal||!this._engine)return!1;if(!this._state.isValidSearchTerm(e))return this._terminal.clearSelection(),this.clearDecorations(),!1;var r=this._engine.findPreviousWithSelection(e,t,this._state.cachedSearchTerm);return this._selectResult(r,null==t?void 0:t.decorations,null==n?void 0:n.noScroll)}},{key:"_selectResult",value:function(e,t,n){if(!this._terminal||!this._decorationManager)return!1;if(this._resultTracker.clearSelectedDecoration(),!e)return this._terminal.clearSelection(),!1;if(this._terminal.select(e.col,e.row,e.size),t){var r=this._decorationManager.createActiveDecoration(e,t);r&&(this._resultTracker.selectedDecoration=r)}if(!n&&(e.row>=this._terminal.buffer.active.viewportY+this._terminal.rows||e.row<this._terminal.buffer.active.viewportY)){var i=e.row-this._terminal.buffer.active.viewportY;i-=Math.floor(this._terminal.rows/2),this._terminal.scrollLines(i)}return!0}}]),t}(W);e.s(["SearchAddon",()=>eq])}]);

//# debugId=9a2eb9fe-fbb4-7c72-2bf7-ee24400fe3e0
//# sourceMappingURL=d56cef15566687a4.js.map